(function EKIIFE(){try{var y=function(A,Q,B,C){var I=arguments.length,E=I<3?Q:C===null?C=Object.getOwnPropertyDescriptor(Q,B):C,K;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")E=Reflect.decorate(A,Q,B,C);else for(var J=A.length-1;J>=0;J--)if(K=A[J])E=(I<3?K(E):I>3?K(Q,B,E):K(Q,B))||E;return I>3&&E&&Object.defineProperty(Q,B,E),E};var WB={syndication:{log:"https://events-endpoint-dev.pointandplace.com/syndication/events"},syndicationCoverage:{log:"https://events-endpoint-dev.pointandplace.com/syndication/coverage"}},R5={local:WB,dev:WB,stage:WB,prod:{syndication:{log:"https://events-endpoint.pointandplace.com/syndication/events"},syndicationCoverage:{log:"https://events-endpoint.pointandplace.com/syndication/coverage"}}};class UB{_environment;_queue=[];_batchTime;_initialBatchTime;_endpoint=null;_timerId;_firstEvent=!0;constructor(A,Q=2000,B=500){if(this._environment=A,this._batchTime=Q,this._initialBatchTime=B,this._environment==="local")this._endpoint=R5.local.syndication.log;else if(this._environment==="dev")this._endpoint=R5.dev.syndication.log;else if(this._environment==="stage")this._endpoint=R5.stage.syndication.log;else if(this._environment==="prod")this._endpoint=R5.prod.syndication.log;window.addEventListener("beforeunload",()=>this._flushEvents(!0))}sendEvent(A){this._queue.push(A),this._startBatchTimer()}_startBatchTimer(){const A=this._firstEvent?this._initialBatchTime:this._batchTime;if(!this._timerId)this._timerId=setTimeout(()=>this._flushEvents(),A);if(this._firstEvent)this._firstEvent=!1}_flushEvents(A=!1){if(this._queue.length>0&&this._endpoint!==null){const Q=JSON.stringify(this._queue);if(navigator.sendBeacon||A)navigator.sendBeacon(this._endpoint,Q);else fetch(this._endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:Q,keepalive:!0});if(this._queue=[],this._timerId)clearTimeout(this._timerId),this._timerId=void 0}}}var $7=(A)=>{const Q=new URL(A);if(Q.hostname==="localhost"||Q.hostname==="127.0.0.1")Q.hostname="eyekandynexuslocal.com";else Q.hostname=Q.hostname.replace(/^www\./,"");return Q.toString()};var eK=()=>{if(typeof window==="undefined"||typeof navigator==="undefined")return"server";let A="desktop";const Q=navigator.userAgent||navigator.vendor||window.opera;if(/android/i.test(Q))A="mobile";else if(/iPad|iPhone|iPod/.test(Q)&&!window.MSStream)A="mobile";else if(/Windows Phone/.test(Q))A="mobile";if(window.innerWidth<=768)A="mobile";else A="desktop";return A};class DB{trackingUrl;deploymentID;queue;queueProcessInterval;userIdentifierFunction;sessionIdentifierFunction;locationFunction;identifierFunction;enabled=!1;maxEventQueueSize=20;environment=eK();constructor(A,Q,B,C,I,E=!0,K=5000,J=20,q=!1){if(this.trackingUrl="https://observe-nexus.pointandplace.com",this.maxEventQueueSize=J,this.deploymentID=A,this.enabled=q,this.queue=[],E===!0)setTimeout(()=>{this.processQueue()},1000),setTimeout(()=>{this.processQueue()},2500);if(typeof window!=="undefined")this.queueProcessInterval=window.setInterval(()=>this.processQueue(),K);else this.queueProcessInterval=setInterval(()=>this.processQueue(),K);if(this.userIdentifierFunction=Q,this.sessionIdentifierFunction=B,this.identifierFunction=I,this.locationFunction=C,typeof window!=="undefined")window.addEventListener("beforeunload",()=>this.processQueue())}enable(){this.enabled=!0}disable(){this.enabled=!1}triggerEventJSDeployed(){this.triggerEventGeneral({type:"page-js-deployed"}),this.processQueue()}triggerEventPageView(A,Q={}){this.triggerEventGeneral({type:"pageview",params:A},Q)}triggerUIEvent(A,Q={}){this.triggerEventGeneral({type:"ui-event",params:A},Q)}triggerAddToCart(A,Q={}){this.triggerEventGeneral({type:"add-to-cart",params:A},Q,!0)}triggerEventGeneral(A,Q={},B=!1){const C={identifier:this._getIdentifier()??"",location:this._getLocation()??"",agentID:this.userIdentifierFunction()??"",sessionID:this.sessionIdentifierFunction()??"",deploymentID:this.deploymentID,environment:this.environment,...Q,...A};if(this.queue.push(C),this.queue.length>=this.maxEventQueueSize)this.processQueue();if(B===!0)this.processQueue()}processQueue(){if(this.queue.length>0)this.executeBatchNetworkRequest()}async executeBatchNetworkRequest(){const A=JSON.stringify(this.queue);if(this.queue=[],this.enabled===!1)return;try{if(navigator&&navigator.sendBeacon)navigator.sendBeacon(this.trackingUrl,A);else await fetch(this.trackingUrl,{headers:{"content-type":"application/json"},method:"POST",body:A})}catch(Q){console.error("Error logging batch",Q)}}_getIdentifier(){if(this.identifierFunction)return this.identifierFunction();if(document)return document.title;return""}_getLocation(){if(this.locationFunction)return this.locationFunction();if(typeof window!=="undefined")return $7(window.location.href);return""}dispose(){clearInterval(this.queueProcessInterval)}}var kU=()=>{return new URLSearchParams(window.location.search).has("EK_DEBUG")},yA=(A,...Q)=>{if(A==="e")console.error("EK:",...Q);else if(kU())console.log("EK:",...Q)};var _7=globalThis,P7=_7.ShadowRoot&&(_7.ShadyCSS===void 0||_7.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,RB=Symbol(),AJ=new WeakMap;class S7{constructor(A,Q,B){if(this._$cssResult$=!0,B!==RB)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=A,this.t=Q}get styleSheet(){let A=this.o;const Q=this.t;if(P7&&A===void 0){const B=Q!==void 0&&Q.length===1;B&&(A=AJ.get(Q)),A===void 0&&((this.o=A=new CSSStyleSheet).replaceSync(this.cssText),B&&AJ.set(Q,A))}return A}toString(){return this.cssText}}var T7=(A)=>new S7(typeof A=="string"?A:A+"",void 0,RB),Q0=(A,...Q)=>{const B=A.length===1?A[0]:Q.reduce((C,I,E)=>C+((K)=>{if(K._$cssResult$===!0)return K.cssText;if(typeof K=="number")return K;throw Error("Value passed to 'css' function must be a 'css' function result: "+K+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(I)+A[E+1],A[0]);return new S7(B,A,RB)},VB=(A,Q)=>{if(P7)A.adoptedStyleSheets=Q.map((B)=>B instanceof CSSStyleSheet?B:B.styleSheet);else for(let B of Q){const C=document.createElement("style"),I=_7.litNonce;I!==void 0&&C.setAttribute("nonce",I),C.textContent=B.cssText,A.appendChild(C)}},j7=P7?(A)=>A:(A)=>A instanceof CSSStyleSheet?((Q)=>{let B="";for(let C of Q.cssRules)B+=C.cssText;return T7(B)})(A):A;var{is:MU,defineProperty:$U,getOwnPropertyDescriptor:_U,getOwnPropertyNames:PU,getOwnPropertySymbols:SU,getPrototypeOf:TU}=Object,g7=globalThis,QJ=g7.trustedTypes,jU=QJ?QJ.emptyScript:"",gU=g7.reactiveElementPolyfillSupport,V5=(A,Q)=>A,N5={toAttribute(A,Q){switch(Q){case Boolean:A=A?jU:null;break;case Object:case Array:A=A==null?A:JSON.stringify(A)}return A},fromAttribute(A,Q){let B=A;switch(Q){case Boolean:B=A!==null;break;case Number:B=A===null?null:Number(A);break;case Object:case Array:try{B=JSON.parse(A)}catch(C){B=null}}return B}},y7=(A,Q)=>!MU(A,Q),BJ={attribute:!0,type:String,converter:N5,reflect:!1,hasChanged:y7};Symbol.metadata??=Symbol("metadata"),g7.litPropertyMetadata??=new WeakMap;class M4 extends HTMLElement{static addInitializer(A){this._$Ei(),(this.l??=[]).push(A)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(A,Q=BJ){if(Q.state&&(Q.attribute=!1),this._$Ei(),this.elementProperties.set(A,Q),!Q.noAccessor){const B=Symbol(),C=this.getPropertyDescriptor(A,B,Q);C!==void 0&&$U(this.prototype,A,C)}}static getPropertyDescriptor(A,Q,B){const{get:C,set:I}=_U(this.prototype,A)??{get(){return this[Q]},set(E){this[Q]=E}};return{get(){return C?.call(this)},set(E){const K=C?.call(this);I.call(this,E),this.requestUpdate(A,K,B)},configurable:!0,enumerable:!0}}static getPropertyOptions(A){return this.elementProperties.get(A)??BJ}static _$Ei(){if(this.hasOwnProperty(V5("elementProperties")))return;const A=TU(this);A.finalize(),A.l!==void 0&&(this.l=[...A.l]),this.elementProperties=new Map(A.elementProperties)}static finalize(){if(this.hasOwnProperty(V5("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(V5("properties"))){const Q=this.properties,B=[...PU(Q),...SU(Q)];for(let C of B)this.createProperty(C,Q[C])}const A=this[Symbol.metadata];if(A!==null){const Q=litPropertyMetadata.get(A);if(Q!==void 0)for(let[B,C]of Q)this.elementProperties.set(B,C)}this._$Eh=new Map;for(let[Q,B]of this.elementProperties){const C=this._$Eu(Q,B);C!==void 0&&this._$Eh.set(C,Q)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(A){const Q=[];if(Array.isArray(A)){const B=new Set(A.flat(Infinity).reverse());for(let C of B)Q.unshift(j7(C))}else A!==void 0&&Q.push(j7(A));return Q}static _$Eu(A,Q){const B=Q.attribute;return B===!1?void 0:typeof B=="string"?B:typeof A=="string"?A.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((A)=>this.enableUpdating=A),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((A)=>A(this))}addController(A){(this._$EO??=new Set).add(A),this.renderRoot!==void 0&&this.isConnected&&A.hostConnected?.()}removeController(A){this._$EO?.delete(A)}_$E_(){const A=new Map,Q=this.constructor.elementProperties;for(let B of Q.keys())this.hasOwnProperty(B)&&(A.set(B,this[B]),delete this[B]);A.size>0&&(this._$Ep=A)}createRenderRoot(){const A=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return VB(A,this.constructor.elementStyles),A}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((A)=>A.hostConnected?.())}enableUpdating(A){}disconnectedCallback(){this._$EO?.forEach((A)=>A.hostDisconnected?.())}attributeChangedCallback(A,Q,B){this._$AK(A,B)}_$EC(A,Q){const B=this.constructor.elementProperties.get(A),C=this.constructor._$Eu(A,B);if(C!==void 0&&B.reflect===!0){const I=(B.converter?.toAttribute!==void 0?B.converter:N5).toAttribute(Q,B.type);this._$Em=A,I==null?this.removeAttribute(C):this.setAttribute(C,I),this._$Em=null}}_$AK(A,Q){const B=this.constructor,C=B._$Eh.get(A);if(C!==void 0&&this._$Em!==C){const I=B.getPropertyOptions(C),E=typeof I.converter=="function"?{fromAttribute:I.converter}:I.converter?.fromAttribute!==void 0?I.converter:N5;this._$Em=C,this[C]=E.fromAttribute(Q,I.type),this._$Em=null}}requestUpdate(A,Q,B){if(A!==void 0){if(B??=this.constructor.getPropertyOptions(A),!(B.hasChanged??y7)(this[A],Q))return;this.P(A,Q,B)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(A,Q,B){this._$AL.has(A)||this._$AL.set(A,Q),B.reflect===!0&&this._$Em!==A&&(this._$Ej??=new Set).add(A)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(Q){Promise.reject(Q)}const A=this.scheduleUpdate();return A!=null&&await A,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(let[C,I]of this._$Ep)this[C]=I;this._$Ep=void 0}const B=this.constructor.elementProperties;if(B.size>0)for(let[C,I]of B)I.wrapped!==!0||this._$AL.has(C)||this[C]===void 0||this.P(C,this[C],I)}let A=!1;const Q=this._$AL;try{A=this.shouldUpdate(Q),A?(this.willUpdate(Q),this._$EO?.forEach((B)=>B.hostUpdate?.()),this.update(Q)):this._$EU()}catch(B){throw A=!1,this._$EU(),B}A&&this._$AE(Q)}willUpdate(A){}_$AE(A){this._$EO?.forEach((Q)=>Q.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(A)),this.updated(A)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(A){return!0}update(A){this._$Ej&&=this._$Ej.forEach((Q)=>this._$EC(Q,this[Q])),this._$EU()}updated(A){}firstUpdated(A){}}M4.elementStyles=[],M4.shadowRootOptions={mode:"open"},M4[V5("elementProperties")]=new Map,M4[V5("finalized")]=new Map,gU?.({ReactiveElement:M4}),(g7.reactiveElementVersions??=[]).push("2.0.4");var XJ=function(A,Q){if(!Array.isArray(A)||!A.hasOwnProperty("raw"))throw Error("invalid template strings array");return CJ!==void 0?CJ.createHTML(Q):Q},s6=function(A,Q,B=A,C){if(Q===Y2)return Q;let I=C!==void 0?B._$Co?.[C]:B._$Cl;const E=L5(Q)?void 0:Q._$litDirective$;return I?.constructor!==E&&(I?._$AO?.(!1),E===void 0?I=void 0:(I=new E(A),I._$AT(A,B,C)),C!==void 0?(B._$Co??=[])[C]=I:B._$Cl=I),I!==void 0&&(Q=s6(A,I._$AS(A,Q.values),I,C)),Q},NB=globalThis,x7=NB.trustedTypes,CJ=x7?x7.createPolicy("lit-html",{createHTML:(A)=>A}):void 0;var $4=`lit\$${Math.random().toFixed(9).slice(2)}\$`,GJ="?"+$4,yU=`<${GJ}>`,B6=document,O5=()=>B6.createComment(""),L5=(A)=>A===null||typeof A!="object"&&typeof A!="function",YJ=Array.isArray,xU=(A)=>YJ(A)||typeof A?.[Symbol.iterator]=="function";var w5=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,IJ=/-->/g,EJ=/>/g,A6=RegExp(`>|[ \t\n\f\r](?:([^\\s"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|\$)`,"g"),KJ=/'/g,JJ=/"/g,HJ=/^(?:script|style|textarea|title)$/i,ZJ=(A)=>(Q,...B)=>({_$litType$:A,strings:Q,values:B}),d=ZJ(1),vM=ZJ(2),Y2=Symbol.for("lit-noChange"),L0=Symbol.for("lit-nothing"),qJ=new WeakMap,Q6=B6.createTreeWalker(B6,129),hU=(A,Q)=>{const B=A.length-1,C=[];let I,E=Q===2?"<svg>":"",K=w5;for(let J=0;J<B;J++){const q=A[J];let G,Y,H=-1,Z=0;for(;Z<q.length&&(K.lastIndex=Z,Y=K.exec(q),Y!==null);)Z=K.lastIndex,K===w5?Y[1]==="!--"?K=IJ:Y[1]!==void 0?K=EJ:Y[2]!==void 0?(HJ.test(Y[2])&&(I=RegExp("</"+Y[2],"g")),K=A6):Y[3]!==void 0&&(K=A6):K===A6?Y[0]===">"?(K=I??w5,H=-1):Y[1]===void 0?H=-2:(H=K.lastIndex-Y[2].length,G=Y[1],K=Y[3]===void 0?A6:Y[3]==='"'?JJ:KJ):K===JJ||K===KJ?K=A6:K===IJ||K===EJ?K=w5:(K=A6,I=void 0);const X=K===A6&&A[J+1].startsWith("/>")?" ":"";E+=K===w5?q+yU:H>=0?(C.push(G),q.slice(0,H)+"$lit$"+q.slice(H)+$4+X):q+$4+(H===-2?J:X)}return[XJ(A,E+(A[B]||"<?>")+(Q===2?"</svg>":"")),C]};class z5{constructor({strings:A,_$litType$:Q},B){let C;this.parts=[];let I=0,E=0;const K=A.length-1,J=this.parts,[q,G]=hU(A,Q);if(this.el=z5.createElement(q,B),Q6.currentNode=this.el.content,Q===2){const Y=this.el.content.firstChild;Y.replaceWith(...Y.childNodes)}for(;(C=Q6.nextNode())!==null&&J.length<K;){if(C.nodeType===1){if(C.hasAttributes())for(let Y of C.getAttributeNames())if(Y.endsWith("$lit$")){const H=G[E++],Z=C.getAttribute(Y).split($4),X=/([.?@])?(.*)/.exec(H);J.push({type:1,index:I,name:X[2],strings:Z,ctor:X[1]==="."?WJ:X[1]==="?"?UJ:X[1]==="@"?DJ:M5}),C.removeAttribute(Y)}else Y.startsWith($4)&&(J.push({type:6,index:I}),C.removeAttribute(Y));if(HJ.test(C.tagName)){const Y=C.textContent.split($4),H=Y.length-1;if(H>0){C.textContent=x7?x7.emptyScript:"";for(let Z=0;Z<H;Z++)C.append(Y[Z],O5()),Q6.nextNode(),J.push({type:2,index:++I});C.append(Y[H],O5())}}}else if(C.nodeType===8)if(C.data===GJ)J.push({type:2,index:I});else{let Y=-1;for(;(Y=C.data.indexOf($4,Y+1))!==-1;)J.push({type:7,index:I}),Y+=$4.length-1}I++}}static createElement(A,Q){const B=B6.createElement("template");return B.innerHTML=A,B}}class FJ{constructor(A,Q){this._$AV=[],this._$AN=void 0,this._$AD=A,this._$AM=Q}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(A){const{el:{content:Q},parts:B}=this._$AD,C=(A?.creationScope??B6).importNode(Q,!0);Q6.currentNode=C;let I=Q6.nextNode(),E=0,K=0,J=B[0];for(;J!==void 0;){if(E===J.index){let q;J.type===2?q=new k5(I,I.nextSibling,this,A):J.type===1?q=new J.ctor(I,J.name,J.strings,this,A):J.type===6&&(q=new RJ(I,this,A)),this._$AV.push(q),J=B[++K]}E!==J?.index&&(I=Q6.nextNode(),E++)}return Q6.currentNode=B6,C}p(A){let Q=0;for(let B of this._$AV)B!==void 0&&(B.strings!==void 0?(B._$AI(A,B,Q),Q+=B.strings.length-2):B._$AI(A[Q])),Q++}}class k5{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(A,Q,B,C){this.type=2,this._$AH=L0,this._$AN=void 0,this._$AA=A,this._$AB=Q,this._$AM=B,this.options=C,this._$Cv=C?.isConnected??!0}get parentNode(){let A=this._$AA.parentNode;const Q=this._$AM;return Q!==void 0&&A?.nodeType===11&&(A=Q.parentNode),A}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(A,Q=this){A=s6(this,A,Q),L5(A)?A===L0||A==null||A===""?(this._$AH!==L0&&this._$AR(),this._$AH=L0):A!==this._$AH&&A!==Y2&&this._(A):A._$litType$!==void 0?this.$(A):A.nodeType!==void 0?this.T(A):xU(A)?this.k(A):this._(A)}S(A){return this._$AA.parentNode.insertBefore(A,this._$AB)}T(A){this._$AH!==A&&(this._$AR(),this._$AH=this.S(A))}_(A){this._$AH!==L0&&L5(this._$AH)?this._$AA.nextSibling.data=A:this.T(B6.createTextNode(A)),this._$AH=A}$(A){const{values:Q,_$litType$:B}=A,C=typeof B=="number"?this._$AC(A):(B.el===void 0&&(B.el=z5.createElement(XJ(B.h,B.h[0]),this.options)),B);if(this._$AH?._$AD===C)this._$AH.p(Q);else{const I=new FJ(C,this),E=I.u(this.options);I.p(Q),this.T(E),this._$AH=I}}_$AC(A){let Q=qJ.get(A.strings);return Q===void 0&&qJ.set(A.strings,Q=new z5(A)),Q}k(A){YJ(this._$AH)||(this._$AH=[],this._$AR());const Q=this._$AH;let B,C=0;for(let I of A)C===Q.length?Q.push(B=new k5(this.S(O5()),this.S(O5()),this,this.options)):B=Q[C],B._$AI(I),C++;C<Q.length&&(this._$AR(B&&B._$AB.nextSibling,C),Q.length=C)}_$AR(A=this._$AA.nextSibling,Q){for(this._$AP?.(!1,!0,Q);A&&A!==this._$AB;){const B=A.nextSibling;A.remove(),A=B}}setConnected(A){this._$AM===void 0&&(this._$Cv=A,this._$AP?.(A))}}class M5{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(A,Q,B,C,I){this.type=1,this._$AH=L0,this._$AN=void 0,this.element=A,this.name=Q,this._$AM=C,this.options=I,B.length>2||B[0]!==""||B[1]!==""?(this._$AH=Array(B.length-1).fill(new String),this.strings=B):this._$AH=L0}_$AI(A,Q=this,B,C){const I=this.strings;let E=!1;if(I===void 0)A=s6(this,A,Q,0),E=!L5(A)||A!==this._$AH&&A!==Y2,E&&(this._$AH=A);else{const K=A;let J,q;for(A=I[0],J=0;J<I.length-1;J++)q=s6(this,K[B+J],Q,J),q===Y2&&(q=this._$AH[J]),E||=!L5(q)||q!==this._$AH[J],q===L0?A=L0:A!==L0&&(A+=(q??"")+I[J+1]),this._$AH[J]=q}E&&!C&&this.j(A)}j(A){A===L0?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,A??"")}}class WJ extends M5{constructor(){super(...arguments),this.type=3}j(A){this.element[this.name]=A===L0?void 0:A}}class UJ extends M5{constructor(){super(...arguments),this.type=4}j(A){this.element.toggleAttribute(this.name,!!A&&A!==L0)}}class DJ extends M5{constructor(A,Q,B,C,I){super(A,Q,B,C,I),this.type=5}_$AI(A,Q=this){if((A=s6(this,A,Q,0)??L0)===Y2)return;const B=this._$AH,C=A===L0&&B!==L0||A.capture!==B.capture||A.once!==B.once||A.passive!==B.passive,I=A!==L0&&(B===L0||C);C&&this.element.removeEventListener(this.name,this,B),I&&this.element.addEventListener(this.name,this,A),this._$AH=A}handleEvent(A){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,A):this._$AH.handleEvent(A)}}class RJ{constructor(A,Q,B){this.element=A,this.type=6,this._$AN=void 0,this._$AM=Q,this.options=B}get _$AU(){return this._$AM._$AU}_$AI(A){s6(this,A)}}var vU=NB.litHtmlPolyfillSupport;vU?.(z5,k5),(NB.litHtmlVersions??=[]).push("3.1.4");var VJ=(A,Q,B)=>{const C=B?.renderBefore??Q;let I=C._$litPart$;if(I===void 0){const E=B?.renderBefore??null;C._$litPart$=I=new k5(Q.insertBefore(O5(),E),E,void 0,B??{})}return I._$AI(A),I};class _1 extends M4{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const A=super.createRenderRoot();return this.renderOptions.renderBefore??=A.firstChild,A}update(A){const Q=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(A),this._$Do=VJ(Q,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Y2}}_1._$litElement$=!0,_1["finalized"]=!0,globalThis.litElementHydrateSupport?.({LitElement:_1});var fU=globalThis.litElementPolyfillSupport;fU?.({LitElement:_1});(globalThis.litElementVersions??=[]).push("4.0.6");var sA=(A)=>(Q,B)=>{B!==void 0?B.addInitializer(()=>{customElements.define(A,Q)}):customElements.define(A,Q)};var FA=function(A){return(Q,B)=>typeof B=="object"?pU(A,Q,B):((C,I,E)=>{const K=I.hasOwnProperty(E);return I.constructor.createProperty(E,K?{...C,wrapped:!0}:C),K?Object.getOwnPropertyDescriptor(I,E):void 0})(A,Q,B)},bU={attribute:!0,type:String,converter:N5,reflect:!1,hasChanged:y7},pU=(A=bU,Q,B)=>{const{kind:C,metadata:I}=B;let E=globalThis.litPropertyMetadata.get(I);if(E===void 0&&globalThis.litPropertyMetadata.set(I,E=new Map),E.set(B.name,A),C==="accessor"){const{name:K}=B;return{set(J){const q=Q.get.call(this);Q.set.call(this,J),this.requestUpdate(K,q,A)},init(J){return J!==void 0&&this.P(K,void 0,A),J}}}if(C==="setter"){const{name:K}=B;return function(J){const q=this[K];Q.call(this,J),this.requestUpdate(K,q,A)}}throw Error("Unsupported decorator location: "+C)};var KA=function(A){return FA({...A,state:!0,attribute:!1})};var _4=(A,Q,B)=>(B.configurable=!0,B.enumerable=!0,Reflect.decorate&&typeof Q!="object"&&Object.defineProperty(A,Q,B),B);var _0=function(A,Q){return(B,C,I)=>{const E=(K)=>K.renderRoot?.querySelector(A)??null;if(Q){const{get:K,set:J}=typeof C=="object"?B:I??(()=>{const q=Symbol();return{get(){return this[q]},set(G){this[q]=G}}})();return _4(B,C,{get(){let q=K.call(this);return q===void 0&&(q=E(this),(q!==null||this.hasUpdated)&&J.call(this,q)),q}})}return _4(B,C,{get(){return E(this)}})}};var NJ=function(A){return(Q,B)=>_4(Q,B,{get(){return(this.renderRoot??(uU??=document.createDocumentFragment())).querySelectorAll(A)}})},uU;var wJ=(A,Q,B)=>{if(B.position==="before")A.before(Q);else A.after(Q)};var OJ=(A,Q,B)=>{if(B.position==="first")A.prepend(Q);else if(B.position==="last")A.appendChild(Q);else if(B.position==="nth")if(B.nthOptions&&typeof B.nthOptions.index==="number"){const C=B.nthOptions.index;if(C>=0)if(A.children.length>C)A.insertBefore(Q,A.children[C]);else A.appendChild(Q);else yA("e","Invalid 'nth' value for ChildPlacement")}else yA("e","missing value for placement.nthOptions.index");else yA("e","Invalid position value for ChildPlacement")};var LB=function(A,Q,B){return a2(A,n6(Q,B))},t2=function(A,Q){return typeof A==="function"?A(Q):A},H2=function(A){return A.split("-")[0]},S2=function(A){return A.split("-")[1]},h7=function(A){return A==="x"?"y":"x"},zB=function(A){return A==="y"?"height":"width"},o6=function(A){return["top","bottom"].includes(H2(A))?"y":"x"},kB=function(A){return h7(o6(A))},MB=function(A,Q,B){if(B===void 0)B=!1;const C=S2(A),I=kB(A),E=zB(I);let K=I==="x"?C===(B?"end":"start")?"right":"left":C==="start"?"bottom":"top";if(Q.reference[E]>Q.floating[E])K=_5(K);return[K,_5(K)]},zJ=function(A){const Q=_5(A);return[$5(A),Q,$5(Q)]},$5=function(A){return A.replace(/start|end/g,(Q)=>dU[Q])},cU=function(A,Q,B){const C=["left","right"],I=["right","left"],E=["top","bottom"],K=["bottom","top"];switch(A){case"top":case"bottom":if(B)return Q?I:C;return Q?C:I;case"left":case"right":return Q?E:K;default:return[]}},kJ=function(A,Q,B,C){const I=S2(A);let E=cU(H2(A),B==="start",C);if(I){if(E=E.map((K)=>K+"-"+I),Q)E=E.concat(E.map($5))}return E},_5=function(A){return A.replace(/left|right|bottom|top/g,(Q)=>mU[Q])},lU=function(A){return{top:0,right:0,bottom:0,left:0,...A}},MJ=function(A){return typeof A!=="number"?lU(A):{top:A,right:A,bottom:A,left:A}},C6=function(A){const{x:Q,y:B,width:C,height:I}=A;return{width:C,height:I,top:B,left:Q,right:Q+C,bottom:B+I,x:Q,y:B}},wB=["top","right","bottom","left"],LJ=["start","end"],OB=wB.reduce((A,Q)=>A.concat(Q,Q+"-"+LJ[0],Q+"-"+LJ[1]),[]),n6=Math.min,a2=Math.max,P5=Math.round,S5=Math.floor,r2=(A)=>({x:A,y:A}),mU={left:"right",right:"left",bottom:"top",top:"bottom"},dU={start:"end",end:"start"};var $J=function(A,Q,B){let{reference:C,floating:I}=A;const E=o6(Q),K=kB(Q),J=zB(K),q=H2(Q),G=E==="y",Y=C.x+C.width/2-I.width/2,H=C.y+C.height/2-I.height/2,Z=C[J]/2-I[J]/2;let X;switch(q){case"top":X={x:Y,y:C.y-I.height};break;case"bottom":X={x:Y,y:C.y+C.height};break;case"right":X={x:C.x+C.width,y:H};break;case"left":X={x:C.x-I.width,y:H};break;default:X={x:C.x,y:C.y}}switch(S2(Q)){case"start":X[K]-=Z*(B&&G?-1:1);break;case"end":X[K]+=Z*(B&&G?-1:1);break}return X};async function i6(A,Q){var B;if(Q===void 0)Q={};const{x:C,y:I,platform:E,rects:K,elements:J,strategy:q}=A,{boundary:G="clippingAncestors",rootBoundary:Y="viewport",elementContext:H="floating",altBoundary:Z=!1,padding:X=0}=t2(Q,A),U=MJ(X),W=J[Z?H==="floating"?"reference":"floating":H],D=C6(await E.getClippingRect({element:((B=await(E.isElement==null?void 0:E.isElement(W)))!=null?B:!0)?W:W.contextElement||await(E.getDocumentElement==null?void 0:E.getDocumentElement(J.floating)),boundary:G,rootBoundary:Y,strategy:q})),V=H==="floating"?{x:C,y:I,width:K.floating.width,height:K.floating.height}:K.reference,R=await(E.getOffsetParent==null?void 0:E.getOffsetParent(J.floating)),O=await(E.isElement==null?void 0:E.isElement(R))?await(E.getScale==null?void 0:E.getScale(R))||{x:1,y:1}:{x:1,y:1},z=C6(E.convertOffsetParentRelativeRectToViewportRelativeRect?await E.convertOffsetParentRelativeRectToViewportRelativeRect({elements:J,rect:V,offsetParent:R,strategy:q}):V);return{top:(D.top-z.top+U.top)/O.y,bottom:(z.bottom-D.bottom+U.bottom)/O.y,left:(D.left-z.left+U.left)/O.x,right:(z.right-D.right+U.right)/O.x}}var sU=function(A,Q,B){return(A?[...B.filter((I)=>S2(I)===A),...B.filter((I)=>S2(I)!==A)]:B.filter((I)=>H2(I)===I)).filter((I)=>{if(A)return S2(I)===A||(Q?$5(I)!==I:!1);return!0})},_J=function(A,Q){return{top:A.top-Q.height,right:A.right-Q.width,bottom:A.bottom-Q.height,left:A.left-Q.width}},PJ=function(A){return wB.some((Q)=>A[Q]>=0)};async function nU(A,Q){const{placement:B,platform:C,elements:I}=A,E=await(C.isRTL==null?void 0:C.isRTL(I.floating)),K=H2(B),J=S2(B),q=o6(B)==="y",G=["left","top"].includes(K)?-1:1,Y=E&&q?-1:1,H=t2(Q,A);let{mainAxis:Z,crossAxis:X,alignmentAxis:U}=typeof H==="number"?{mainAxis:H,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...H};if(J&&typeof U==="number")X=J==="end"?U*-1:U;return q?{x:X*Y,y:Z*G}:{x:Z*G,y:X*Y}}var SJ=async(A,Q,B)=>{const{placement:C="bottom",strategy:I="absolute",middleware:E=[],platform:K}=B,J=E.filter(Boolean),q=await(K.isRTL==null?void 0:K.isRTL(Q));let G=await K.getElementRects({reference:A,floating:Q,strategy:I}),{x:Y,y:H}=$J(G,C,q),Z=C,X={},U=0;for(let F=0;F<J.length;F++){const{name:W,fn:D}=J[F],{x:V,y:R,data:O,reset:z}=await D({x:Y,y:H,initialPlacement:C,placement:Z,strategy:I,middlewareData:X,rects:G,platform:K,elements:{reference:A,floating:Q}});if(Y=V!=null?V:Y,H=R!=null?R:H,X={...X,[W]:{...X[W],...O}},z&&U<=50){if(U++,typeof z==="object"){if(z.placement)Z=z.placement;if(z.rects)G=z.rects===!0?await K.getElementRects({reference:A,floating:Q,strategy:I}):z.rects;({x:Y,y:H}=$J(G,Z,q))}F=-1}}return{x:Y,y:H,placement:Z,strategy:I,middlewareData:X}};var TJ=function(A){if(A===void 0)A={};return{name:"autoPlacement",options:A,async fn(Q){var B,C,I;const{rects:E,middlewareData:K,placement:J,platform:q,elements:G}=Q,{crossAxis:Y=!1,alignment:H,allowedPlacements:Z=OB,autoAlignment:X=!0,...U}=t2(A,Q),F=H!==void 0||Z===OB?sU(H||null,X,Z):Z,W=await i6(Q,U),D=((B=K.autoPlacement)==null?void 0:B.index)||0,V=F[D];if(V==null)return{};const R=MB(V,E,await(q.isRTL==null?void 0:q.isRTL(G.floating)));if(J!==V)return{reset:{placement:F[0]}};const O=[W[H2(V)],W[R[0]],W[R[1]]],z=[...((C=K.autoPlacement)==null?void 0:C.overflows)||[],{placement:V,overflows:O}],w=F[D+1];if(w)return{data:{index:D+1,overflows:z},reset:{placement:w}};const k=z.map((N)=>{const $=S2(N.placement);return[N.placement,$&&Y?N.overflows.slice(0,2).reduce((p,n)=>p+n,0):N.overflows[0],N.overflows]}).sort((N,$)=>N[1]-$[1]),h=((I=k.filter((N)=>N[2].slice(0,S2(N[0])?2:3).every(($)=>$<=0))[0])==null?void 0:I[0])||k[0][0];if(h!==J)return{data:{index:D+1,overflows:z},reset:{placement:h}};return{}}}},jJ=function(A){if(A===void 0)A={};return{name:"flip",options:A,async fn(Q){var B,C;const{placement:I,middlewareData:E,rects:K,initialPlacement:J,platform:q,elements:G}=Q,{mainAxis:Y=!0,crossAxis:H=!0,fallbackPlacements:Z,fallbackStrategy:X="bestFit",fallbackAxisSideDirection:U="none",flipAlignment:F=!0,...W}=t2(A,Q);if((B=E.arrow)!=null&&B.alignmentOffset)return{};const D=H2(I),V=H2(J)===J,R=await(q.isRTL==null?void 0:q.isRTL(G.floating)),O=Z||(V||!F?[_5(J)]:zJ(J));if(!Z&&U!=="none")O.push(...kJ(J,F,U,R));const z=[J,...O],w=await i6(Q,W),k=[];let j=((C=E.flip)==null?void 0:C.overflows)||[];if(Y)k.push(w[D]);if(H){const p=MB(I,K,R);k.push(w[p[0]],w[p[1]])}if(j=[...j,{placement:I,overflows:k}],!k.every((p)=>p<=0)){var h,N;const p=(((h=E.flip)==null?void 0:h.index)||0)+1,n=z[p];if(n)return{data:{index:p,overflows:j},reset:{placement:n}};let S=(N=j.filter((v)=>v.overflows[0]<=0).sort((v,f)=>v.overflows[1]-f.overflows[1])[0])==null?void 0:N.placement;if(!S)switch(X){case"bestFit":{var $;const v=($=j.map((f)=>[f.placement,f.overflows.filter((m)=>m>0).reduce((m,b)=>m+b,0)]).sort((f,m)=>f[1]-m[1])[0])==null?void 0:$[0];if(v)S=v;break}case"initialPlacement":S=J;break}if(I!==S)return{reset:{placement:S}}}return{}}}},gJ=function(A){if(A===void 0)A={};return{name:"hide",options:A,async fn(Q){const{rects:B}=Q,{strategy:C="referenceHidden",...I}=t2(A,Q);switch(C){case"referenceHidden":{const E=await i6(Q,{...I,elementContext:"reference"}),K=_J(E,B.reference);return{data:{referenceHiddenOffsets:K,referenceHidden:PJ(K)}}}case"escaped":{const E=await i6(Q,{...I,altBoundary:!0}),K=_J(E,B.floating);return{data:{escapedOffsets:K,escaped:PJ(K)}}}default:return{}}}}};var e1=function(A){if(A===void 0)A=0;return{name:"offset",options:A,async fn(Q){var B,C;const{x:I,y:E,placement:K,middlewareData:J}=Q,q=await nU(Q,A);if(K===((B=J.offset)==null?void 0:B.placement)&&(C=J.arrow)!=null&&C.alignmentOffset)return{};return{x:I+q.x,y:E+q.y,data:{...q,placement:K}}}}},yJ=function(A){if(A===void 0)A={};return{name:"shift",options:A,async fn(Q){const{x:B,y:C,placement:I}=Q,{mainAxis:E=!0,crossAxis:K=!1,limiter:J={fn:(W)=>{let{x:D,y:V}=W;return{x:D,y:V}}},...q}=t2(A,Q),G={x:B,y:C},Y=await i6(Q,q),H=o6(H2(I)),Z=h7(H);let X=G[Z],U=G[H];if(E){const W=Z==="y"?"top":"left",D=Z==="y"?"bottom":"right",V=X+Y[W],R=X-Y[D];X=LB(V,X,R)}if(K){const W=H==="y"?"top":"left",D=H==="y"?"bottom":"right",V=U+Y[W],R=U-Y[D];U=LB(V,U,R)}const F=J.fn({...Q,[Z]:X,[H]:U});return{...F,data:{x:F.x-B,y:F.y-C}}}}},xJ=function(A){if(A===void 0)A={};return{options:A,fn(Q){const{x:B,y:C,placement:I,rects:E,middlewareData:K}=Q,{offset:J=0,mainAxis:q=!0,crossAxis:G=!0}=t2(A,Q),Y={x:B,y:C},H=o6(I),Z=h7(H);let X=Y[Z],U=Y[H];const F=t2(J,Q),W=typeof F==="number"?{mainAxis:F,crossAxis:0}:{mainAxis:0,crossAxis:0,...F};if(q){const R=Z==="y"?"height":"width",O=E.reference[Z]-E.floating[R]+W.mainAxis,z=E.reference[Z]+E.reference[R]-W.mainAxis;if(X<O)X=O;else if(X>z)X=z}if(G){var D,V;const R=Z==="y"?"width":"height",O=["top","left"].includes(H2(I)),z=E.reference[H]-E.floating[R]+(O?((D=K.offset)==null?void 0:D[H])||0:0)+(O?0:W.crossAxis),w=E.reference[H]+E.reference[R]+(O?0:((V=K.offset)==null?void 0:V[H])||0)-(O?W.crossAxis:0);if(U<z)U=z;else if(U>w)U=w}return{[Z]:X,[H]:U}}}};var e2=function(A){if(vJ(A))return(A.nodeName||"").toLowerCase();return"#document"},f1=function(A){var Q;return(A==null||(Q=A.ownerDocument)==null?void 0:Q.defaultView)||window},T2=function(A){var Q;return(Q=(vJ(A)?A.ownerDocument:A.document)||window.document)==null?void 0:Q.documentElement},vJ=function(A){return A instanceof Node||A instanceof f1(A).Node},j2=function(A){return A instanceof Element||A instanceof f1(A).Element},Z2=function(A){return A instanceof HTMLElement||A instanceof f1(A).HTMLElement},hJ=function(A){if(typeof ShadowRoot==="undefined")return!1;return A instanceof ShadowRoot||A instanceof f1(A).ShadowRoot},r6=function(A){const{overflow:Q,overflowX:B,overflowY:C,display:I}=n1(A);return/auto|scroll|overlay|hidden|clip/.test(Q+C+B)&&!["inline","contents"].includes(I)},fJ=function(A){return["table","td","th"].includes(e2(A))},v7=function(A){const Q=f7(),B=n1(A);return B.transform!=="none"||B.perspective!=="none"||(B.containerType?B.containerType!=="normal":!1)||!Q&&(B.backdropFilter?B.backdropFilter!=="none":!1)||!Q&&(B.filter?B.filter!=="none":!1)||["transform","perspective","filter"].some((C)=>(B.willChange||"").includes(C))||["paint","layout","strict","content"].some((C)=>(B.contain||"").includes(C))},bJ=function(A){let Q=I6(A);while(Z2(Q)&&!T5(Q)){if(v7(Q))return Q;Q=I6(Q)}return null},f7=function(){if(typeof CSS==="undefined"||!CSS.supports)return!1;return CSS.supports("-webkit-backdrop-filter","none")},T5=function(A){return["html","body","#document"].includes(e2(A))},n1=function(A){return f1(A).getComputedStyle(A)},j5=function(A){if(j2(A))return{scrollLeft:A.scrollLeft,scrollTop:A.scrollTop};return{scrollLeft:A.pageXOffset,scrollTop:A.pageYOffset}},I6=function(A){if(e2(A)==="html")return A;const Q=A.assignedSlot||A.parentNode||hJ(A)&&A.host||T2(A);return hJ(Q)?Q.host:Q},pJ=function(A){const Q=I6(A);if(T5(Q))return A.ownerDocument?A.ownerDocument.body:A.body;if(Z2(Q)&&r6(Q))return Q;return pJ(Q)},a6=function(A,Q,B){var C;if(Q===void 0)Q=[];if(B===void 0)B=!0;const I=pJ(A),E=I===((C=A.ownerDocument)==null?void 0:C.body),K=f1(I);if(E)return Q.concat(K,K.visualViewport||[],r6(I)?I:[],K.frameElement&&B?a6(K.frameElement):[]);return Q.concat(I,a6(I,[],B))};var dJ=function(A){const Q=n1(A);let B=parseFloat(Q.width)||0,C=parseFloat(Q.height)||0;const I=Z2(A),E=I?A.offsetWidth:B,K=I?A.offsetHeight:C,J=P5(B)!==E||P5(C)!==K;if(J)B=E,C=K;return{width:B,height:C,$:J}},$B=function(A){return!j2(A)?A.contextElement:A},t6=function(A){const Q=$B(A);if(!Z2(Q))return r2(1);const B=Q.getBoundingClientRect(),{width:C,height:I,$:E}=dJ(Q);let K=(E?P5(B.width):B.width)/C,J=(E?P5(B.height):B.height)/I;if(!K||!Number.isFinite(K))K=1;if(!J||!Number.isFinite(J))J=1;return{x:K,y:J}},cJ=function(A){const Q=f1(A);if(!f7()||!Q.visualViewport)return oU;return{x:Q.visualViewport.offsetLeft,y:Q.visualViewport.offsetTop}},iU=function(A,Q,B){if(Q===void 0)Q=!1;if(!B||Q&&B!==f1(A))return!1;return Q},E6=function(A,Q,B,C){if(Q===void 0)Q=!1;if(B===void 0)B=!1;const I=A.getBoundingClientRect(),E=$B(A);let K=r2(1);if(Q)if(C){if(j2(C))K=t6(C)}else K=t6(A);const J=iU(E,B,C)?cJ(E):r2(0);let q=(I.left+J.x)/K.x,G=(I.top+J.y)/K.y,Y=I.width/K.x,H=I.height/K.y;if(E){const Z=f1(E),X=C&&j2(C)?f1(C):C;let U=Z,F=U.frameElement;while(F&&C&&X!==U){const W=t6(F),D=F.getBoundingClientRect(),V=n1(F),R=D.left+(F.clientLeft+parseFloat(V.paddingLeft))*W.x,O=D.top+(F.clientTop+parseFloat(V.paddingTop))*W.y;q*=W.x,G*=W.y,Y*=W.x,H*=W.y,q+=R,G+=O,U=f1(F),F=U.frameElement}}return C6({width:Y,height:H,x:q,y:G})},lJ=function(A){return aU.some((Q)=>{try{return A.matches(Q)}catch(B){return!1}})},rU=function(A){let{elements:Q,rect:B,offsetParent:C,strategy:I}=A;const E=I==="fixed",K=T2(C),J=Q?lJ(Q.floating):!1;if(C===K||J&&E)return B;let q={scrollLeft:0,scrollTop:0},G=r2(1);const Y=r2(0),H=Z2(C);if(H||!H&&!E){if(e2(C)!=="body"||r6(K))q=j5(C);if(Z2(C)){const Z=E6(C);G=t6(C),Y.x=Z.x+C.clientLeft,Y.y=Z.y+C.clientTop}}return{width:B.width*G.x,height:B.height*G.y,x:B.x*G.x-q.scrollLeft*G.x+Y.x,y:B.y*G.y-q.scrollTop*G.y+Y.y}},tU=function(A){return Array.from(A.getClientRects())},sJ=function(A){return E6(T2(A)).left+j5(A).scrollLeft},eU=function(A){const Q=T2(A),B=j5(A),C=A.ownerDocument.body,I=a2(Q.scrollWidth,Q.clientWidth,C.scrollWidth,C.clientWidth),E=a2(Q.scrollHeight,Q.clientHeight,C.scrollHeight,C.clientHeight);let K=-B.scrollLeft+sJ(A);const J=-B.scrollTop;if(n1(C).direction==="rtl")K+=a2(Q.clientWidth,C.clientWidth)-I;return{width:I,height:E,x:K,y:J}},AD=function(A,Q){const B=f1(A),C=T2(A),I=B.visualViewport;let{clientWidth:E,clientHeight:K}=C,J=0,q=0;if(I){E=I.width,K=I.height;const G=f7();if(!G||G&&Q==="fixed")J=I.offsetLeft,q=I.offsetTop}return{width:E,height:K,x:J,y:q}},QD=function(A,Q){const B=E6(A,!0,Q==="fixed"),C=B.top+A.clientTop,I=B.left+A.clientLeft,E=Z2(A)?t6(A):r2(1),K=A.clientWidth*E.x,J=A.clientHeight*E.y,q=I*E.x,G=C*E.y;return{width:K,height:J,x:q,y:G}},uJ=function(A,Q,B){let C;if(Q==="viewport")C=AD(A,B);else if(Q==="document")C=eU(T2(A));else if(j2(Q))C=QD(Q,B);else{const I=cJ(A);C={...Q,x:Q.x-I.x,y:Q.y-I.y}}return C6(C)},nJ=function(A,Q){const B=I6(A);if(B===Q||!j2(B)||T5(B))return!1;return n1(B).position==="fixed"||nJ(B,Q)},BD=function(A,Q){const B=Q.get(A);if(B)return B;let C=a6(A,[],!1).filter((J)=>j2(J)&&e2(J)!=="body"),I=null;const E=n1(A).position==="fixed";let K=E?I6(A):A;while(j2(K)&&!T5(K)){const J=n1(K),q=v7(K);if(!q&&J.position==="fixed")I=null;if(E?!q&&!I:!q&&J.position==="static"&&!!I&&["absolute","fixed"].includes(I.position)||r6(K)&&!q&&nJ(A,K))C=C.filter((Y)=>Y!==K);else I=J;K=I6(K)}return Q.set(A,C),C},CD=function(A){let{element:Q,boundary:B,rootBoundary:C,strategy:I}=A;const K=[...B==="clippingAncestors"?BD(Q,this._c):[].concat(B),C],J=K[0],q=K.reduce((G,Y)=>{const H=uJ(Q,Y,I);return G.top=a2(H.top,G.top),G.right=n6(H.right,G.right),G.bottom=n6(H.bottom,G.bottom),G.left=a2(H.left,G.left),G},uJ(Q,J,I));return{width:q.right-q.left,height:q.bottom-q.top,x:q.left,y:q.top}},ID=function(A){const{width:Q,height:B}=dJ(A);return{width:Q,height:B}},ED=function(A,Q,B){const C=Z2(Q),I=T2(Q),E=B==="fixed",K=E6(A,!0,E,Q);let J={scrollLeft:0,scrollTop:0};const q=r2(0);if(C||!C&&!E){if(e2(Q)!=="body"||r6(I))J=j5(Q);if(C){const H=E6(Q,!0,E,Q);q.x=H.x+Q.clientLeft,q.y=H.y+Q.clientTop}else if(I)q.x=sJ(I)}const G=K.left+J.scrollLeft-q.x,Y=K.top+J.scrollTop-q.y;return{x:G,y:Y,width:K.width,height:K.height}},mJ=function(A,Q){if(!Z2(A)||n1(A).position==="fixed")return null;if(Q)return Q(A);return A.offsetParent},oJ=function(A,Q){const B=f1(A);if(!Z2(A)||lJ(A))return B;let C=mJ(A,Q);while(C&&fJ(C)&&n1(C).position==="static")C=mJ(C,Q);if(C&&(e2(C)==="html"||e2(C)==="body"&&n1(C).position==="static"&&!v7(C)))return B;return C||bJ(A)||B},JD=function(A){return n1(A).direction==="rtl"},GD=function(A,Q){let B=null,C;const I=T2(A);function E(){var J;clearTimeout(C),(J=B)==null||J.disconnect(),B=null}function K(J,q){if(J===void 0)J=!1;if(q===void 0)q=1;E();const{left:G,top:Y,width:H,height:Z}=A.getBoundingClientRect();if(!J)Q();if(!H||!Z)return;const X=S5(Y),U=S5(I.clientWidth-(G+H)),F=S5(I.clientHeight-(Y+Z)),W=S5(G),V={rootMargin:-X+"px "+-U+"px "+-F+"px "+-W+"px",threshold:a2(0,n6(1,q))||1};let R=!0;function O(z){const w=z[0].intersectionRatio;if(w!==q){if(!R)return K();if(!w)C=setTimeout(()=>{K(!1,0.0000001)},100);else K(!1,w)}R=!1}try{B=new IntersectionObserver(O,{...V,root:I.ownerDocument})}catch(z){B=new IntersectionObserver(O,V)}B.observe(A)}return K(!0),E},iJ=function(A,Q,B,C){if(C===void 0)C={};const{ancestorScroll:I=!0,ancestorResize:E=!0,elementResize:K=typeof ResizeObserver==="function",layoutShift:J=typeof IntersectionObserver==="function",animationFrame:q=!1}=C,G=$B(A),Y=I||E?[...G?a6(G):[],...a6(Q)]:[];Y.forEach((D)=>{I&&D.addEventListener("scroll",B,{passive:!0}),E&&D.addEventListener("resize",B)});const H=G&&J?GD(G,B):null;let Z=-1,X=null;if(K){if(X=new ResizeObserver((D)=>{let[V]=D;if(V&&V.target===G&&X)X.unobserve(Q),cancelAnimationFrame(Z),Z=requestAnimationFrame(()=>{var R;(R=X)==null||R.observe(Q)});B()}),G&&!q)X.observe(G);X.observe(Q)}let U,F=q?E6(A):null;if(q)W();function W(){const D=E6(A);if(F&&(D.x!==F.x||D.y!==F.y||D.width!==F.width||D.height!==F.height))B();F=D,U=requestAnimationFrame(W)}return B(),()=>{var D;if(Y.forEach((V)=>{I&&V.removeEventListener("scroll",B),E&&V.removeEventListener("resize",B)}),H==null||H(),(D=X)==null||D.disconnect(),X=null,q)cancelAnimationFrame(U)}},oU=r2(0),aU=[":popover-open",":modal"],KD=async function(A){const Q=this.getOffsetParent||oJ,B=this.getDimensions;return{reference:ED(A.reference,await Q(A.floating),A.strategy),floating:{x:0,y:0,...await B(A.floating)}}},qD={convertOffsetParentRelativeRectToViewportRelativeRect:rU,getDocumentElement:T2,getClippingRect:CD,getOffsetParent:oJ,getElementRects:KD,getClientRects:tU,getDimensions:ID,getScale:t6,isElement:j2,isRTL:JD},aJ=TJ,rJ=yJ,tJ=jJ;var eJ=gJ;var Aq=xJ,Qq=(A,Q,B)=>{const C=new Map,I={platform:qD,...B},E={...I.platform,_c:C};return SJ(A,Q,{...I,platform:E})};var Bq=(A,Q,B,C)=>{if(C===!0)if(B.coreConfig.placeOnSelector===!0)A.appendChild(Q);else document.body.appendChild(Q);const I={middleware:[]},{coreConfig:E}=B;if(E.strategy==="absolute")Q.style.position=E.strategy;else if(E.strategy==="fixed")Q.style.position=E.strategy;else throw console.error("EK: Unknown placement strategy: ",B),new Error("Unknown placement strategy");if(B.middlewareConfig?.offset?.enabled===!0){const{mainAxis:J,crossAxis:q,alignmentAxis:G}=B.middlewareConfig.offset.config;I.middleware.push(e1({mainAxis:J||0,crossAxis:q||0,alignmentAxis:G||0}))}if(B.middlewareConfig?.flip?.enabled===!0){const{mainAxis:J,crossAxis:q}=B.middlewareConfig.flip.config;I.middleware.push(tJ({mainAxis:J??void 0,crossAxis:q??void 0}))}if(B.middlewareConfig?.autoPlacement?.enabled===!0)I.middleware.push(aJ());if(B.middlewareConfig?.shift?.enabled===!0){const{mainAxis:J,crossAxis:q}=B.middlewareConfig.shift.config;I.middleware.push(rJ({mainAxis:J??void 0,crossAxis:q??void 0,limiter:Aq()}))}if(B.middlewareConfig?.hide?.enabled===!0)I.middleware.push(eJ());if(E.placement==="center")I.placement="bottom",I.middleware.push(e1(({rects:J})=>-J.reference.height/2-J.floating.height/2));else if(E.placement==="inner-left-top")I.placement="left-start",I.middleware.push(e1(({rects:J})=>{return-J.floating.width}));else if(E.placement==="inner-left")I.placement="left",I.middleware.push(e1(({rects:J})=>{return-J.floating.width}));else if(E.placement==="inner-left-bottom")I.placement="left-end",I.middleware.push(e1(({rects:J})=>{return-J.floating.width}));else if(E.placement==="inner-right-top")I.placement="right-start",I.middleware.push(e1(({rects:J})=>{return-J.floating.width}));else if(E.placement==="inner-right")I.placement="right",I.middleware.push(e1(({rects:J})=>{return-J.floating.width}));else if(E.placement==="inner-right-bottom")I.placement="right-end",I.middleware.push(e1(({rects:J})=>{return-J.floating.width}));else if(E.placement==="inner-top")I.placement="top",I.middleware.push(e1(({rects:J})=>{return-J.floating.width}));else if(E.placement==="inner-bottom")I.placement="bottom",I.middleware.push(e1(({rects:J})=>{return-J.floating.width}));else I.placement=E.placement;const K=()=>{Qq(A,Q,I).then(({x:J,y:q})=>{Q.style.setProperty("left",`${J}px`,"important"),Q.style.setProperty("top",`${q}px`,"important")})};if(B.autoUpdate?.enabled===!0)return iJ(A,Q,K,B.autoUpdate?.config);else return K(),()=>{}};var Cq=(A,Q)=>{A.replaceWith(Q)};var Iq=(A,Q,B,C)=>{if(B.blockType==="FloatUIPlacement")return Bq(A,Q,B,C);else if(B.blockType==="ChildPlacement")if(C===!0)OJ(A,Q,B);else yA("e","Using ChildPlacement with changeElementDomParent false");else if(B.blockType==="ReplacementPlacement")if(C===!0)Cq(A,Q);else yA("e","Using ReplacementPlacement with changeElementDomParent false");else if(B.blockType==="AfterAndBeforePlacement")if(C===!0)wJ(A,Q,B);else yA("e","Using AfterAndBeforePlacement with changeElementDomParent false");else console.error("EK: Could not handle placement strategy type: ",B);return()=>{}};var Eq=(A)=>{const Q=document.querySelectorAll(A.query);if(Q.length<A.matchNumber+1)return null;return Q[A.matchNumber]};var Kq=(A)=>{if(A.blockType==="BasicSelector")return Eq(A);else return console.error("EK: Did not support selector type: ",A),null};function g2(A,Q){if(typeof Q!=="function"&&Q!==null)throw new TypeError("Class extends value "+String(Q)+" is not a constructor or null");_B(A,Q);function B(){this.constructor=A}A.prototype=Q===null?Object.create(Q):(B.prototype=Q.prototype,new B)}function Jq(A,Q,B,C){function I(E){return E instanceof B?E:new B(function(K){K(E)})}return new(B||(B=Promise))(function(E,K){function J(Y){try{G(C.next(Y))}catch(H){K(H)}}function q(Y){try{G(C.throw(Y))}catch(H){K(H)}}function G(Y){Y.done?E(Y.value):I(Y.value).then(J,q)}G((C=C.apply(A,Q||[])).next())})}function b7(A,Q){var B={label:0,sent:function(){if(E[0]&1)throw E[1];return E[1]},trys:[],ops:[]},C,I,E,K;return K={next:J(0),throw:J(1),return:J(2)},typeof Symbol==="function"&&(K[Symbol.iterator]=function(){return this}),K;function J(G){return function(Y){return q([G,Y])}}function q(G){if(C)throw new TypeError("Generator is already executing.");while(K&&(K=0,G[0]&&(B=0)),B)try{if(C=1,I&&(E=G[0]&2?I.return:G[0]?I.throw||((E=I.return)&&E.call(I),0):I.next)&&!(E=E.call(I,G[1])).done)return E;if(I=0,E)G=[G[0]&2,E.value];switch(G[0]){case 0:case 1:E=G;break;case 4:return B.label++,{value:G[1],done:!1};case 5:B.label++,I=G[1],G=[0];continue;case 7:G=B.ops.pop(),B.trys.pop();continue;default:if((E=B.trys,!(E=E.length>0&&E[E.length-1]))&&(G[0]===6||G[0]===2)){B=0;continue}if(G[0]===3&&(!E||G[1]>E[0]&&G[1]<E[3])){B.label=G[1];break}if(G[0]===6&&B.label<E[1]){B.label=E[1],E=G;break}if(E&&B.label<E[2]){B.label=E[2],B.ops.push(G);break}if(E[2])B.ops.pop();B.trys.pop();continue}G=Q.call(A,B)}catch(Y){G=[6,Y],I=0}finally{C=E=0}if(G[0]&5)throw G[1];return{value:G[0]?G[1]:void 0,done:!0}}}function A4(A){var Q=typeof Symbol==="function"&&Symbol.iterator,B=Q&&A[Q],C=0;if(B)return B.call(A);if(A&&typeof A.length==="number")return{next:function(){if(A&&C>=A.length)A=void 0;return{value:A&&A[C++],done:!A}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")}function A2(A,Q){var B=typeof Symbol==="function"&&A[Symbol.iterator];if(!B)return A;var C=B.call(A),I,E=[],K;try{while((Q===void 0||Q-- >0)&&!(I=C.next()).done)E.push(I.value)}catch(J){K={error:J}}finally{try{if(I&&!I.done&&(B=C.return))B.call(C)}finally{if(K)throw K.error}}return E}function y2(A,Q,B){if(B||arguments.length===2){for(var C=0,I=Q.length,E;C<I;C++)if(E||!(C in Q)){if(!E)E=Array.prototype.slice.call(Q,0,C);E[C]=Q[C]}}return A.concat(E||Array.prototype.slice.call(Q))}function K6(A){return this instanceof K6?(this.v=A,this):new K6(A)}function qq(A,Q,B){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C=B.apply(A,Q||[]),I,E=[];return I={},J("next"),J("throw"),J("return",K),I[Symbol.asyncIterator]=function(){return this},I;function K(X){return function(U){return Promise.resolve(U).then(X,H)}}function J(X,U){if(C[X]){if(I[X]=function(F){return new Promise(function(W,D){E.push([X,F,W,D])>1||q(X,F)})},U)I[X]=U(I[X])}}function q(X,U){try{G(C[X](U))}catch(F){Z(E[0][3],F)}}function G(X){X.value instanceof K6?Promise.resolve(X.value.v).then(Y,H):Z(E[0][2],X)}function Y(X){q("next",X)}function H(X){q("throw",X)}function Z(X,U){if(X(U),E.shift(),E.length)q(E[0][0],E[0][1])}}function Gq(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Q=A[Symbol.asyncIterator],B;return Q?Q.call(A):(A=typeof A4==="function"?A4(A):A[Symbol.iterator](),B={},C("next"),C("throw"),C("return"),B[Symbol.asyncIterator]=function(){return this},B);function C(E){B[E]=A[E]&&function(K){return new Promise(function(J,q){K=A[E](K),I(J,q,K.done,K.value)})}}function I(E,K,J,q){Promise.resolve(q).then(function(G){E({value:G,done:J})},K)}}var _B=function(A,Q){return _B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,C){B.__proto__=C}||function(B,C){for(var I in C)if(Object.prototype.hasOwnProperty.call(C,I))B[I]=C[I]},_B(A,Q)};function eA(A){return typeof A==="function"}function p7(A){var Q=function(C){Error.call(C),C.stack=new Error().stack},B=A(Q);return B.prototype=Object.create(Error.prototype),B.prototype.constructor=B,B}var u7=p7(function(A){return function Q(B){A(this),this.message=B?B.length+" errors occurred during unsubscription:\n"+B.map(function(C,I){return I+1+") "+C.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=B}});function g5(A,Q){if(A){var B=A.indexOf(Q);0<=B&&A.splice(B,1)}}function m7(A){return A instanceof e6||A&&"closed"in A&&eA(A.remove)&&eA(A.add)&&eA(A.unsubscribe)}var Yq=function(A){if(eA(A))A();else A.unsubscribe()},e6=function(){function A(Q){this.initialTeardown=Q,this.closed=!1,this._parentage=null,this._finalizers=null}return A.prototype.unsubscribe=function(){var Q,B,C,I,E;if(!this.closed){this.closed=!0;var K=this._parentage;if(K)if(this._parentage=null,Array.isArray(K))try{for(var J=A4(K),q=J.next();!q.done;q=J.next()){var G=q.value;G.remove(this)}}catch(F){Q={error:F}}finally{try{if(q&&!q.done&&(B=J.return))B.call(J)}finally{if(Q)throw Q.error}}else K.remove(this);var Y=this.initialTeardown;if(eA(Y))try{Y()}catch(F){E=F instanceof u7?F.errors:[F]}var H=this._finalizers;if(H){this._finalizers=null;try{for(var Z=A4(H),X=Z.next();!X.done;X=Z.next()){var U=X.value;try{Yq(U)}catch(F){if(E=E!==null&&E!==void 0?E:[],F instanceof u7)E=y2(y2([],A2(E)),A2(F.errors));else E.push(F)}}}catch(F){C={error:F}}finally{try{if(X&&!X.done&&(I=Z.return))I.call(Z)}finally{if(C)throw C.error}}}if(E)throw new u7(E)}},A.prototype.add=function(Q){var B;if(Q&&Q!==this)if(this.closed)Yq(Q);else{if(Q instanceof A){if(Q.closed||Q._hasParent(this))return;Q._addParent(this)}(this._finalizers=(B=this._finalizers)!==null&&B!==void 0?B:[]).push(Q)}},A.prototype._hasParent=function(Q){var B=this._parentage;return B===Q||Array.isArray(B)&&B.includes(Q)},A.prototype._addParent=function(Q){var B=this._parentage;this._parentage=Array.isArray(B)?(B.push(Q),B):B?[B,Q]:Q},A.prototype._removeParent=function(Q){var B=this._parentage;if(B===Q)this._parentage=null;else if(Array.isArray(B))g5(B,Q)},A.prototype.remove=function(Q){var B=this._finalizers;if(B&&g5(B,Q),Q instanceof A)Q._removeParent(this)},A.EMPTY=function(){var Q=new A;return Q.closed=!0,Q}(),A}();var PB=e6.EMPTY;var X2={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var A8={setTimeout:function(A,Q){var B=[];for(var C=2;C<arguments.length;C++)B[C-2]=arguments[C];var I=A8.delegate;if(I===null||I===void 0?void 0:I.setTimeout)return I.setTimeout.apply(I,y2([A,Q],A2(B)));return setTimeout.apply(void 0,y2([A,Q],A2(B)))},clearTimeout:function(A){var Q=A8.delegate;return((Q===null||Q===void 0?void 0:Q.clearTimeout)||clearTimeout)(A)},delegate:void 0};function d7(A){A8.setTimeout(function(){var Q=X2.onUnhandledError;if(Q)Q(A);else throw A})}function SB(){}function Zq(A){return TB("E",void 0,A)}function Xq(A){return TB("N",A,void 0)}function TB(A,Q,B){return{kind:A,value:Q,error:B}}var Hq=function(){return TB("C",void 0,void 0)}();function Q8(A){if(X2.useDeprecatedSynchronousErrorHandling){var Q=!J6;if(Q)J6={errorThrown:!1,error:null};if(A(),Q){var B=J6,C=B.errorThrown,I=B.error;if(J6=null,C)throw I}}else A()}function Fq(A){if(X2.useDeprecatedSynchronousErrorHandling&&J6)J6.errorThrown=!0,J6.error=A}var J6=null;var jB=function(A,Q){return YD.call(A,Q)},c7=function(A){if(X2.useDeprecatedSynchronousErrorHandling)Fq(A);else d7(A)},ZD=function(A){throw A},gB=function(A,Q){var B=X2.onStoppedNotification;B&&A8.setTimeout(function(){return B(A,Q)})},y5=function(A){g2(Q,A);function Q(B){var C=A.call(this)||this;if(C.isStopped=!1,B){if(C.destination=B,m7(B))B.add(C)}else C.destination=XD;return C}return Q.create=function(B,C,I){return new q6(B,C,I)},Q.prototype.next=function(B){if(this.isStopped)gB(Xq(B),this);else this._next(B)},Q.prototype.error=function(B){if(this.isStopped)gB(Zq(B),this);else this.isStopped=!0,this._error(B)},Q.prototype.complete=function(){if(this.isStopped)gB(Hq,this);else this.isStopped=!0,this._complete()},Q.prototype.unsubscribe=function(){if(!this.closed)this.isStopped=!0,A.prototype.unsubscribe.call(this),this.destination=null},Q.prototype._next=function(B){this.destination.next(B)},Q.prototype._error=function(B){try{this.destination.error(B)}finally{this.unsubscribe()}},Q.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},Q}(e6);var YD=Function.prototype.bind,HD=function(){function A(Q){this.partialObserver=Q}return A.prototype.next=function(Q){var B=this.partialObserver;if(B.next)try{B.next(Q)}catch(C){c7(C)}},A.prototype.error=function(Q){var B=this.partialObserver;if(B.error)try{B.error(Q)}catch(C){c7(C)}else c7(Q)},A.prototype.complete=function(){var Q=this.partialObserver;if(Q.complete)try{Q.complete()}catch(B){c7(B)}},A}(),q6=function(A){g2(Q,A);function Q(B,C,I){var E=A.call(this)||this,K;if(eA(B)||!B)K={next:B!==null&&B!==void 0?B:void 0,error:C!==null&&C!==void 0?C:void 0,complete:I!==null&&I!==void 0?I:void 0};else{var J;if(E&&X2.useDeprecatedNextContext)J=Object.create(B),J.unsubscribe=function(){return E.unsubscribe()},K={next:B.next&&jB(B.next,J),error:B.error&&jB(B.error,J),complete:B.complete&&jB(B.complete,J)};else K=B}return E.destination=new HD(K),E}return Q}(y5);var XD={closed:!0,next:SB,error:ZD,complete:SB};var B8=function(){return typeof Symbol==="function"&&Symbol.observable||"@@observable"}();function C8(A){return A}function Wq(A){if(A.length===0)return C8;if(A.length===1)return A[0];return function Q(B){return A.reduce(function(C,I){return I(C)},B)}}var Uq=function(A){var Q;return(Q=A!==null&&A!==void 0?A:X2.Promise)!==null&&Q!==void 0?Q:Promise},FD=function(A){return A&&eA(A.next)&&eA(A.error)&&eA(A.complete)},WD=function(A){return A&&A instanceof y5||FD(A)&&m7(A)},B1=function(){function A(Q){if(Q)this._subscribe=Q}return A.prototype.lift=function(Q){var B=new A;return B.source=this,B.operator=Q,B},A.prototype.subscribe=function(Q,B,C){var I=this,E=WD(Q)?Q:new q6(Q,B,C);return Q8(function(){var K=I,J=K.operator,q=K.source;E.add(J?J.call(E,q):q?I._subscribe(E):I._trySubscribe(E))}),E},A.prototype._trySubscribe=function(Q){try{return this._subscribe(Q)}catch(B){Q.error(B)}},A.prototype.forEach=function(Q,B){var C=this;return B=Uq(B),new B(function(I,E){var K=new q6({next:function(J){try{Q(J)}catch(q){E(q),K.unsubscribe()}},error:E,complete:I});C.subscribe(K)})},A.prototype._subscribe=function(Q){var B;return(B=this.source)===null||B===void 0?void 0:B.subscribe(Q)},A.prototype[B8]=function(){return this},A.prototype.pipe=function(){var Q=[];for(var B=0;B<arguments.length;B++)Q[B]=arguments[B];return Wq(Q)(this)},A.prototype.toPromise=function(Q){var B=this;return Q=Uq(Q),new Q(function(C,I){var E;B.subscribe(function(K){return E=K},function(K){return I(K)},function(){return C(E)})})},A.create=function(Q){return new A(Q)},A}();function UD(A){return eA(A===null||A===void 0?void 0:A.lift)}function b1(A){return function(Q){if(UD(Q))return Q.lift(function(B){try{return A(B,this)}catch(C){this.error(C)}});throw new TypeError("Unable to lift unknown Observable type")}}function Q4(A,Q,B,C,I){return new DD(A,Q,B,C,I)}var DD=function(A){g2(Q,A);function Q(B,C,I,E,K,J){var q=A.call(this,B)||this;return q.onFinalize=K,q.shouldUnsubscribe=J,q._next=C?function(G){try{C(G)}catch(Y){B.error(Y)}}:A.prototype._next,q._error=E?function(G){try{E(G)}catch(Y){B.error(Y)}finally{this.unsubscribe()}}:A.prototype._error,q._complete=I?function(){try{I()}catch(G){B.error(G)}finally{this.unsubscribe()}}:A.prototype._complete,q}return Q.prototype.unsubscribe=function(){var B;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var C=this.closed;A.prototype.unsubscribe.call(this),!C&&((B=this.onFinalize)===null||B===void 0||B.call(this))}},Q}(y5);var Dq=p7(function(A){return function Q(){A(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}});var x5=function(A){g2(Q,A);function Q(){var B=A.call(this)||this;return B.closed=!1,B.currentObservers=null,B.observers=[],B.isStopped=!1,B.hasError=!1,B.thrownError=null,B}return Q.prototype.lift=function(B){var C=new Rq(this,this);return C.operator=B,C},Q.prototype._throwIfClosed=function(){if(this.closed)throw new Dq},Q.prototype.next=function(B){var C=this;Q8(function(){var I,E;if(C._throwIfClosed(),!C.isStopped){if(!C.currentObservers)C.currentObservers=Array.from(C.observers);try{for(var K=A4(C.currentObservers),J=K.next();!J.done;J=K.next()){var q=J.value;q.next(B)}}catch(G){I={error:G}}finally{try{if(J&&!J.done&&(E=K.return))E.call(K)}finally{if(I)throw I.error}}}})},Q.prototype.error=function(B){var C=this;Q8(function(){if(C._throwIfClosed(),!C.isStopped){C.hasError=C.isStopped=!0,C.thrownError=B;var I=C.observers;while(I.length)I.shift().error(B)}})},Q.prototype.complete=function(){var B=this;Q8(function(){if(B._throwIfClosed(),!B.isStopped){B.isStopped=!0;var C=B.observers;while(C.length)C.shift().complete()}})},Q.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(Q.prototype,"observed",{get:function(){var B;return((B=this.observers)===null||B===void 0?void 0:B.length)>0},enumerable:!1,configurable:!0}),Q.prototype._trySubscribe=function(B){return this._throwIfClosed(),A.prototype._trySubscribe.call(this,B)},Q.prototype._subscribe=function(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)},Q.prototype._innerSubscribe=function(B){var C=this,I=this,E=I.hasError,K=I.isStopped,J=I.observers;if(E||K)return PB;return this.currentObservers=null,J.push(B),new e6(function(){C.currentObservers=null,g5(J,B)})},Q.prototype._checkFinalizedStatuses=function(B){var C=this,I=C.hasError,E=C.thrownError,K=C.isStopped;if(I)B.error(E);else if(K)B.complete()},Q.prototype.asObservable=function(){var B=new B1;return B.source=this,B},Q.create=function(B,C){return new Rq(B,C)},Q}(B1);var Rq=function(A){g2(Q,A);function Q(B,C){var I=A.call(this)||this;return I.destination=B,I.source=C,I}return Q.prototype.next=function(B){var C,I;(I=(C=this.destination)===null||C===void 0?void 0:C.next)===null||I===void 0||I.call(C,B)},Q.prototype.error=function(B){var C,I;(I=(C=this.destination)===null||C===void 0?void 0:C.error)===null||I===void 0||I.call(C,B)},Q.prototype.complete=function(){var B,C;(C=(B=this.destination)===null||B===void 0?void 0:B.complete)===null||C===void 0||C.call(B)},Q.prototype._subscribe=function(B){var C,I;return(I=(C=this.source)===null||C===void 0?void 0:C.subscribe(B))!==null&&I!==void 0?I:PB},Q}(x5);var yB={now:function(){return(yB.delegate||Date).now()},delegate:void 0};var Vq=function(A){g2(Q,A);function Q(B,C,I){if(B===void 0)B=Infinity;if(C===void 0)C=Infinity;if(I===void 0)I=yB;var E=A.call(this)||this;return E._bufferSize=B,E._windowTime=C,E._timestampProvider=I,E._buffer=[],E._infiniteTimeWindow=!0,E._infiniteTimeWindow=C===Infinity,E._bufferSize=Math.max(1,B),E._windowTime=Math.max(1,C),E}return Q.prototype.next=function(B){var C=this,I=C.isStopped,E=C._buffer,K=C._infiniteTimeWindow,J=C._timestampProvider,q=C._windowTime;if(!I)E.push(B),!K&&E.push(J.now()+q);this._trimBuffer(),A.prototype.next.call(this,B)},Q.prototype._subscribe=function(B){this._throwIfClosed(),this._trimBuffer();var C=this._innerSubscribe(B),I=this,E=I._infiniteTimeWindow,K=I._buffer,J=K.slice();for(var q=0;q<J.length&&!B.closed;q+=E?1:2)B.next(J[q]);return this._checkFinalizedStatuses(B),C},Q.prototype._trimBuffer=function(){var B=this,C=B._bufferSize,I=B._timestampProvider,E=B._buffer,K=B._infiniteTimeWindow,J=(K?1:2)*C;if(C<Infinity&&J<E.length&&E.splice(0,E.length-J),!K){var q=I.now(),G=0;for(var Y=1;Y<E.length&&E[Y]<=q;Y+=2)G=Y;G&&E.splice(0,G+1)}},Q}(x5);function Nq(A){return A&&eA(A.schedule)}var RD=function(A){return A[A.length-1]};function l7(A){return Nq(RD(A))?A.pop():void 0}var I8=function(A){return A&&typeof A.length==="number"&&typeof A!=="function"};function s7(A){return eA(A===null||A===void 0?void 0:A.then)}function n7(A){return eA(A[B8])}function o7(A){return Symbol.asyncIterator&&eA(A===null||A===void 0?void 0:A[Symbol.asyncIterator])}function i7(A){return new TypeError("You provided "+(A!==null&&typeof A==="object"?"an invalid object":"'"+A+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function VD(){if(typeof Symbol!=="function"||!Symbol.iterator)return"@@iterator";return Symbol.iterator}var a7=VD();function r7(A){return eA(A===null||A===void 0?void 0:A[a7])}function t7(A){return qq(this,arguments,function Q(){var B,C,I,E;return b7(this,function(K){switch(K.label){case 0:B=A.getReader(),K.label=1;case 1:K.trys.push([1,,9,10]),K.label=2;case 2:return[4,K6(B.read())];case 3:if(C=K.sent(),I=C.value,E=C.done,!E)return[3,5];return[4,K6(void 0)];case 4:return[2,K.sent()];case 5:return[4,K6(I)];case 6:return[4,K.sent()];case 7:return K.sent(),[3,2];case 8:return[3,10];case 9:return B.releaseLock(),[7];case 10:return[2]}})})}function e7(A){return eA(A===null||A===void 0?void 0:A.getReader)}function P1(A){if(A instanceof B1)return A;if(A!=null){if(n7(A))return ND(A);if(I8(A))return wD(A);if(s7(A))return OD(A);if(o7(A))return wq(A);if(r7(A))return LD(A);if(e7(A))return zD(A)}throw i7(A)}function ND(A){return new B1(function(Q){var B=A[B8]();if(eA(B.subscribe))return B.subscribe(Q);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function wD(A){return new B1(function(Q){for(var B=0;B<A.length&&!Q.closed;B++)Q.next(A[B]);Q.complete()})}function OD(A){return new B1(function(Q){A.then(function(B){if(!Q.closed)Q.next(B),Q.complete()},function(B){return Q.error(B)}).then(null,d7)})}function LD(A){return new B1(function(Q){var B,C;try{for(var I=A4(A),E=I.next();!E.done;E=I.next()){var K=E.value;if(Q.next(K),Q.closed)return}}catch(J){B={error:J}}finally{try{if(E&&!E.done&&(C=I.return))C.call(I)}finally{if(B)throw B.error}}Q.complete()})}function wq(A){return new B1(function(Q){kD(A,Q).catch(function(B){return Q.error(B)})})}function zD(A){return wq(t7(A))}var kD=function(A,Q){var B,C,I,E;return Jq(this,void 0,void 0,function(){var K,J;return b7(this,function(q){switch(q.label){case 0:q.trys.push([0,5,6,11]),B=Gq(A),q.label=1;case 1:return[4,B.next()];case 2:if(C=q.sent(),!!C.done)return[3,4];if(K=C.value,Q.next(K),Q.closed)return[2];q.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return J=q.sent(),I={error:J},[3,11];case 6:if(q.trys.push([6,,9,10]),!(C&&!C.done&&(E=B.return)))return[3,8];return[4,E.call(B)];case 7:q.sent(),q.label=8;case 8:return[3,10];case 9:if(I)throw I.error;return[7];case 10:return[7];case 11:return Q.complete(),[2]}})})};function Q2(A,Q,B,C,I){if(C===void 0)C=0;if(I===void 0)I=!1;var E=Q.schedule(function(){if(B(),I)A.add(this.schedule(null,C));else this.unsubscribe()},C);if(A.add(E),!I)return E}function A9(A,Q){if(Q===void 0)Q=0;return b1(function(B,C){B.subscribe(Q4(C,function(I){return Q2(C,A,function(){return C.next(I)},Q)},function(){return Q2(C,A,function(){return C.complete()},Q)},function(I){return Q2(C,A,function(){return C.error(I)},Q)}))})}function Q9(A,Q){if(Q===void 0)Q=0;return b1(function(B,C){C.add(A.schedule(function(){return B.subscribe(C)},Q))})}function Oq(A,Q){return P1(A).pipe(Q9(Q),A9(Q))}function Lq(A,Q){return P1(A).pipe(Q9(Q),A9(Q))}function zq(A,Q){return new B1(function(B){var C=0;return Q.schedule(function(){if(C===A.length)B.complete();else if(B.next(A[C++]),!B.closed)this.schedule()})})}function kq(A,Q){return new B1(function(B){var C;return Q2(B,Q,function(){C=A[a7](),Q2(B,Q,function(){var I,E,K;try{I=C.next(),E=I.value,K=I.done}catch(J){B.error(J);return}if(K)B.complete();else B.next(E)},0,!0)}),function(){return eA(C===null||C===void 0?void 0:C.return)&&C.return()}})}function B9(A,Q){if(!A)throw new Error("Iterable cannot be null");return new B1(function(B){Q2(B,Q,function(){var C=A[Symbol.asyncIterator]();Q2(B,Q,function(){C.next().then(function(I){if(I.done)B.complete();else B.next(I.value)})},0,!0)})})}function Mq(A,Q){return B9(t7(A),Q)}function $q(A,Q){if(A!=null){if(n7(A))return Oq(A,Q);if(I8(A))return zq(A,Q);if(s7(A))return Lq(A,Q);if(o7(A))return B9(A,Q);if(r7(A))return kq(A,Q);if(e7(A))return Mq(A,Q)}throw i7(A)}function _q(A,Q){return Q?$q(A,Q):P1(A)}function G6(A,Q){return b1(function(B,C){var I=0;B.subscribe(Q4(C,function(E){C.next(A.call(Q,E,I++))}))})}var $D=function(A,Q){return MD(Q)?A.apply(void 0,y2([],A2(Q))):A(Q)};function Pq(A){return G6(function(Q){return $D(A,Q)})}var MD=Array.isArray;function Sq(A,Q,B,C,I,E,K,J){var q=[],G=0,Y=0,H=!1,Z=function(){if(H&&!q.length&&!G)Q.complete()},X=function(F){return G<C?U(F):q.push(F)},U=function(F){E&&Q.next(F),G++;var W=!1;P1(B(F,Y++)).subscribe(Q4(Q,function(D){if(I===null||I===void 0||I(D),E)X(D);else Q.next(D)},function(){W=!0},void 0,function(){if(W)try{G--;var D=function(){var V=q.shift();if(K)Q2(Q,K,function(){return U(V)});else U(V)};while(q.length&&G<C)D();Z()}catch(V){Q.error(V)}}))};return A.subscribe(Q4(Q,X,function(){H=!0,Z()})),function(){J===null||J===void 0||J()}}function h5(A,Q,B){if(B===void 0)B=Infinity;if(eA(Q))return h5(function(C,I){return G6(function(E,K){return Q(C,E,I,K)})(P1(A(C,I)))},B);else if(typeof Q==="number")B=Q;return b1(function(C,I){return Sq(C,I,A,B)})}function Tq(A){if(A===void 0)A=Infinity;return h5(C8,A)}function jq(){return Tq(1)}function xB(){var A=[];for(var Q=0;Q<arguments.length;Q++)A[Q]=arguments[Q];return jq()(_q(A,l7(A)))}function v5(A,Q,B,C){if(eA(B))C=B,B=void 0;if(C)return v5(A,Q,B).pipe(Pq(C));var I=A2(gD(A)?PD.map(function(J){return function(q){return A[J](Q,q,B)}}):TD(A)?_D.map(gq(A,Q)):jD(A)?SD.map(gq(A,Q)):[],2),E=I[0],K=I[1];if(!E){if(I8(A))return h5(function(J){return v5(J,Q,B)})(P1(A))}if(!E)throw new TypeError("Invalid event target");return new B1(function(J){var q=function(){var G=[];for(var Y=0;Y<arguments.length;Y++)G[Y]=arguments[Y];return J.next(1<G.length?G:G[0])};return E(q),function(){return K(q)}})}var gq=function(A,Q){return function(B){return function(C){return A[B](Q,C)}}},TD=function(A){return eA(A.addListener)&&eA(A.removeListener)},jD=function(A){return eA(A.on)&&eA(A.off)},gD=function(A){return eA(A.addEventListener)&&eA(A.removeEventListener)},_D=["addListener","removeListener"],PD=["addEventListener","removeEventListener"],SD=["on","off"];function hB(A,Q){if(Q===void 0)Q=C8;return A=A!==null&&A!==void 0?A:yD,b1(function(B,C){var I,E=!0;B.subscribe(Q4(C,function(K){var J=Q(K);if(E||!A(I,J))E=!1,I=J,C.next(K)}))})}var yD=function(A,Q){return A===Q};function yq(A){if(A===void 0)A={};var Q=A.connector,B=Q===void 0?function(){return new x5}:Q,C=A.resetOnError,I=C===void 0?!0:C,E=A.resetOnComplete,K=E===void 0?!0:E,J=A.resetOnRefCountZero,q=J===void 0?!0:J;return function(G){var Y,H,Z,X=0,U=!1,F=!1,W=function(){H===null||H===void 0||H.unsubscribe(),H=void 0},D=function(){W(),Y=Z=void 0,U=F=!1},V=function(){var R=Y;D(),R===null||R===void 0||R.unsubscribe()};return b1(function(R,O){if(X++,!F&&!U)W();var z=Z=Z!==null&&Z!==void 0?Z:B();if(O.add(function(){if(X--,X===0&&!F&&!U)H=vB(V,q)}),z.subscribe(O),!Y&&X>0)Y=new q6({next:function(w){return z.next(w)},error:function(w){F=!0,W(),H=vB(D,I,w),z.error(w)},complete:function(){U=!0,W(),H=vB(D,K),z.complete()}}),P1(R).subscribe(Y)})(G)}}var vB=function(A,Q){var B=[];for(var C=2;C<arguments.length;C++)B[C-2]=arguments[C];if(Q===!0){A();return}if(Q===!1)return;var I=new q6({next:function(){I.unsubscribe(),A()}});return P1(Q.apply(void 0,y2([],A2(B)))).subscribe(I)};function fB(A,Q,B){var C,I,E,K,J=!1;if(A&&typeof A==="object")C=A.bufferSize,K=C===void 0?Infinity:C,I=A.windowTime,Q=I===void 0?Infinity:I,E=A.refCount,J=E===void 0?!1:E,B=A.scheduler;else K=A!==null&&A!==void 0?A:Infinity;return yq({connector:function(){return new Vq(K,Q,B)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:J})}function bB(){var A=[];for(var Q=0;Q<arguments.length;Q++)A[Q]=arguments[Q];var B=l7(A);return b1(function(C,I){(B?xB(A,C,B):xB(A,C)).subscribe(I)})}var xD=(A)=>{const Q=()=>{const B=Object.keys(A).findLast((C)=>{return window.matchMedia(A[C]).matches});return B&&B in A?B:"default"};return v5(window,"resize").pipe(bB(Q()),G6(()=>Q()),hB(),fB(1))},pB=(A)=>{const Q=["xxl","xl","lg","md","sm","default"],B={default:"default",sm:"default",md:"default",lg:"default",xl:"default",xxl:"default"};return Q.forEach((C)=>{for(let I of Q.slice(Q.indexOf(C)))if(A[I]&&A[I].length>0){B[C]=I;break}}),B},uB=(A)=>{if(A._breakpointSubscription)A._breakpointSubscription.unsubscribe();A._breakpointSubscription=null},xq=(A)=>{if(A._breakpointSubscription!==null)uB(A);A._breakpointSubscription=xD(A._breakpoints).subscribe((Q)=>{A._currentBreakpoint=Q;for(let B in A._registeredElements)A._registeredElements[B].updateBreakpoint(Q)})};var C9={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},I9=(A)=>(...Q)=>({_$litDirective$:A,values:Q});class f5{constructor(A){}get _$AU(){return this._$AM._$AU}_$AT(A,Q,B){this._$Ct=A,this._$AM=Q,this._$Ci=B}_$AS(A,Q){return this.update(A,Q)}update(A,Q){return this.render(...Q)}}var hq="important",hD=" !"+hq,vq=I9(class extends f5{constructor(A){if(super(A),A.type!==C9.ATTRIBUTE||A.name!=="style"||A.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(A){return Object.keys(A).reduce((Q,B)=>{const C=A[B];return C==null?Q:Q+`${B=B.includes("-")?B:B.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${C};`},"")}update(A,[Q]){const{style:B}=A.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(Q)),this.render(Q);for(let C of this.ft)Q[C]==null&&(this.ft.delete(C),C.includes("-")?B.removeProperty(C):B[C]=null);for(let C in Q){const I=Q[C];if(I!=null){this.ft.add(C);const E=typeof I=="string"&&I.endsWith(hD);C.includes("-")||E?B.setProperty(C,E?I.slice(0,-11):I,E?hq:""):B[C]=I}}return Y2}});var fq=(A)=>{return Object.keys(A).reduce((Q,B)=>Q+B.split(/(?=[A-Z])/).join("-").toLowerCase()+":"+A[B]+";","")},E9=(A)=>{if(A==="default")return!0;let Q=!1;const C=new URLSearchParams(window.location.search).get("ek-is-mobile");if(C!==null&&C!=="")return!0;try{const I=navigator.userAgent;Q=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(I)}catch(I){console.error("[EKAllInOneContent] - isMobileDevice() ERROR:",I)}return Q};class G0 extends _1{wotwIdentifierLegacy;haveFiredNexusWOWTVisibilityEvent=!1;breadcrumbs;EKBlockType;wotwEnabled=!1;interactionTimers={};constructor(A,Q,B,C,I,E,K,J,q,G=!1,Y=null){super();this._showModelViewer=!0;this.breadcrumbs=J,this.EKBlockType=Q,this.wotwEnabled=G,this.wotwIdentifierLegacy=Y,this.EKID=A,this.EKChildren=C,this.EKControlObject=E,this._currentBreakpoint=this.EKControlObject?._currentBreakpoint,this.EKProps={...B},this.EKResolvedData={...I},this.EKIdentities={...K},this.triggerWOTWPlacedEvent();for(let H of this.EKChildren)H.addEventListener("ek-child-nullified",(Z)=>{if(Z.stopPropagation(),this.EKChildren=this.EKChildren.filter((X)=>X!==H),q===!1&&this.getNumberOfChildrenNonNull()===0)this.nullifyComponent()})}getNumberOfChildrenNonNull(){let A=0;if(this.EKChildren){for(let Q of this.EKChildren)if(Q.EKBlockType!=="NullElement")A++}return A}getHostStyleOverride(){if(this.EKProps.hostStyle!==void 0)return d`<style>
        :host {
          ${T7(fq(this.EKProps.hostStyle))}
        }
      </style>`;return null}getCustomCSSStyles(){if(this.EKProps.customCSS!==void 0)return d`
        <style class="ek-custom-styles">
          ${this.EKProps.customCSS}
        </style>
      `;return null}getElementStyleOverride(){if(this.EKProps.style!==void 0)return vq(this.EKProps.style);return null}loadIntelOneDisplayFont(){const B=document.createElement("style");B.appendChild(document.createTextNode(`
      @font-face {
        font-family: "IntelOneDisplay";
        src: url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplayregular-webfont.eot");
        src: url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplayregular-webfont.eot?#iefix")
            format("embedded-opentype"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplayregular-webfont.woff2")
            format("woff2"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplayregular-webfont.woff")
            format("woff"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplayregular-webfont.ttf")
            format("truetype"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplayregular-webfont.svg#intelonedisplay-regular")
            format("svg");
        font-weight: 400;
        font-style: normal;
      }

      @font-face {
        font-family: "IntelOneDisplay";
        src: url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaybold-webfont.eot");
        src: url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaybold-webfont.eot?#iefix")
            format("embedded-opentype"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaybold-webfont.woff2")
            format("woff2"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaybold-webfont.woff")
            format("woff"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaybold-webfont.ttf")
            format("truetype"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaybold-webfont.svg#intelonedisplay-bold")
            format("svg");
        font-weight: 700;
        font-style: normal;
      }

      @font-face {
        font-family: "IntelOneDisplay";
        src: url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaylight-webfont.eot");
        src: url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaylight-webfont.eot?#iefix")
            format("embedded-opentype"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaylight-webfont.woff2")
            format("woff2"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaylight-webfont.woff")
            format("woff"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaylight-webfont.ttf")
            format("truetype"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaylight-webfont.svg#intelonedisplay-light")
            format("svg");
        font-weight: 300;
        font-style: normal;
      }

      @font-face {
        font-family: "IntelOneDisplay";
        src: url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaymedium-webfont.eot");
        src: url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaymedium-webfont.eot?#iefix")
            format("embedded-opentype"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaymedium-webfont.woff2")
            format("woff2"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaymedium-webfont.woff")
            format("woff"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaymedium-webfont.ttf")
            format("truetype"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaymedium-webfont.svg#intelonedisplay-medium")
            format("svg");
        font-weight: 500;
        font-style: normal;
      }
    `)),(document.head||document.getElementsByTagName("head")[0]).appendChild(B)}isExpectingReattach=!1;firstRun=!0;disconnectedCallback(){if(super.disconnectedCallback(),yA("l","Removing",this.EKID,this.EKBlockType),this.isExpectingReattach===!0);else this.cleanup()}connectedCallback(){if(super.connectedCallback(),this.isExpectingReattach===!0&&this.firstRun===!1);else this.EKControlObject._registerWebComponent(this.EKID,this)}cleanup(){this.EKControlObject._deRegisterWebComponent(this.EKID);for(let A in this.placementsAndSelectors)this.placementsAndSelectors[A].placementCleanupFunc()}updateBreakpoint(A){this._currentBreakpoint=A,this.runPlacementsAndSelectors()}placementsAndSelectors={};doSelectAndPlace(A){this.isExpectingReattach=!0,A.placementCleanupFunc();let Q=null;if(A.selector instanceof HTMLElement)Q=A.selector;else{const I=A.selector[A.selectorMapping[this._currentBreakpoint]];if(!I){yA("e","impossible selector condition"),this.isExpectingReattach=!1,this.firstRun=!1;return}Q=Kq(I[0])}if(!Q){yA("e","could not get anchor element for selector",A.selector,A.selectorMapping[this._currentBreakpoint]),this.isExpectingReattach=!1,this.firstRun=!1;return}const B=A.placement[A.placementMapping[this._currentBreakpoint]];if(!B){yA("e","impossible placement condition"),this.isExpectingReattach=!1,this.firstRun=!1;return}const C=Iq(Q,A.element,B[0],A.placementchangeElementDomParent);A.placementCleanupFunc=C,A.currentPlacementBreakpoint=A.placementMapping[this._currentBreakpoint],A.currentSelectorBreakpoint=A.selectorMapping[this._currentBreakpoint],this.isExpectingReattach=!1,this.firstRun=!1}runPlacementsAndSelectors(){for(let A in this.placementsAndSelectors){const Q=this.placementsAndSelectors[A];if(!Q.currentPlacementBreakpoint||!Q.currentSelectorBreakpoint)this.doSelectAndPlace(Q);else if(Q.placementMapping[this._currentBreakpoint]!=Q.currentPlacementBreakpoint)this.doSelectAndPlace(Q);else if(Q.selectorMapping[this._currentBreakpoint]!=Q.currentSelectorBreakpoint)this.doSelectAndPlace(Q)}}registerPlacementAndSelector(A,Q,B,C,I=!0){if(this.placementsAndSelectors[A])this.placementsAndSelectors[A].placementCleanupFunc();let E={default:"default",sm:"default",md:"default",lg:"default",xl:"default",xxl:"default"};if(!(B instanceof HTMLElement))E=pB(B);this.placementsAndSelectors[A]={element:Q,selector:B,placement:C,placementchangeElementDomParent:I,placementCleanupFunc:()=>{},selectorMapping:E,placementMapping:{...pB(C)}},this.runPlacementsAndSelectors()}deregisterPlacementAndSelector(A){const Q=this.placementsAndSelectors[A];if(Q)Q.placementCleanupFunc();delete this.placementsAndSelectors[A]}isWOTWEnabled(){return this.wotwEnabled}logEventLegacy(A,Q,B=null,C=null){const I=B===null?this.wotwIdentifierLegacy:B;let E=null;if(this.EKIdentities&&this.EKIdentities.arid)E=this.EKIdentities.arid;if(C!==null)E=C;if(I!==null)this.EKControlObject._logEventLegacy({detail:Q,type:A,service:I,arid:E})}elementIsDirectlyOnPage(){return this.breadcrumbs.filter((A)=>A!=="ContainerElement").length===0}getWOTWNexusBreadcrumbs(){let A=this.breadcrumbs.join(">");if(A.trim().length===0)A="page";else A=`page>${A}`;return A}getWOTWNexusProductID(){if(this.EKIdentities?.productID)return this.EKIdentities?.productID;else return"unknown"}getWOTWNexusParent(){if(this.breadcrumbs.length===0)return"page";for(let A=this.breadcrumbs.length-1;A>=0;A--){const Q=this.breadcrumbs[A];if(Q==="AllInOnePageButtonElement"||Q==="AllInOneV2PageButtonElement")return"AllInOne";else if(Q==="BadgeElement")return"Badge";else if(Q==="CustomButtonElement")return"CustomButton";else if(Q==="PCRoomsElement")return"PCRooms";else if(Q==="ModelViewerElement")return"ModelViewer"}return"page"}triggerWOTWStartInteraction(A,Q){if(this.interactionTimers[A]=performance.now(),this.isWOTWEnabled())this.EKControlObject._wotwInterfaceNexus.triggerUIEvent({action:"start-interaction",component:this.EKBlockType,breadcrumbs:this.getWOTWNexusBreadcrumbs(),productID:this.getWOTWNexusProductID(),interactionType:Q,parent:this.getWOTWNexusParent()})}triggerWOTWEndInteraction(A){if(this.interactionTimers[A]){const Q=this.interactionTimers[A],C=(performance.now()-Q)/1000;if(this.isWOTWEnabled())this.EKControlObject._wotwInterfaceNexus.triggerUIEvent({action:"end-interaction",component:this.EKBlockType,breadcrumbs:this.getWOTWNexusBreadcrumbs(),productID:this.getWOTWNexusProductID(),hangTime:C,parent:this.getWOTWNexusParent()})}}triggerWOTWPlacedEvent(){if(this.isWOTWEnabled()){const A={action:"placed",component:this.EKBlockType,breadcrumbs:this.getWOTWNexusBreadcrumbs(),productID:this.getWOTWNexusProductID(),parent:this.getWOTWNexusParent()};if(this.EKControlObject._wotwInterfaceNexus.triggerUIEvent(A),this.EKBlockType==="BadgeElement"){const Q=this;this.logEventLegacy("delivery",Q._wotwGetDetail())}else if(this.EKBlockType!=="ModelViewerElement")if(this.elementIsDirectlyOnPage())if(this.EKBlockType==="AllInOnePageButtonElement")this.logEventLegacy("delivery","button","all-in-one","meta");else this.logEventLegacy("delivery","embed");else if(this.EKBlockType==="CrossmarkElement"||this.EKBlockType==="ULElement")this.logEventLegacy("delivery","embed");else this.logEventLegacy("delivery","button");else this.logEventLegacy("delivery",this.elementIsDirectlyOnPage()?"embed":"button","3dfw")}}triggerWOTWVisibility(){if(this.isWOTWEnabled()&&this.haveFiredNexusWOWTVisibilityEvent===!1){const A={action:"impression",component:this.EKBlockType,breadcrumbs:this.getWOTWNexusBreadcrumbs(),productID:this.getWOTWNexusProductID(),parent:this.getWOTWNexusParent()};if(this.EKControlObject._wotwInterfaceNexus.triggerUIEvent(A),this.haveFiredNexusWOWTVisibilityEvent=!0,this.wotwIdentifierLegacy==="pc-rooms")this.logEventLegacy("view",this.elementIsDirectlyOnPage()?"embed":"button")}}getLocalisations(A){if(this.EKProps.localisation){const Q=this.EKProps.localisation;if(Array.isArray(Q.localisedValues)){if(Q.localisedValues[0].blockType===A)return Q.localisedValues[0]}}return null}nullifyComponent(A=""){yA("l","Nullifying component: ",this.EKBlockType,"Reason: ",A instanceof Error?A.message:A),this.dispatchEvent(new CustomEvent("ek-child-nullified",{bubbles:!0,composed:!0,detail:{child:this}})),this.remove()}}y([FA({attribute:!1})],G0.prototype,"EKChildren",void 0),y([FA({attribute:!1})],G0.prototype,"EKProps",void 0),y([FA({attribute:!1})],G0.prototype,"EKResolvedData",void 0),y([FA({attribute:!1})],G0.prototype,"EKIdentities",void 0),y([FA({attribute:!1})],G0.prototype,"EKControlObject",void 0),y([FA({attribute:!1})],G0.prototype,"EKID",void 0),y([KA()],G0.prototype,"_showModelViewer",void 0),y([KA()],G0.prototype,"_currentBreakpoint",void 0);class b5 extends G0{static styles=Q0`
    .ek-cgi-component-wrapper {
      width: 100%;
      height: 100%;
    }
  `;constructor(A,Q,B,C,I,E,K,J,q){super(A,Q,B,C,I,E,K,J,q,!0,"intel-12th-gen-cgi");this.iframeSrc=""}isComponentValidToRender(){return!0}connectedCallback(){super.connectedCallback(),window.addEventListener("message",({data:B})=>{if(B.action==="fullscreen-enable")document.exitFullscreen().catch(console.error);else if(B.action==="fullscreen-disable")this.wrapper.requestFullscreen().catch(console.error)});const A={en:"en-GB",us:"en-US",id:"id-ID",tw:"tw-TW",ja:"ja-JA",fr:"fr-FR",it:"it-IT",mx:"es-MX",es:"es-ES",de:"de-DE",ar:"ar-AR",pt:"pt-BR",br:"pt-BR",br_pt:"pt-BR"};let Q="en-GB";if(this.EKControlObject._config?.language)Q=A[this.EKControlObject._config?.language]||"en-GB";this.iframeSrc=`https://intel-12th-gen-cgi-experience.pointandplace.com?eky-distributor=${this.EKControlObject._config?.deployment}&eky-language=${Q}&eky-environment=prod&eky-page=${btoa(window.location.href)}&eky-user=${this.EKControlObject._config.wotwGetUserIDFunction()}&eky-session=${this.EKControlObject._config.wotwGetSessionIDFunction()}`}render(){return d`${this.getHostStyleOverride()}
      <div class="ek-cgi-component-wrapper">
        <style>
          .ek-cgi-component-wrapper {
            width: 100%;
            height: 100%;
            max-width: ${this.EKProps.maxWidth};
            max-height: ${this.EKProps.maxHeight};
          }
        </style>
        <iframe
          class="ek-cgi-component-iframe"
          width="100%"
          height="100%"
          allow="fullscreen; xr-spatial-tracking;"
          frameborder="0"
          src="${this.iframeSrc}"
        ></iframe>
      </div>`}}y([FA({attribute:!1})],b5.prototype,"EKProps",void 0),y([KA()],b5.prototype,"iframeSrc",void 0),y([_0(".ek-cgi-component-wrapper")],b5.prototype,"wrapper",void 0),b5=y([sA("ek-intel-12th-gen-cgi")],b5);class p5{arid;environment;service;MODEL_CDN_BASE_URLS;THREE_DFW_PLAYER_BASE_URLS;SERVICE_AR_ASSISTANT;constructor(A,Q="dev",B){this.arid=A||null,this.environment="dev",this.MODEL_CDN_BASE_URLS={dev:"https://eyekandy-model-staging.s3.eu-west-2.amazonaws.com",prod:"https://d15mv1adrb1s6e.cloudfront.net/product_bundles"},this.THREE_DFW_PLAYER_BASE_URLS={dev:"https://3d-player-dev.pointandplace.com/view/",prod:"https://3d-player.pointandplace.com/view/"},this.SERVICE_AR_ASSISTANT="ar-assistant",this.service=B}launchAR(A){const Q=this.readPlatformFromUserAgent(navigator.userAgent);let B=null;if(Q==="android")A.logEventLegacy("ar-start","android"),B=this._renderAndroidSceneViewerIntentURL("ar-models",this.arid,this.environment,"android");if(Q==="ios")A.logEventLegacy("ar-start","ios"),B=this._renderIOSQuickLookURL("ar-moodels",this.arid,this.environment,"ios");if(!B)return!1;return this._click(B),!0}deliverQR(){return!0}_click(A){if(typeof document==="undefined")return!1;if(typeof A!=="string")return null;if(A.length===0)return null;const Q=document.createElement("a");if(A.includes(".usdz")){Q.setAttribute("rel","ar");const B=document.createElement("img");B.style.display="none",Q.appendChild(B)}return Q.setAttribute("href",A),this.safeAddToDOM(Q),Q.click(),!0}safeAddToDOM(A){let Q=document.getElementById("eyekandy-div");if(!Q)Q=document.createElement("div"),Q.setAttribute("id","eyekandy-div"),document.body.appendChild(Q);Q.appendChild(A)}readPlatformFromUserAgent(A){const Q=this._readPlatformBlockFromUserAgent(A),B={ios:!1,android:!1,linux:!1,windows:!1};if(Q.indexOf("iphone")>-1||Q.indexOf("ipad")>-1||Q.indexOf("macintosh")>-1)B.ios=!0;if(Q.indexOf("android")>-1)B.android=!0;if(Q.indexOf("linux")>-1&&!B.android)B.linux=!0;if(Q.startsWith("x11"))B.linux=!0;if(Q.startsWith("windows"))B.windows=!0;let C=null,I=0;for(let[E,K]of Object.entries(B))if(K===!0)I+=1,C=E;if(I!==1)console.error(`error, multiple platforms matched for: '${A}' -> '${JSON.stringify(B)}'`);return C}_readPlatformBlockFromUserAgent(A){let Q=A;if(typeof Q!=="string"){if(Q=navigator.userAgent||null,Q)return"windows"}const C=/\((.*?)\)/g.exec(Q);if(!C||C.length!==2)return null;let I=C[1];if(!I)throw new Error("error, unable to read the platformBlock from userAgent");return I=I.toLowerCase(),I}_renderAndroidSceneViewerIntentURL(A,Q,B,C,I={mode:"ar_preferred",version:"1.1",resizable:!1}){I.resizable=I.resizable??(A==="ar-models"?!1:!0);const E={model:this.renderModelURL(Q,B,C),sound:this.renderModelSoundURL(Q,B),currentPage:window.location.href,fallbackUrl:this.render3DFWUrl(Q,B)},K={prefix:`intent://arvr.google.com/scene-viewer/${I.version}?mode=${I.mode}&resizable=${I.resizable}`,suffix:`#Intent;scheme=https;package=com.google.android.googlequicksearchbox;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(E.fallbackUrl)};end;`};return`${K.prefix}&file=${encodeURIComponent(E.model)}${A===this.SERVICE_AR_ASSISTANT?`&sound=${encodeURIComponent(E.sound)}`:""}?link=${encodeURIComponent(E.currentPage)}&title=${K.suffix}`}renderModelURL(A,Q,B){if(!Q)Q=this.environment;return B==="ios"?`${this.MODEL_CDN_BASE_URLS[Q]}/USDZ/${A}.usdz`:`${this.MODEL_CDN_BASE_URLS[Q]}/GLB/${A}.glb`}renderModelSoundURL(A,Q){if(!Q)Q=this.environment;return`${this.MODEL_CDN_BASE_URLS[Q]}/MP3/${A}.mp3`}render3DFWUrl(A,Q){return`${this.THREE_DFW_PLAYER_BASE_URLS[Q]}${A}`}_getARLaunchOptions(A){const Q={allowsContentScaling:0,banner:{id:null,size:"small",config:null,options:null},callback:null,context:null};if(A==="ar-assistant")Q.allowsContentScaling=1;return Q}_renderIOSQuickLookURL(A,Q,B,C,I={allowsContentScaling:0,banner:{id:null,size:"small",config:null,options:null},callback:null,context:null}){if(A==="ar-assistant")I.allowsContentScaling=1;if(I.banner){if(I.banner.options);}const E=this.renderModelURL(Q,B,C),K=typeof I.allowsContentScaling!=="undefined";let J=E;if(K)J+="#";if(K)J+=`allowsContentScaling=${I.allowsContentScaling}&`;return J=J.replace(/&$/,""),J}}class u5 extends G0{constructor(A,Q,B,C,I,E,K,J,q,G=void 0){super(A,Q,B,C,I,E,K,J,q,!0,"ar-models");this.EKARID=G}isComponentValidToRender(){return!0}onClickHandler(){if(this.logEventLegacy("click","button"),E9())new p5(this.EKIdentities?.arid||this.EKARID,"dev","ar-models").launchAR(this)}}y([FA({attribute:!1})],u5.prototype,"EKARID",void 0),u5=y([sA("ek-all-in-one-default-service-button")],u5);class m5 extends _1{constructor(A,Q,B,C,I){super();this._popupTextColour=Q,this._props=A,this._qrContent=B,this.EKControlObject=C,this.EKARID=I}static styles=Q0`
    .ek-need-help-container {
      container-type: inline-size;
      container-name: need-help-container;
      display: flow;
      gap: 5px;
      height: 100%;
      width: 314px;
      color: var(--popup-text-colour);
      font-family: "Open Sans Condensed", sans-serif;
      text-align: center;
    }
    .need-help-content {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    .need-help-step-one {
      position: relative;
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 75%;
    }
    .need-help-step-one-mobile,
    .need-help-step-three,
    .need-help-step-two {
      position: relative;
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 75%;
    }
    .absolute {
      position: absolute;
      top: 0px;
      left: 0px;
    }
    img {
      max-width: 231px;
      width: 100%;
      border-radius: 0.5rem;
    }
    .need-help-title {
      text-align: center;
    }
    h1 {
      font-size: 22px;
    }
    p {
      font-size: 16px;
    }
    @media (max-width: 600px) {
      .need-help-step-three-mobile {
        position: relative;
      }
    }

    @media (min-width: 600px) {
      .need-help-step-one-mobile {
        display: none;
      }
      .need-help-step-two-mobile {
        display: none;
      }
      .need-help-step-three-mobile {
        display: none;
      }
      .need-help-step-one,
      .need-help-step-two,
      .need-help-step-three {
        display: flex;
      }
    }
    .ek-qr-code > img {
      min-width: 231px;
      min-height: 237px;
    }
  `;getQRCode(){if(this._qrContent!==null)return d`<div class="ek-qr-code">
        <img src="${this._qrContent}" alt="QR Code" />
      </div>`;return null}render(){return d`
      <style>
        :host {
          --popup-text-colour: ${this._popupTextColour};
        }
      </style>
      <div class="ek-need-help-container">
        <h1 class="need-help-title">${this._props?.needHelpGroup.needHelpPopupTitle}</h1>
        <div class="need-help-content">
          <div class="need-help-step-one">
            ${this.getQRCode()}
            <p>1] ${this._props?.needHelpGroup.needHelpPopupStepOneText}</p>
          </div>
          <div class="need-help-step-one-mobile">
            <p>1] ${this._props?.needHelpGroup.needHelpPopupStepTwoText}</p>
          </div>
          <div class="need-help-step-two">
            <img src="https://cdn.pointandplace.com/images/all-in-one/help/bg-wall.png"></img>
            <img class="absolute" src="https://cdn.pointandplace.com/images/all-in-one/help/loading.gif"></img>
            <p>2] ${this._props?.needHelpGroup.needHelpPopupStepTwoText}</p>
          </div>
          <div class="need-help-step-two-mobile">
            <img src="https://cdn.pointandplace.com/images/all-in-one/help/bg-wall.png"></img>
            <img class="absolute" src="https://cdn.pointandplace.com/images/all-in-one/help/loading.gif"></img>
            <p>1] ${this._props?.needHelpGroup.needHelpPopupStepTwoText}</p>
          </div>
          <div class="need-help-step-three">
            <img src="https://cdn.pointandplace.com/images/all-in-one/help/bg-wall.png"></img>
            <img class="absolute" src="https://cdn.pointandplace.com/images/all-in-one/help/interaction.gif"></img>
            <p>3] ${this._props?.needHelpGroup.needHelpPopupStepThreeText}</p>
          </div>
          <div class="need-help-step-three-mobile">
            <img src="https://cdn.pointandplace.com/images/all-in-one/help/bg-wall.png"></img>
            <img class="absolute" src="https://cdn.pointandplace.com/images/all-in-one/help/interaction.gif"></img>
            <p>2] ${this._props?.needHelpGroup.needHelpPopupStepThreeText}</p>
          </div>  
        </div>
      </div>
    `}}y([FA({attribute:!1})],m5.prototype,"_qrContent",void 0),y([FA({attribute:!1})],m5.prototype,"_props",void 0),y([FA({attribute:!1})],m5.prototype,"EKControlObject",void 0),y([FA({attribute:!1})],m5.prototype,"EKARID",void 0),y([FA({attribute:!1})],m5.prototype,"_popupTextColour",void 0),m5=y([sA("ek-all-in-one-need-help-content")],m5);class d5 extends G0{setPopupTextColour(A){this.popupTextColour=A}popupTextColour;constructor(A,Q,B,C,I,E,K,J,q){super(A,Q,B,C,I,E,K,J,q,!0);this.needHelpPopupIsVisible=!1}static styles=Q0`
    .container {
      display: flow;
      gap: 5px;
      height: 100%;
    }
    .ek-all-in-one-content-container {
      container-type: inline-size;
      width: 314px;
    }
    .horizontal-align {
      display: flex;
      justify-content: center;
      gap: 5px;
    }
    .right-column {
      grid-template-columns: repeat(3, minmax(0, 1fr));
      display: grid;
      row-gap: 7px;
      column-gap: 0px;
      height: 100%;
      justify-items: center;
    }
    .left-column {
      width: 100%;
      text-align: center;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }
    .ek-qr-code,
    .ek-need-help-btn,
    .popup-title {
      display: none;
    }
    .ek-need-help-btn-mobile,
    .popup-title-mobile {
      display: flex;
    }
    .ek-need-help-btn-mobile {
      cursor: pointer;
      text-decoration: underline;
      font-size: 14px;
      font-family: "Open Sans Condensed", sans-serif;
      text-align: center;
      margin-top: 5px;
      color: var(--popup-text-colour);
      justify-content: center;
    }
    h1 {
      font-size: 20px;
      text-align: center;
      line-height: 26px;
      font-family: "Open Sans Condensed", sans-serif;
      margin-top: 0;
      color: var(--popup-text-colour);
    }
    .ek-brand-image {
      width: 100%;
      max-width: 215px;
    }

    @media (min-width: 600px) {
      .container {
        grid-template-columns: 1fr auto;
        display: grid;
        gap: 5px;
        height: 100%;
      }
      .left-column {
        width: 215px;
        display: flex;
        flex-direction: column;
        gap: 5px;
        align-items: center;
        justify-content: space-around;
        color: var(--popup-text-colour);
        margin-right: 5px;
      }
      .right-column {
        display: flex;
        flex-direction: column;
        width: fit-content;
        height: 100%;
      }
      .ek-qr-code,
      .ek-qr-code > svg {
        width: 213px;
        height: 213px;
        border-radius: 0.5rem;
      }
      .ek-qr-code {
        display: flex;
      }
      .popup-title-mobile,
      .ek-need-help-btn-mobile {
        display: none;
      }
      .popup-title {
        display: block;
      }
      .ek-need-help-btn {
        cursor: pointer;
        text-decoration: underline;
        font-size: 14px;
        font-family: "Open Sans Condensed", sans-serif;
        color: var(--popup-text-colour);
        display: flex;
        margin-top: 5px;
      }
      .ek-qr-code > img {
        border-radius: 0.5rem;
      }
    }
  `;getQRCode(){if(this.EKResolvedData["datarequirement-arqrcode"])return d`<div class="ek-qr-code">
        <img
          src="${this.EKResolvedData["datarequirement-arqrcode"]}"
          alt="QR Code"
        />
      </div>`;return null}toggleNeedHelpPopoup(A){if(this.needHelpPopupIsVisible=!this.needHelpPopupIsVisible,this.needHelpPopupIsVisible===!0)this.dispatchEvent(new CustomEvent("ek-child-feature-selected",{bubbles:!0,composed:!0,detail:{children:new m5(A,this.EKProps.popupContentTextColour,this.EKResolvedData["datarequirement-arqrcode"],this.EKControlObject,this.EKIdentities?.arid)}}))}localisations(){return this.getLocalisations("AllInOneContentLocalisation")}isComponentValidToRender(){const A=this.localisations();if(A===null||!A)return!1;else if(!A.qrTitle||!A.qrTitleMobile)return!1;else if(!A.needHelpGroup||!A.needHelpGroup.needHelpPopupStepOneMobileText||!A.needHelpGroup.needHelpPopupStepOneText||!A.needHelpGroup.needHelpPopupStepThreeText||!A.needHelpGroup.needHelpPopupStepTwoText||!A.needHelpGroup.needHelpPopupTitle||!A.needHelpGroup.needHelpText||!A.needHelpGroup.needHelpTextMobile)return!1;return!0}getLeftColumn(A){if(this.getQRCode()===null)return null;return d`
      <div class="left-column">
        ${this.EKProps.showBrandImage===!0&&A.brandImage?d`
          <img class="ek-brand-image" src="${A.brandImage.url}"></img>
          `:""}
        <h1 class="popup-title">${A.qrTitle.toUpperCase()}</h1>
        <h1 class="popup-title-mobile">${A.qrTitleMobile.toUpperCase()}</h1>
        ${this.getQRCode()}
        <div
          @click="${()=>this.toggleNeedHelpPopoup(A)}"
          class="ek-need-help-btn"
        >
          ${A.needHelpGroup.needHelpText}
        </div>
      </div>
    `}render(){if(!this.isComponentValidToRender())return this.nullifyComponent("Missing localisations"),null;const A=this.localisations(),Q=this.getLeftColumn(A);if(Q!==null)return d`
        <style>
          .ek-all-in-one-content-container {
            --popup-text-colour: ${this.EKProps.popupContentTextColour};
          }
        </style>
        <div class="container ek-all-in-one-content-container">
          ${Q}
          ${this.EKChildren?.length?d` <div class="right-column">${this.EKChildren}</div>`:d` <div class="right-column"></div>`}
          <div
            @click="${()=>this.toggleNeedHelpPopoup(A)}"
            class="ek-need-help-btn-mobile"
          >
            ${A.needHelpGroup.needHelpTextMobile}
          </div>
        </div>
      `;else return d`
        <style>
          .ek-all-in-one-content-container {
            --popup-text-colour: ${this.EKProps.popupContentTextColour};
          }
        </style>
        <div class="container ek-all-in-one-content-container">
          ${this.EKChildren?.length?d` <div class="horizontal-align">${this.EKChildren}</div>`:d``}
          </div>
        </div>
      `}}y([KA()],d5.prototype,"needHelpPopupIsVisible",void 0),y([FA({attribute:!1})],d5.prototype,"EKProps",void 0),y([FA({attribute:!1})],d5.prototype,"EKResolvedData",void 0),d5=y([sA("ek-all-in-one-content")],d5);class c5 extends G0{constructor(A,Q,B,C,I,E,K,J,q){super(A,Q,B,C,I,E,K,J,q,!0)}static styles=Q0`
    .container {
      display: flow;
      gap: 5px;
      height: 100%;
    }
    .ek-all-in-one-content-container {
      container-type: inline-size;
      width: 314px;
    }
  `;isComponentValidToRender(){return!0}render(){return d`
      <div class="container ek-all-in-one-content-container">
        ${this.EKChildren}
      </div>
    `}}y([FA({attribute:!1})],c5.prototype,"EKProps",void 0),c5=y([sA("ek-all-in-one-content-direct")],c5);class l5 extends G0{constructor(){super(...arguments);this.service=this.EKChildren?this.EKChildren[0]?.tagName:"";this.legacyServiceNameMapping={"EK-UNISON":"intel-unison","EK-PC-ROOMS":"pc-rooms","EK-MODEL-VIEWER":"3dfw","EK-INTEL-12TH-GEN-CGI":"intel-12th-gen-cgi","EK-ALL-IN-ONE-DEFAULT-SERVICE-BUTTON":"ar-models"};this.legacyServiceName=this.legacyServiceNameMapping[this.service]||this.service}static styles=Q0`
    button {
      min-width: auto;
      width: 100%;
      min-height: 115px;
      display: flex;
      flex-direction: column;
      text-align: center;
      justify-content: center;
      align-items: center;
      font-size: 14px;
      line-height: 16px;
      border: none;
      color: #000000;
      background-color: #ffffff;
      border-radius: 8px;
      cursor: pointer;
    }

    span {
      font-family: "Open Sans Condensed", sans-serif;
      font-weight: 400;
      font-size: 14px;
    }

    .ek-all-in-one-feature-button-mobile {
      width: 90px;
      height: 116px;
    }
    .ek-all-in-one-feature-button {
      width: 90px;
      height: 116px;
    }
    .ek-all-in-one-feature-button-mobile,
    .ek-all-in-one-feature-button {
      padding: 10px;
    }
    .ek-all-in-one-feature-button > img {
      width: -webkit-fill-available;
      width: -moz-available;
      width: fill-available;
      width: 100%;
      max-width: 70px;
      max-height: 70px;
    }
    .ek-all-in-one-feature-button-mobile > img {
      width: -webkit-fill-available;
      width: -moz-available;
      width: fill-available;
      width: 100%;
      max-width: 70px;
      max-height: 70px;
    }
  `;_wotwGetServiceName(){let A=null;if(this.EKChildren&&this.EKChildren.length===1)A=this.EKChildren[0];if(A&&A.EKBlockType==="ContainerElement"&&A.EKChildren?.length===1)A=A.EKChildren[0];if(A){if(A.EKBlockType==="ARModelsElement")return"ar-models";else if(A.EKBlockType==="CrossmarkElement")return"intel-crossmark";else if(A.EKBlockType==="ULElement")return"intel-ul";else if(A.EKBlockType==="UnisonElement")return"intel-unison";else if(A.EKBlockType==="Intel12thGenCGIElement")return"intel-12th-gen-cgi";else if(A.EKBlockType==="PCRoomsElement")return"pc-rooms";else if(A.EKBlockType==="ModelViewerElement")return"3d-player"}return null}_onClick(){if(this.EKChildren&&this.EKChildren[0]){if(this.EKChildren[0].EKBlockType==="ModelViewerElement")this.EKChildren[0].logEventLegacy("click","button","3dfw"),this.EKChildren[0]._showModelViewer=!0;if(this.EKChildren[0].EKBlockType==="ContainerElement"){if(Array.isArray(this.EKChildren[0].EKChildren)&&this.EKChildren[0].EKChildren?.length)this.EKChildren[0].EKChildren[0]._showModelViewer=!0}}if(this.dispatchEvent(new CustomEvent("ek-child-feature-selected",{bubbles:!0,composed:!0,detail:{children:this.EKChildren}})),this.logEventLegacy("click","button",this._wotwGetServiceName()),this._wotwGetServiceName()==="3d-player")this.logEventLegacy("click","button","3dfw")}_onClickDefaultServiceButton(){this.logEventLegacy("click","button",this._wotwGetServiceName())}isMobileDevice(){let A=!1;try{const Q=navigator.userAgent;A=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(Q)}catch(Q){console.warn("[EKAllInOneContent] - isMobileDevice() ERROR:",Q)}return A}localisations(){return this.getLocalisations("AllInOneFeatureButtonLocalisation")}isComponentValidToRender(){const A=this.localisations();if(A===null||!A)return!1;else if(!A.buttonImage)return!1;return!0}render(){if(this.EKChildren&&this.EKChildren[0]&&this.EKChildren[0].EKBlockType==="ARModelsElement"&&!E9())return this.nullifyComponent("Cannot show ARModelsElement on desktop"),null;if(!this.isComponentValidToRender())return this.nullifyComponent("Missing localisations"),null;const A=this.localisations();return d`<button
      class="${this.isMobileDevice()===!0?"ek-all-in-one-feature-button-mobile":"ek-all-in-one-feature-button"}"
      @click="${this._onClick}"
    >
      <img
        src="${A.buttonImage.url}"
        alt="${A.buttonImage.altText}"
      />
      <span>${A.title?A.title:""}</span>
    </button>`}}y([FA({attribute:!1})],l5.prototype,"EKProps",void 0),y([KA()],l5.prototype,"service",void 0),y([KA()],l5.prototype,"legacyServiceNameMapping",void 0),y([KA()],l5.prototype,"legacyServiceName",void 0),l5=y([sA("ek-all-in-one-feature-button")],l5);class mB extends _1{constructor(){super(...arguments);this.visible=!1;this.zIndex=999}static styles=Q0`
    .backdrop {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: none;
      opacity: 0;
    }

    .backdrop.visible {
      opacity: 1;
      display: inherit;
    }
  `;render(){return d`
      <style>
        .backdrop {
          z-index: ${this.zIndex} !important;
        }
      </style>
      <div
        class="backdrop${this.visible===!0?" visible":""}"
        @click="${()=>{this.dispatchEvent(new CustomEvent("ek-modal-close-backdrop",{bubbles:!0,composed:!0}))}}"
      ></div>
    `}}y([FA({type:Boolean})],mB.prototype,"visible",void 0),y([FA({type:Number})],mB.prototype,"zIndex",void 0),mB=y([sA("ek-modal-backdrop")],mB);class dB extends _1{constructor(){super(...arguments);this.visible=!0;this.backgroundColour="#5E6DB3";this.foregroundColour="rgba(22,184,236,1)";this.popupCloseIconColour="white";this.noStyle=!1;this.maxWidth="none";this.zIndex=999}static styles=Q0`
    :host {
      --modal-background-color: white;
      --modal-border: 1px solid rgba(0, 0, 0, 0.2);
      --modal-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      --modal-border-radius: 5px;
      --close-button-size: 25px;
      --modal-padding: 10px;
    }

    .modal {
      background-color: var(--modal-background-color);
      background-color: #ffa33a;
      border: var(--modal-border);
      box-shadow: var(--modal-shadow);
      border-radius: var(--modal-border-radius);
      width: max-content;
      display: none;
      opacity: 0;
      transition: var(--modal-transition);
      padding: var(--modal-padding);
      padding-top: calc(var(--modal-padding) + var(--close-button-size));
    }

    .modal.visible {
      display: inherit;
      opacity: 1;
      border: 1px solid rgb(34, 34, 34);
    }

    .close-button {
      position: absolute;
      top: 5px;
      right: 10px;
      background-color: transparent;
      border: none;
      cursor: pointer;
      font-size: var(--close-button-size);
      line-height: var(--close-button-size);
      width: var(--close-button-size);
      height: var(--close-button-size);
      text-align: center;
      transition: color 0.2s;
      z-index: 999999;
    }

    .close-button svg {
      width: 25px;
      height: 25px;
    }

    .close-button:hover {
      color: #f44336; /* Red color for hover effect */
    }
  `;render(){return d`
      <div class="modal ${this.visible===!0?"visible":""}">
        <style>
          :host {
            z-index: ${this.zIndex} !important;
          }
          .modal {
            background-color: ${this.backgroundColour} !important;
            background: ${this.backgroundColour} !important;
            background: linear-gradient(
              0deg,
              ${this.backgroundColour} 0%,
              ${this.foregroundColour} 100%
            ) !important;
            max-width: ${this.maxWidth};
            ${this.noStyle&&"padding: 0px !important;"}
            ${this.noStyle&&"padding-top: 0px !important;"}
            ${this.noStyle&&"border-radius: 0px !important;"}
            ${this.noStyle&&"border: 0px !important;"}
          }
        </style>
        ${!this.noStyle?d`<button
              class="close-button"
              @click="${()=>{this.dispatchEvent(new CustomEvent("ek-modal-close-button",{bubbles:!0,composed:!0}))}}"
              aria-label="Close"
            >
              <svg
                id="svg-close"
                data-name="Layer 1"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
              >
                <defs>
                  <style>
                    .cls-1 {
                      fill: ${this.popupCloseIconColour};
                    }
                  </style>
                </defs>
                <path
                  class="cls-1"
                  d="M13.63,11.85l3.23-3.23A1,1,0,0,0,15.4,7.16l-3.23,3.23L8.94,7.16A1,1,0,0,0,7.48,8.62l3.23,3.23L7.48,15.08a1,1,0,0,0,1.46,1.46l3.23-3.23,3.23,3.23a1,1,0,0,0,1.46-1.46Z"
                ></path>
                <path
                  class="cls-1"
                  d="M12.17.47A11.38,11.38,0,1,0,23.55,11.85,11.39,11.39,0,0,0,12.17.47Zm0,20.86a9.48,9.48,0,1,1,9.48-9.48A9.5,9.5,0,0,1,12.17,21.33Z"
                ></path>
              </svg>
            </button>`:L0}
        <slot></slot>
      </div>
    `}}y([FA({type:Boolean})],dB.prototype,"visible",void 0),y([FA({type:String})],dB.prototype,"backgroundColour",void 0),y([FA({type:String})],dB.prototype,"foregroundColour",void 0),y([FA({type:String})],dB.prototype,"popupCloseIconColour",void 0),y([FA({type:Boolean})],dB.prototype,"noStyle",void 0),y([FA({type:String})],dB.prototype,"maxWidth",void 0),y([FA({type:Number})],dB.prototype,"zIndex",void 0),dB=y([sA("ek-modal-body")],dB);class cB extends _1{constructor(){super(...arguments);this.visible=!1;this.onMouseOutBody=()=>{};this.EKAPIComponentParent=null;this.placementStrategy=null;this.backgroundColour="#5E6DB3";this.foregroundColour="rgba(22,184,236,1)";this.popupCloseIconColour="white";this.noStyle=!1;this.maxWidth="none";this.backdropZIndex=999;this.bodyZIndex=999;this.modelContent=null}static styles=Q0`
    :host {
      --transition: visibility 0.25s, opacity 0.25s ease-in-out;
      --backdrop-z-index: 999;
    }
  `;modalIdentifierWithParentEKAPIComponent="modal";updated(A){if(super.updated(A),A.has("visible")){if(A.get("visible")!==this.visible)if(this.visible===!1)this.cleanupPlacement();else this.doPlacement()}}firstUpdated(){if(this.visible)this.doPlacement()}cleanupPlacement(){if(this.EKAPIComponentParent)this.EKAPIComponentParent.deregisterPlacementAndSelector(this.modalIdentifierWithParentEKAPIComponent)}doPlacement(){if(this.ekModalBody&&this.EKAPIComponentParent&&this.placementStrategy)this.EKAPIComponentParent.registerPlacementAndSelector(this.modalIdentifierWithParentEKAPIComponent,this.ekModalBody,this.EKAPIComponentParent,this.placementStrategy,!0)}render(){return d`
      <style>
        ek-modal-backdrop {
          --modal-backdrop-transition: var(--transition);
          --modal-backdrop-z-index: var(--backdrop-z-index);
        }
      </style>
      <ek-modal-backdrop
        .visible="${this.visible}"
        .zIndex="${this.backdropZIndex}"
      ></ek-modal-backdrop>
      <ek-modal-body
        .visible="${this.visible}"
        .backgroundColour="${this.backgroundColour}"
        .foregroundColour="${this.foregroundColour}"
        .popupCloseIconColour=${this.popupCloseIconColour}
        .noStyle=${this.noStyle}
        .maxWidth=${this.maxWidth}
        .zIndex="${this.bodyZIndex}"
        @mouseover="${()=>{this.dispatchEvent(new CustomEvent("ek-mouse-over-body",{bubbles:!0,composed:!0}))}}"
        @mouseout="${()=>{this.dispatchEvent(new CustomEvent("ek-mouse-out-body",{bubbles:!0,composed:!0}))}}"
      >
        ${this.modelContent}
      </ek-modal-body>
    `}}y([_0("ek-modal-body")],cB.prototype,"ekModalBody",void 0),y([FA({type:Boolean})],cB.prototype,"visible",void 0),y([FA({type:Function})],cB.prototype,"onMouseOutBody",void 0),y([FA({type:Object})],cB.prototype,"EKAPIComponentParent",void 0),y([FA({type:Object})],cB.prototype,"placementStrategy",void 0),y([FA({type:String})],cB.prototype,"backgroundColour",void 0),y([FA({type:String})],cB.prototype,"foregroundColour",void 0),y([FA({type:String})],cB.prototype,"popupCloseIconColour",void 0),y([FA({type:Boolean})],cB.prototype,"noStyle",void 0),y([FA({type:String})],cB.prototype,"maxWidth",void 0),y([FA({type:Number})],cB.prototype,"backdropZIndex",void 0),y([FA({type:Number})],cB.prototype,"bodyZIndex",void 0),y([FA({type:HTMLElement})],cB.prototype,"modelContent",void 0),cB=y([sA("ek-modal")],cB);class s5 extends G0{static styles=Q0`
    :host {
      --icon-size: 50px;
    }

    button {
      border: none;
      background-color: transparent;
      cursor: pointer;
      width: var(--icon-size);
      height: var(--icon-size);
      padding: 0;
      margin: 0;
    }
    img {
      width: 100%;
    }
  `;constructor(A,Q,B,C,I,E,K,J,q){super(A,Q,B,C,I,E,K,J,q,!0,"all-in-one");this._isVisible=!1;this._modalContent=null;this.addEventListener("ek-child-feature-selected",(G)=>{const Y=G.detail.children;if(Y&&Y.length>0){if(Y[0].tagName==="EK-ALL-IN-ONE-DEFAULT-SERVICE-BUTTON")return Y[0].onClickHandler()}this._modalContent=Y})}toggleVisible(){if(this._isVisible===!0)this.setHidden();else this.setVisible()}setVisible(){if(this._isVisible=!0,this.logEventLegacy("open","popup","all-in-one","meta"),this.logEventLegacy("click","button","ar-models"),this.logEventLegacy("open","popup","ar-models"),this.EKChildren&&this.EKChildren[0]){if(this.EKChildren[0].EKBlockType==="AllInOneContentElement")this.logEventLegacy("delivery","qr","ar-models")}this.triggerWOTWStartInteraction("modal","click")}setHidden(){this._isVisible=!1,this.logEventLegacy("close","popup","all-in-one","meta"),this.logEventLegacy("close","popup","ar-models"),this.triggerWOTWEndInteraction("modal")}_onButtonClicked(){this.toggleVisible(),this.logEventLegacy("click","button","all-in-one","meta")}_forceModelViewerToRerender(){if(this._modalContent!==null){if(Array.isArray(this._modalContent)&&this._modalContent[0].EKBlockType==="ModelViewerElement")this._modalContent[0]._showModelViewer=!1;if(Array.isArray(this._modalContent)&&this._modalContent[0].EKBlockType==="ContainerElement"){if(Array.isArray(this._modalContent[0].EKChildren)&&this._modalContent[0].EKChildren?.length)this._modalContent[0].EKChildren[0]._showModelViewer=!1}}}_onModalClosedButton(){if(this._modalContent!==null)this._forceModelViewerToRerender(),this._modalContent=null;else this.setHidden()}_onModalClosedBackdrop(){this.setHidden(),this._forceModelViewerToRerender(),this._modalContent=null}connectedCallback(){if(super.connectedCallback(),this.EKChildren){if(this.EKChildren&&this.EKChildren[0]&&this.EKChildren[0].EKChildren){for(let A of this.EKChildren[0].EKChildren)if(A.EKChildren&&A.EKChildren[0]&&A.EKChildren[0].EKBlockType==="ModelViewerElement")this.logEventLegacy("delivery","button","3dfw")}}window.addEventListener("ek-modal-close-button",()=>{this._onModalClosedButton()}),window.addEventListener("ek-child-feature-selected",(A)=>{const Q=A.detail.children;if(Q&&Q.length>0){if(Q[0].tagName==="EK-ALL-IN-ONE-DEFAULT-SERVICE-BUTTON")return Q[0].onClickHandler()}this._modalContent=Q})}localisations(){return this.getLocalisations("AllInOnePageButtonLocalisation")}isComponentValidToRender(){const A=this.localisations();if(A===null||!A)return!1;else if(!A.buttonImage)return!1;return!0}render(){if(!this.isComponentValidToRender())return this.nullifyComponent("Missing localisations"),null;const A=this.localisations();return d`
      ${this.getHostStyleOverride()} ${this.getCustomCSSStyles()}
      <style>
        button {
          ${this.EKProps.buttonSize?`--icon-size: ${this.EKProps.buttonSize}px;`:""}
        ek-modal {
          --background-color: #ffa33a;
        }
      </style>

      <ek-modal
        .placementStrategy="${this.EKProps.modal.modalPlacement}"
        .EKAPIComponentParent="${this}"
        .visible="${this._isVisible}"
        .backgroundColour=${this.EKProps.popupBackgroundColour||"#5E6DB3"}
        .foregroundColour=${this.EKProps.popupForegroundColour||"rgba(22,184,236,1)"}
        .popupCloseIconColour=${this.EKProps.popupCloseIconColour}
        @ek-modal-close-button="${this._onModalClosedButton}"
        @ek-modal-close-backdrop="${this._onModalClosedBackdrop}"
        .backdropZIndex=${this.EKProps.modal.modalBackdropZIndex}
        .bodyZIndex=${this.EKProps.modal.modalZIndex}
        .modelContent=${this._modalContent===null?this.EKChildren:this._modalContent}
      >
      </ek-modal>

      <button
        class="ek-all-in-one-button"
        style="${this.getElementStyleOverride()}"
        @click="${this._onButtonClicked}"
      >
        <img
          src="${A.buttonImage.url}"
          alt="${A.buttonImage.altText}"
        />
      </button>
    `}}y([FA({attribute:!1})],s5.prototype,"EKProps",void 0),y([KA()],s5.prototype,"_isVisible",void 0),y([KA()],s5.prototype,"_modalContent",void 0),y([_0("ek-modal")],s5.prototype,"ekModal",void 0),s5=y([sA("ek-all-in-one-page-button")],s5);class n5 extends G0{constructor(){super(...arguments)}isComponentValidToRender(){return!0}render(){return null}}n5=y([sA("ek-all-in-one-v2-content")],n5);class o5 extends G0{constructor(){super(...arguments)}isComponentValidToRender(){return!0}render(){return null}}o5=y([sA("ek-all-in-one-v2-feature-button")],o5);var Zg=d` <svg
  class="service-button"
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 101.89 101.89"
>
  <defs>
    <style>
        .cls-1-3dfw {
          fill: <!---->#ffffff !important;
        }
        .cls-2-3dfw {
          fill: #373a48 !important;
        }
        .cls-3-3dfw {
          fill: none !important;
        }
      <!---->
    </style>
  </defs>
  <rect
    class="cls-1-3dfw"
    x="5.05"
    y="5.35"
    width="90.71"
    height="90.71"
    rx="11.34"
  ></rect>
  <path
    class="cls-2-3dfw"
    d="M39.29,36c-3.29,1.21-6.75,5.21-3.47,8.4s9,4.9,15.83,4.9v2.93l9.22-5.13-9.08-5.21v2.83c-3.15,0-10.39-.72-12.89-3.28S37.94,37.1,39.29,36Z"
  ></path>
  <path
    class="cls-2-3dfw"
    d="M64.41,36c1.52,1.14,4.57,5.3-5.71,8C61.9,45.78,64,47,64,47,70.06,44.46,71.42,39.06,64.41,36Z"
  ></path>
  <path
    class="cls-2-3dfw"
    d="M47.23,36.88A2.79,2.79,0,0,1,47,38.17a2.63,2.63,0,0,1-.77.95A3.39,3.39,0,0,1,45,39.7a5.16,5.16,0,0,1-1.51.2,5.49,5.49,0,0,1-.93-.07,5.87,5.87,0,0,1-.77-.18,4,4,0,0,1-.55-.21,2,2,0,0,1-.29-.18.41.41,0,0,1-.1-.13,1.89,1.89,0,0,1-.06-.18,1.45,1.45,0,0,1,0-.25c0-.11,0-.23,0-.38a1.45,1.45,0,0,1,.06-.5.19.19,0,0,1,.18-.13.61.61,0,0,1,.26.1,4.51,4.51,0,0,0,.47.21,5.27,5.27,0,0,0,.67.22,3.35,3.35,0,0,0,.87.1,2.65,2.65,0,0,0,.73-.09,1.72,1.72,0,0,0,.54-.28,1.06,1.06,0,0,0,.33-.43A1.4,1.4,0,0,0,45,37a1.47,1.47,0,0,0-.13-.6,1.28,1.28,0,0,0-.4-.47,2.06,2.06,0,0,0-.65-.29,3.59,3.59,0,0,0-.93-.11H42l-.16,0a.25.25,0,0,1-.12-.11.7.7,0,0,1-.06-.23,3.79,3.79,0,0,1,0-.38,3.21,3.21,0,0,1,0-.36.53.53,0,0,1,.06-.21.23.23,0,0,1,.11-.11A.33.33,0,0,1,42,34h.85a2.57,2.57,0,0,0,.77-.1,1.53,1.53,0,0,0,.57-.29,1.28,1.28,0,0,0,.35-.45,1.45,1.45,0,0,0,.12-.59,1.4,1.4,0,0,0-.08-.47,1,1,0,0,0-.67-.64,1.79,1.79,0,0,0-.6-.1,2.19,2.19,0,0,0-.73.12,4,4,0,0,0-.62.26,4.71,4.71,0,0,0-.47.26.65.65,0,0,1-.28.12.17.17,0,0,1-.1,0A.16.16,0,0,1,41,32a.8.8,0,0,1,0-.22c0-.1,0-.22,0-.37a2.82,2.82,0,0,1,0-.31.66.66,0,0,1,0-.21.58.58,0,0,1,0-.14l.11-.13a2,2,0,0,1,.31-.21,3.27,3.27,0,0,1,.59-.28,4.65,4.65,0,0,1,.81-.23,5.21,5.21,0,0,1,1-.1,4.37,4.37,0,0,1,1.26.17,2.55,2.55,0,0,1,.91.48,2,2,0,0,1,.57.76,2.82,2.82,0,0,1,.19,1,2.71,2.71,0,0,1-.12.82,2,2,0,0,1-.33.69,1.88,1.88,0,0,1-.54.51,2.48,2.48,0,0,1-.76.31v0a2.66,2.66,0,0,1,.92.26,2.35,2.35,0,0,1,.69.5,2,2,0,0,1,.43.68A2.16,2.16,0,0,1,47.23,36.88Z"
  ></path>
  <path
    class="cls-2-3dfw"
    d="M55.22,36.48A4.06,4.06,0,0,1,55,37.85a3,3,0,0,1-.66,1.08,3,3,0,0,1-1.08.71,3.71,3.71,0,0,1-1.47.26,4.18,4.18,0,0,1-1.18-.15,2.57,2.57,0,0,1-.87-.45,2.13,2.13,0,0,1-.6-.7,3.54,3.54,0,0,1-.37-.93,5.55,5.55,0,0,1-.19-1.13q-.06-.6-.06-1.29c0-.38,0-.78.06-1.19a7.2,7.2,0,0,1,.22-1.23,5.11,5.11,0,0,1,.45-1.14,3.4,3.4,0,0,1,.76-1,3.51,3.51,0,0,1,1.12-.65,4.49,4.49,0,0,1,1.56-.24,3.64,3.64,0,0,1,.57,0l.54.08.42.12.23.12a.44.44,0,0,1,.08.11.5.5,0,0,1,0,.13.84.84,0,0,1,0,.18c0,.07,0,.15,0,.25s0,.29,0,.39a1.11,1.11,0,0,1,0,.24.21.21,0,0,1-.21.16.87.87,0,0,1-.23-.05l-.35-.11a3.8,3.8,0,0,0-.47-.1,4.06,4.06,0,0,0-.64,0,2.18,2.18,0,0,0-1,.23,1.9,1.9,0,0,0-.68.61,2.6,2.6,0,0,0-.38.9,4.7,4.7,0,0,0-.13,1.08l.38-.21a3.14,3.14,0,0,1,.46-.18l.55-.13a4,4,0,0,1,.62,0,3.4,3.4,0,0,1,1.26.2,2.15,2.15,0,0,1,.87.58,2.42,2.42,0,0,1,.49.91A4.33,4.33,0,0,1,55.22,36.48Zm-1.93.19a3.28,3.28,0,0,0-.07-.67,1.38,1.38,0,0,0-.22-.49.94.94,0,0,0-.4-.3,1.51,1.51,0,0,0-.6-.1,1.84,1.84,0,0,0-.41,0,2.6,2.6,0,0,0-.4.1l-.38.16-.33.2A8.29,8.29,0,0,0,50.57,37a2.93,2.93,0,0,0,.26.86,1,1,0,0,0,.45.44,1.32,1.32,0,0,0,.62.13,1.4,1.4,0,0,0,.6-.12,1.26,1.26,0,0,0,.43-.36,1.66,1.66,0,0,0,.27-.55A2.43,2.43,0,0,0,53.29,36.67Z"
  ></path>
  <path
    class="cls-2-3dfw"
    d="M63.07,34.83a10.3,10.3,0,0,1-.19,2.1,4.53,4.53,0,0,1-.61,1.6,2.79,2.79,0,0,1-1.11,1,3.61,3.61,0,0,1-1.66.35,3.48,3.48,0,0,1-1.65-.34,2.65,2.65,0,0,1-1-1A4.61,4.61,0,0,1,56.27,37a13.28,13.28,0,0,1-.15-2.1,10.3,10.3,0,0,1,.19-2.1,4.59,4.59,0,0,1,.62-1.61,2.81,2.81,0,0,1,1.1-1,4,4,0,0,1,3.31,0,2.54,2.54,0,0,1,1,1,4.53,4.53,0,0,1,.53,1.57A13.28,13.28,0,0,1,63.07,34.83Zm-2,.1c0-.46,0-.87,0-1.22a5.43,5.43,0,0,0-.12-.92,3.08,3.08,0,0,0-.19-.66,1.45,1.45,0,0,0-.28-.44,1.14,1.14,0,0,0-.38-.23,1.65,1.65,0,0,0-.46-.06,1.24,1.24,0,0,0-.74.21,1.51,1.51,0,0,0-.46.64,4.07,4.07,0,0,0-.23,1.07,13.07,13.07,0,0,0-.07,1.49,15.81,15.81,0,0,0,.08,1.71,4.05,4.05,0,0,0,.26,1.09,1.19,1.19,0,0,0,.46.56,1.26,1.26,0,0,0,.67.16,1.36,1.36,0,0,0,.51-.09,1.12,1.12,0,0,0,.4-.28,1.84,1.84,0,0,0,.28-.48,3.49,3.49,0,0,0,.18-.66,6.42,6.42,0,0,0,.1-.85C61.07,35.66,61.08,35.31,61.08,34.93Z"
  ></path>
  <path
    class="cls-2-3dfw"
    d="M68.2,31.26a1.88,1.88,0,0,1-.59,1.41,2,2,0,0,1-.67.43,2.34,2.34,0,0,1-.85.15,2.47,2.47,0,0,1-.84-.14,2.2,2.2,0,0,1-.65-.39,1.6,1.6,0,0,1-.41-.61,1.92,1.92,0,0,1-.14-.77,2,2,0,0,1,.15-.78,1.88,1.88,0,0,1,.44-.63,2.15,2.15,0,0,1,.66-.43,2.34,2.34,0,0,1,.85-.15,2.25,2.25,0,0,1,.84.14,1.91,1.91,0,0,1,.65.39,1.6,1.6,0,0,1,.41.61A1.92,1.92,0,0,1,68.2,31.26Zm-1.29,0a1,1,0,0,0-.06-.35,1,1,0,0,0-.17-.27.74.74,0,0,0-.25-.17.88.88,0,0,0-.33-.06.8.8,0,0,0-.3.06.64.64,0,0,0-.25.18.76.76,0,0,0-.16.26,1,1,0,0,0-.06.33.93.93,0,0,0,.06.34.88.88,0,0,0,.17.28.74.74,0,0,0,.25.17.71.71,0,0,0,.32.07.67.67,0,0,0,.31-.07.64.64,0,0,0,.25-.18.72.72,0,0,0,.16-.27A.87.87,0,0,0,66.91,31.31Z"
  ></path>
  <path
    class="cls-3-3dfw"
    d="M83.17,54.29V23.16a2.6,2.6,0,0,0-2.31-2.76H23.22a2.76,2.76,0,0,0-2.76,2.76V54.29Z"
  ></path>
  <path
    class="cls-3-3dfw"
    d="M45.3,68.2c1.45,2.77,3.07,6.93,1.84,10.1a.05.05,0,0,0,0,0h9.39s0,0,0,0c-1.24-3.16.38-7.33,1.83-10.1Z"
  ></path>
  <path
    class="cls-3-3dfw"
    d="M20.47,58v3.81a2.75,2.75,0,0,0,2.75,2.75h57.2a2.76,2.76,0,0,0,2.76-2.75V58Zm44.68,4.79a1.39,1.39,0,1,1,1.39-1.39A1.39,1.39,0,0,1,65.15,62.75Zm4.1,0a1.39,1.39,0,1,1,1.39-1.39A1.39,1.39,0,0,1,69.25,62.75Zm4.22,0a1.39,1.39,0,1,1,1.39-1.39A1.39,1.39,0,0,1,73.47,62.75Z"
  ></path>
  <path
    class="cls-2-3dfw"
    d="M80.86,16.73H23.22a6.44,6.44,0,0,0-6.43,6.43V61.77a6.44,6.44,0,0,0,6.43,6.43H41.09c1.46,2.37,3.46,6.62,2.62,8.77-.17.43-.57,1-1.89,1.37H35.38a1.84,1.84,0,0,0,0,3.68H68.24a1.84,1.84,0,1,0,0-3.68H61.81C60.49,78,60.09,77.4,59.92,77c-.82-2.09,1-6.17,2.63-8.76H80.41a6.45,6.45,0,0,0,6.44-6.43V23.16A6.23,6.23,0,0,0,80.86,16.73ZM23.22,20.4H80.86a2.6,2.6,0,0,1,2.31,2.76V54.29H20.47V23.16A2.75,2.75,0,0,1,23.22,20.4ZM56.5,78.3s0,0,0,0H47.12a.05.05,0,0,1,0,0c1.23-3.16-.39-7.33-1.84-10.1h13C56.89,71,55.26,75.13,56.5,78.3ZM80.41,64.52H23.22a2.76,2.76,0,0,1-2.76-2.75V58H83.17v3.81A2.75,2.75,0,0,1,80.41,64.52Z"
  ></path>
  <circle class="cls-2-3dfw" cx="73.47" cy="61.36" r="1.39"></circle>
  <circle class="cls-2-3dfw" cx="69.25" cy="61.36" r="1.39"></circle>
  <circle class="cls-2-3dfw" cx="65.15" cy="61.36" r="1.39"></circle>
</svg>`,Xg=d`<svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 500 500"
>
  <path
    d="M480,0H20A20,20,0,0,0,0,20V480a20,20,0,0,0,20,20H480a20,20,0,0,0,20-20V20A20,20,0,0,0,480,0Zm5,20V480a5.87,5.87,0,0,1-.09.94l-84.05-84.23V316.2c0-12.62-8.27-23.42-19.86-27.66V124.19L485,20ZM15,480V20L119,124.19V287.38c-13.65,3-23.86,14.79-23.86,28.82v84.51l-80,80.23A5.87,5.87,0,0,1,15,480ZM374,126V286.87a31.41,31.41,0,0,0-3.9-.25H126V126ZM95.14,410.63V432.1h15V316.2c0-8,7.07-14.58,15.76-14.58H370.1c8.69,0,15.76,6.54,15.76,14.58V432.65h15v-26L479.07,485H20.93ZM480,15h.07L376.29,119H123.71L19.94,15H480Z"
  ></path>
  <rect x="166" y="207" width="100" height="60" rx="6"></rect>
  <rect x="303" y="252" width="25" height="30" rx="4"></rect>
  <rect x="332" y="267" width="14" height="15" rx="4"></rect>
  <path d="M166,282H266a5,5,0,0,0,0-10H166a5,5,0,0,0,0,10Z"></path>
</svg>`,Fg=d`<svg
  xmlns="http://www.w3.org/2000/svg"
  id="Layer_2"
  data-name="Layer 2"
  viewBox="0 0 183.25 182.47"
>
  <defs>
    <style>
        #Layer_2 {
          padding: 0.25rem 0.75rem 0.25rem 0.75rem;
        }
        .eky-svg-intel-unison {
          fill: <!---->#000000;
        }
      <!---->
    </style>
  </defs>
  <g id="Layer_2-2" data-name="Layer 2">
    <path
      d="m90.03 181.57-83.8-48.15A12.391 12.391 0 0 1 0 122.67V58.02c0-4.25 4.6-6.92 8.31-4.83l84.97 47.96c4.15 2.34 6.71 6.73 6.71 11.48v63.19c0 5.1-5.54 8.29-9.97 5.74ZM142.21 109.74l-58.66-33.7a8.674 8.674 0 0 1-4.36-7.52V23.26c0-2.98 3.22-4.85 5.82-3.38l59.48 33.57c2.9 1.64 4.7 4.71 4.7 8.04v44.23c0 3.57-3.88 5.8-6.98 4.02ZM178.77 57.6l-37.71-21.48a5.517 5.517 0 0 1-2.8-4.8V2.48c0-1.9 2.07-3.09 3.74-2.15l38.24 21.4c1.87 1.05 3.02 3 3.02 5.12v28.19c0 2.27-2.49 3.7-4.49 2.56Z"
      class="eky-svg-intel-unison"
    ></path>
  </g>
</svg>`;var bq=(A,Q)=>{if(!A||!Q)A="#0CB7EB",Q="#9747FF";return d`
    <svg
      id="ek-spinning-cube"
      xmlns="http://www.w3.org/2000/svg"
      width="20"
      height="20"
      viewBox="0 0 17 19"
      fill="black"
    >
      <path
        d="M7.08823 18.4521L1.00535 14.9984C0.686823 14.8193 0.439555 14.5792 0.26355 14.278C0.0875248 13.9769 -0.000488281 13.6472 -0.000488281 13.2891V6.38858C-0.000488281 6.03044 0.0875248 5.70079 0.26355 5.39962C0.439555 5.09847 0.686823 4.85836 1.00535 4.67929L7.08823 1.22552C7.40799 1.04913 7.74457 0.960938 8.09799 0.960938C8.45142 0.960938 8.78539 1.04913 9.09991 1.22552L15.1828 4.67929C15.5013 4.85836 15.7486 5.09847 15.9246 5.39962C16.1006 5.70079 16.1886 6.03044 16.1886 6.38858V13.2891C16.1886 13.6472 16.1006 13.9769 15.9246 14.278C15.7486 14.5792 15.5013 14.8193 15.1828 14.9984L9.09991 18.4521C8.78016 18.6285 8.44357 18.7168 8.09015 18.7168C7.73673 18.7168 7.40276 18.6285 7.08823 18.4521ZM7.47141 17.2673V10.1678L1.24483 6.71173V13.2961C1.24483 13.421 1.27676 13.538 1.34062 13.6473C1.40449 13.7566 1.50029 13.8503 1.62801 13.9283L7.47141 17.2673ZM8.71673 17.2673L14.5601 13.9283C14.6879 13.8503 14.7837 13.7566 14.8475 13.6473C14.9114 13.538 14.9433 13.421 14.9433 13.2961V6.71173L8.71673 10.1678V17.2673ZM8.09407 9.11413L14.3207 5.6112L8.47726 2.31901C8.34953 2.24096 8.2218 2.20194 8.09407 2.20194C7.96634 2.20194 7.83862 2.24096 7.71089 2.31901L1.86749 5.6112L8.09407 9.11413Z"
        fill="url(#paint0_linear_2014_570)"
      />
      <defs>
        <linearGradient
          id="paint0_linear_2014_570"
          x1="8.09407"
          y1="0.960937"
          x2="8.09407"
          y2="18.7168"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
      </defs>
    </svg>
  `},pq=(A,Q)=>{if(!A||!Q)A="#0CB7EB",Q="#9747FF";return d`
    <svg
      id="ek-flipping-square"
      xmlns="http://www.w3.org/2000/svg"
      width="30"
      height="30"
      viewBox="0 0 26 27"
      fill="none"
    >
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M0 4.06862L0 6.16094H1.3V4.06095C1.3 3.55094 1.4725 3.12343 1.8175 2.77843C2.1625 2.43344 2.59 2.26094 3.10001 2.26094H5.2V0.960938L3.10001 0.960938C2.23889 0.960938 1.50694 1.26093 0.90415 1.86093C0.301383 2.46092 0 3.19682 0 4.06862ZM0.89999 26.0568C1.49998 26.6596 2.23588 26.9609 3.10768 26.9609H5.2V25.6609H3.10001C2.59 25.6609 2.1625 25.4884 1.8175 25.1434C1.4725 24.7984 1.3 24.3709 1.3 23.8609V21.7609H0L0 23.8609C0 24.722 0.299997 25.454 0.89999 26.0568ZM24.7 4.06095V6.16094H26V4.06095C26 3.19983 25.7 2.46788 25.1 1.86509C24.5 1.26232 23.7641 0.960938 22.8923 0.960938L20.8 0.960938V2.26094H22.9C23.41 2.26094 23.8375 2.43344 24.1825 2.77843C24.5275 3.12343 24.7 3.55094 24.7 4.06095ZM20.7998 26.961V25.661H22.8998C23.4098 25.661 23.8373 25.4885 24.1823 25.1435C24.5273 24.7985 24.6998 24.371 24.6998 23.8609V21.761H25.9998V23.8533C25.9998 24.725 25.6985 25.4609 25.0957 26.061C24.4929 26.661 23.761 26.961 22.8998 26.961H20.7998Z"
        fill="url(#paint0_linear_2014_565)"
      />
      <defs>
        <linearGradient
          id="paint0_linear_2014_565"
          x1="13"
          y1="0.960938"
          x2="13"
          y2="26.961"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
      </defs>
    </svg>
  `},uq=(A,Q)=>{if(!A||!Q)A="#0CB7EB",Q="#9747FF";return d`
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="20"
      height="20"
      viewBox="0 0 15 11"
      fill="none"
    >
      <path
        d="M7.59445 9.89184C7.42183 9.89184 7.27667 9.82955 7.15897 9.70497C7.04127 9.58039 6.98242 9.42674 6.98242 9.24402V0.809927C6.98242 0.618903 7.04127 0.465255 7.15897 0.34898C7.27667 0.224399 7.42183 0.162109 7.59445 0.162109H9.72479C10.3996 0.162109 11.0116 0.282537 11.5609 0.523392C12.118 0.755942 12.6006 1.09231 13.0086 1.53249C13.4166 1.96437 13.7305 2.47515 13.9502 3.06483C14.1699 3.65451 14.2797 4.30648 14.2797 5.02074C14.2797 5.73501 14.1699 6.39113 13.9502 6.98911C13.7305 7.5788 13.4166 8.09373 13.0086 8.53391C12.6006 8.96579 12.118 9.30216 11.5609 9.54301C11.0116 9.77557 10.3996 9.89184 9.72479 9.89184H7.59445ZM8.20648 8.7457H9.72479C10.3839 8.7457 10.9645 8.5879 11.4667 8.27229C11.9768 7.94838 12.3769 7.5082 12.6673 6.95174C12.9576 6.38698 13.1027 5.74331 13.1027 5.02074C13.1027 4.28987 12.9576 3.64621 12.6673 3.08975C12.3769 2.53329 11.9768 2.09726 11.4667 1.78165C10.9645 1.46605 10.3839 1.30825 9.72479 1.30825H8.20648V8.7457Z"
        fill="url(#paint0_linear_2014_390)"
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M14.1022 7.04579C13.8754 7.65435 13.5507 8.18773 13.1276 8.64421L13.1265 8.64533C12.703 9.09356 12.2021 9.44252 11.6253 9.69191L11.6242 9.6924C11.0524 9.93446 10.4185 10.0541 9.72485 10.0541H7.59451C7.37764 10.0541 7.18973 9.97366 7.04115 9.81639C6.89301 9.65958 6.82031 9.4652 6.82031 9.24407V0.809979C6.82031 0.583868 6.89108 0.386892 7.04306 0.235653C7.19134 0.0797122 7.37857 0 7.59451 0H9.72485C10.4187 0 11.0529 0.123822 11.6247 0.374356C12.2023 0.615679 12.7036 0.965065 13.127 1.42176C13.5506 1.87022 13.8754 2.39972 14.1022 3.00827C14.3295 3.61834 14.4419 4.28979 14.4419 5.0208C14.4419 5.75185 14.3292 6.42785 14.1022 7.04579ZM13.0086 1.53255C12.6006 1.09236 12.118 0.755995 11.5609 0.523445C11.0117 0.282589 10.3996 0.162162 9.72485 0.162162H7.59451C7.42188 0.162162 7.27672 0.224452 7.15902 0.349032C7.04132 0.465307 6.98247 0.618956 6.98247 0.809979V9.24407C6.98247 9.42679 7.04132 9.58044 7.15902 9.70502C7.27672 9.8296 7.42188 9.89189 7.59451 9.89189H9.72485C10.3996 9.89189 11.0117 9.77562 11.5609 9.54307C12.118 9.30221 12.6006 8.96585 13.0086 8.53397C13.4167 8.09378 13.7305 7.57885 13.9502 6.98917C14.1699 6.39118 14.2798 5.73506 14.2798 5.0208C14.2798 4.30654 14.1699 3.65457 13.9502 3.06489C13.7305 2.4752 13.4167 1.96443 13.0086 1.53255ZM11.3805 1.91901C10.907 1.62142 10.3569 1.47046 9.72485 1.47046H8.3687V8.58359H9.72485C10.3568 8.58359 10.9067 8.43272 11.3801 8.13528C11.8649 7.82736 12.2457 7.40915 12.5233 6.87725C12.8001 6.33851 12.9406 5.72099 12.9406 5.0208C12.9406 4.31174 12.7999 3.69458 12.5235 3.16481C12.246 2.63293 11.8655 2.21915 11.3815 1.9196L11.3805 1.91901ZM8.20654 8.74575V1.3083H9.72485C10.384 1.3083 10.9646 1.4661 11.4668 1.78171C11.9768 2.09731 12.377 2.53334 12.6673 3.0898C12.9576 3.64626 13.1028 4.28993 13.1028 5.0208C13.1028 5.74336 12.9576 6.38703 12.6673 6.95179C12.377 7.50825 11.9768 7.94844 11.4668 8.27235C10.9646 8.58795 10.384 8.74575 9.72485 8.74575H8.20654Z"
        fill="url(#paint1_linear_2014_390)"
      />
      <path
        d="M3.41924 9.89184C2.85053 9.89184 2.34628 9.76327 1.90648 9.50613C1.46668 9.2407 1.12167 8.88403 0.871439 8.43611C0.621209 7.9799 0.496094 7.46978 0.496094 6.90573C0.496094 6.71495 0.545382 6.5615 0.643957 6.44537C0.750115 6.32095 0.87523 6.25874 1.0193 6.25874C1.17096 6.25874 1.29607 6.32095 1.39465 6.44537C1.49322 6.5615 1.54251 6.71495 1.54251 6.90573C1.54251 7.24582 1.62213 7.56102 1.78137 7.85133C1.9406 8.13335 2.15671 8.36146 2.42969 8.53565C2.70267 8.70154 3.00977 8.78449 3.35099 8.78449C3.85145 8.78449 4.25334 8.63519 4.55665 8.33658C4.86754 8.02967 5.02299 7.60249 5.02299 7.05504C5.02299 6.70666 4.95474 6.39561 4.81825 6.12188C4.68176 5.83986 4.49599 5.6159 4.26092 5.45001C4.02586 5.28411 3.76046 5.20116 3.46473 5.20116C3.29791 5.20116 3.15763 5.13895 3.04389 5.01453C2.93773 4.89011 2.88466 4.73666 2.88466 4.55417C2.88466 4.37169 2.93773 4.22238 3.04389 4.10626C3.15763 3.98184 3.29791 3.91963 3.46473 3.91963C3.67705 3.91963 3.88178 3.86156 4.07894 3.74544C4.27609 3.62102 4.43912 3.45927 4.56802 3.26019C4.69693 3.05283 4.76138 2.82057 4.76138 2.56344C4.76138 2.19847 4.64006 1.89156 4.39741 1.64272C4.15476 1.39388 3.84387 1.26946 3.46473 1.26946C3.17659 1.26946 2.91119 1.33167 2.66855 1.45609C2.43348 1.58051 2.24391 1.7464 2.09984 1.95377C1.96335 2.16114 1.89511 2.39339 1.89511 2.65053C1.89511 2.84131 1.84582 3.00306 1.74724 3.13577C1.64867 3.26019 1.52355 3.32241 1.3719 3.32241C1.22783 3.32241 1.10271 3.26434 0.996554 3.14822C0.897978 3.02379 0.848691 2.87034 0.848691 2.68786C0.848691 2.20676 0.962432 1.77544 1.18991 1.39388C1.4174 1.01232 1.72829 0.71371 2.12259 0.498046C2.51689 0.274088 2.95669 0.162109 3.44199 0.162109C3.88937 0.162109 4.29125 0.269941 4.64764 0.485604C5.01161 0.692973 5.29596 0.979141 5.5007 1.34411C5.71301 1.70078 5.81917 2.10723 5.81917 2.56344C5.81917 2.88693 5.75093 3.1731 5.61444 3.42194C5.48553 3.67078 5.31871 3.88645 5.11398 4.06893C4.90925 4.24312 4.69314 4.38828 4.46566 4.50441C4.86754 4.65371 5.1936 4.85693 5.44383 5.11407C5.69406 5.36291 5.87604 5.65323 5.98979 5.98502C6.11111 6.31681 6.17177 6.67763 6.17177 7.06748C6.17177 7.60664 6.04666 8.09188 5.79642 8.52321C5.54619 8.94624 5.21255 9.28218 4.7955 9.53102C4.37845 9.77157 3.9197 9.89184 3.41924 9.89184Z"
        fill="url(#paint2_linear_2014_390)"
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M1.82225 9.64504L1.82226 9.64502C1.35836 9.36505 0.993424 8.9878 0.729435 8.51525L0.72882 8.51415C0.464398 8.03206 0.333496 7.49474 0.333496 6.90579C0.333496 6.68657 0.390655 6.49274 0.519895 6.34049L0.520159 6.34017L0.52016 6.34017C0.652471 6.1851 0.820593 6.09663 1.01887 6.09663C1.22177 6.09663 1.39214 6.18282 1.51962 6.3426C1.6476 6.49452 1.70424 6.68758 1.70424 6.90579C1.70424 7.21903 1.77719 7.50702 1.92263 7.77253C2.06847 8.0305 2.26538 8.23843 2.51496 8.39803C2.76045 8.54684 3.03756 8.62238 3.35056 8.62238C3.81642 8.62238 4.17465 8.48465 4.44233 8.22118C4.71495 7.95204 4.86039 7.57076 4.86039 7.05509C4.86039 6.72832 4.79651 6.4426 4.67269 6.1943L4.67184 6.19258L4.67185 6.19258C4.54623 5.93302 4.37764 5.73122 4.16698 5.58255C3.96008 5.43653 3.72754 5.36338 3.4643 5.36338C3.2514 5.36338 3.06786 5.28162 2.92377 5.124L2.92002 5.1199L2.9201 5.11984C2.78596 4.96263 2.72206 4.77052 2.72206 4.55423C2.72206 4.33815 2.78596 4.14765 2.92377 3.9969C3.06786 3.83927 3.2514 3.75752 3.4643 3.75752C3.64469 3.75752 3.82054 3.70878 3.99407 3.60702C4.16962 3.49581 4.31489 3.35177 4.43065 3.17337C4.5422 2.99341 4.59878 2.79152 4.59878 2.56349C4.59878 2.23847 4.49239 1.9729 4.28087 1.75598C4.07168 1.54145 3.80411 1.43167 3.4643 1.43167C3.20076 1.43167 2.96124 1.48826 2.74304 1.59996C2.53069 1.71253 2.36193 1.86075 2.23375 2.04467C2.11607 2.22415 2.05683 2.42465 2.05683 2.65058C2.05683 2.87062 1.99943 3.06768 1.87699 3.23252L1.87398 3.23658L1.87391 3.23653C1.74624 3.39767 1.57527 3.48462 1.37146 3.48462C1.17738 3.48462 1.01015 3.40396 0.876431 3.25768L0.868696 3.24922L0.869014 3.24897C0.744411 3.0917 0.686093 2.90122 0.686093 2.68791C0.686093 2.18009 0.806503 1.71963 1.05019 1.31089C1.29247 0.904516 1.62434 0.585796 2.0432 0.356451C2.46333 0.118084 2.93067 0 3.44155 0C3.9155 0 4.3462 0.114431 4.72933 0.345813C5.11738 0.567324 5.42193 0.873798 5.64067 1.26301C5.86866 1.64678 5.9809 2.08181 5.9809 2.56349C5.9809 2.90968 5.90782 3.22278 5.75711 3.49828C5.61943 3.76358 5.4408 3.99452 5.22144 4.19004L5.21865 4.19253L5.21862 4.19249C5.09275 4.29959 4.96247 4.39642 4.82778 4.48287C5.11307 4.62161 5.35748 4.79356 5.55869 5.00008C5.82555 5.26574 6.02046 5.57653 6.14221 5.93091C6.27032 6.28187 6.3335 6.66124 6.3335 7.06753C6.3335 7.63287 6.20198 8.14659 5.93626 8.60463L5.93557 8.60582C5.67171 9.05188 5.31877 9.40743 4.87816 9.67033L4.8761 9.67156L4.87609 9.67154C4.43341 9.92687 3.94653 10.0541 3.4188 10.0541C2.82476 10.0541 2.29163 9.91947 1.8242 9.64618L1.82225 9.64504ZM5.98935 5.98507C5.87561 5.65328 5.69362 5.36296 5.44339 5.11412C5.23495 4.89993 4.9739 4.72315 4.66024 4.58378C4.59735 4.55584 4.53234 4.5294 4.46522 4.50446C4.52745 4.47269 4.58884 4.43875 4.64937 4.40263C4.8101 4.30673 4.96482 4.19552 5.11354 4.06898C5.31828 3.8865 5.4851 3.67084 5.614 3.422C5.75049 3.17315 5.81874 2.88698 5.81874 2.56349C5.81874 2.10728 5.71258 1.70084 5.50026 1.34416C5.29553 0.979194 5.01118 0.693026 4.6472 0.485657C4.29082 0.269994 3.88893 0.162162 3.44155 0.162162C2.95626 0.162162 2.51646 0.274141 2.12215 0.498099C1.72785 0.713762 1.41696 1.01237 1.18948 1.39393C0.961996 1.77549 0.848255 2.20682 0.848255 2.68791C0.848255 2.87039 0.897543 3.02385 0.996119 3.14827C1.10228 3.26439 1.22739 3.32246 1.37146 3.32246C1.52312 3.32246 1.64823 3.26025 1.74681 3.13583C1.84538 3.00311 1.89467 2.84136 1.89467 2.65058C1.89467 2.39345 1.96292 2.16119 2.09941 1.95383C2.24348 1.74646 2.43305 1.58056 2.66811 1.45614C2.91076 1.33172 3.17615 1.26951 3.4643 1.26951C3.84344 1.26951 4.15433 1.39393 4.39697 1.64277C4.63962 1.89162 4.76095 2.19852 4.76095 2.56349C4.76095 2.82063 4.69649 3.05288 4.56759 3.26025C4.43868 3.45932 4.27565 3.62107 4.0785 3.74549C3.88135 3.86162 3.67662 3.91968 3.4643 3.91968C3.29748 3.91968 3.1572 3.98189 3.04346 4.10631C2.9373 4.22244 2.88422 4.37174 2.88422 4.55423C2.88422 4.73671 2.9373 4.89016 3.04346 5.01459C3.1572 5.13901 3.29748 5.20122 3.4643 5.20122C3.76003 5.20122 4.02542 5.28416 4.26049 5.45006C4.49555 5.61595 4.68133 5.83991 4.81782 6.12193C4.95431 6.39566 5.02255 6.70671 5.02255 7.05509C5.02255 7.60254 4.8671 8.02972 4.55621 8.33663C4.2529 8.63524 3.85102 8.78454 3.35056 8.78454C3.00933 8.78454 2.70223 8.7016 2.42926 8.5357C2.15628 8.36151 1.94017 8.13341 1.78093 7.85139C1.62169 7.56107 1.54208 7.24587 1.54208 6.90579C1.54208 6.71501 1.49279 6.56155 1.39421 6.44543C1.29564 6.32101 1.17052 6.2588 1.01887 6.2588C0.874794 6.2588 0.74968 6.32101 0.643522 6.44543C0.544946 6.56155 0.495658 6.71501 0.495658 6.90579C0.495658 7.46983 0.620774 7.97995 0.871004 8.43617C1.12123 8.88408 1.46625 9.24076 1.90605 9.50619C2.34585 9.76332 2.8501 9.89189 3.4188 9.89189C3.91926 9.89189 4.37802 9.77162 4.79507 9.53107C5.21212 9.28223 5.54576 8.94629 5.79599 8.52326C6.04622 8.09193 6.17133 7.60669 6.17133 7.06753C6.17133 6.67768 6.11067 6.31686 5.98935 5.98507Z"
        fill="url(#paint3_linear_2014_390)"
      />
      <defs>
        <linearGradient
          id="paint0_linear_2014_390"
          x1="10.6311"
          y1="0.162109"
          x2="10.6311"
          y2="9.89184"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
        <linearGradient
          id="paint1_linear_2014_390"
          x1="10.6311"
          y1="0"
          x2="10.6311"
          y2="10.0541"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
        <linearGradient
          id="paint2_linear_2014_390"
          x1="3.33393"
          y1="0.162109"
          x2="3.33393"
          y2="9.89184"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
        <linearGradient
          id="paint3_linear_2014_390"
          x1="3.3335"
          y1="0"
          x2="3.3335"
          y2="10.0541"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
      </defs>
    </svg>
  `},mq=(A,Q)=>{if(!A||!Q)A="#0CB7EB",Q="#9747FF";return d`
    <svg
      id="ek-model-viewer-border-icon"
      xmlns="http://www.w3.org/2000/svg"
      width="30"
      height="30"
      viewBox="0 0 30 30"
      fill="none"
    >
      <path
        d="M15 30C12.925 30 10.975 29.6063 9.15001 28.8188C7.32501 28.0313 5.73751 26.9625 4.3875 25.6125C3.0375 24.2625 1.96875 22.675 1.18125 20.85C0.393754 19.025 2.98549e-06 17.075 2.62268e-06 15L1.66667 15C1.66667 18.4722 2.82853 21.4733 5.15225 24.0032C7.47598 26.5331 10.3675 27.9573 13.8269 28.2756L11.218 25.6667L12.3974 24.4872L17.609 29.6987C17.1881 29.8056 16.7548 29.8825 16.3093 29.9295C15.8638 29.9765 15.4274 30 15 30ZM28.3333 15C28.3333 11.5278 27.1715 8.5267 24.8478 5.99679C22.524 3.46687 19.6325 2.04273 16.1731 1.72437L18.782 4.33333L17.6026 5.51283L12.391 0.301289C12.8119 0.194428 13.2452 0.117498 13.6907 0.0704977C14.1362 0.0234976 14.5726 -2.54796e-06 15 -2.62268e-06C17.075 -2.98549e-06 19.025 0.393747 20.85 1.18125C22.675 1.96875 24.2625 3.0375 25.6125 4.3875C26.9625 5.73749 28.0313 7.325 28.8188 9.15C29.6063 10.975 30 12.925 30 15L28.3333 15Z"
        fill="url(#paint0_linear_2014_389)"
      />
      <defs>
        <linearGradient
          id="paint0_linear_2014_389"
          x1="15"
          y1="-2.62268e-06"
          x2="15"
          y2="30"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
      </defs>
    </svg>
  `},lB=(A,Q)=>{if(!A||!Q)A="#0CB7EB",Q="#9747FF";return d`
    <svg
      id="ek-unison-icon"
      xmlns="http://www.w3.org/2000/svg"
      width="26"
      height="26"
      viewBox="0 0 26 26"
      fill="none"
    >
      <path
        d="M18.0557 5.41711V0.722656L25.2779 4.15322V8.66711L18.0557 5.41711Z"
        fill="white"
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M19.1163 1.70168L24.4189 4.42641C24.4188 4.42635 24.419 4.42647 24.4189 4.42641C24.4277 4.43101 24.4449 4.4419 24.4662 4.46153C24.4874 4.48118 24.5079 4.50501 24.5249 4.5303C24.5416 4.55511 24.5511 4.57548 24.5556 4.58772V7.58446L19.253 4.85973C19.2529 4.85966 19.2531 4.8598 19.253 4.85973C19.2442 4.85512 19.227 4.84421 19.2058 4.82461C19.1845 4.80495 19.164 4.78112 19.147 4.75583C19.1303 4.73103 19.1208 4.71066 19.1163 4.69842V1.70168ZM18.2523 0.0896183C18.6183 -0.075547 18.9911 0.0138757 19.2503 0.146547L19.2513 0.147075L25.0824 3.14336C25.3521 3.2828 25.5707 3.49729 25.7229 3.72338C25.8714 3.94373 26 4.24041 26 4.56744V8.25665C26 8.61309 25.8316 9.01067 25.4197 9.19652C25.0536 9.36168 24.6808 9.27226 24.4216 9.13959L18.5912 6.14363L18.5895 6.14278C18.3199 6.00333 18.1013 5.78885 17.949 5.56276C17.8006 5.34241 17.6719 5.04573 17.6719 4.71869V1.02948C17.6719 0.673043 17.8403 0.275463 18.2523 0.0896183Z"
        fill="url(#paint0_linear_2014_268)"
      />
      <path
        d="M9.38965 10.8664V3.61133L20.223 8.9131V15.8891L9.38965 10.8664Z"
        fill="white"
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M10.1114 4.4621L19.4356 9.25603L19.4372 9.25685C19.5492 9.31408 19.6768 9.427 19.7756 9.57373C19.8783 9.72623 19.9041 9.84543 19.9041 9.8895V15.5602L10.5799 10.7663L10.5783 10.7655C10.4663 10.7082 10.3387 10.5953 10.2399 10.4486C10.1372 10.2961 10.1114 10.1769 10.1114 10.1328V4.4621ZM9.34215 2.99532C9.76981 2.80102 10.2271 2.89849 10.5783 3.07797L10.5799 3.07878L10.5799 3.07878L20.0945 7.97061C20.0948 7.97077 20.0951 7.97092 20.0954 7.97108C20.4591 8.15719 20.7614 8.45176 20.9736 8.76674C21.1821 9.07621 21.3485 9.47324 21.3485 9.8895V15.9099C21.3485 16.3518 21.1462 16.8122 20.6733 17.027C20.2457 17.2213 19.7884 17.1238 19.4372 16.9443L19.4356 16.9435L9.92104 12.0517C9.92071 12.0515 9.92038 12.0514 9.92004 12.0512C9.55634 11.8651 9.25406 11.5705 9.0419 11.2556C8.83343 10.9461 8.66699 10.5491 8.66699 10.1328V4.11237C8.66699 3.67048 8.8693 3.21015 9.34215 2.99532Z"
        fill="url(#paint1_linear_2014_268)"
      />
      <path
        d="M0.722656 18.7776V9.38867L14.4449 16.2498V25.2776L0.722656 18.7776Z"
        fill="white"
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M1.44445 10.2539V17.5288C1.44445 17.6263 1.49253 17.8052 1.63214 18.0116C1.76776 18.2122 1.94691 18.374 2.11698 18.4615L13.7053 24.4185H13.7088L13.8642 24.4984C13.8683 24.5005 13.8723 24.5025 13.8763 24.5045V17.2296C13.8763 17.1321 13.8282 16.9532 13.6886 16.7468C13.553 16.5462 13.3738 16.3843 13.2037 16.2969L1.45664 10.2601C1.45254 10.258 1.4484 10.2559 1.44445 10.2539ZM2.11686 8.97535C1.71007 8.76623 1.20224 8.66309 0.737299 8.87245C0.226171 9.10262 0 9.60075 0 10.0978V17.5288C0 18.0001 0.189989 18.4575 0.435547 18.8207C0.685095 19.1898 1.03821 19.531 1.45653 19.7461L13.3558 25.8629H13.3774C13.7498 26.0146 14.1825 26.0665 14.5834 25.8859C15.0946 25.6558 15.3207 25.1576 15.3207 24.6606V17.2296C15.3207 16.7583 15.1307 16.3009 14.8852 15.9377C14.6356 15.5686 14.2825 15.2274 13.8642 15.0123L2.11686 8.97535Z"
        fill="url(#paint2_linear_2014_268)"
      />
      <defs>
        <linearGradient
          id="paint0_linear_2014_268"
          x1="21.836"
          y1="0"
          x2="21.836"
          y2="9.28614"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
        <linearGradient
          id="paint1_linear_2014_268"
          x1="15.0077"
          y1="2.88867"
          x2="15.0077"
          y2="17.1336"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
        <linearGradient
          id="paint2_linear_2014_268"
          x1="7.66036"
          y1="8.75781"
          x2="7.66036"
          y2="26.0006"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
      </defs>
    </svg>
  `},sB=(A,Q)=>{if(!A||!Q)A="#0CB7EB",Q="#9747FF";return d`
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="20"
      height="30"
      viewBox="-1 8 15 8"
      fill="none"
    >
      <path
        d="M11.4782 7.647C12.5325 7.647 13.3899 6.74497 13.3899 5.63861V2.77304C13.3899 1.66543 12.5313 0.764648 11.4782 0.764648C10.425 0.764648 9.56641 1.66668 9.56641 2.77304V5.63861C9.56641 6.74622 10.425 7.647 11.4782 7.647ZM10.6314 2.77179C10.6314 2.27343 11.0026 1.88222 11.4782 1.88222C11.9537 1.88222 12.3249 2.27219 12.3249 2.77179V5.63736C12.3249 6.11953 11.9371 6.52694 11.4782 6.52694C11.0192 6.52694 10.6314 6.11953 10.6314 5.63736V2.77179Z"
        fill="url(#paint0_linear_2014_286)"
      />
      <path
        d="M2.30082 6.52818C1.82658 6.52818 1.45431 6.13822 1.45431 5.63861C1.45431 5.32963 1.216 5.0792 0.921978 5.0792C0.627952 5.0792 0.389648 5.32963 0.389648 5.63861C0.389648 6.74622 1.24802 7.647 2.30082 7.647C3.35363 7.647 4.21318 6.74497 4.21318 5.63861C4.21318 5.07173 3.98792 4.55966 3.62631 4.19337C3.98673 3.8333 4.21318 3.32996 4.21318 2.77304C4.21318 1.66543 3.35481 0.764648 2.30082 0.764648C1.24683 0.764648 0.389648 1.66668 0.389648 2.77304C0.389648 3.08202 0.627952 3.33245 0.921978 3.33245C1.216 3.33245 1.45431 3.08202 1.45431 2.77304C1.45431 2.27468 1.8254 1.88347 2.30082 1.88347C2.77624 1.88347 3.14733 2.27343 3.14733 2.77304C3.14733 3.24524 2.76794 3.62897 2.30082 3.62897C2.00679 3.62897 1.76849 3.8794 1.76849 4.18838C1.76849 4.49737 2.00679 4.74779 2.30082 4.74779C2.75964 4.74779 3.14733 5.1552 3.14733 5.63736C3.14733 6.11953 2.77506 6.52694 2.30082 6.52694V6.52818Z"
        fill="url(#paint1_linear_2014_286)"
      />
      <path
        d="M6.87425 7.647C7.95507 7.647 8.80156 6.7649 8.80156 5.63861C8.80156 4.51232 7.93594 3.62897 6.87425 3.62897C6.58013 3.62897 6.30156 3.70248 6.05287 3.83081V2.77304C6.05287 2.26596 6.40677 1.88347 6.87425 1.88347C7.36803 1.88347 7.72791 2.25724 7.72791 2.77304C7.72791 3.08202 7.96822 3.33245 8.26473 3.33245C8.56124 3.33245 8.80156 3.08202 8.80156 2.77304C8.80156 1.64675 7.95507 0.764648 6.87425 0.764648C5.79343 0.764648 4.97803 1.64675 4.97803 2.77304V5.63861C4.97803 6.7649 5.81136 7.647 6.87425 7.647ZM6.87425 4.74779C7.35249 4.74779 7.72791 5.139 7.72791 5.63736C7.72791 6.13572 7.36923 6.52694 6.87425 6.52694C6.40557 6.52694 6.05287 6.14445 6.05287 5.63736C6.05287 5.13028 6.42112 4.74779 6.87425 4.74779Z"
        fill="url(#paint2_linear_2014_286)"
      />
      <path
        d="M13.772 0.764706C13.9832 0.764706 14.1544 0.576216 14.1544 0.371192C14.1544 0.166168 13.9832 0 13.772 0C13.5608 0 13.3896 0.166168 13.3896 0.371192V0.415008C13.3896 0.620032 13.5608 0.764706 13.772 0.764706Z"
        fill="url(#paint3_linear_2014_286)"
      />
      <defs>
        <linearGradient
          id="paint0_linear_2014_286"
          x1="11.4782"
          y1="0.764648"
          x2="11.4782"
          y2="7.647"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
        <linearGradient
          id="paint1_linear_2014_286"
          x1="2.30141"
          y1="0.764648"
          x2="2.30141"
          y2="7.647"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
        <linearGradient
          id="paint2_linear_2014_286"
          x1="6.88979"
          y1="0.764648"
          x2="6.88979"
          y2="7.647"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
        <linearGradient
          id="paint3_linear_2014_286"
          x1="13.772"
          y1="0"
          x2="13.772"
          y2="0.764706"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
      </defs>
    </svg>
  `},nB=(A,Q)=>{if(!A||!Q)A="#0CB7EB",Q="#9747FF";return d`
    <svg
      id="ek-pc-rooms-icon-border"
      xmlns="http://www.w3.org/2000/svg"
      width="30"
      height="30"
      viewBox="0 0 26 22"
      fill="none"
    >
      <path
        d="M20.8453 0.84059C20.5796 0.769368 20.3027 0.932827 20.2324 1.21421C20.1621 1.49443 20.3217 1.78165 20.5897 1.8552C23.2669 2.59661 24.9974 3.76534 24.9974 4.836C24.9974 5.90666 23.2669 7.07422 20.5897 7.81679C20.5785 7.82029 20.5696 7.82497 20.5595 7.82847C20.5428 7.83431 20.526 7.84014 20.5093 7.84832C20.4936 7.85532 20.4802 7.86466 20.4657 7.87284C20.4523 7.88101 20.4389 7.88918 20.4267 7.89852C20.4121 7.90903 20.3987 7.92187 20.3853 7.93355C20.3742 7.94406 20.3641 7.9534 20.3541 7.96391C20.3418 7.97675 20.3318 7.99193 20.3206 8.00594C20.3117 8.01878 20.3027 8.03046 20.2949 8.0433C20.286 8.05848 20.2782 8.07366 20.2704 8.09C20.2637 8.10401 20.257 8.11919 20.2514 8.13437C20.2447 8.15072 20.2402 8.16823 20.2357 8.18574C20.2313 8.20092 20.2279 8.2161 20.2246 8.23128C20.2212 8.24996 20.2201 8.26981 20.219 8.28966C20.219 8.30017 20.2156 8.31067 20.2156 8.32235V13.2763C15.8994 12.2722 10.1262 12.2652 5.78435 13.2763V8.32235C5.78435 8.31067 5.78212 8.30133 5.781 8.28966C5.77989 8.26981 5.77877 8.25113 5.77542 8.23128C5.77319 8.21493 5.76872 8.19975 5.76426 8.18458C5.75979 8.16706 5.75532 8.15072 5.74863 8.13437C5.74304 8.11919 5.73635 8.10401 5.72853 8.08884C5.72183 8.07366 5.71402 8.05848 5.70508 8.04447C5.69615 8.03046 5.68722 8.01761 5.67717 8.00477C5.66712 7.99076 5.65708 7.97792 5.64591 7.96507C5.63475 7.9534 5.62358 7.94289 5.61242 7.93121C5.60014 7.91954 5.58786 7.90903 5.57446 7.89852C5.56106 7.88801 5.54655 7.87984 5.53203 7.8705C5.51864 7.86233 5.50524 7.85415 5.49073 7.84715C5.47398 7.83898 5.45723 7.83314 5.43937 7.8273C5.42932 7.8238 5.42039 7.81796 5.40922 7.81562C2.73085 7.07422 1.00146 5.90432 1.00146 4.83483C1.00146 3.76534 2.73197 2.59544 5.40922 1.85404C5.67717 1.78048 5.83683 1.49209 5.76537 1.21304C5.69504 0.932828 5.41816 0.769368 5.15244 0.839422C1.87899 1.74779 0 3.20374 0 4.836V17.4585C0 19.0803 1.82875 20.4989 5.15021 21.4516C5.15691 21.454 5.1636 21.454 5.1703 21.4563C5.17812 21.4586 5.18593 21.4598 5.19375 21.461C5.22278 21.4668 5.25292 21.4703 5.28195 21.4703C5.31321 21.4703 5.34335 21.4668 5.3735 21.461C5.38466 21.4586 5.39471 21.4551 5.40476 21.4528C5.42374 21.4481 5.4416 21.4423 5.46058 21.4353C5.47175 21.4306 5.48403 21.4259 5.49519 21.4201C5.51194 21.4119 5.52645 21.4026 5.54208 21.3932C5.55213 21.3862 5.56218 21.3804 5.57223 21.3734C5.58897 21.3606 5.60349 21.3477 5.61912 21.3325C5.62582 21.3255 5.63363 21.3197 5.64033 21.3127C5.66154 21.2905 5.68052 21.2671 5.69727 21.2415C5.70062 21.2356 5.70397 21.2298 5.70732 21.2239C5.7196 21.2029 5.73076 21.1819 5.74081 21.1597C5.74528 21.1481 5.74863 21.1364 5.75309 21.1259C5.75756 21.113 5.76314 21.1002 5.76761 21.0862C5.76872 21.0803 5.76872 21.0757 5.76984 21.0698C5.77319 21.0535 5.77542 21.036 5.77765 21.0185C5.77989 20.9998 5.78212 20.9811 5.78324 20.9636C5.78324 20.9577 5.78435 20.9531 5.78435 20.9484V14.3552C10.0782 13.3067 15.9497 13.3137 20.2156 14.3552V20.9484C20.2156 20.9484 20.2168 20.9589 20.2168 20.9636C20.2168 20.9823 20.2201 20.9998 20.2223 21.0185C20.2246 21.036 20.2268 21.0535 20.2302 21.0698C20.2313 21.0757 20.2313 21.0803 20.2324 21.0862C20.2357 21.1002 20.2413 21.113 20.2469 21.1259C20.2514 21.1375 20.2547 21.1492 20.2592 21.1597C20.2692 21.1819 20.2804 21.2041 20.2927 21.2239C20.296 21.2298 20.2994 21.2368 20.3027 21.2415C20.3195 21.2671 20.3385 21.2905 20.3597 21.3127C20.3664 21.3197 20.3742 21.3255 20.3809 21.3325C20.3954 21.3465 20.411 21.3606 20.4278 21.3734C20.4378 21.3804 20.4479 21.3874 20.4579 21.3932C20.4735 21.4026 20.4892 21.4119 20.5048 21.4201C20.516 21.4259 20.5271 21.4306 20.5394 21.4353C20.5573 21.4423 20.5763 21.4481 20.5952 21.4528C20.6053 21.4551 20.6153 21.4586 20.6265 21.461C20.6566 21.4668 20.6868 21.4703 20.7181 21.4703C20.7471 21.4703 20.7772 21.4668 20.8063 21.461C20.8141 21.4598 20.8219 21.4575 20.8297 21.4563C20.8364 21.4551 20.8431 21.454 20.8498 21.4516C24.1712 20.4977 26 19.0791 26 17.4585V4.836C26 3.20374 24.121 1.74779 20.8453 0.841758V0.84059ZM1.00369 17.4585V6.81152C1.81424 7.56226 3.09816 8.21727 4.78178 8.72166V20.2444C2.43499 19.4749 1.00369 18.4311 1.00369 17.4585ZM21.2193 20.2455V8.72282C22.903 8.21844 24.1858 7.56343 24.9974 6.81269V17.4597C24.9974 18.4323 23.5661 19.4761 21.2193 20.2455Z"
        fill="url(#paint0_linear_2014_291)"
      />
      <defs>
        <linearGradient
          id="paint0_linear_2014_291"
          x1="13"
          y1="0.823242"
          x2="13"
          y2="21.4703"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
      </defs>
    </svg>
  `},dq=(A,Q)=>{if(!A||!Q)A="#0CB7EB",Q="#9747FF";return d`
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="8"
      height="8"
      viewBox="0 0 8 8"
      fill="none"
    >
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M7.53557 7.53584C7.92609 7.14531 7.92609 6.51215 7.53557 6.12162L5.41419 4.00024L7.53535 1.87908C7.92587 1.48855 7.92587 0.855386 7.53535 0.464862C7.14482 0.0743378 6.51166 0.0743377 6.12113 0.464862L3.99997 2.58602L1.87871 0.464768C1.48819 0.0742437 0.855025 0.0742441 0.464501 0.464768C0.0739769 0.855293 0.0739771 1.48846 0.464501 1.87898L2.58576 4.00024L0.46428 6.12172C0.0737555 6.51224 0.0737558 7.1454 0.46428 7.53593C0.854804 7.92645 1.48797 7.92645 1.87849 7.53593L3.99997 5.41445L6.12136 7.53584C6.51188 7.92636 7.14504 7.92636 7.53557 7.53584Z"
        fill="url(#paint0_linear_2014_305)"
      />
      <defs>
        <linearGradient
          id="paint0_linear_2014_305"
          x1="3.99992"
          y1="0.171875"
          x2="3.99992"
          y2="7.82882"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
      </defs>
    </svg>
  `};var K9=Q0` /*! tailwindcss v3.4.3 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;font-family:IntelOneDisplay,ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-feature-settings:normal;font-variation-settings:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-tap-highlight-color:transparent}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-size:1em;font-variation-settings:normal}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{color:inherit;font-family:inherit;font-feature-settings:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]{display:none}*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{inset:0}.bottom-0{bottom:0}.bottom-\\[14\\%\\]{bottom:14%}.left-0{left:0}.left-1{left:4px}.left-1\\/2{left:50%}.left-5{left:20px}.left-\\[-136px\\]{left:-136px}.left-\\[-138px\\]{left:-138px}.left-\\[-207px\\]{left:-207px}.left-\\[-276px\\]{left:-276px}.left-\\[-69px\\]{left:-69px}.left-\\[138px\\]{left:138px}.left-\\[207px\\]{left:207px}.left-\\[276px\\]{left:276px}.left-\\[69px\\]{left:69px}.right-1{right:4px}.right-5{right:20px}.right-\\[10px\\]{right:10px}.top-0{top:0}.top-1\\/2{top:50%}.top-20{top:80px}.top-5{top:20px}.top-\\[10px\\]{top:10px}.top-\\[122px\\]{top:122px}.top-\\[14\\%\\]{top:14%}.top-\\[2px\\]{top:2px}.z-10{z-index:10}.z-\\[1\\]{z-index:1}.z-\\[2\\]{z-index:2}.z-\\[3\\]{z-index:3}.z-\\[99\\]{z-index:99}.z-\\[9\\]{z-index:9}.mx-auto{margin-left:auto;margin-right:auto}.my-2{margin-bottom:8px;margin-top:8px}.mb-4{margin-bottom:16px}.mb-5{margin-bottom:20px}.mb-6{margin-bottom:24px}.mr-0{margin-right:0}.mr-3{margin-right:12px}.box-border{box-sizing:border-box}.block{display:block}.inline{display:inline}.flex{display:flex}.hidden{display:none}.aspect-square{aspect-ratio:1/1}.h-1\\/2{height:50%}.h-10{height:40px}.h-11{height:44px}.h-12{height:48px}.h-14{height:56px}.h-20{height:80px}.h-3\\/5{height:60%}.h-4{height:16px}.h-40{height:160px}.h-8{height:32px}.h-\\[200px\\]{height:200px}.h-\\[20px\\]{height:20px}.h-\\[55px\\]{height:55px}.h-full{height:100%}.max-h-full{max-height:100%}.min-h-\\[540px\\]{min-height:540px}.min-h-full{min-height:100%}.w-1\\/2{width:50%}.w-10{width:40px}.w-11{width:44px}.w-12{width:48px}.w-14{width:56px}.w-20{width:80px}.w-24{width:96px}.w-3\\/4{width:75%}.w-3\\/5{width:60%}.w-4{width:16px}.w-8{width:32px}.w-8\\/12{width:66.666667%}.w-9\\/12{width:75%}.w-\\[200px\\]{width:200px}.w-\\[20px\\]{width:20px}.w-\\[95vw\\]{width:95vw}.w-\\[calc\\(100\\%-9rem\\)\\]{width:calc(100% - 9rem)}.w-fit{width:-moz-fit-content;width:fit-content}.w-full{width:100%}.min-w-\\[45px\\]{min-width:45px}.min-w-full{min-width:100%}.min-w-max{min-width:-moz-max-content;min-width:max-content}.max-w-0{max-width:0}.max-w-80{max-width:320px}.max-w-\\[200px\\]{max-width:200px}.max-w-\\[400px\\]{max-width:400px}.max-w-\\[80\\%\\]{max-width:80%}.max-w-\\[90\\%\\]{max-width:90%}.max-w-\\[900px\\]{max-width:900px}.max-w-full{max-width:100%}.max-w-none{max-width:none}.flex-1{flex:1 1 0%}.shrink-0{flex-shrink:0}.-translate-x-1\\/2{--tw-translate-x:-50%}.-translate-x-1\\/2,.-translate-x-20{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-x-20{--tw-translate-x:-80px}.-translate-y-10{--tw-translate-y:-40px}.-translate-y-10,.translate-y-0{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-0{--tw-translate-y:0}.translate-y-full{--tw-translate-y:100%}.-rotate-90,.translate-y-full{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-rotate-90{--tw-rotate:-90deg}.rotate-90{--tw-rotate:90deg}.rotate-90,.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes hotspot{0%{opacity:1;transform:scale(1)}50%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(2.5)}}.animate-hotspot{animation:hotspot 3s cubic-bezier(0,0,.2,1) infinite}@keyframes spin{to{transform:rotate(1turn)}}.animate-spin{animation:spin 1s linear infinite}.cursor-pointer{cursor:pointer}.resize{resize:both}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.gap-1{gap:4px}.gap-10{gap:40px}.gap-2{gap:8px}.gap-3{gap:12px}.gap-4{gap:16px}.gap-5{gap:20px}.gap-\\[13px\\]{gap:13px}.overflow-auto{overflow:auto}.overflow-hidden,.truncate{overflow:hidden}.truncate{text-overflow:ellipsis}.truncate,.whitespace-nowrap{white-space:nowrap}.rounded{border-radius:4px}.rounded-\\[20px\\]{border-radius:20px}.rounded-\\[40px\\]{border-radius:40px}.rounded-full{border-radius:9999px}.rounded-b-full{border-bottom-left-radius:9999px;border-bottom-right-radius:9999px}.rounded-t-2xl{border-top-left-radius:16px;border-top-right-radius:16px}.rounded-t-full{border-top-left-radius:9999px;border-top-right-radius:9999px}.border{border-width:1px}.border-2{border-width:2px}.border-\\[\\#2c67af\\]{--tw-border-opacity:1;border-color:rgb(44 103 175/var(--tw-border-opacity))}.border-\\[\\#5ac4f8\\]{--tw-border-opacity:1;border-color:rgb(90 196 248/var(--tw-border-opacity))}.border-black{--tw-border-opacity:1;border-color:rgb(0 0 0/var(--tw-border-opacity))}.bg-\\[\\#22558f\\]{--tw-bg-opacity:1;background-color:rgb(34 85 143/var(--tw-bg-opacity))}.bg-\\[\\#2c67af\\]{--tw-bg-opacity:1;background-color:rgb(44 103 175/var(--tw-bg-opacity))}.bg-\\[rgba\\(43\\2c 97\\2c 163\\)\\]\\/\\[0\\.85\\]{background-color:rgba(43,97,163,.85)}.bg-black{--tw-bg-opacity:1;background-color:rgb(0 0 0/var(--tw-bg-opacity))}.bg-black\\/50{background-color:rgba(0,0,0,.5)}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.bg-white\\/\\[90\\%\\]{background-color:hsla(0,0%,100%,.9)}.bg-gradient-to-b{background-image:linear-gradient(to bottom,var(--tw-gradient-stops))}.from-\\[\\#469dea\\]{--tw-gradient-from:#469dea var(--tw-gradient-from-position);--tw-gradient-to:rgba(70,157,234,0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to)}.to-\\[\\#1e4b85\\]{--tw-gradient-to:#1e4b85 var(--tw-gradient-to-position)}.object-cover{-o-object-fit:cover;object-fit:cover}.p-1{padding:4px}.p-3{padding:12px}.p-6{padding:24px}.p-\\[5px\\]{padding:5px}.px-10{padding-left:40px;padding-right:40px}.px-12{padding-left:48px;padding-right:48px}.px-14{padding-left:56px;padding-right:56px}.px-2{padding-left:8px;padding-right:8px}.px-6{padding-left:24px;padding-right:24px}.px-7{padding-left:28px;padding-right:28px}.px-\\[8px\\]{padding-left:8px;padding-right:8px}.py-10{padding-bottom:40px;padding-top:40px}.py-3{padding-bottom:12px;padding-top:12px}.py-3\\.5{padding-bottom:14px;padding-top:14px}.py-6{padding-bottom:24px;padding-top:24px}.pb-\\[142\\%\\]{padding-bottom:142%}.text-center{text-align:center}.text-2xl{font-size:24px;line-height:32px}.text-3xl{font-size:30px;line-height:36px}.text-\\[16px\\]{font-size:16px}.text-\\[17px\\]{font-size:17px}.text-\\[20px\\]{font-size:20px}.text-lg{font-size:18px;line-height:28px}.text-sm{font-size:14px;line-height:20px}.text-xl{font-size:20px;line-height:28px}.font-medium{font-weight:500}.italic{font-style:italic}.leading-4{line-height:16px}.leading-tight{line-height:1.25}.tracking-wide{letter-spacing:.025em}.text-\\[\\#22558f\\]{--tw-text-opacity:1;color:rgb(34 85 143/var(--tw-text-opacity))}.text-\\[\\#2b66af\\]{--tw-text-opacity:1;color:rgb(43 102 175/var(--tw-text-opacity))}.text-black{--tw-text-opacity:1;color:rgb(0 0 0/var(--tw-text-opacity))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.opacity-0{opacity:0}.opacity-25{opacity:.25}.opacity-75{opacity:.75}.shadow{--tw-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px -1px rgba(0,0,0,.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color),0 1px 2px -1px var(--tw-shadow-color)}.shadow,.shadow-lg{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur{--tw-backdrop-blur:blur(8px)}.backdrop-blur,.backdrop-blur-sm{-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-sm{--tw-backdrop-blur:blur(4px)}.backdrop-brightness-50{--tw-backdrop-brightness:brightness(.5)}.backdrop-brightness-50,.backdrop-brightness-\\[\\.25\\]{-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-brightness-\\[\\.25\\]{--tw-backdrop-brightness:brightness(.25)}.transition-all{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-transform{transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-300{transition-duration:.3s}.\\@container{container-type:inline-size}.\\*\\:transition-transform>*{transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.first-letter\\:uppercase:first-letter{text-transform:uppercase}.after\\:absolute:after{content:var(--tw-content);position:absolute}.after\\:left-1\\/2:after{content:var(--tw-content);left:50%}.after\\:top-full:after{content:var(--tw-content);top:100%}.after\\:h-0:after{content:var(--tw-content);height:0}.after\\:w-0:after{content:var(--tw-content);width:0}.after\\:-translate-x-\\[20px\\]:after{content:var(--tw-content);--tw-translate-x:-20px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.after\\:border-x-\\[20px\\]:after{border-left-width:20px;border-right-width:20px;content:var(--tw-content)}.after\\:border-t-\\[20px\\]:after{border-top-width:20px;content:var(--tw-content)}.after\\:border-white\\/\\[90\\%\\]:after{border-color:hsla(0,0%,100%,.9);content:var(--tw-content)}.after\\:border-x-transparent:after{border-left-color:transparent;border-right-color:transparent;content:var(--tw-content)}.hover\\:scale-105:hover{--tw-scale-x:1.05;--tw-scale-y:1.05;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:\\*\\:scale-110>:hover,.hover\\:scale-110:hover{--tw-scale-x:1.1;--tw-scale-y:1.1}.hover\\:\\*\\:scale-110>:hover,.hover\\:\\*\\:scale-125>:hover,.hover\\:scale-110:hover{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:\\*\\:scale-125>:hover{--tw-scale-x:1.25;--tw-scale-y:1.25}.active\\:\\*\\:scale-100>:active{--tw-scale-x:1;--tw-scale-y:1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@container (min-width: 672px){.\\@2xl\\:left-1\\/2{left:50%}.\\@2xl\\:block{display:block}.\\@2xl\\:hidden{display:none}.\\@2xl\\:h-28{height:112px}.\\@2xl\\:h-auto{height:auto}.\\@2xl\\:w-11\\/12{width:91.666667%}.\\@2xl\\:w-28{width:112px}.\\@2xl\\:w-56{width:224px}.\\@2xl\\:min-w-0{min-width:0}.\\@2xl\\:max-w-48{max-width:192px}.\\@2xl\\:max-w-none{max-width:none}.\\@2xl\\:flex-1{flex:1 1 0%}.\\@2xl\\:-translate-x-1\\/2{--tw-translate-x:-50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\\@2xl\\:flex-row{flex-direction:row}.\\@2xl\\:gap-4{gap:16px}.\\@2xl\\:rounded-t-2xl{border-top-left-radius:16px;border-top-right-radius:16px}.\\@2xl\\:p-8{padding:32px}.\\@2xl\\:px-12{padding-left:48px;padding-right:48px}.\\@2xl\\:text-3xl{font-size:30px;line-height:36px}.\\@2xl\\:text-4xl{font-size:36px;line-height:36px}.\\@2xl\\:text-5xl{font-size:48px;line-height:1}.\\@2xl\\:text-base{font-size:16px;line-height:24px}}@media (min-width:640px){.sm\\:left-\\[-25px\\]{left:-25px}.sm\\:left-\\[0px\\]{left:0}.sm\\:top-\\[-81px\\]{top:-81px}.sm\\:z-\\[1\\]{z-index:1}.sm\\:flex{display:flex}.sm\\:hidden{display:none}.sm\\:w-\\[80vw\\]{width:80vw}.sm\\:flex-col{flex-direction:column}.sm\\:pb-\\[56\\.25\\%\\]{padding-bottom:56.25%}}@media (min-width:768px){.md\\:text-\\[21px\\]{font-size:21px}}@media (min-width:1024px){.lg\\:h-\\[300px\\]{height:300px}.lg\\:w-\\[300px\\]{width:300px}}.\\[\\&\\>\\*\\:first-child\\]\\:rounded-lg>:first-child{border-radius:8px}.\\[\\&\\>\\*\\:first-child\\]\\:border-4>:first-child{border-width:4px}.\\[\\&\\>\\*\\:first-child\\]\\:border-\\[\\#2c67af\\]>:first-child{--tw-border-opacity:1;border-color:rgb(44 103 175/var(--tw-border-opacity))}.\\[\\&\\>\\*\\:first-child\\]\\:border-transparent>:first-child{border-color:transparent}.\\[\\&\\>\\*\\:first-child\\]\\:transition-all>:first-child{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.\\[\\&\\>\\*\\:first-child\\]\\:hover\\:border-\\[\\#5ac4f8\\]:hover>:first-child{--tw-border-opacity:1;border-color:rgb(90 196 248/var(--tw-border-opacity))} `;var cq=Q0`
  #ek-model-viewer-border-icon,
  #ek-pc-rooms-icon-border,
  #ek-spinning-cube,
  #ek-flipping-square,
  .icon.selected > div,
  .icon.not-selected > div,
  #ek-unison-icon,
  .service-button-container,
  .ek-service-buttons-and-close-icon,
  .ek-service-button-closed,
  .ek-content,
  .ek-content-title-container,
  .ek-content-container,
  .ek-backdrop,
  .ek-close-button {
    transition-property: all;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 600ms;
  }
  .ek-page-button-v2-container,
  .ek-service-button-open {
    transition:
      all 0.4s cubic-bezier(0.68, -0.25, 0.27, 1.45),
      padding 0.5s;
  }
  .icon.selected > div > svg > defs > linearGradient > stop {
    stop-color: white;
  }

  .icon.selected > .ek-icon-container-open > #ek-spinning-cube {
    transform: rotate(60deg);
    scale: 1.2;
  }

  .icon.selected > .ek-icon-container-open > #ek-flipping-square {
    transform: rotate(-90deg);
    scale: 1.2;
  }

  .icon.selected > .service-selected-ARModelsElement > #ek-spinning-cube {
    transform: rotate(60deg);
    scale: 1.2;
  }

  .icon.selected > .service-selected-ARModelsElement > #ek-flipping-square {
    transform: rotate(-90deg);
    scale: 1.2;
  }

  .ek-container-open.selected > .icon > #ek-pc-rooms-icon-border {
    transform: rotateX(0deg) rotateY(180deg);
    scale: 1.2;
  }
  .service-selected-ContainerElement > #ek-pc-rooms-icon-border {
    transform: rotateX(0deg) rotateY(180deg);
    scale: 1.2;
  }

  .ek-container-open.selected > .icon > #ek-model-viewer-border-icon {
    transform: rotate(180deg);
    scale: 1.2;
  }
  .service-selected-ModelViewerElement > #ek-model-viewer-border-icon {
    transform: rotate(180deg);
    scale: 1.2;
  }
  .ek-container-open.selected > .icon > #ek-unison-icon {
    transform: rotateX(360deg) rotateY(0deg);
    scale: 1.2;
  }
  .service-selected-UnisonElement > #ek-unison-icon {
    transform: rotateX(360deg) rotateY(0deg);
    scale: 1.2;
  }

  .ek-container-closed.not-selected
    > .ek-icon-container-closed
    > #ek-spinning-cube {
    animation: spin 4s linear infinite;
  }

  .ek-container-closed.not-selected
    > .ek-icon-container-closed
    > #ek-flipping-square {
    animation: flipSpin 4s linear infinite;
  }

  @media (min-width: 640px) {
    .ek-container-closed.hovering.left > .ek-initial-button-text-for-left {
      display: none;
    }
    .ek-container-open.left > .ek-initial-button-text-for-left {
      display: none;
    }

    .ek-page-button-v2-container.left {
      flex-direction: row-reverse;
    }

    .ek-service-buttons-and-close-icon.left > .ek-service-button.not-selected {
      right: -55px;
      left: unset;
      flex-direction: row-reverse;
    }

    .service-button-container.open
      > .ek-service-buttons-and-close-icon
      > .ek-service-button.notHovering.not-selected {
      animation: notHoveringContainer 0.5s forwards;
    }
    .ek-service-button-open.ek-service-button.ARModelsElement.cursor-pointer.not-selected.service-btn-1.absolute.notHovering {
      animation: notHoveringContainer 0.5s forwards;
    }

    .ek-content-container.open.right.notReady > .ek-content {
      opacity: 0;
      scale: 20%;
      top: -151px;
      left: -386px;
    }
    .ek-content-container.open.right.ready > .ek-content {
      scale: 100%;
      top: 69px;
      left: 0;
      opacity: 1;
    }

    .ek-content-container.open.left.notReady > .ek-content {
      opacity: 0;
      scale: 20%;
      top: -156px;
      left: 396px;
    }
    .ek-content-container.open.left.ready > .ek-content {
      scale: 100%;
      top: 69px;
      left: 0;
      opacity: 1;
    }

    .service-button-container.open > .not-selected.notHovering {
      animation: notHoveringContainer 0.5s forwards;
    }

    .not-selected.hovering
      > .service-unselected-ARModelsElement
      > #ek-flipping-square {
      transform: rotate(-90deg);
      scale: 110%;
    }
    .not-selected.hovering
      > .service-unselected-ARModelsElement
      > #ek-spinning-cube {
      transform: rotate(90deg);
      scale: 110%;
    }
    .ek-service-button-open
      > .service-selected-ARModelsElement
      > #ek-spinning-cube {
      transform: rotate(180deg) !important;
    }
    .ek-service-button-open
      > .service-selected-ARModelsElement
      > #ek-flipping-square {
      transform: rotate(-180deg) !important;
    }

    .ek-container-open.not-selected.hovering
      > .icon
      > #ek-model-viewer-border-icon {
      transform: rotate(-180deg);
      scale: 120%;
    }
    .not-selected.hovering
      > .service-unselected-ModelViewerElement
      > #ek-model-viewer-border-icon {
      transform: rotate(-180deg);
      scale: 120%;
    }
    .selected
      > .service-selected-ModelViewerElement
      > #ek-model-viewer-border-icon {
      transform: rotate(180deg);
      scale: 120%;
    }

    .icon.selected > .ek-icon-container-open > #ek-flipping-square {
      animation: spinLeftAndScaleUp 0.3s forwards;
    }
    .icon.selected > .ek-icon-container-open > #ek-spinning-cube {
      animation: spinRightAndScaleUp 0.3s forwards;
    }
    .icon.not-selected > .ek-icon-container-open > #ek-flipping-square {
      animation: spinRightAndScaleDown 0.3s forwards;
    }
    .icon.not-selected > .ek-icon-container-open > #ek-spinning-cube {
      animation: spinLeftAndScaleDown 0.3s forwards;
    }

    .not-selected.hovering
      > .service-unselected-ContainerElement
      > #ek-pc-rooms-icon-border {
      transform: rotateX(0deg) rotateY(180deg);
    }
    .selected > .service-selected-ContainerElement > #ek-pc-rooms-icon-border {
      transform: rotateX(0deg) rotateY(-180deg);
    }

    .not-selected.hovering
      > .service-unselected-UnisonElement
      > #ek-unison-icon {
      transform: rotateY(360deg);
    }
  }

  @keyframes spin {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }
  @keyframes spinLeftAndScaleUp {
    from {
      scale: 100%;
      transform: rotate(0deg);
    }
    to {
      scale: 110%;
      transform: rotate(-180deg);
    }
  }
  @keyframes spinRightAndScaleUp {
    from {
      scale: 100%;
      transform: rotate(0deg);
    }
    to {
      scale: 110%;
      transform: rotate(180deg);
    }
  }
  @keyframes spinRightAndScaleDown {
    from {
      scale: 110%;
      transform: rotate(-180deg);
    }
    to {
      scale: 100%;
      transform: rotate(0deg);
    }
  }
  @keyframes spinLeftAndScaleDown {
    from {
      scale: 110%;
      transform: rotate(180deg);
    }
    to {
      scale: 100%;
      transform: rotate(0deg);
    }
  }

  @keyframes flipSpin {
    0% {
      transform: rotateX(0deg) rotateY(0deg);
    }
    50% {
      transform: rotateX(180deg) rotateY(180deg);
    }
    100% {
      transform: rotateX(0deg) rotateY(0deg);
    }
  }

  @keyframes notHoveringContainer {
    0% {
      width: 240px;
    }
    25% {
      width: 53px;
    }
    50% {
      width: 58px;
    }
    75% {
      width: 52px;
    }
    100% {
      width: 56px;
      z-index: 2;
    }
  }
`;class i5 extends G0{static styles=[K9,cq,Q0`
      :host {
        color: var(--text-colour);
      }
      .ek-page-button-v2-container {
        width: var(--button-text-width);
        white-space: nowrap;
      }
      .ek-container-open > .ek-button-text {
        display: none;
      }
      .ek-page-button-v2-container.left {
        position: absolute;
        right: 0;
        flex-direction: row-reverse;
      }
      .ek-service-button {
        white-space: nowrap;
      }
      .ek-backdrop.active {
        z-index: 999999999;
      }
      .ek-open {
        z-index: 9999999999;
      }
      ek-pc-rooms {
        height: 100%;
        width: 100%;
      }

      @media (max-width: 640px) {
        .service-button-container.closed
          > .ek-service-buttons-and-close-icon.left {
          left: unset;
          right: 81px;
        }
        .service-button-container.open
          > .ek-service-buttons-and-close-icon.left {
          left: unset;
          right: 125px;
        }
        .ek-service-buttons-and-close-icon.left > .ek-close-button.open {
          top: -10px;
        }
        .ek-service-buttons-and-close-icon.left > .ek-close-button.closed {
          left: 0px;
          top: -10px;
        }
        .ek-content-container.left.open {
          right: 0px;
          top: 59px;
        }
        .ek-content-container.open.left > .ek-content-title-container.active {
          right: 0px;
        }
        .ek-content-container.open.left > .ek-content-title-container.closed {
          right: 0px;
        }
        .ek-container-closed.left > .ek-initial-button-text-for-left {
          display: flex;
        }

        .ek-content-container.left.closed > .ek-content-title-container {
          right: 0;
        }
      }

      .ek-container-open > .ek-initial-button-text {
        display: none;
      }
      @media (min-width: 640px) {
        .ek-container-open.not-selected.hovering > .ek-initial-button-text {
          display: flex;
          position: absolute;
        }
      }
      .ek-icon-container-closed {
        position: relative;
        width: 45px;
        height: 45px;
        min-width: 45px;
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: white;
        border-radius: 50%;
      }
      .ek-icon-container-closed > svg {
        position: absolute;
      }
      .ek-icon-container-open {
        position: relative;
        width: 45px;
        height: 45px;
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: white;
        border-radius: 50%;
      }

      .ek-icon-container-open > svg {
        position: absolute;
      }
      .ek-initial-button-text {
        margin: 7px !important;
        font-size: 20px !important;
        white-space: nowrap;
      }
      .ek-service-buttons-container {
        display: flex;
      }
      .ek-service-button-closed {
      }
      .ek-service-button-open {
        display: flex;
      }
      .ek-service-button {
        background-image: linear-gradient(
          var(--foreground-colour),
          var(--background-colour)
        );
        padding: 5px;
        border-radius: 40px;
        color: white;
        align-items: center;
        height: 56px;
        overflow: hidden;
      }
      .ek-content-title-container,
      .ek-content,
      .ek-launch-btn,
      .ek-page-button-v2-container {
        background-image: linear-gradient(
          var(--foreground-colour),
          var(--background-colour)
        );
      }
      .ek-launch-text {
        background-color: blue;
        background-image: linear-gradient(
          45deg,
          var(--foreground-colour),
          var(--background-colour)
        );
        background-size: 100%;
        background-repeat: repeat;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        -moz-background-clip: text;
        -moz-text-fill-color: transparent;
      }

      .ek-service-button-closed.service-btn-1 {
        left: 0;
        height: 54px;
      }
      .ek-service-button-closed.service-btn-2 {
        left: 0;
        height: 54px;
      }
      .ek-service-button-closed.service-btn-3 {
        left: 0;
        height: 54px;
      }
      .ek-service-button-closed.service-btn-4 {
        left: 0;
        height: 54px;
      }
      @media (max-width: 640px) {
        .left > .ek-service-button-open.service-btn-1 {
          left: 0px;
        }
        .left > .ek-service-button-open.service-btn-2 {
          left: -69px;
        }
        .left > .ek-service-button-open.service-btn-3 {
          left: -138px;
        }
        .left > .ek-service-button-open.service-btn-4 {
          left: -207px;
        }

        .right > .ek-service-button-open.service-btn-1 {
          left: 0px;
        }
        .right > .ek-service-button-open.service-btn-2 {
          left: 69px;
        }
        .right > .ek-service-button-open.service-btn-3 {
          left: 138px;
        }
        .right > .ek-service-button-open.service-btn-4 {
          left: 207px;
        }
        .ek-content-container.open > .ek-content {
          opacity: 1;
          top: 73px;
        }
      }

      .icon.selected > div {
        background-color: rgba(0, 0, 0, 0);
      }
      .icon.not-selected > div {
        background-color: white;
      }

      .service-button-container.open
        > .ek-service-buttons-and-close-icon.right {
        left: 69px;
      }
      .service-button-container.closed
        > .ek-service-buttons-and-close-icon.right {
        left: 37px;
      }
      .ek-content-container.open.ready > .ek-content {
        opacity: 1;
        top: 69px;
      }
      .ek-content-container.open > .ek-content-title-container.active {
        opacity: 1;
        top: 0px;
      }
      .ek-content-container.closed > .ek-content-title-container.active {
        opacity: 0;
        top: 115px;
      }
      .ek-content-title-container {
        top: 115px;
      }

      .ek-initial-button-text {
        transform: translateX(-117px);
        background: linear-gradient(
          to right,
          rgba(255, 255, 255, 0) 60%,
          rgba(255, 255, 255, 1) 0%
        );
        -webkit-background-clip: text;
        color: transparent;
      }
      .ek-close {
        min-width: 95px;
      }
      .ek-initial-button-text-for-left {
        display: none;
      }

      .ek-backdrop.active {
        opacity: 40%;
      }

      @media (min-width: 640px) {
        .ek-content-container.ready.right {
          top: -125px !important;
        }
        .ek-content-container.ready.left {
          top: -68px !important;
        }
        .ek-page-button-v2-container.right > .ek-initial-button-text-for-left {
          display: none;
        }
        .ek-container-closed.left > .ek-initial-button-text-for-left {
          display: flex;
        }
        .ek-service-button-closed.service-btn-1 {
          top: 0;
          height: 54px;
        }
        .ek-service-button-closed.service-btn-2 {
          top: 0;
          height: 54px;
        }
        .ek-service-button-closed.service-btn-3 {
          top: 0;
          height: 54px;
        }
        .ek-service-button-closed.service-btn-4 {
          top: 0;
          height: 54px;
        }
        .service-button-container.closed
          > .ek-service-buttons-and-close-icon.left.notReady {
          right: 56px;
          top: 0px;
        }
        .service-button-container.closed
          > .ek-service-buttons-and-close-icon.right.notReady {
          left: 0px;
          top: 0px;
        }
        .service-button-container.open
          > .ek-service-buttons-and-close-icon.right.ready {
          left: 0px;
          top: 69px;
        }
        .service-button-container.open
          > .ek-service-buttons-and-close-icon.right.notReady {
          left: 0px;
          top: 0px;
        }
        .service-button-container.open
          > .ek-service-buttons-and-close-icon.left.ready {
          right: 54px;
          top: 69px;
          left: unset;
        }
        .service-button-container.open
          > .ek-service-buttons-and-close-icon.left.notReady {
          right: 54px;
          top: 0px;
        }
        .ek-service-button-open.service-btn-2.ready {
          left: 0px;
          top: 69px;
        }
        .ek-service-button-open.service-btn-3.ready {
          left: 0px;
          top: 138px;
        }
        .ek-service-button-open.service-btn-4.ready {
          left: 0px;
          top: 207px;
        }
        .ek-content-container.right {
          left: 69px;
          top: -63px;
        }
        .ek-content-container.left {
          right: 66px;
          top: -8px;
        }
        .ek-close-button {
          z-index: 1;
        }
        .ek-close-button.closed {
          top: 15px;
          left: 15px;
        }
        .ek-service-buttons-and-close-icon.right.notReady > .ek-close-button {
          top: -81px !important;
          left: -25px !important;
        }
        .ek-service-buttons-and-close-icon.right.notReady > .ek-close-button {
          top: 16px !important;
          left: 13px !important;
        }
        .ek-service-buttons-and-close-icon.left.ready > .ek-close-button {
          top: -81px !important;
          left: unset !important;
          right: -75px;
        }
        .ek-service-buttons-and-close-icon.left.notReady > .ek-close-button {
          top: 9px !important;
          left: unset !important;
          right: -39px;
        }
        .ek-content-container.open > .ek-content-title-container.active {
          opacity: 1;
          top: 0px;
        }
        .ek-content-container.open > .ek-content-title-container.closed {
          opacity: 1;
          top: 115px;
        }

        .ek-content-container.closed > .ek-content-title-container.active {
          opacity: 0;
          top: 0px;
        }
        .ek-close > .ek-content-container.closed > .ek-content-title-container {
          display: none;
        }
        .ek-open
          > .ek-content-container.open.left
          > .ek-content-title-container {
          opacity: 0;
          right: 0px;
        }
        .ek-open
          > .ek-content-container.open.right
          > .ek-content-title-container {
          opacity: 0;
          left: 0px;
        }
        .ek-open
          > .ek-content-container.open
          > .ek-content-title-container.active {
          opacity: 1;
        }
        .ek-content-container.open.right > .ek-content-title-container.active {
          opacity: 1;
          top: 0px;
        }
        .ek-content-container.open.left > .ek-content-title-container.active {
          opacity: 1;
          top: 0px;
          right: 0px;
        }
      }
    `];constructor(A,Q,B,C,I,E,K,J,q){super(A,Q,B,C,I,E,K,J,q,!0,"all-in-one-v2");this.isHovering=!1;this.contentOpen=!1;this.matchedServices={};this.currentService="";this.firstService="";this.fillGradientPrimary="#0CB7EB";this.fillGradientSecondary="#9747FF";this.serviceClicked=!1;this.serviceCount=0;this.allInOneV2PageButtonLocalisations={blockType:"AllInOneV2PageButtonLocalisation"};this.contentTitles={};this.isHoveringButton=!1;this.isStillHoveringButton=!1;this.contentTransitionReady=!1;this.isFullscreen=!1;this.blockTypeToServiceMapping={AllInOneV2PageButtonElement:"all-in-one-v2",ARModelsElement:"ar-models",ModelViewerElement:"3d-player",ContainerElement:"pc-rooms",PCRoomsElement:"pc-rooms",UnisonElement:"intel-unison"};this.environment="dev";this.fillGradientPrimary=this.EKProps.foregroundColour,this.fillGradientSecondary=this.EKProps.backgroundColour,this.environment="prod"}connectedCallback(){if(super.connectedCallback(),this.EKChildren){for(let A of this.EKChildren)if(A.EKBlockType!=="NullElement"){if(A&&A.EKChildren){const Q=A.EKChildren;if(Q){for(let B of Q)if(B&&B.EKChildren){const C=B.EKChildren;if(C&&C?.length>0)this.matchedServices[C[0].EKBlockType]=C[0]}}}}}this.firstService=Object.keys(this.matchedServices)[0],this.allInOneV2PageButtonLocalisations=this.localisations(),this.contentTitles={ARModelsElement:this.allInOneV2PageButtonLocalisations.ViewInARContentTitle,ModelViewerElement:this.allInOneV2PageButtonLocalisations.ModelViewerContentTitle,UnisonElement:this.allInOneV2PageButtonLocalisations.UnisonContentTitle,ContainerElement:this.allInOneV2PageButtonLocalisations.VirtualExperienceContentTitle,PCRoomsElement:this.allInOneV2PageButtonLocalisations.VirtualExperienceContentTitle,Intel12thGenCGIElement:this.allInOneV2PageButtonLocalisations.Intel12thGenContentTitle}}firstUpdated(){if(this.setUpObservationEvent(),this.ekButtonTextElement&&this.ekButtonContainerElement){this.ekButtonTextElement.innerText=this.allInOneV2PageButtonLocalisations.buttonText||"3D";const A=this.calculateButtonTextWidth(this.ekButtonTextElement.innerText);this.ekButtonContainerElement.style.width=`${A}px`}for(let A of this.ekServiceButtons)A.style.width="56px"}setUpObservationEvent(){if(this.ekObserveElement)new IntersectionObserver((Q,B)=>{Q.forEach((C)=>{if(C.isIntersecting)this.logEventLegacy("view","button","all-in-one-v2"),B.unobserve(C.target)})},{root:null,rootMargin:"0px",threshold:1}).observe(this.ekObserveElement)}localisations(){return this.getLocalisations("AllInOneV2PageButtonLocalisation")}isComponentValidToRender(){return!0}serviceHasBeenSelected(A){if(this.contentOpen){if(this.serviceClicked){if(this.currentService===A)return!0}}return!1}getServiceIcons(A){return{ARModelsElement:[bq(this.fillGradientPrimary,this.fillGradientSecondary),pq(this.fillGradientPrimary,this.fillGradientSecondary)],ModelViewerElement:[uq(this.fillGradientPrimary,this.fillGradientSecondary),mq(this.fillGradientPrimary,this.fillGradientSecondary)],UnisonElement:[lB(this.fillGradientPrimary,this.fillGradientSecondary)],ContainerElement:[sB(this.fillGradientPrimary,this.fillGradientSecondary),nB(this.fillGradientPrimary,this.fillGradientSecondary)],PCRoomsElement:[sB(this.fillGradientPrimary,this.fillGradientSecondary),nB(this.fillGradientPrimary,this.fillGradientSecondary)],Intel12thGenCGIElement:[lB(this.fillGradientPrimary,this.fillGradientSecondary)]}[A]}calculateButtonTextWidth(A){if(!A)return;const Q=document.createElement("span");Q.style.visibility="hidden",Q.style.whiteSpace="nowrap",Q.style.fontSize="20px",Q.style.fontFamily="Arial, sans-serif",Q.innerText=A,document.body.appendChild(Q);const B=Q.offsetWidth+70;return document.body.removeChild(Q),B}handleBackdropClick(){if(this.logEventLegacy("close","popup","all-in-one-v2"),this.contentOpen=!1,this.matchedServices.ModelViewerElement._showModelViewer=!1,this.ekButtonContainerElement&&this.ekButtonTextElement)this.ekButtonContainerElement.style.width=`${this.calculateButtonTextWidth(this.allInOneV2PageButtonLocalisations.buttonText)}px`,this.ekButtonTextElement.style.display="flex";this.contentTransitionReady=!1,setTimeout(()=>{if(this.ekBackdropElement)this.ekBackdropElement.style.display="none"},400)}handleLaunchIntoARButtonClick(){new p5(this.EKIdentities?.arid||this.EKID,this.environment,"ar-models").launchAR(this)}handleCloseContent(){if(this.logEventLegacy("close","popup","all-in-one-v2"),this.contentOpen=!1,this.serviceClicked=!1,this.matchedServices.ModelViewerElement._showModelViewer=!1,this.ekButtonContainerElement&&this.ekButtonTextElement)this.ekButtonContainerElement.style.width=`${this.calculateButtonTextWidth(this.allInOneV2PageButtonLocalisations.buttonText)}px`,this.ekButtonTextElement.style.display="flex";this.contentTransitionReady=!1,setTimeout(()=>{if(this.ekBackdropElement)this.ekBackdropElement.style.display="none"},400)}handleServiceButtonClicked(A,Q){if(this.currentService=A,this.serviceClicked=!0,A==="ModelViewerElement")this.matchedServices.ModelViewerElement._showModelViewer=!0;else this.matchedServices.ModelViewerElement._showModelViewer=!1;if(Q?.currentTarget)Q.currentTarget.style.width="56px";this.logEventLegacy("click","service",this.blockTypeToServiceMapping[A])}handleOpenContent(A){if(this.currentService=this.firstService,this.matchedServices.ModelViewerElement._showModelViewer=!0,!this.contentOpen)this.ekObserveElement?.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),this.logEventLegacy("click","button","all-in-one-v2");if(A?.currentTarget)A.currentTarget.style.width="56px";if(this.ekBackdropElement)this.ekBackdropElement.style.display="flex";this.contentOpen=!0,setTimeout(()=>{this.contentTransitionReady=!0},700)}handleContainerMouseLeave(A,Q,B){if(this.isHoveringButton=!1,A.currentTarget&&A.currentTarget.dataset)A.currentTarget.classList.remove("hovering"),A.currentTarget.classList.add("notHovering");if(Q==="AllInOneV2PageButtonElement"&&this.ekButtonTextElement&&this.ekButtonContainerElement){this.ekButtonTextElement.innerText=this.allInOneV2PageButtonLocalisations.buttonText||"3D";const C=this.calculateButtonTextWidth(this.ekButtonTextElement.innerText);this.ekButtonContainerElement.style.width=`${C}px`}if(this.contentOpen&&Q==="AllInOneV2PageButtonElement"&&this.ekButtonTextElement&&this.ekButtonContainerElement){if(A.currentTarget.dataset.id)this.ekButtonContainerElement.style.width="56px",this.ekButtonTextElement.innerText=this.allInOneV2PageButtonLocalisations.buttonText||"3D",this.ekButtonTextElement.style.display="none"}if(B==="service")A.currentTarget.childNodes[3].style.display="none",A.currentTarget.style.width="56px";if(this.isStillHoveringButton)this.logEventLegacy("hover-end",B,this.blockTypeToServiceMapping[Q]),this.isStillHoveringButton=!1}handleContainerMouseEnter(A,Q,B){if(this.isHoveringButton=!0,A.currentTarget&&A.currentTarget.dataset)A.currentTarget.classList.remove("notHovering"),A.currentTarget.classList.add("hovering");if(Q==="AllInOneV2PageButtonElement"&&this.ekButtonTextElement&&this.ekButtonContainerElement&&this.contentOpen===!1){this.ekButtonTextElement.innerText=this.allInOneV2PageButtonLocalisations.exploreIn3D||"EXPLORE IN 3D";const C=this.calculateButtonTextWidth(this.ekButtonTextElement.innerText);this.ekButtonContainerElement.style.width=`${C}px`}if(this.contentOpen&&Q==="AllInOneV2PageButtonElement"&&this.ekButtonTextElement&&this.ekButtonContainerElement){if(A.currentTarget.classList.contains("not-selected")){const C=A.currentTarget.dataset.id;if(C){const I=this.calculateButtonTextWidth(this.contentTitles[C]);this.ekButtonContainerElement.style.width=`${I}px`,this.ekButtonTextElement.innerText=this.contentTitles[C],this.ekButtonTextElement.style.display="flex"}}}if(B==="service"){if(A.currentTarget.classList.contains("not-selected")){const C=this.calculateButtonTextWidth(this.contentTitles[Q]);A.currentTarget.style.width=`${C}px`,A.currentTarget.childNodes[3].style.display="flex"}}setTimeout(()=>{if(this.isHoveringButton)this.isStillHoveringButton=!0,this.logEventLegacy("hover-start",B,this.blockTypeToServiceMapping[Q])},300)}handleFullscreenClick(){this.isFullscreen=!this.isFullscreen}renderCloseIcon(){return d`
      <div
        @click=${()=>this.handleCloseContent()}
        class="ek-close-button ${this.contentOpen?"open":"closed"} cursor-pointer w-[20px] h-[20px] bg-white rounded-full absolute flex justify-center items-center z-[99] top-[2px] ${this.EKProps.contentDirection==="right"?`left-[${69*this.serviceCount}px]`:`left-[-${69*this.serviceCount}px]`}  sm:top-[-81px] sm:left-[-25px]"
      >
        ${dq(this.fillGradientPrimary,this.fillGradientSecondary)}
      </div>
    `}renderContentTitles(){const A=[];for(let[Q,B]of Object.entries(this.matchedServices))A.push(this.contentTitle(Q));return A}renderServiceButtons(){const A=[];let Q=0;for(let[B,C]of Object.entries(this.matchedServices))if(B!==this.firstService)Q++,A.push(this.serviceButton(B,Q));return this.serviceCount=Q,A}contentTitle(A){return d`
      <div
        class="ek-content-title-container min-w-max text-[20px] opacity-0 w-fit text-[16px] p-3 rounded-[40px] my-2 absolute z-[2] sm:z-[1] title-${A} ${this.currentService===A?"active":"closed"}"
      >
        <div><h2>${this.contentTitles[A]}</h2></div>
      </div>
    `}serviceButton(A,Q){return d`
      <div
        @click=${(B)=>this.handleServiceButtonClicked(A,B)}
        data-id="${A}"
        @mouseenter=${(B)=>{this.handleContainerMouseEnter(B,A,"service")}}
        @mouseleave=${(B)=>{this.handleContainerMouseLeave(B,A,"service")}}
        class="ek-service-button-${this.contentOpen?"open":"closed"} ek-service-button ${this.contentTransitionReady===!0?"ready":"notReady"} ${A} cursor-pointer ${this.currentService===A&&this.contentOpen?"selected":"not-selected"} icon z-[2] service-btn-${Q} absolute top-0"
      >
        <div
          class="ek-icon-container-closed ${this.serviceHasBeenSelected(A)?`service-selected-${A}`:`service-unselected-${A}`}"
        >
          ${this.getServiceIcons(A)}
        </div>
        <h2 class="service-button-text hidden px-[8px] z-[1] text-[20px]">
          ${this.contentTitles[A]}
        </h2>
      </div>
    `}renderContent(){return this.logEventLegacy("open","popup","all-in-one-v2"),d`
      <div
        class="ek-content top-[122px] opacity-0 w-full p-1 flex flex-col justify-center items-center rounded-[20px] relative z-[3] sm:z-[1]"
      >
        <div
          class="bg-white flex flex-col justify-center items-center rounded-[20px] overflow-hidden relative pb-[142%] sm:pb-[56.25%] w-[95vw] sm:w-[80vw] max-w-[900px]"
        >
          <div
            class="flex flex-col justify-center items-center ek-service-content absolute top-0 left-0 w-full h-full flex justify-center items-center box-border"
          >
            <div
              @click=${()=>this.handleFullscreenClick()}
              class="ek-fullscreen-icon cursor-pointer absolute top-[10px] right-[10px] z-[9]"
            ></div>
            ${this.currentService==="ARModelsElement"?d`
                  <button
                    @click=${()=>{this.handleLaunchIntoARButtonClick()}}
                    class="ek-launch-btn sm:hidden w-fit text-[16px] p-6 rounded-[40px] my-2"
                  >
                    ${this.allInOneV2PageButtonLocalisations.LaunchIntoARButtonText}
                  </button>
                  <div class="ek-qr-code hidden sm:flex">
                    ${this.getQRCode()}
                  </div>
                  <p class="ek-launch-text max-w-[200px] text-center sm:hidden">
                    ${this.allInOneV2PageButtonLocalisations.LaunchIntoARButtonSubText}
                  </p>
                  <p
                    class="ek-launch-text max-w-[400px] text-[17px] md:text-[21px] text-center hidden sm:flex"
                  >
                    ${this.allInOneV2PageButtonLocalisations.QRtext}
                  </p>
                `:this.matchedServices[this.currentService]}
          </div>
        </div>
      </div>
    `}getQRCode(){if(this.EKResolvedData["datarequirement-arqrcode"])return d` <img
        class="w-[200px] h-[200px] lg:w-[300px] lg:h-[300px]"
        src="${this.EKResolvedData["datarequirement-arqrcode"]}"
        alt="QR Code"
      />`;return null}render(){return d`
      ${this.getHostStyleOverride()} ${this.getCustomCSSStyles()}
      <style>
        :host {
          --foreground-colour: ${this.fillGradientPrimary};
          --background-colour: ${this.fillGradientSecondary};
          --text-colour: ${this.EKProps.textColour};
          --button-text-width: ${this.calculateButtonTextWidth(this.allInOneV2PageButtonLocalisations.buttonText)};
          --explore-text-width: ${this.calculateButtonTextWidth(this.allInOneV2PageButtonLocalisations.exploreIn3D)};
          line-height: 1.4;
        }
        .ek-initial-button-text,
        .service-button-text {
          color: ${this.EKProps.textColour};
        }
      </style>
      <div
        class="hidden left-[207px] left-[138px] left-[276px] left-[69px] left-[-207px] left-[-138px] left-[-276px] left-[-69px]"
      ></div>
      <div
        @click=${()=>{this.handleBackdropClick()}}
        style="display: none;"
        class="ek-backdrop fixed bg-black top-0 left-0 h-full w-full opacity-0 ${this.contentOpen===!0?"active":"inactive"}"
      ></div>
      <div
        class="${this.contentOpen?"relative ek-open":"ek-close"} h-[55px] ek-observe"
      >
        <div
          class="service-button-container ${this.contentOpen?"open":"closed"} relative flex gap-[13px]"
        >
          <div
            data-id="${this.firstService}"
            class="ek-page-button-v2-container ${this.EKProps.contentDirection} ${this.firstService} z-[3] icon flex items-center rounded-[40px] overflow-hidden p-[5px] ${this.contentOpen?"ek-container-open":"ek-container-closed"} ${this.currentService===this.firstService&&this.contentOpen?"selected":"not-selected"} cursor-pointer"
            @click=${(A)=>{this.handleOpenContent(A)}}
            @mouseenter=${(A)=>{this.handleContainerMouseEnter(A,"AllInOneV2PageButtonElement","button")}}
            @mouseleave=${(A)=>{this.handleContainerMouseLeave(A,"AllInOneV2PageButtonElement","button")}}
          >
            <div
              @click=${()=>this.currentService=Object.keys(this.matchedServices)[0]}
              class="ek-icon-container-${this.contentOpen?"open":"closed"} icon cursor-pointer z-[2] min-w-[45px]"
            >
              ${this.getServiceIcons(Object.keys(this.matchedServices)[0])}
            </div>
            <h2 class="ek-button-text text-[20px] px-[8px]">
              ${this.allInOneV2PageButtonLocalisations.buttonText}
            </h2>
          </div>
          <div
            class="gap-[13px] flex sm:flex-col absolute ek-service-buttons-and-close-icon ${this.contentTransitionReady===!0?"ready":"notReady"} ${this.EKProps.contentDirection} left-[-136px] sm:left-[0px]"
          >
            ${this.renderServiceButtons()}
            ${this.contentOpen?this.renderCloseIcon():null}
          </div>
        </div>
        <div
          class="ek-content-container ${this.contentTransitionReady===!0?"ready":"notReady"} ${this.EKProps.contentDirection} min-h-[540px] relative ${this.contentOpen?"open":"closed"}"
        >
          ${this.renderContentTitles()}
          ${this.contentOpen===!0?this.renderContent():null}
        </div>
      </div>
    `}}y([_0(".ek-observe")],i5.prototype,"ekObserveElement",void 0),y([_0(".ek-button-text")],i5.prototype,"ekButtonTextElement",void 0),y([_0(".ek-page-button-v2-container")],i5.prototype,"ekButtonContainerElement",void 0),y([_0(".ek-service-button.ARModelsElement")],i5.prototype,"ekARModelsServiceButtonElement",void 0),y([_0(".ek-service-button.ContainerElement")],i5.prototype,"ekContainerServiceButtonElement",void 0),y([NJ(".ek-service-button")],i5.prototype,"ekServiceButtons",void 0),y([_0(".ek-backdrop")],i5.prototype,"ekBackdropElement",void 0),y([FA({attribute:!1})],i5.prototype,"EKProps",void 0),y([FA({attribute:!1})],i5.prototype,"EKResolvedData",void 0),y([FA({type:Boolean})],i5.prototype,"isHovering",void 0),y([KA()],i5.prototype,"contentOpen",void 0),y([KA()],i5.prototype,"matchedServices",void 0),y([KA()],i5.prototype,"currentService",void 0),y([KA()],i5.prototype,"firstService",void 0),y([KA()],i5.prototype,"fillGradientPrimary",void 0),y([KA()],i5.prototype,"fillGradientSecondary",void 0),y([KA()],i5.prototype,"serviceClicked",void 0),y([KA()],i5.prototype,"serviceCount",void 0),y([KA()],i5.prototype,"allInOneV2PageButtonLocalisations",void 0),y([KA()],i5.prototype,"contentTitles",void 0),y([KA()],i5.prototype,"isHoveringButton",void 0),y([KA()],i5.prototype,"isStillHoveringButton",void 0),y([KA()],i5.prototype,"contentTransitionReady",void 0),y([KA()],i5.prototype,"isFullscreen",void 0),y([KA()],i5.prototype,"blockTypeToServiceMapping",void 0),y([KA()],i5.prototype,"environment",void 0),i5=y([sA("ek-all-in-one-v2-page-button")],i5);class a5 extends G0{_mouseOverBadge=!1;_mouseOverModal=!1;_mouseOverBadgeTimer=void 0;_mouseOverModalTimer=void 0;static styles=Q0`
    :host {
      display: inline-block;
    }
    button {
      width: 100%;
      height: 100%;
      background: transparent;
      drop-shadow(rgba(0, 0, 0, 0.06) 0px 2px 2px);
      border: none;
      transition: opacity 250ms cubic-bezier(0.4, 0, 0.2, 1);
      opacity: 0;
      position: relative;
    }
    button.show { opacity: 1; }
    button > img {
      min-width: 100%;
      min-height: 100%;
    }
  `;constructor(A,Q,B,C,I,E,K,J,q){super(A,Q,B,C,I,E,K,J,q,!0,"badge");this._isVisible=!1;this._isError=!1}toggleVisible(){if(this._isVisible===!0)this.setHidden();else this.setVisible()}setVisible(){if(this._isVisible=!0,this.EKChildren&&this.EKChildren.length>0){this.logEventLegacy("click",this._wotwGetDetail());const A=this.getChildToDisplay();if(A){if(A.EKBlockType==="CrossmarkElement")A.logEventLegacy("click","embed");else if(A.EKBlockType==="ULElement")A.logEventLegacy("click","embed")}if(this.EKProps?.modal?.modalActivator==="hover")this.triggerWOTWStartInteraction("modal","hover");else this.triggerWOTWStartInteraction("modal","click")}}setHidden(){this._isVisible=!1,this.triggerWOTWEndInteraction("modal")}_getBadgeImageProps(){const A=this.EKResolvedData["datarequirement-evo"],Q=this.EKResolvedData["datarequirement-processorspec"];let B=null,C="";if(this.EKChildren&&this.EKChildren.length>0){if(A){if(Q.learnMoreImageEvo&&Q.learnMoreImageEvo.url)B=Q.learnMoreImageEvo.url,C=Q.learnMoreImageEvo.altText}else if(Q.learnMoreImageCore&&Q.learnMoreImageCore.url)B=Q.learnMoreImageCore.url,C=Q.learnMoreImageCore.altText}else if(A){if(Q.badgeImageEvo&&Q.badgeImageEvo.url)B=Q.badgeImageEvo.url,C=Q.badgeImageEvo.altText}else if(Q.badgeImageCore&&Q.badgeImageCore.url)B=Q.badgeImageCore.url,C=Q.badgeImageCore.altText;return{src:B,alt:C}}_onButtonClicked(){if(this.EKProps?.modal?.modalActivator==="click")this.toggleVisible()}_onModalHover(){if(this.EKProps?.modal?.modalActivator==="hover")clearTimeout(this._mouseOverModalTimer),this._mouseOverModal=!0}_onModalLeave(){if(this.EKProps?.modal?.modalActivator==="hover")clearTimeout(this._mouseOverModalTimer),this._mouseOverModal=!1,this._mouseOverModalTimer=setTimeout(()=>{if(!this._mouseOverBadge)this.setHidden()},100)}_onBadgeHover(){if(this.EKProps?.modal?.modalActivator==="hover")clearTimeout(this._mouseOverBadgeTimer),this._mouseOverBadge=!0,this._mouseOverBadgeTimer=setTimeout(()=>{if(this._mouseOverBadge)this.setVisible()},333)}_onBadgeLeave(){if(this.EKProps?.modal?.modalActivator==="hover")clearTimeout(this._mouseOverBadgeTimer),this._mouseOverBadge=!1,this._mouseOverBadgeTimer=setTimeout(()=>{if(!this._mouseOverModal)this.setHidden()},100)}_onImageError(){this._isError=!0}_wotwGetDetail(){const A=this.EKResolvedData["datarequirement-processorspec"],Q=this.EKResolvedData["datarequirement-evo"];let B=null;const C=this.getChildToDisplay();if(C)B=C.EKBlockType==="CrossmarkElement"?"crossmark":"ul";return`intel-core-${A.group}-${A.generation}:::nexus-unknown:::${document.title}:::${B}`}getChildToDisplay(){let A=null;if(this.EKChildren&&this.EKChildren.length>0)for(let Q of this.EKChildren){const B=Q;if(B.EKBlockType==="CrossmarkElement")A=B;if(B.EKBlockType==="ULElement"&&A===null)A=B}return A}isComponentValidToRender(){return!0}render(){const A=this._getBadgeImageProps();if(A.src===null||this._isError===!0)return this.nullifyComponent("Unable to find image src or in error state"),null;const Q="#f8f8f8";let B=null;if(this.EKChildren&&this.EKChildren.length>0)B=d`<ek-modal
        .placementStrategy="${this.EKProps?.modal?.modalPlacement}"
        .EKAPIComponentParent="${this}"
        .visible="${this._isVisible}"
        .modelContent=${this.getChildToDisplay()}
        @ek-modal-close-button="${this.setHidden}"
        @ek-modal-close-backdrop="${this.setHidden}"
        @ek-mouse-over-body="${this._onModalHover}"
        @ek-mouse-out-body="${this._onModalLeave}"
        maxWidth="450px"
        noStyle
        .backdropZIndex=${this.EKProps?.modal?.modalBackdropZIndex}
        .bodyZIndex=${this.EKProps?.modal?.modalZIndex}
      >
      </ek-modal>`;return d`
      ${this.getHostStyleOverride()} ${this.getCustomCSSStyles()}
      <style>
        ek-modal {
          --modal-background-color: ${Q};
        }
        button {
          z-index: ${this.EKProps.modal?.modalBackdropZIndex||"auto"};
        }
        button > img {
          height: ${this.EKProps.badgeSize?`${this.EKProps.badgeSize}px`:"90px"};
        }
      </style>
      ${B}
      <button
        class="badge-button show"
        style="${this.getElementStyleOverride()}"
        @click="${this._onButtonClicked}"
        @mouseover="${this._onBadgeHover}"
        @mouseout="${this._onBadgeLeave}"
      >
        <img src="${A.src}" @error=${this._onImageError} />
      </button>
    `}}y([FA({attribute:!1})],a5.prototype,"EKResolvedData",void 0),y([FA({attribute:!1})],a5.prototype,"EKProps",void 0),y([KA()],a5.prototype,"_isVisible",void 0),y([KA()],a5.prototype,"_isError",void 0),y([_0("ek-modal")],a5.prototype,"ekModal",void 0),a5=y([sA("ek-badge")],a5);class r5 extends G0{constructor(A,Q,B,C,I,E,K,J,q){super(A,Q,B,C,I,E,K,J,q,!1)}isComponentValidToRender(){return!0}dataToCss(){return this.EKProps?.breakpoints?.map((A)=>`
        @media ${this.EKControlObject._breakpoints[A.breakpoint]} {
          .eky-container {
            ${A.widthGroup?.width?`width: ${A.widthGroup.width};`:""}
            ${A.widthGroup?.maxWidth100?`max-width: calc(100vw - ${(this.breadcrumbs||[]).includes("AllInOneContentElement")?22:0}px);`:""}
            ${A.heightGroup?.height?`height: ${A.heightGroup.height};`:""}
            ${A.backgroundColorGroup?.backgroundColor?`background-color: ${A.backgroundColorGroup.backgroundColor};`:""}
            ${A.boxShadowGroup?.boxShadow?`box-shadow: ${A.boxShadowGroup?.boxShadow==="yes"?"rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.1) 0px 4px 6px -4px;":"none"}`:""}
            ${A.borderRadiusGroup?.borderRadius?`border-radius: ${A.borderRadiusGroup.borderRadius};`:""} }
        }
      `)}render(){return d`
      ${this.getHostStyleOverride()}
      <style>
        ${this.dataToCss()}
      </style>
      <div class="eky-container" style="${this.getElementStyleOverride()}">
        ${this.EKChildren}
      </div>
    `}}y([FA({attribute:!1})],r5.prototype,"EKProps",void 0),r5=y([sA("ek-container")],r5);class B0 extends G0{static evoLogo="https://cdn.pointandplace.com/services/intel-crossmark/images/evo-logo.png";static crossmarkLogo="https://cdn.pointandplace.com/services/intel-crossmark/images/crossmark-logo-v2.png";static colours={textWhite:"#ffffff",textGreyDark:"#525252",textGreyLight:"#707070",textOrange:"#f0a10f",uiOrange:"#f0a10f",textBlue:"#00c7fd",uiBlue:"#00c7fd",textBlack:"#000000",textIntelTitleBlue:"#029acd"};static dynamic={introHeading:{default:"default-heading-intro",unison:"v2-heading-intro",evo:"v2-heading-intro"},introSubheading:{default:null,unison:"v2-subheading-intro",evo:"v2-subheading-intro"},featureOne:{default:null,unison:"v2-feature-one",evo:"v2-feature-one"},featureTwo:{default:null,unison:"v2-feature-two",evo:"v2-feature-two"},featureThree:{default:null,unison:"v2-feature-three",evo:"v2-feature-three"},featureFour:{default:null,unison:"v2-feature-four-unison",evo:"v2-feature-four-evo"},thisDevice:{default:"default-heading-device",unison:null,evo:null},evoImage:{default:null,unison:B0.evoLogo,evo:B0.evoLogo},evoHeading:{default:null,unison:"v2-heading-two",evo:"v2-heading-two"},evoSubheading:{default:null,unison:"v2-subheading-two",evo:"v2-subheading-two"},crossmarkImage:{default:B0.crossmarkLogo,unison:B0.crossmarkLogo,evo:B0.crossmarkLogo},crossmarkDescription:{default:"default-text-crossmark",unison:"default-text-crossmark",evo:"default-text-crossmark"},legalHeading:{default:"default-heading-legal",unison:"default-heading-legal",evo:"default-heading-legal"},legalContent:{default:"default-text-legal",unison:"default-text-legal",evo:"default-text-legal"},scoreOverallHeading:{default:"default-heading-overall-score",unison:"default-heading-overall-score",evo:"default-heading-overall-score"},scoreOverallTooltip:{default:"default-tooltip-overall-score",unison:"default-tooltip-overall-score",evo:"default-tooltip-overall-score"},scoreProductivityHeading:{default:"default-heading-productivity",unison:"default-heading-productivity",evo:"default-heading-productivity"},scoreProductivityTooltip:{default:"default-tooltip-productivity",unison:"default-tooltip-productivity",evo:"default-tooltip-productivity"},scoreCreativityHeading:{default:"default-heading-creativity",unison:"default-heading-creativity",evo:"default-heading-creativity"},scoreCreativityTooltip:{default:"default-tooltip-creativity",unison:"default-tooltip-creativity",evo:"default-tooltip-creativity"}};static get styles(){return Q0`
      :host {
        transition: transform 0.3s ease-in-out;
      }
      .smooth {
        transition: opacity 0.3s ease-in-out;
      }
      .opacity-0 {
        opacity: 0 !important;
      }
      .flex {
        display: flex;
      }
      .flex-col {
        flex-direction: column;
      }
      :host {
        display: flex;
        flex-direction: column;
        height: 100%;
        width: 100%;
        position: relative;
      }
      .eky-iframe {
        display: flex;
        width: 100%;
        height: 100%;
        border: none;
      }
      :host {
        font-size: 62.5%;
        max-width: 100%;
      }
      .container {
        font-size: 1.6rem;
        min-width: 400px;
        display: inline-flex;
        container-type: inline-size;
      }
      .container-default {
        background: #f8f8f8;
        padding: 18px;
      }
      .container-unison {
        background: url(https://cdn.pointandplace.com/services/intel-crossmark/images/bg-unison.jpg);
        background-size: cover;
        padding: 18px;
      }
      .container-evo {
        background: url(https://cdn.pointandplace.com/services/intel-crossmark/images/bg-evo.jpg);
        background-size: cover;
        padding: 18px;
        box-sizing: border-box;
        width: 100%;
      }
      .legal-button-unison,
      .legal-description-unison {
        background: #061939;
      }
      .legal-description-unison > p > a,
      .legal-description-unison > p > a:visited,
      .legal-description-evo > p > a,
      .legal-description-evo > p > a:visited {
        color: white;
      }
      .legal-button-evo,
      .legal-description-evo {
        background: #000000;
      }
      .crossmark-info-container-unison {
      }
      .crossmark-info-container-default {
        background: #ffffff;
        border: 2px solid #f0a10f;
        margin: 1rem 0;
        width: 100%;
        box-sizing: border-box;
      }
      .tooltip-popup-default {
        border: 1px solid #f0a10f;
      }
      .tooltip-popup-unison {
        color: #ffffff;
        background: black;
        border: 1px solid #00c7fd;
      }
      .tooltip-popup-unison > h3 {
        color: #00c7fd;
      }
      .tooltip-popup-evo > h3 {
        color: #00c7fd;
      }
      .tooltip-popup-evo {
        color: #ffffff;
        background: #000000;
        border: 1px solid #00c7fd;
      }
      .eky-ar {
        text-align: right;
        direction: rtl;
      }

      @container (min-width: 767px) {
        .container-default {
          background: #f8f8f8;
          padding: 50px;
        }
        .container-unison {
          background: url(https://cdn.pointandplace.com/services/intel-crossmark/images/bg-unison.jpg);
          background-size: cover;
          padding: 50px;
        }
        .container-evo {
          background: url(https://cdn.pointandplace.com/services/intel-crossmark/images/bg-evo.jpg);
          background-size: cover;
          padding: 50px;
        }
      }

      @container (min-width: 950px) {
        .container-default {
          background: #f8f8f8;
          padding: 50px;
        }
        .container-unison {
          background: url(https://cdn.pointandplace.com/services/intel-crossmark/images/bg-unison.jpg);
          background-size: cover;
          padding: 50px;
        }
        .container-evo {
          background: url(https://cdn.pointandplace.com/services/intel-crossmark/images/bg-evo.jpg);
          background-size: cover;
          padding: 50px;
        }
      }
    `}get localisations(){return{en:{"default-heading-creativity":"Q3JlYXRpdml0eQ==","default-heading-device":"VGhpcyBkZXZpY2U=","default-heading-intro":"Q2hlY2sgaG93IHRoaXMgc3lzdGVtIHBlcmZvcm1zCmFjY29yZGluZyB0byBDcm9zc21hcmvihKIgYmVuY2htYXJrLg==","default-heading-legal":"TGVnYWwgJiBkaXNjbGFpbWVycw==","default-heading-overall-score":"T3ZlcmFsbCBTY29yZQ==","default-heading-productivity":"UHJvZHVjdGl2aXR5","default-text-crossmark":"Q3Jvc3NtYXJr4oSiIGlzIGFuIGVhc3kgdG8gcnVuIG5hdGl2ZSBjcm9zcy1wbGF0Zm9ybSBiZW5jaG1hcmsgCnRoYXQgbWVhc3VyZXMgdGhlIG92ZXJhbGwgc3lzdGVtIHBlcmZvcm1hbmNlIGFuZCBzeXN0ZW0gCnJlc3BvbnNpdmVuZXNzIHVzaW5nIG1vZGVscyBvZiByZWFsLXdvcmxkIGFwcGxpY2F0aW9ucy4=","default-text-legal":"QmFzZWQgb24gYW5hbHlzaXMgbm9ybWFsaXplZCB0byBhIDUtcG9pbnQgc2NhbGUgb2YgcHVibGlzaGVkIG1vYmlsZSBDcm9zc21hcmsgZGF0YSBmcm9tIDx1cmwtMDAxPiBhcyBkb3dubG9hZGVkIG9uIDxkYXRlPi4gU2VlIGRldGFpbHMgYXQgPHVybC0wMDI+LiBQZXJmb3JtYW5jZSB2YXJpZXMgYnkgdXNlLCBjb25maWd1cmF0aW9ucyBhbmQgb3RoZXIgZmFjdG9ycy4gPHVybC0wMDM+Lg==","default-tooltip-creativity":"UGVyZm9ybWFuY2Ugb2YgCmNvbW1vbiBjb250ZW50IGNyZWF0aW9uIGFwcGxpY2F0aW9uIHVzYWdlcyBzdWNoIGFzIGVkaXRpbmcgcGhvdG9zLCBvcmdhbml6aW5nIHBob3RvIGFsYnVtcywgYW5kIGVkaXRpbmcvcmVuZGVyaW5nIHZpZGVvcy4=","default-tooltip-overall-score":"T3ZlcmFsbCBwZXJmb3JtYW5jZSBiYXNlZCBvbiByZWFsaXN0aWMgdXNhZ2VzIHN1Y2ggYXMgY3JlYXRpbmcgd29yZCBkb2N1bWVudHMgYW5kIHByZXNlbnRhdGlvbnMsIGVkaXRpbmcgc3ByZWFkc2hlZXRzLCBicm93c2luZyB0aGUgd2ViLCBhbmQgZWRpdGluZyBwaG90b3MgYW5kIHZpZGVvcy4=","default-tooltip-productivity":"UGVyZm9ybWFuY2Ugb2YgY29tbW9uIG9mZmljZSBwcm9kdWN0aXZpdHkgYXBwbGljYXRpb24gdXNhZ2VzCnN1Y2ggYXMgY3JlYXRpbmcgd29yZCBkb2N1bWVudHMsIHVzaW5nIGUtbWFpbCwgZWRpdGluZyBwcmVzZW50YXRpb25zLCBtb2RlbGxpbmcgd2l0aCBzcHJlYWRzaGVldHMsIAphbmQgYnJvd3NpbmcgdGhlIHdlYi4=","global-service-name":"SW50ZWzCriBDcm9zc21hcmvihKI=","v2-feature-four-evo":"SW5zdGFudCBXYWtl","v2-feature-four-unison":"U2VhbWxlc3NseSBDb25uZWN0IFRvIEFueQpTbWFydHBob25l","v2-feature-one":"VGhpbiBhbmQgTGlnaHQgRGVzaWducw==","v2-feature-three":"TG9vayBhbmQgU291bmQgWW91ciBCZXN0IE9uClZpZGVvIENoYXRz","v2-feature-two":"QWxsLWRheSBCYXR0ZXJ5IExpZmU=","v2-heading-intro":"SW50ZWzCriBFdm/ihKIgTGFwdG9wcw==","v2-heading-two":"U3VwZXJpb3IgcGVyZm9ybWFuY2UgcG93ZXJlZCBieSBJbnRlbMKuIENvcmXihKIgUHJvY2Vzc29ycw==","v2-subheading-intro":"VGhlIEJlc3QgT3ZlcmFsbCBMYXB0b3AgRXhwZXJpZW5jZQ==","v2-subheading-two":"VGhpcyBJbnRlbMKuIEV2b+KEoiBsYXB0b3AgaXMgcG93ZXJlZCBieSBhbiBJbnRlbMKuIENvcmXihKIgPGNwdT4="},br_pt:{"default-heading-creativity":"Q3JpYXRpdmlkYWRl","default-heading-device":"RXN0ZSBkaXNwb3NpdGl2bw==","default-heading-intro":"VmVyaWZpcXVlIG8gZGVzZW1wZW5obyBkZXNzZSBzaXN0ZW1hIGRlIGFjb3JkbyBjb20gbyBwYXLDom1ldHJvIGRlIHJlZmVyw6puY2lhIENyb3NzbWFya+KEoi4=","default-heading-legal":"SW5mb3JtYcOnw7VlcyBsZWdhaXMgZSBhdmlzb3MgZGUgaXNlbsOnw6NvIGRlIHJlc3BvbnNhYmlsaWRhZGU=","default-heading-overall-score":"UG9udHVhw6fDo28gZ2VyYWw=","default-heading-productivity":"UHJvZHV0aXZpZGFkZQ==","default-text-crossmark":"TyBDcm9zc21hcmvihKIgw6kgdW0gcGFyw6JtZXRybyBkZSByZWZlcsOqbmNpYSBuYXRpdm8gbXVsdGlwbGF0YWZvcm1hIGUgZGUgZsOhY2lsIGV4ZWN1w6fDo28gcXVlIG1lZGUgbyBkZXNlbXBlbmhvIGdlcmFsIGUgYSBjYXBhY2lkYWRlIGRlIHJlc3Bvc3RhIGRvIHNpc3RlbWEgdXNhbmRvIG1vZGVsb3MgZGUgYXBsaWNhdGl2b3MgZG8gbXVuZG8gcmVhbC4=","default-text-legal":"Q29tIGJhc2UgbmEgYW7DoWxpc2UsIG5vcm1hbGl6YWRhIHBhcmEgdW1hIGVzY2FsYSBkZSA1IHBvbnRvcywgZGUgZGFkb3MgQ3Jvc3NtYXJrIG3Ds3ZlaXMgcHVibGljYWRvcyBwcm92ZW5pZW50ZXMgZGUgPHVybC0wMDE+IGUgdHJhbnNmZXJpZG9zIGEgPGRhdGU+LiBDb25zdWx0ZSBvcyBkZXRhbGhlcyBlbSA8dXJsLTAwMj4uIE8gZGVzZW1wZW5obyB2YXJpYSBkZSBhY29yZG8gY29tIG8gdXNvLCBhIGNvbmZpZ3VyYcOnw6NvIGUgb3V0cm9zIGZhdG9yZXMuIDx1cmwtMDAzPi4=","default-tooltip-creativity":"RGVzZW1wZW5obyBkZSB1c29zIGNvbXVucyBkZSBhcGxpY2F0aXZvcyBkZSBjcmlhw6fDo28gZGUgY29udGXDumRvLCBjb21vIGVkacOnw6NvIGRlIGZvdG9zLCBvcmdhbml6YcOnw6NvIGRlIMOhbGJ1bnMgZGUgZm90b3MgZSBlZGnDp8Ojby9yZW5kZXJpemHDp8OjbyBkZSB2w61kZW9zLg==","default-tooltip-overall-score":"RGVzZW1wZW5obyBnZXJhbCBiYXNlYWRvIGVtIHVzb3MgcmVhbGlzdGFzLCBjb21vIGNyaWHDp8OjbyBkZSBkb2N1bWVudG9zIGRvIFdvcmQgZSBhcHJlc2VudGHDp8O1ZXMsIGVkacOnw6NvIGRlIHBsYW5pbGhhcywgbmF2ZWdhw6fDo28gbmEgV2ViIGUgZWRpw6fDo28gZGUgZm90b3MgZSB2w61kZW9zLg==","default-tooltip-productivity":"RGVzZW1wZW5obyBkZSB1c29zIGNvbXVucyBkZSBhcGxpY2F0aXZvcyBkZSBwcm9kdXRpdmlkYWRlIGRlIGVzY3JpdMOzcmlvLCBjb21vIGNyaWHDp8OjbyBkZSBkb2N1bWVudG9zIGRvIFdvcmQsIHVzbyBkZSBlLW1haWwsIGVkacOnw6NvIGRlIGFwcmVzZW50YcOnw7VlcywgbW9kZWxhZ2VtIGRlIHBsYW5pbGhhcyBlIG5hdmVnYcOnw6NvIG5hIFdlYi4=","global-service-name":"SW50ZWzCriBDcm9zc21hcmvihKI=","v2-feature-four-evo":"QXRpdmHDp8OjbyBpbnN0YW50w6JuZWE=","v2-feature-four-unison":"Q29uZWN0ZS1zZSBjb20gZmFjaWxpZGFkZSBhIHF1YWxxdWVyIHNtYXJ0cGhvbmU=","v2-feature-one":"RGVzaWducyBmaW5vcyBlIGxldmVz","v2-feature-three":"U3VhIG1lbGhvciBhcGFyw6puY2lhIGVtIGNoYXRzIHBvciB2w61kZW8=","v2-feature-two":"QSBiYXRlcmlhIGR1cmEgdW0gZGlhIGludGVpcm8=","v2-heading-intro":"Tm90ZWJvb2tzIEludGVswq4gRXZv4oSi","v2-heading-two":"RSBhaW5kYSBvYnRlbmhhIGRlc2VtcGVuaG8gc3VwZXJpb3IgY29tIG9zIHByb2Nlc3NhZG9yZXMgSW50ZWzCriBDb3Jl4oSi","v2-subheading-intro":"RXhwZXJpw6puY2lhIGNvbXBsZXRhCmVtIG5vdGVib29r","v2-subheading-two":"RXN0ZXMgc8OjbyBvcyBub3RlYm9va3MgSW50ZWzCriBFdm/ihKIgY29tIHByb2Nlc3NhZG9yIDxjcHU+"},ar:{"default-heading-creativity":"2KfZhNil2KjYr9in2Lk=","default-heading-device":"2YfYsNinINin2YTYrNmH2KfYsjo=","default-heading-intro":"2KrYudix2ZHZgSDYudmE2Ykg2KPYr9in2KEg2YfYsNinINin2YTZhti42KfZhSDZiNmB2YLZi9inINmE2YTYp9iu2KrYqNin2LEg2KfZhNmF2LnZitin2LHZiiBDcm9zc21hcmvihKLigI4u","default-heading-legal":"2KXYrtmE2KfYoSDYp9mE2YXYs9ik2YjZhNmK2Kkg2KfZhNmC2KfZhtmI2YbZitip","default-heading-overall-score":"2KfZhNmG2KrZitis2Kkg2KfZhNil2KzZhdin2YTZitip","default-heading-productivity":"2KfZhNil2YbYqtin2KzZitip","default-text-crossmark":"2KXZhiBDcm9zc21hcmvihKLigI4g2YfZiCDYp9iu2KrYqNin2LEg2YXYudmK2KfYsdmKINij2LXZhNmKINmI2LPZh9mEINin2YTYqti02LrZitmEINi52YTZiSDYo9mKINmF2YbYtdipINmK2YLZitizINij2K/Yp9ihINin2YTZhti42KfZhSDYp9mE2KXYrNmF2KfZhNmKINmI2LPYsdi52Kkg2KfYs9iq2KzYp9io2Kkg2KfZhNmG2LjYp9mFINio2KfYs9iq2K7Yr9in2YUg2YbZhdin2LDYrCDYqti32KjZitmC2KfYqiDZhdmGINin2YTYudin2YTZhSDYp9mE2YHYudmE2You","default-text-legal":"2KfYs9iq2YbYp9iv2YvYpyDYpdmE2Ykg2KrYrdmE2YrZhCDZhdi22KjZiNi3INi52YTZiSDZhdmC2YrYp9izINmF2YYg2K7ZhdizICg1KSDZhtmC2KfYtyDZhNio2YrYp9mG2KfYqiBDcm9zc21hcmsg2KfZhNmF2YbYtNmI2LHYqSDZhNmE2KPYrNmH2LLYqSDYp9mE2YXYrdmF2YjZhNipINin2YTZhdiz2KrZhdiv2Kkg2YXZhiA8dXJsLTAwMT4g2YjYqtmFINiq2YbYstmK2YTZh9inINi52YTZiSA8ZGF0ZT4uINin2LfZhNi5INi52YTZiSDYp9mE2KrZgdin2LXZitmEINi52KjYsSA8dXJsLTAwMj4uINmK2K7YqtmE2YEg2KfZhNij2K/Yp9ihINit2LPYqC4g2KfZhNin2LPYqtiu2K/Yp9mFINmI2KfZhNiq2YPZiNmK2YYg2YjYudmI2KfZhdmEINij2K7YsdmJLiA8dXJsLTAwMz4u","default-tooltip-creativity":"2KfZhNij2K/Yp9ihINi52YbYryDYp9iz2KrYrtiv2KfZhSDYqti32KjZitmC2KfYqiDYpdmG2LTYp9ihINmF2K3YqtmI2Ykg2LTYp9im2LnYqdiMINmF2KvZhCDYqtit2LHZitixINin2YTYtdmI2LHYjCDZiNiq2YbYuNmK2YUg2KPZhNio2YjZhdin2Kog2KfZhNi12YjYsdiMINmI2KrYrdix2YrYsS/Yudix2LYg2YXZgtin2LfYuSDYp9mE2YHZitiv2YrZiC4=","default-tooltip-overall-score":"2KfZhNij2K/Yp9ihINin2YTYpdis2YXYp9mE2Yog2KfYs9iq2YbYp9iv2YvYpyDYpdmE2Ykg2KfYs9iq2K7Yr9in2YXYp9iqINmI2KfZgti52YrYqdiMINmF2KvZhCDYpdmG2LTYp9ihINmF2LPYqtmG2K/Yp9iqIFdvcmQg2YjYudix2YjYtiDYqtmC2K/ZitmF2YrYqdiMINmI2KrYrdix2YrYsSDYrNiv2KfZiNmEINin2YTYqNmK2KfZhtin2KrYjCDZiNiq2LXZgditINin2YTYpdmG2KrYsdmG2KrYjCDZiNiq2K3YsdmK2LEg2KfZhNi12YjYsSDZiNmF2YLYp9i32Lkg2KfZhNmB2YrYr9mK2Ygu","default-tooltip-productivity":"2KfZhNij2K/Yp9ihINi52YbYryDYp9iz2KrYrtiv2KfZhSDYqti32KjZitmC2KfYqiDYpdmG2KrYp9is2YrYqSDZhdmD2KrYqNmK2Kkg2LTYp9im2LnYqdiMINmF2KvZhCDYpdmG2LTYp9ihINmF2LPYqtmG2K/Yp9iqIFdvcmTYjCDZiNin2LPYqtiu2K/Yp9mFINin2YTYqNix2YrYryDYp9mE2KXZhNmD2KrYsdmI2YbZitiMINmI2KrYrdix2YrYsSDYp9mE2LnYsdmI2LYg2KfZhNiq2YLYr9mK2YXZitip2Iwg2YjYp9mE2YbZhdiw2KzYqSDYqNin2LPYqtiu2K/Yp9mFINis2K/Yp9mI2YQg2KfZhNio2YrYp9mG2KfYqtiMINmI2KrYtdmB2K0g2KfZhNil2YbYqtix2YbYqi4=","global-service-name":"SW50ZWzCriBDcm9zc21hcmvihKLigI4=","v2-feature-four-evo":"2KjYr9ihINiq2LTYutmK2YQg2YHZiNix2Yog2KjYudivINmI2LbYuSDYp9mE2LPZg9mI2YY=","v2-feature-four-unison":"2KrZiNi12YrZhCDYqNiz2YTYp9iz2KkK2KjYo9mKINmH2KfYqtmBINiw2YPZig==","v2-feature-one":"2KrYtdin2YXZitmFINix2YHZiti52Kkg2K7ZgdmK2YHYqSDYp9mE2YjYstmG","v2-feature-three":"2KPZgdi22YQg2KXYt9mE2KfZhNipINmI2LXZiNiqCtmB2Yog2K/Ysdiv2LTYp9iqINin2YTZgdmK2K/ZitmI","v2-feature-two":"2KjYt9in2LHZitipINiq2K/ZiNmFINi32YjYp9mEINin2YTZitmI2YU=","v2-heading-intro":"2KPYrNmH2LLYqSDZhNin2KjYqtmI2KggSW50ZWzCriBFdm/ihKLigI4=","v2-heading-two":"2YjYp9it2LXZhCDYo9mK2LbZi9inINi52YTZiSDYo9iv2KfYoSDZgdin2KbZggrYqNiv2LnZhSDZhdmGINmF2LnYp9mE2KzYp9iqIEludGVswq4gQ29yZeKEog==","v2-subheading-intro":"2KfYrdi12YQg2LnZhNmJINij2YHYttmEINiq2KzYsdio2Kkg2YrZhdmD2YYg2KPZhiDZitmF2YbYrdmH2Kcg2YTZgyDZhNin2KjYqtmI2Kg=","v2-subheading-two":"2YfYsNinINin2YTZg9mF2KjZitmI2KrYsSDYp9mE2YXYrdmF2YjZhCDZhdmGINmG2YjYuSDihKJJbnRlbMKuIEV2byDZhdi02LrZkdmEINio2YjYp9iz2LfYqSDZhdi52KfZhNisIDxjcHU+"}}}renderTailwindStyles(){return d`<style class="eky-tailwind-styles">
      .hidden {
        overflow: hidden;
        opacity: 0;
      }
      .flex {
        display: flex;
      }
      .flex-col {
        flex-direction: column;
      }
      .flex-centered {
        justify-content: center;
        align-items: center;
        text-align: center;
      }
      .flex-1 {
        flex: 1;
      }
      .items-center {
        align-items: center;
      }
      .justify-center {
        justify-content: center;
      }
      .text-center {
        text-align: center;
      }
      .gap-4 {
        gap: 1rem;
      }
      .pr-4 {
        padding-right: 1rem;
      }
      .pr-8 {
        padding-right: 2rem;
      }
      .pl-4 {
        padding-left: 1rem;
      }
      .pl-8 {
        padding-left: 2rem;
      }
      .px-4 {
        padding-left: 1rem;
        padding-right: 1rem;
      }
      .py-2 {
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
      }
      .py-4 {
        padding-top: 1rem;
        padding-bottom: 1rem;
      }
      .py-6 {
        padding-top: 1.5rem;
        padding-bottom: 1.5rem;
      }
      .py-8 {
        padding-top: 2rem;
        padding-bottom: 2rem;
      }
      .m-0 {
        margin: 0;
      }
      .mb-1 {
        margin-bottom: 0.25rem;
      }
      .mb-2 {
        margin-bottom: 0.5rem;
      }
      .mb-4 {
        margin-bottom: 1rem;
      }
      .mb-8 {
        margin-bottom: 2rem;
      }
      .p-0 {
        padding: 0;
      }
      .zeroed {
        margin: 0;
        padding: 0;
      }

      .p-4 {
        padding: 1rem;
      }

      .text-xs {
        font-size: 12px;
      }
      .text-sm {
        font-size: 14px;
      }
      .text-md {
        font-size: 18px;
      }
      .text-lg {
        font-size: 20px;
      }
      .text-xl {
        font-size: 24px;
      }
      .bold {
        font-weight: 700;
      }
      .font-medium {
        font-weight: 500;
      }

      .mt-1 {
        margin-top: 0.25rem;
      }
      .mt-2 {
        margin-top: 0.5rem;
      }
      .-mx-2 {
        margin-left: -0.5rem;
        margin-right: -0.5rem;
      }
      .-mx-4 {
        margin-left: -1rem;
        margin-right: -1rem;
      }

      .w-8 {
        width: 2rem;
      }
      .h-8 {
        height: 2rem;
      }
      .w-12 {
        width: 3rem;
      }
      .h-12 {
        height: 3rem;
      }
      .h-16 {
        height: 4rem;
      }

      .max-w-xs {
        max-width: 20rem;
      }
      .max-w-xxs {
        max-width: 10rem;
      }

      .absolute {
        position: absolute;
      }
      .relative {
        position: relative;
      }
      .bottom-0 {
        bottom: 0;
      }
      .left-0 {
        left: 0;
      }
      .z-10 {
        z-index: 10;
      }
      .z-20 {
        z-index: 20;
      }
      .removed {
        display: none !important;
      }
      .box-shadow {
        box-shadow: 0px 0 8px 4px rgba(0, 0, 0, 0.15);
      }
      .pointer {
        cursor: pointer;
      }
      .opacity {
        opacity: 75;
      }
      .leading-relaxed {
        line-height: 1.5;
      }
    </style>`}renderTextStyles(){return d`<style class="intel-ul-embed-text-styles">
      @font-face {
        font-family: "IntelOneRegular";
        src: url("https://cdn.pointandplace.com/fonts/intelone-display/intelone-display-regular.ttf");
      }
      @font-face {
        font-family: "IntelOneLight";
        src: url("https://cdn.pointandplace.com/fonts/intelone-display/intelone-display-light.ttf");
      }
      @font-face {
        font-family: "IntelOneBold";
        src: url("https://cdn.pointandplace.com/fonts/intelone-display/intelone-display-bold.woff");
      }
      .text {
        font-family: "IntelOneRegular", sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      .text-light {
        font-family: "IntelOneLight", sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      .text-bold {
        font-family: "IntelOneBold", sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
    </style>`}renderCustomStyles(){const A=`
      .container {
        display: flex;
        position: relative;
        flex-direction: column;
      }
      .legal-disclaimer {
        margin: 0 -1rem -1rem -1rem;
      }
      .text-white {
        color: ${B0.colours.textWhite}
        ;
      }
      .text-grey-dark {
        color: ${B0.colours.textGreyDark}
        ;
      }
      .text-grey-light {
        color: ${B0.colours.textGreyLight}
        ;
      }
      .text-orange {
        color: ${B0.colours.textOrange}
        ;
      }
      .text-blue {
        color: ${B0.colours.textBlue}
        ;
      }
      .text-intel-title-blue {
        color: ${B0.colours.textIntelTitleBlue}
        ;
      }
      .hr-top-default {
        border: 1px solid ${B0.colours.uiOrange}
        ;
        margin-right: 1rem;
        margin-left: 1rem;
      }
      .hr-bottom-default {
        border: 1px solid ${B0.colours.uiOrange}
        ;
        margin-right: -1rem;
        margin-left: -1rem;
      }
      .hr-bottom-unison {
        border: 1px solid ${B0.colours.uiBlue}
        ;
        margin-right: 1rem;
        margin-left: 1rem;
        margin-bottom: 1rem;
      }
      .hr-bottom-evo {
        border: 1px solid ${B0.colours.uiBlue}
        ;
        margin-right: 1rem;
        margin-left: 1rem;
      }
      .feature-cell {
        border-right: 2px solid ${B0.colours.uiBlue}
        ;
        padding-right: 1rem;
      }
      .feature-cell:last-child {
        border-right: none;
      }
      .legal-description {
        height: 0;
        overflow: hidden;
        position: absolute;
        bottom: 0;
        left: 0;
        background: white;
        transition-property: all;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        transition-duration: 333ms;
        padding: 0 2rem 0 2rem;
      }
      .legal-description-expanded {
        height: 275px;
        padding: 1rem 2rem 3rem 2rem;
        box-shadow: inset 0 2px 4px 0 rgb(0 0 0 / 0.05);
      }
      .tooltip:hover {
        z-index: 10;
      }
      .tooltip-popup {
        width: 250px;
        background: white;
        bottom: 1.75rem;
        padding: 0.5rem;
        border-radius: 0.5rem;
      }
      .tooltip-unison > i > svg {
        background: white;
        border-radius: 100%;
      }
      .tooltip-evo > i > svg {
        background: white;
        border-radius: 100%;
      }
      .h-16 {
        height: 75px;
      }
    `,Q=`
      .text-grey-light {
        color: ${B0.colours.textGreyLight};
      }
      .text-center {
        text-align: center;
      }
      .mb-0 {
        margin-bottom: 0px;
      }
      .mb-1 {
        margin-bottom: 5px !important;
      }
      .m-0 {
        margin: 0;
      }
      .text-bold {
        font-weight: 600;
      }
      .relative {
        position: relative;
      }
      .absolute {
        position: absolute;
      }
      .removed {
        display: none !important;
      }
      .w-full {
        width: 100%;
      }
      .justify-around {
        justify-content: space-around;
      }
      .pointer {
        text-align: center;
        margin-top: 0.5rem;
      }
      .tooltip-popup {
        text-align: start;
        font-style: initial;
        width: 123px;
        font-size: 11px;
        bottom: 51px;
        padding: 10px;
      }
      .tooltip {
        align-items: center;
      }
      .crossmark-default-header {
        margin-top: 20px;
        line-height: initial;
      }
      .tooltip-popup-default-arrow {
        width: 20px;
        height: 20px;
        border-bottom: 1px solid rgb(240, 161, 15);
        border-right: 1px solid rgb(240, 161, 15);
        position: absolute;
        background: #fff;
        left: 62px;
        bottom: -12px;
        rotate: 45deg;
        overflow: hidden;
      }
      .hr-top-default {
        border: 1px solid #f0a10f;
        margin-right: 1rem;
        margin-left: 1rem;
      }
      .crossmark-default-heading {
        font-size: 21px;
      }
      .crossmark-default-device-info-heading {
        font-size: 21px;
        margin-top: 14px;
        margin-bottom: 0px;
        font-weight: 500;
      }
      .crossmark-default-device-info-sub-text {
        margin-top: 0px;
        margin-bottom: 10px;
        color: #525252;
      }
      .tooltip-popup-scoreOverall {
        left: -64px !important;
      }
      .tooltip-popup-scoreCreativity {
        left: -64px !important;
      }
      .tooltip-popup-scoreProductivity {
        left: -64px !important;
      }
      .score-and-tooltip-container {
        display: flex;
        flex-direction: column;
        width: 100%;
      }
      .tooltip-title {
        font-size: 15px;
      }
      .crossmark-info-container-default {
        font-size: 10px;
        justify-content: center;
        align-items: center;
        padding: 12px;
        margin-bottom: 1rem;
        background: rgb(255, 255, 255);
        border: 2px solid rgb(240, 161, 15);
        margin-top: 1rem;
        margin-bottom: 1rem;
        line-height: initial;
      }
      .crossmark-info-icon {
        width: 40px;
        margin-right: 12px;
      }
      .legal-disclaimer {
        position: relative;
      }
      .legal-disclaimer-default {
        background-color: white;
        margin: -18px;
      }
      .legal-button-default {
        font-size: 17px;
        text-transform: uppercase;
        cursor: pointer;
      }
      .legal-description {
        font-size: 10px;
      }
      .legal-description-expanded-default {
        height: 87px;
        bottom: 49px;
        padding: 20px 20px 20px 20px;
        font-size: 10px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        box-shadow: 0px -4px 12px rgba(0, 0, 0, 0.2);
      }
      .disclaimer-close-icon-default {
        position: absolute;
        top: 16px;
        right: 16px;
        z-index: 22;
        font-size: 16px;
        cursor: pointer;
        color: ${B0.colours.textOrange};
      }
      .legal-description > p > a {
        color: ${B0.colours.textOrange};
      }

      @container (min-width: 767px) {
        .hr-top-default {
          border: 1px solid #f0a10f;
          margin-right: 1rem;
          margin-left: 1rem;
        }
        .crossmark-default-heading {
          font-size: 37px;
          margin-bottom: 10px;
        }
        .crossmark-default-device-info-heading {
          font-size: 29px;
          margin-top: 30px;
          margin-bottom: 0px;
          font-weight: 500;
        }
        .crossmark-default-device-info-sub-text {
          margin-top: 5px;
          margin-bottom: 10px;
          color: #525252;
          font-size: 34px;
        }
        .score-and-tooltip-container {
          display: flex;
          flex-direction: column;
          width: 100%;
          max-width: 200px;
        }
        .tooltip-title {
          font-size: 24px;
        }
        .crossmark-info-container-default {
          font-size: 20px;
          justify-content: center;
          align-items: center;
          padding: 20px;
          margin-bottom: 1rem;
          background: rgb(255, 255, 255);
          border: 2px solid rgb(240, 161, 15);
          margin-top: 17px;
          margin-bottom: 24px;
          line-height: initial;
        }
        .crossmark-info-icon {
          width: 70px;
          margin-right: 12px;
        }
        .legal-disclaimer-default {
          background-color: white;
          padding: 0;
          margin: 0;
          box-shadow: none;
        }
        .legal-button-default {
          font-size: 23px;
          text-transform: uppercase;
          cursor: pointer;
        }
        .legal-description-expanded-default {
          height: 87px;
          bottom: 50px;
          padding: 40px 40px 40px 40px;
          font-size: 16px;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          box-shadow: 0px -4px 12px rgba(0, 0, 0, 0.2);
        }
        .disclaimer-close-icon-default {
          position: absolute;
          top: 16px;
          right: 16px;
          z-index: 22;
          font-size: 18px;
          cursor: pointer;
          color: ${B0.colours.textOrange};
        }
        .score-default {
          justify-content: space-between;
        }
      }

      @container (min-width: 950px){
        .hr-top-default {
          border: 1px solid #f0a10f;
          margin-right: 19rem;
          margin-left: 19rem;
        }
        .crossmark-default-heading {
          font-size: 37px;
          margin-bottom: 10px;
          padding: 0px 100px 0px 100px;
        }
        .crossmark-default-device-info-heading {
          font-size: 29px;
          margin-top: 30px;
          margin-bottom: 0px;
          font-weight: 500;
        }
        .crossmark-default-device-info-sub-text {
          margin-top: 5px;
          margin-bottom: 10px;
          color: #525252;
          font-size: 34px;
        }
        .score-and-tooltip-container {
          display: flex;
          flex-direction: column;
          width: 100%;
          max-width: 200px;
        }
        .tooltip-title {
          font-size: 28px;
        }
        .crossmark-info-container-default {
          font-size: 22px;
          justify-content: center;
          align-items: center;
          padding: 16px;
          margin-bottom: 1rem;
          background: rgb(255, 255, 255);
          border: 2px solid rgb(240, 161, 15);
          margin-top: 56px;
          margin-bottom: 56px;
          max-width: 907px;
          line-height: initial;
        }
        .crossmark-info-icon {
          width: 60px;
          margin-right: 12px;
        }
        .legal-disclaimer-default {
          background-color: white;
          box-shadow: none;
        }
        .legal-button-default {
          font-size: 27px;
          text-transform: uppercase;
          cursor: pointer;
        }
        .legal-description-expanded-default {
          height: 53px;
          bottom: 50px;
          padding: 40px 40px 40px 40px;
          font-size: 18px;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          box-shadow: 0px -4px 12px rgba(0, 0, 0, 0.2);
        }
        .disclaimer-close-icon-default {
          position: absolute;
          top: 19px;
          right: 19px;
          z-index: 22;
          font-size: 23px;
          cursor: pointer;
          color: ${B0.colours.textOrange};
        }
        .score-default {
          justify-content: space-evenly;
        }
        .tooltip-default {
          flex-direction: row !important;
          justify-content: center;
        }
        .tooltip-default > h3 {
          margin-right: 15px;
        }
        .crossmark-info {
          display: flex;
          justify-content: center;
        }
        .scores-and-tooltips-default {
          display: flex !important;
          justify-content: center;
        }
        .scores-and-tooltips-default > div {
          max-width: 916px;
          width: 100%;
        }
      }
    `,B=`
      :host {
        align-items: center;
      }
      .text-grey-light {
        color: ${B0.colours.textGreyLight};
      }
      .text-center {
        text-align: center;
      }
      .mb-0 {
        margin-bottom: 0px;
      }
      .mb-1 {
        margin-bottom: 5px !important;
      }
      .m-0 {
        margin: 0;
      }
      .text-bold {
        font-weight: 600;
      }
      .relative {
        position: relative;
      }
      .absolute {
        position: absolute;
      }
      .removed {
        display: none !important;
      }
      .w-full {
        width: 100%;
      }
      .justify-around {
        justify-content: space-around;
      }
      .pointer {
        text-align: center;
        margin-top: 0.5rem;
      }
      .tooltip-popup {
        text-align: start;
        font-style: initial;
      }
      .tooltip-popup {
        width: 123px;
        font-size: 11px;
        bottom: 51px;
        padding: 10px;
      }
      .tooltip {
        align-items: center;
      }
      .crossmark-evo-header {
        margin-top: 20px;
      }
      .tooltip-popup-evo-arrow {
        width: 20px;
        height: 20px;
        border-bottom: 1px solid rgb(0, 199, 253);
        border-right: 1px solid rgb(0, 199, 253);
        position: absolute;
        background: black;
        left: 62px;
        bottom: -12px;
        rotate: 45deg;
        overflow: hidden;
      }
      .hr-top-evo {
        border: 1px solid #f0a10f;
        margin-right: 1rem;
        margin-left: 1rem;
      }
      .crossmark-evo-heading {
        font-size: 19px;
        margin-top: 20px;
        margin-bottom: 5px;
        color: rgb(0, 199, 253);
      }
      .crossmark-evo-sub-heading {
        margin-top: 0px;
        margin-bottom: 20px;
        font-size: 23px;
      }
      .features-evo {
        font-size: 11px;
      }
      .feature-cell {
        padding-right: 0px;
        max-width: 90px;
        align-items: center;
        justify-content: center;
        padding: 7px;
      }
      .device-info-evo-container {
        display: flex;
        justify-content: center;
        width: 100%;
        margin-top: 20px;
        margin-bottom: 8px;
      }
      .device-info-evo {
        display: flex;
        max-width: 283px;
      }
      .device-info-image-evo {
        margin-right: 10px;
      }
      .device-info-image-evo > img {
        height: 83px;
      }
      .device-info-leading-text-evo {
        margin-bottom: 10px;
        line-height: 1.4;
      }
      .device-info-sub-text-evo {
        line-height: 1.4;
      }
      .score-and-tooltip-container {
        display: flex;
        flex-direction: column;
        width: 100%;
      }
      .tooltip-title {
        font-size: 15px;
        color: white;
      }
      .scores-and-tooltips-evo{
        width: 100%;
      }
      .tooltip-evo{
        flex-direction: column!important;
        justify-content: center;
      }
      .crossmark-info {
        font-size: 10px;
        display: flex;
        width: 100%;
        justify-content: center;
        align-items: center;
      }
      .crossmark-info-icon {
        width: 40px;
        margin-right: 12px;
      }
      .crossmark-info-container-evo {
        font-size: 10px;
        padding: 12px;
        color: white;
        max-width: 326px;
        margin: 0px !important;
        display: flex;
        justify-content: center;
        align-items: center;
        line-height: initial;
      }
      .legal-disclaimer-evo {
        background: black;
        margin: -18px;
      }
      .legal-disclaimer {
        position: relative;
        margin: 0 -1.15rem -1.1rem -1.1rem;
      }
      .legal-button-evo {
        font-size: 17px;
        text-transform: uppercase;
        cursor: pointer;
        color: white;
      }
      .legal-description-expanded-evo{
        height: 87px;
        bottom: 49px;
        padding: 20px 20px 20px 20px;
        font-size: 10px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        box-shadow: 0px -4px 12px rgba(0, 0, 0, 0.2);
        background: black !important;
      }
      .legal-description {
        font-size: 10px;
      }
      .legal-description>p>a{
        color: rgb(0, 199, 253) !important;
      }
      .disclaimer-close-icon-evo{
        position: absolute;
        top: 16px;
        right: 16px;
        z-index: 22;
        font-size: 18px;
        cursor: pointer;
        color: rgb(0, 199, 253);
      }
      .tooltip-popup-default{
        border: 1px solid rgb(0, 199, 253);
      }
      .tooltip-popup-scoreOverall{
        left: -64px!important;
      }
      .tooltip-popup-scoreProductivity{
        left: -64px!important;
      }
      .tooltip-popup-scoreCreativity{
        left: -64px!important;
      }
      .crossmark-info-hr-evo{
        background: transparent;
        border-top-width: 2px;
        border-color: #00c7fd;
        border-top-style: solid;
        margin-top: 20px;
        width: 100%;
      }

      @container (min-width: 767px) {
        :host {
          align-items: stretch;
        }
        .tooltip-popup  {
          width: 186px;
          font-size: 11px;
          padding: 10px;
        }
        .tooltip-popup-evo-arrow  {
          width: 15px;
          height: 15px;
          border-bottom: 1px solid rgb(0, 199, 253);
          border-right: 1px solid rgb(0, 199, 253);
          position: absolute;
          background: black;
          left: 94px;
          bottom: -9px;
          overflow: hidden;
        }
        .hr-top-evo  {
          border: 1px solid #f0a10f;
          margin-right: 1rem;
          margin-left: 1rem;
        }
        .crossmark-evo-heading  {
          font-size: 34px;
          margin-bottom: 0px;
          color: rgb(0, 199, 253);
        }
        .crossmark-evo-sub-heading {
          margin-top: 0px;
          margin-bottom: 20px;
          font-size: 41px;
          ;
        }
        .features-evo {
          font-size: 18px;
          justify-content: center;
        }
        .feature-cell  {
          padding-right: 0px;
          max-width: 143px;
          align-items: center;
          justify-content: center;
          padding: 7px;
          margin-bottom: 7px;
        }
        .device-info-evo-container  {
          display: flex;
          justify-content: center;
          width: 100%;
          margin-top: 20px;
          margin-bottom: 8px;
        }
        .device-info-evo  {
          display: flex;
          max-width: 440px;
        }
        .device-info-image-evo  {
          margin-right: 15px;
        }
        .device-info-image-evo  > img {
          height: 126px;
        }
        .device-info-leading-text-evo  {
          margin-bottom: 10px;
          line-height: 1.4;
          font-size: 23px !important;
          color: rgb(0, 199, 253);
        }
        .device-info-sub-text-evo  {
          line-height: 1.4;
          font-size: 18px !important;
          font-weight: 500;
        }
        .score-and-tooltip-container  {
          display: flex;
          flex-direction: column;
          width: 100%;
          max-width: 200px;
        }
        .score-evo {
          justify-content: space-between;
        }
        .tooltip-title  {
          font-size: 24px;
          color: white;
        }
        .scores-and-tooltips-evo {
          width: 100%;
        }
        .tooltip-evo {
          flex-direction: column!important;
          justify-content: center;
        }
        .crossmark-info  {
          font-size: 10px;
          display: flex;
          width: 100%;
          justify-content: center;
          align-items: center;
        }
        .crossmark-info-icon  {
          width: 62px;
          margin-right: 12px;
        }
        .crossmark-info-container-evo  {
          font-size: 20px;
          padding: 12px;
          color: white;
          max-width: 597px;
          margin: 0px !important;
          display: flex;
          justify-content: center;
          align-items: center;
          line-height: initial;
        }
        .legal-disclaimer-evo  {
          padding: 0;
          margin: 0;
          box-shadow: none;
          background: black;
        }
        .legal-button-evo  {
          font-size: 23px;
          text-transform: uppercase;
          cursor: pointer;
          color: white;
        }
        .legal-description-expanded-evo {
          height: 87px;
          bottom: 50px;
          padding: 40px 40px 40px 40px;
          font-size: 16px !important;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          box-shadow: 0px -4px 12px rgba(0, 0, 0, 0.2);
          background: black !important;
        }
        .disclaimer-close-icon-evo {
          position: absolute;
          top: 16px;
          right: 16px;
          z-index: 22;
          font-size: 18px;
          cursor: pointer;
          color: rgb(0, 199, 253);
        }
        .tooltip-popup-scoreOverall {
          left: -94px!important;
        }
        .tooltip-popup-scoreProductivity {
          left: -94px!important;
        }
        .tooltip-popup-scoreCreativity {
          left: -94px!important;
        }
        .crossmark-info-hr-evo {
          background: transparent;
          border-top-width: 2px;
          border-color: #00c7fd;
          border-top-style: solid;
          margin-top: 40px;
          margin-left: 60px;
          margin-right: 60px;
        }
      }

      @container (min-width: 950px) {
        .hr-top-evo {
          border: 1px solid #f0a10f;
          margin-right: 19rem;
          margin-left: 19rem;
        }
        .crossmark-evo-heading {
          font-size: 39px;
          margin-bottom: 0px;
          color: rgb(0, 199, 253);
        }
        .crossmark-evo-sub-heading{
          margin-top: 0px;
          margin-bottom: 30px;
          font-size: 50px;
          ;
        }
        .features-evo{
          font-size: 24px;
          justify-content: center;
        }
        .feature-cell {
          padding-right: 0px;
          max-width: 190px;
          align-items: center;
          justify-content: center;
          padding: 7px;
          margin-bottom: 20px;
        }
        .device-info-evo-container {
          display: flex;
          justify-content: center;
          width: 100%;
          margin-top: 20px;
          margin-bottom: 20px;
        }
        .device-info-evo {
          display: flex;
          max-width: 535px;
        }
        .device-info-image-evo {
          margin-right: 15px;
        }
        .device-info-image-evo > img {
          height: 142px;
        }
        .device-info-leading-text-evo {
          margin-bottom: 10px;
          line-height: 1.4;
          font-size: 29px !important;
          color: rgb(0, 199, 253);
        }
        .device-info-sub-text-evo {
          line-height: 1.4;
          font-size: 20px !important;
          font-weight: 500;
        }
        .score-and-tooltip-container {
          display: flex;
          flex-direction: column;
          width: 100%;
          max-width: 200px;
        }
        .score-evo{
          justify-content: space-evenly;
        }
        .tooltip-title {
          font-size: 28px;
          color: white;
        }
        .scores-and-tooltips-evo{
          width: 100%;
        }
        .scores-and-tooltips-evo>div {
          max-width: 916px;
          width: 100%;
          display: flex;
        }
        .scores-and-tooltips-evo{
          display: flex!important;
          justify-content: center;
        }
        .tooltip-evo{
          flex-direction: row!important;
          justify-content: center;
        }
        .crossmark-info-icon {
          width: 55px;
          margin-right: 12px;
        }
        .crossmark-info-container-evo {
          font-size: 20px;
          padding: 16px;
          color: white;
          max-width: 858px;
          margin: 0px !important;
          display: flex;
          justify-content: center;
          align-items: center;
          line-height: initial;
        }
        .crossmark-info{
          display: flex;
          align-items: center;
          justify-content: center;
        }
        .legal-button-evo {
          font-size: 27px;
          text-transform: uppercase;
          cursor: pointer;
          color: white;
        }
        .legal-description-expanded-evo {
          height: 87px;
          bottom: 50px;
          padding: 40px 40px 40px 40px;
          font-size: 18px !important;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          box-shadow: 0px -4px 12px rgba(0, 0, 0, 0.2);
          height: 53px;
          background: black !important;
        }
        .disclaimer-close-icon-evo{
          position: absolute;
          top: 19px;
          right: 19px;
          z-index: 22;
          font-size: 23px;
          cursor: pointer;
          color: rgb(0, 199, 253);
        }
        .crossmark-info-hr-evo{
          background: transparent;
          border-top-width: 2px;
          border-color: #00c7fd;
          border-top-style: solid;
          margin-top: 40px;
          margin-left: 233px;
          margin-right: 233px;
        }
        .tooltip-evo>h3{
          margin-right: 15px;
          }
      }
    `,C=`
      .text-grey-light {
        color: ${B0.colours.textGreyLight};
      }
      .text-center {
        text-align: center;
      }
      .mb-0 {
        margin-bottom: 0px;
      }
      .mb-1 {
        margin-bottom: 5px !important;
      }
      .m-0 {
        margin: 0;
      }
      .text-bold {
        font-weight: 600;
      }
      .relative {
        position: relative;
      }
      .absolute {
        position: absolute;
      }
      .removed {
        display: none !important;
      }
      .w-full {
        width: 100%;
      }
      .justify-around {
        justify-content: space-around;
      }
      .pointer {
        text-align: center;
        margin-top: 0.5rem;
      }
      .tooltip-popup {
        text-align: start;
        font-style: initial;
      }
      .tooltip-popup {
        width: 123px;
        font-size: 11px;
        bottom: 51px;
        padding: 10px;
      }
      .tooltip {
        align-items: center;
      }
      .crossmark-unison-header {
        margin-top: 20px;
      }
      .tooltip-popup-unison-arrow {
        width: 20px;
        height: 20px;
        border-bottom: 1px solid rgb(0, 199, 253);
        border-right: 1px solid rgb(0, 199, 253);
        position: absolute;
        background: black;
        left: 62px;
        bottom: -12px;
        rotate: 45deg;
        overflow: hidden;
      }
      .hr-top-unison {
        border: 1px solid #f0a10f;
        margin-right: 1rem;
        margin-left: 1rem;
      }
      .crossmark-unison-heading {
        font-size: 19px;
        margin-top: 20px;
        margin-bottom: 0px;
        color: rgb(0, 199, 253);
      }
      .crossmark-unison-sub-heading {
        margin-top: 0px;
        margin-bottom: 20px;
        font-size: 23px;
      }
      .features-unison {
        font-size: 11px;
      }
      .feature-cell {
        padding-right: 0px;
        max-width: 90px;
        align-items: center;
        justify-content: center;
        padding: 7px;
      }
      .device-info-unison-container {
        display: flex;
        justify-content: center;
        width: 100%;
        margin-top: 20px;
        margin-bottom: 8px;
      }
      .device-info-unison {
        display: flex;
        max-width: 283px;
      }
      .device-info-image-unison {
        margin-right: 10px;
      }
      .device-info-image-unison > img {
        height: 83px;
      }
      .device-info-leading-text-unison {
        margin-bottom: 10px;
        line-height: 1.4;
      }
      .device-info-sub-text-unison {
        line-height: 1.4;
      }
      .score-and-tooltip-container {
        display: flex;
        flex-direction: column;
        width: 100%;
      }
      .tooltip-title {
        font-size: 15px;
        color: white;
      }
      .tooltip-unison{
        flex-direction: column!important;
        justify-content: center;
      }
      .crossmark-info {
        font-size: 10px;
        display: flex;
        width: 100%;
        justify-content: center;
        align-items: center;
      }
      .crossmark-info-icon {
        width: 40px;
        margin-right: 12px;
      }
      .crossmark-info-container-unison {
        font-size: 10px;
        padding: 12px;
        color: white;
        max-width: 326px;
        margin: 0px !important;
        display: flex;
        justify-content: center;
        align-items: center;
        line-height: initial;
      }
      .legal-disclaimer-unison {
        margin: -18px;
        background: rgb(10, 40, 89);
      }
      .legal-disclaimer {
        position: relative;
        margin: 0 -1.15rem -1.1rem -1.1rem;
      }
      .legal-button-unison {
        font-size: 17px;
        text-transform: uppercase;
        cursor: pointer;
        color: white;
      }
      .legal-description-expanded-unison{
        height: 87px;
        bottom: 49px;
        padding: 20px 20px 20px 20px;
        font-size: 10px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        box-shadow: 0px -4px 12px rgba(0, 0, 0, 0.2);
        background: #0a2859 !important;
      }
      .legal-description {
        font-size: 10px;
      }
      .legal-description>p>a{
        color: rgb(0, 199, 253) !important;
      }
      .disclaimer-close-icon-unison{
        position: absolute;
        top: 16px;
        right: 16px;
        z-index: 22;
        font-size: 18px;
        cursor: pointer;
        color: rgb(0, 199, 253);
      }
      .tooltip-popup-default{
        border: 1px solid rgb(0, 199, 253);
      }
      .tooltip-popup-scoreOverall{
        left: -64px!important;
      }
      .tooltip-popup-scoreProductivity{
        left: -64px!important;
      }
      .tooltip-popup-scoreCreativity{
        left: -64px!important;
      }
      .crossmark-info-hr-unison{
        background: transparent;
        border-top-width: 2px;
        border-color: #00c7fd;
        border-top-style: solid;
        margin-top: 20px;
        width: 100%;
      }

      @container (min-width: 767px) {
        .tooltip-popup  {
          width: 186px;
          font-size: 11px;
          padding: 10px;
        }
        .tooltip-popup-unison-arrow {
          width: 15px;
          height: 15px;
          border-bottom: 1px solid rgb(0, 199, 253);
          border-right: 1px solid rgb(0, 199, 253);
          position: absolute;
          background: black;
          left: 94px;
          bottom: -9px;
          overflow: hidden;
        }
        .hr-top-unison {
          border: 1px solid #f0a10f;
          margin-right: 1rem;
          margin-left: 1rem;
        }
        .crossmark-unison-heading {
          font-size: 34px;
          margin-bottom: 0px;
          color: rgb(0, 199, 253);
        }
        .crossmark-unison-sub-heading{
          margin-top: 0px;
          margin-bottom: 20px;
          font-size: 41px;
          ;
        }
        .features-unison{
          font-size: 18px;
          justify-content: center;
        }
        .feature-cell {
          padding-right: 0px;
          max-width: 143px;
          align-items: center;
          justify-content: center;
          padding: 7px;
          margin-bottom: 7px;
        }
        .device-info-unison-container {
          display: flex;
          justify-content: center;
          width: 100%;
          margin-top: 20px;
          margin-bottom: 8px;
        }
        .device-info-unison {
          display: flex;
          max-width: 440px;
        }
        .device-info-image-unison {
          margin-right: 15px;
        }
        .device-info-image-unison > img {
          height: 126px;
        }
        .device-info-leading-text-unison {
          margin-bottom: 10px;
          line-height: 1.4;
          font-size: 23px !important;
          color: rgb(0, 199, 253);
        }
        .device-info-sub-text-unison {
          line-height: 1.4;
          font-size: 18px !important;
          font-weight: 500;
        }
        .crossmark-info-icon {
          width: 62px;
          margin-right: 12px;
        }
        .score-and-tooltip-container {
          display: flex;
          flex-direction: column;
          width: 100%;
          max-width: 200px;
        }
        .score-unison{
          justify-content: space-between;
        }
        .tooltip-title {
          font-size: 24px;
          color: white;
        }
        .tooltip-unison{
          flex-direction: column!important;
          justify-content: center;
        }
        .crossmark-info {
          font-size: 10px;
          display: flex;
          width: 100%;
          justify-content: center;
          align-items: center;
        }
        .crossmark-info-container-unison {
          font-size: 20px;
          padding: 12px;
          color: white;
          max-width: 597px;
          margin: 0px !important;
          display: flex;
          justify-content: center;
          align-items: center;
          line-height: initial;
        }
        .legal-disclaimer-unison {
          padding: 0;
          background: rgb(10, 40, 89);
          margin: 0;
          box-shadow: none;
        }
        .legal-button-unison {
          font-size: 23px;
          text-transform: uppercase;
          cursor: pointer;
          color: white;
        }
        .legal-description-expanded-unison{
          height: 87px;
          bottom: 50px;
          padding: 40px 40px 40px 40px;
          font-size: 16px !important;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          box-shadow: 0px -4px 12px rgba(0, 0, 0, 0.2);
          background: #0a2859 !important;
        }
        .disclaimer-close-icon-unison{
          position: absolute;
          top: 16px;
          right: 16px;
          z-index: 22;
          font-size: 18px;
          cursor: pointer;
          color: rgb(0, 199, 253);
        }
        .tooltip-popup-scoreOverall{
          left: -94px!important;
        }
        .tooltip-popup-scoreProductivity{
          left: -94px!important;
        }
        .tooltip-popup-scoreCreativity{
          left: -94px!important;
        }
        .crossmark-info-hr-unison{
          background: transparent;
          border-top-width: 2px;
          border-color: #00c7fd;
          border-top-style: solid;
          margin-top: 40px;
          margin-left: 60px;
          margin-right: 60px;
        }
      }

      @container (min-width: 950px) {
        .tooltip-popup {
          width: 278px;
          font-size: 16px;
          padding: 15px;
        }
        .tooltip-popup-unison-arrow {
          width: 15px;
          height: 15px;
          border-bottom: 1px solid rgb(0, 199, 253);
          border-right: 1px solid rgb(0, 199, 253);
          position: absolute;
          background: black;
          left: 148px;
          bottom: -9px;
          overflow: hidden;
        }
        .hr-top-unison {
          border: 1px solid #f0a10f;
          margin-right: 19rem;
          margin-left: 19rem;
        }
        .crossmark-unison-heading {
          font-size: 39px;
          margin-bottom: 0px;
          color: rgb(0, 199, 253);
        }
        .crossmark-unison-sub-heading{
          margin-top: 0px;
          margin-bottom: 30px;
          font-size: 50px;
          ;
        }
        .features-unison{
          font-size: 24px;
          justify-content: center;
        }
        .feature-cell {
          padding-right: 0px;
          max-width: 190px;
          align-items: center;
          justify-content: center;
          padding: 7px;
          margin-bottom: 20px;
        }
        .device-info-unison-container {
          display: flex;
          justify-content: center;
          width: 100%;
          margin-top: 20px;
          margin-bottom: 20px;
        }
        .device-info-unison {
          display: flex;
          max-width: 535px;
        }
        .device-info-image-unison {
          margin-right: 15px;
        }
        .device-info-image-unison > img {
          height: 142px;
        }
        .device-info-leading-text-unison {
          margin-bottom: 10px;
          line-height: 1.4;
          font-size: 29px !important;
          color: rgb(0, 199, 253);
        }
        .device-info-sub-text-unison {
          line-height: 1.4;
          font-size: 20px !important;
          font-weight: 500;
        }
        .score-and-tooltip-container {
          display: flex;
          flex-direction: column;
          width: 100%;
          max-width: 200px;
        }
        .score-unison{
          justify-content: space-evenly;
        }
        .tooltip-title {
          font-size: 28px;
          color: white;
        }
        .scores-and-tooltips-unison>div {
          max-width: 916px;
          width: 100%;
          display: flex;
        }
        .scores-and-tooltips-unison{
          display: flex!important;
          justify-content: center;
        }
        .tooltip-unison{
          flex-direction: row!important;
          justify-content: center;
        }
        .crossmark-info-icon {
          width: 55px;
          margin-right: 12px;
        }
        .crossmark-info-container-unison {
          font-size: 20px;
          padding: 16px;
          color: white;
          max-width: 858px;
          margin: 0px !important;
          display: flex;
          justify-content: center;
          align-items: center;
          line-height: initial;
        }
        .crossmark-info{
          display: flex;
          align-items: center;
          justify-content: center;
        }
        .legal-disclaimer-unison {
          padding: 0;
          background: #061939;
          margin: 0;
        }
        .legal-button-unison {
          font-size: 27px;
          text-transform: uppercase;
          cursor: pointer;
          color: white;
        }
        .legal-description-expanded-unison{
          height: 87px;
          bottom: 50px;
          padding: 40px 40px 40px 40px;
          font-size: 18px !important;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          box-shadow: 0px -4px 12px rgba(0, 0, 0, 0.2);
          height: 53px;
        }
        .disclaimer-close-icon-unison{
          position: absolute;
          top: 19px;
          right: 19px;
          z-index: 22;
          font-size: 23px;
          cursor: pointer;
          color: rgb(0, 199, 253);
        }
        .tooltip-popup-scoreOverall{
          left: -148px!important;
        }
        .tooltip-popup-scoreProductivity{
          left: -148px!important;
        }
        .tooltip-popup-scoreCreativity{
          left: -148px!important;
        }
        .tooltip-unison>h3{
          margin-right: 15px;
        }
        .crossmark-info-hr-unison{
          background: transparent;
          border-top-width: 2px;
          border-color: #00c7fd;
          border-top-style: solid;
          margin-top: 40px;
          margin-left: 233px;
          margin-right: 233px;
        }
      }
    `,I=[];if(I.push(d`${A}`),this.theme==="default")I.push(d`${Q}`);else if(this.theme==="evo")I.push(d`${B}`);else if(this.theme==="unison")I.push(d`${C}`);return d`<style>
      ${I}
    </style>`}constructor(A,Q,B,C,I,E,K,J,q){super(A,Q,B,C,I,E,K,J,q,!0,"intel-crossmark");this.theme="default";this.legalInfoOpen=!1}safeFromBase64(A){return decodeURIComponent(atob(A).split("").map(function(Q){return"%"+("00"+Q.charCodeAt(0).toString(16)).slice(-2)}).join(""))}getLocalisedString(A){const Q=B0.dynamic[A];if(!Q)return`missing-${A}`;const B=Q[this.theme];if(!B)return null;let C=null;const I=this.localisations[this.EKControlObject._config?.language||"dummy"];if(I){if(I[B])C=I[B]}const E=this.localisations.en;if(!C&&E){if(E[B])C=E[B]}if(!C)return null;return this.safeFromBase64(C)}swapLeftRightPaddingIfRequired(A){if(this.EKControlObject._config?.language==="ar"){if(A.includes("l"))return A.replace("l","r");return A.replace("r","l")}return A}infoIconSvg(A){if(!A)A="#b4b4b4";return d`<svg
      xmlns="http://www.w3.org/2000/svg"
      xml:space="preserve"
      width="19px"
      height="19px"
      viewBox="0 0 416.979 416.979"
      style="fill:${A};"
    >
      <path
        d="M356.004 61.156c-81.37-81.47-213.377-81.551-294.848-.182-81.47 81.371-81.552 213.379-.181 294.85 81.369 81.47 213.378 81.551 294.849.181 81.469-81.369 81.551-213.379.18-294.849zM237.6 340.786a5.821 5.821 0 0 1-5.822 5.822h-46.576a5.821 5.821 0 0 1-5.822-5.822V167.885a5.821 5.821 0 0 1 5.822-5.822h46.576a5.82 5.82 0 0 1 5.822 5.822v172.901zm-29.11-202.885c-18.618 0-33.766-15.146-33.766-33.765 0-18.617 15.147-33.766 33.766-33.766s33.766 15.148 33.766 33.766c0 18.619-15.149 33.765-33.766 33.765z"
      />
    </svg>`}renderScoreSVGv2(A){const Q=(A/20).toFixed(1),B={svg:{viewBox:{x:50,y:50}},outer:{colour:this.isDefaultTheme()?B0.colours.textWhite:"rgba(0,0,0,0)",diameter:45,radius:22.5},strokeWidth:6,colour:this.isDefaultTheme()?B0.colours.uiOrange:B0.colours.uiBlue,text:this.isDefaultTheme()?B0.colours.textGreyDark:B0.colours.textWhite};return d`<style class="intel-crossmark-embed-svg-styles">
        .circular-chart {
          border-radius: ${this.isDefaultTheme()?"auto":"9999px"};
          border: ${this.isDefaultTheme()?"none":`1px solid ${B.colour}`};
          transform: ${this.isDefaultTheme()?"none":"scale(0.9)"};
        }
        .svg-score-background-circle {
          fill: none;
          stroke: ${B.outer.colour};
          stroke-width: ${B.strokeWidth};
        }
        .svg-score-readout-circle {
          fill: none;
          stroke-width: ${B.strokeWidth};
          animation: progress 1s ease-out forwards;
        }
        @keyframes progress {
          0% {
            stroke-dasharray: 0 100;
          }
        }
        .circular-chart.orange .svg-score-readout-circle {
          stroke: ${B.colour};
        }
        .score-text {
          fill: ${B.text};
          font-family: "IntelOneRegular";
          font-size: 10px;
          text-anchor: middle;
        }
        .score-actual {
          font-size: 10px;
          font-weight: 900;
        }
        .score-max {
          font-size: 0.325rem;
          letter-spacing: -0.5px;
        }
        .svg-score-text-background-circle {
        }
      </style>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 ${B.svg.viewBox.x} ${B.svg.viewBox.y}"
        class="circular-chart orange"
        style="filter: drop-shadow(3px 5px 6px rgb(128 128 128 / 0.25));margin: 0.5rem 0 0.5rem 0; "
      >
        <path
          class="svg-background-circle"
          shape-rendering="geometricPrecision"
          d="M${B.svg.viewBox.x/2} 2.5
        a ${B.outer.radius} ${B.outer.radius} 0 0 1 0 ${B.outer.diameter}
        a ${B.outer.radius} ${B.outer.radius} 0 0 1 0 ${B.outer.diameter*-1}"
          style="fill: ${B.outer.colour};"
        />

        <path
          class="svg-score-background-circle"
          shape-rendering="geometricPrecision"
          d="M${B.svg.viewBox.x/2} 9
        a 15.9155 15.9155 0 0 1 0 31.831
        a 15.9155 15.9155 0 0 1 0 -31.831"
        />
        <path
          class="svg-score-readout-circle"
          shape-rendering="geometricPrecision"
          stroke-dasharray="${A}, 100"
          d="M${B.svg.viewBox.x/2} 9
        a 15.9155 15.9155 0 0 1 0 31.831
        a 15.9155 15.9155 0 0 1 0 -31.831"
          stroke-dashoffset="-200"
        />

        <path
          class="svg-score-text-background-circle"
          shape-rendering="geometricPrecision"
          stroke-dasharray="${A}, 100"
          d="M${B.svg.viewBox.x/2} 12.25
        a 12.732 12.732 0 0 1 0 25.5
        a 12.732 12.732 0 0 1 0 -25.5"
          style="fill: ${B.outer.colour};filter: drop-shadow(3px 2px 2px rgb(128 128 128 / 0.25));"
        />

        <text
          x="${B.svg.viewBox.x/2-3}"
          y="${B.svg.viewBox.y/2+3}"
          class="score-text score-actual"
        >
          ${Q}
        </text>
        <text
          x="${B.svg.viewBox.x/2+6}"
          y="${B.svg.viewBox.y/2+3}"
          class="score-text score-max"
          style="direction: ltr;"
        >
          / 5
        </text>
      </svg>`}renderHeading(){const A=[];if(this.isDefaultTheme())A.push(d`<h1
            class="crossmark-default-header text-grey-light m-0 text-center crossmark-default-heading px-4"
          >
            ${this.getLocalisedString("introHeading")}
          </h1>
          <hr class="hr-top-${this.theme}" />`);else A.push(d`<h3 class="crossmark-${this.theme}-heading text-center">
            ${this.getLocalisedString("introHeading")}
          </h3>
          <h1
            class="text-white text-center crossmark-${this.theme}-sub-heading"
          >
            ${this.getLocalisedString("introSubheading")}
          </h1>`);return A}renderFeatures(){if(this.isDefaultTheme())return;const A=[];return A.push(d`<div class="feature-cell feature-cell flex flex-centered">
        <span class="text-white">${this.getLocalisedString("featureOne")}</span>
      </div>`),A.push(d`<div class="feature-cell feature-cell flex flex-centered">
        <span class="text-white">${this.getLocalisedString("featureTwo")}</span>
      </div>`),A.push(d`<div class="feature-cell feature-cell flex flex-centered">
        <span class="text-white"
          >${this.getLocalisedString("featureThree")}</span
        >
      </div>`),A.push(d`<div class="feature-cell feature-cell flex flex-centered">
        <span class="text-white"
          >${this.getLocalisedString("featureFour")}</span
        >
      </div>`),d`<div
      class="features features-${this.theme} features-${this.theme} flex gap-4 text-center text-sm mb-8"
    >
      ${A}
    </div>`}renderDeviceInfo(){const A=[];if(this.isDefaultTheme())A.push(d`<h6
            class="text-orange crossmark-default-device-info-heading text-center"
          >
            ${this.getLocalisedString("thisDevice")}
          </h6>
          <h2
            class="crossmark-default-device-info-sub-text text-grey-light text-xl text-center"
          >
            ${this.EKResolvedData["datarequirement-crossmark"].sku}
          </h2>`);else A.push(d`<div class="device-info-${this.theme}">
          <div class="device-info-image-${this.theme}">
            <img src="${B0.dynamic.evoImage[this.theme]}" />
          </div>
          <div class="${this.swapLeftRightPaddingIfRequired("pl-4")}">
            <h4
              class="text-intel-title-blue m-0 text-md leading-relaxed device-info-leading-text-${this.theme}"
            >
              ${this.getLocalisedString("evoHeading")}
            </h4>
            <h6
              class="text-white m-0 mt-2 text-xs device-info-sub-text-${this.theme}"
            >
              ${this.getLocalisedString("evoSubheading").replace("<cpu>",this.EKResolvedData["datarequirement-crossmark"].sku)}
            </h6>
          </div>
        </div>`);return d`<div
      class="device-info ${this.isDefaultTheme()?"device-info-default":`device-info-${this.theme}-container`}"
    >
      ${A}
    </div>`}renderScoresAndTooltips(){return d`<div
      class="scores-and-tooltips scores-and-tooltips-${this.theme} -mx-2"
    >
      <div class="flex flex-col">${this.renderScoresWithTooltips()}</div>
    </div>`}renderScoresWithTooltips(){return d`<div
      class="score score-${this.theme} flex items-center text-grey-dark gap-2"
    >
      <div class="score-and-tooltip-container">
        ${this.renderScoreSVGv2(this.EKResolvedData["datarequirement-crossmark"].overallRating*100)}
        ${this.renderTooltip("scoreOverall")}
      </div>
      <div class="score-and-tooltip-container">
        ${this.renderScoreSVGv2(this.EKResolvedData["datarequirement-crossmark"].productivityRating*100)}
        ${this.renderTooltip("scoreProductivity")}
      </div>
      <div class="score-and-tooltip-container">
        ${this.renderScoreSVGv2(this.EKResolvedData["datarequirement-crossmark"].creativityRating*100)}
        ${this.renderTooltip("scoreCreativity")}
      </div>
    </div>`}onMouseEnter(A,Q){if(Q.target instanceof HTMLElement){const B=Q.target.dataset.id,C=this.shadowRoot?.querySelector(`.${B}`)?.querySelector(".tooltip-popup"),I=Q.target.children[0];C?.classList.remove("removed"),I.style.fill=A}}onMouseExit(A,Q){if(Q.target instanceof HTMLElement){const B=Q.target.dataset.id,C=this.shadowRoot?.querySelector(`.${B}`)?.querySelector(".tooltip-popup"),I=Q.target.children[0];C?.classList.add("removed"),I.style.fill=A}}renderTooltip(A){return d`<div
      class="tooltip tooltip-${this.theme} tooltip-${this.theme} ${A} flex items-center justify-center ${this.isDefaultTheme()?"flex-col text-grey-light":""}"
    >
      <h3 class="m-0 text-md text-center tooltip-title">
        ${this.getLocalisedString(`${A}Heading`)}
      </h3>
      <i
        data-id="${A}"
        class="pointer relative"
        @mouseenter=${this.onMouseEnter.bind(this,this.isDefaultTheme()?B0.colours.textOrange:B0.colours.uiBlue)}
        @mouseleave=${this.onMouseExit.bind(this,"#b4b4b4")}
        >${this.infoIconSvg()}
        <div
          class="tooltip-popup tooltip-popup tooltip-popup-${this.theme} absolute tooltip-popup-${A} z-20 removed"
        >
          <h3 class="m-0 text-md text-center mb-1">
            ${this.getLocalisedString(`${A}Heading`)}
          </h3>
          <p class="m-0 text-sm ">
            ${this.getLocalisedString(`${A}Tooltip`)}
          </p>
          <span
            class="tooltip-popup-${this.theme}-arrow tooltip-popup-${this.theme}-${A}-arrow"
          ></span>
        </div>
      </i>
    </div>`}renderCrossmarkInfo(){const A=[];return A.push(d` <div
        class="flex ${this.isDefaultTheme()?"items-center":""} px-4 crossmark-info-container-${this.theme}"
      >
        <img
          class="w-12 h-12"
          src="${B0.dynamic.crossmarkImage[this.theme]}"
        />
        <p
          class="${this.isDefaultTheme()?"text-grey-light":"text-white"} m-0 ${this.swapLeftRightPaddingIfRequired("pl-4")} text-xs"
        >
          ${this.getLocalisedString("crossmarkDescription")}
        </p>
      </div>`),d`<div
      class="crossmark-info crossmark-info-${this.theme} crossmark-info mb-4"
    >
      ${A}
    </div>`}onClickLegalInfo(){this.legalInfoOpen=!this.legalInfoOpen}renderLegalDisclaimer(){const A=[];return A.push(d`<div class="flex flex-col">
        <div class="py-4 box-shadow z-10 legal-button-${this.theme}" @click=${this.onClickLegalInfo.bind(this)}>
          <h6 class="${this.isDefaultTheme()?"text-grey-light":""} m-0 ${this.swapLeftRightPaddingIfRequired("pl-8")} text-xs">
          ${this.getLocalisedString("legalHeading")} <span class="opacity-75">${this.legalInfoOpen?"\u25B2":"\u25BC"}
          </h6>
        </div>
        <div class="${this.legalInfoOpen?`legal-description-expanded-${this.theme}`:""} legal-description legal-description-${this.theme}">
        <div class="disclaimer-close-icon-${this.theme}" @click=${this.onClickLegalInfo.bind(this)}>
            X
        </div>
          <p class="${this.isDefaultTheme()?"text-grey-dark":"text-white"} text-sm m-0">
            ${this.renderLegalDisclaimerContent()}
          </p>
        </div>
      </div>`),d`<div class="legal-disclaimer legal-disclaimer-${this.theme}">
      ${A}
    </div>`}renderLegalDisclaimerContent(){let A=this.getLocalisedString("legalContent");const Q=new Date(this.EKResolvedData["datarequirement-crossmark"].dateCreated),B={en:"en-US",ar:"ar-AE",br_pt:"pt-BR"};let C="en-US";if(this.EKControlObject._config?.language)C=B[this.EKControlObject._config?.language]||"en-US";const I=Q.toLocaleDateString(C,{year:"numeric",month:"long",day:"numeric"});A=A.replace("<date>",I);const E=A.split("<url-001>"),K=A.split(" "),J=[];for(let q=0;q<K.length;q++){let G=!1;if(!K[q])continue;if(K[q]==="<date>")J.push(I),G=!0;if(K[q]==="<url-001>")J.push(d`<a href="https://www.bapco.com" rel="noreferrer" target="_blank"
            >www.bapco.com</a
          >`," "),G=!0;if(K[q].includes("<url-002>"))J.push(d`<a
            href="https://www.intel.com/PerformanceIndex"
            rel="noreferrer"
            target="_blank"
            >www.intel.com/PerformanceIndex</a
          >`," "),G=!0;if(K[q].includes("<url-003>"))J.push(d`<a
            href="https://www.intel.com/PerformanceIndex"
            rel="noreferrer"
            target="_blank"
            >${this.getLocalisedString("legalHeading")}</a
          >`," "),G=!0;if(!G)J.push(K[q]+" ")}return d`${J}`}isDefaultTheme(){return this.theme==="default"}setThemeFromChip(){if(!this.EKResolvedData["datarequirement-crossmark"].sku)return!1;if(!this.isDefaultTheme())return!1;let A="default";if(this.EKResolvedData["datarequirement-evo"]&&this.EKResolvedData["datarequirement-crossmark"].sku.includes("-13"))A="unison";if(this.EKResolvedData["datarequirement-evo"]&&this.EKResolvedData["datarequirement-crossmark"].sku.includes("-11")||this.EKResolvedData["datarequirement-evo"]&&this.EKResolvedData["datarequirement-crossmark"].sku.includes("-12"))A="evo";this.theme=A}addIntelFontToHead(){const A=document.createElement("style");A.appendChild(document.createTextNode("        @font-face {          font-family: "+"IntelOneRegular"+";          src: url('"+"https://cdn.pointandplace.com/fonts/intelone-display/intelone-display-regular.ttf"+"') format('truetype');        }      ")),A.appendChild(document.createTextNode("        @font-face {          font-family: "+"IntelOneLight"+";          src: url('"+"https://cdn.pointandplace.com/fonts/intelone-display/intelone-display-light.ttf"+"') format('truetype');        }      ")),A.appendChild(document.createTextNode("        @font-face {          font-family: "+"IntelOneBold"+";          src: url('"+"https://cdn.pointandplace.com/fonts/intelone-display/intelone-display-bold.woff"+"') format('woff');        }      "));const Q="eky-intel-font";if(A.id=Q,!document.getElementById(Q))document.head.appendChild(A)}async connectedCallback(){await super.connectedCallback(),this.addIntelFontToHead(),this.setThemeFromChip()}isComponentValidToRender(){return!0}render(){if(!this.EKResolvedData["datarequirement-crossmark"])return this.nullifyComponent("Missing crossmark data"),null;return[this.renderTailwindStyles(),this.renderTextStyles(),this.renderCustomStyles(),d`<div
        class="container container-${this.theme} ${this.isDefaultTheme()?"text":"text-light"} eky-${this.EKControlObject._config?.language}"
      >
        ${this.renderHeading()} ${this.renderFeatures()}
        ${this.renderDeviceInfo()} ${this.renderScoresAndTooltips()}
        ${this.renderCrossmarkInfo()} ${this.renderLegalDisclaimer()}
      </div>`]}}y([FA({attribute:!1})],B0.prototype,"EKResolvedData",void 0),y([FA({attribute:!1})],B0.prototype,"EKProps",void 0),y([KA()],B0.prototype,"theme",void 0),y([KA()],B0.prototype,"legalInfoOpen",void 0),B0=y([sA("ek-crossmark")],B0);class t5 extends G0{_mouseOverBadge=!1;_mouseOverModal=!1;_mouseOverBadgeTimer=void 0;_mouseOverModalTimer=void 0;static styles=Q0`
    :host {
      display: inline-block;
    }
    button {
      background: transparent;
      drop-shadow(rgba(0, 0, 0, 0.06) 0px 2px 2px);
      border: none;
      transition: opacity 250ms cubic-bezier(0.4, 0, 0.2, 1);
      opacity: 0;
      position: relative;
      width: var(--button-width);
      height: var(--button-height);
      padding: 0;
      cursor: pointer;
    }
    button.show { opacity: 1; }
    button > img {
      object-fit: cover;
      max-width: 100%;
      max-height: 100%;
    }
  `;constructor(A,Q,B,C,I,E,K,J,q){super(A,Q,B,C,I,E,K,J,q,!0,"custom-button");this._isVisible=!1;this._activeBreakpoint="sm"}toggleVisible(){if(this._isVisible===!0)this.setHidden();else this.setVisible()}replaceButtonWithChildren(){this.EKChildren?.forEach((A)=>{this.ekMainCustomButtonElement.parentNode.insertBefore(A,this.ekMainCustomButtonElement.nextSibling)}),this.ekMainCustomButtonElement.style.display="none"}setVisible(){if(this._isVisible=!0,this.logEventLegacy("click","button"),this.EKChildren&&this.EKChildren.length>0)if(this.EKProps.modal?.modalActivator==="hover")this.triggerWOTWStartInteraction("modal","hover");else this.triggerWOTWStartInteraction("modal","click")}setHidden(){this._isVisible=!1,this.triggerWOTWEndInteraction("modal")}_onButtonClicked(){if(this.EKProps.replaceButton===!0)this.replaceButtonWithChildren();else if(this.EKProps.modal?.modalActivator==="click")this.toggleVisible()}_onModalHover(){if(this.EKProps.modal?.modalActivator==="hover")clearTimeout(this._mouseOverModalTimer),this._mouseOverModal=!0}_onModalLeave(){if(this.EKProps.modal?.modalActivator==="hover")clearTimeout(this._mouseOverModalTimer),this._mouseOverModal=!1,this._mouseOverModalTimer=setTimeout(()=>{if(!this._mouseOverBadge)this.setHidden()},100)}_onBadgeHover(){if(this.EKProps.modal?.modalActivator==="hover"&&this.EKProps.replaceButton===!1)clearTimeout(this._mouseOverBadgeTimer),this._mouseOverBadge=!0,this._mouseOverBadgeTimer=setTimeout(()=>{if(this._mouseOverBadge)this.setVisible()},333)}_onBadgeLeave(){if(this.EKProps.modal?.modalActivator==="hover"&&this.EKProps.replaceButton===!1)clearTimeout(this._mouseOverBadgeTimer),this._mouseOverBadge=!1,this._mouseOverBadgeTimer=setTimeout(()=>{if(!this._mouseOverModal)this.setHidden()},100)}_onImageLoad(){this.renderRoot.querySelector(".custom-button")?.classList.add("show")}_onImageError(){const A=this.localisations();console.error(`Failed to load button image: ${A.buttonImage.url}`)}localisations(){return this.getLocalisations("CustomButtonLocalisation")}isComponentValidToRender(){const A=this.localisations();if(A===null||!A)return!1;else if(!A.buttonImage)return!1;return!0}render(){if(!this.isComponentValidToRender())return this.nullifyComponent("Missing localisations"),null;const A=this.localisations(),Q="#f8f8f8";let B=null;if(this.EKChildren&&this.EKChildren.length>0)B=this.EKProps.replaceButton===!1?d`<ek-modal
              .placementStrategy="${this.EKProps.modal?.modalPlacement}"
              .EKAPIComponentParent="${this}"
              .visible="${this._isVisible}"
              .anchorElement="${this}"
              .modelContent=${this.EKChildren}
              @ek-modal-close-button="${this.setHidden}"
              @ek-modal-close-backdrop="${this.setHidden}"
              @ek-mouse-over-body="${this._onModalHover}"
              @ek-mouse-out-body="${this._onModalLeave}"
              maxWidth="400px"
              noStyle
              .backdropZIndex=${this.EKProps.modal?.modalBackdropZIndex}
              .bodyZIndex=${this.EKProps.modal?.modalZIndex}
            >
            </ek-modal>`:null;return d`
      ${this.getHostStyleOverride()}
      <style>
        ek-modal {
          --modal-background-color: ${Q};
        }
        button {
          --button-width: ${this.EKProps.width};
          --button-height: ${this.EKProps.height};
          z-index: ${this.EKProps.modal?.modalBackdropZIndex||"auto"};
        }
      </style>
      ${B}
      <button
        class="custom-button"
        id="main-custom-button"
        style="${this.getElementStyleOverride()}"
        @click="${this._onButtonClicked}"
        @mouseover="${this._onBadgeHover}"
        @mouseout="${this._onBadgeLeave}"
      >
        <img
          src="${A.buttonImage.url}"
          @load="${this._onImageLoad}"
          @error="${this._onImageError}"
          alt="${A.buttonImage.altText}"
        />
      </button>
    `}}y([FA({attribute:!1})],t5.prototype,"EKResolvedData",void 0),y([FA({attribute:!1})],t5.prototype,"EKProps",void 0),y([KA()],t5.prototype,"_isVisible",void 0),y([KA()],t5.prototype,"_activeBreakpoint",void 0),y([_0("ek-modal")],t5.prototype,"ekModal",void 0),y([_0("#main-custom-button")],t5.prototype,"ekMainCustomButtonElement",void 0),t5=y([sA("ek-custom-button")],t5);var LA=function(A){return(Q,B)=>B!==void 0?fD(A,Q,B):vD(A,Q)},vD=(A,Q)=>Q.kind==="method"&&Q.descriptor&&!("value"in Q.descriptor)?{...Q,finisher(B){B.createProperty(Q.key,A)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:Q.key,initializer(){typeof Q.initializer=="function"&&(this[Q.key]=Q.initializer.call(this))},finisher(B){B.createProperty(Q.key,A)}},fD=(A,Q,B)=>{Q.constructor.createProperty(B,A)};var oB,Fy=((oB=window.HTMLSlotElement)===null||oB===void 0?void 0:oB.prototype.assignedElements)!=null?(A,Q)=>A.assignedElements(Q):(A,Q)=>A.assignedNodes(Q).filter((B)=>B.nodeType===Node.ELEMENT_NODE);var R2=function(){const A=Math.random()*4294967295|0,Q=Math.random()*4294967295|0,B=Math.random()*4294967295|0,C=Math.random()*4294967295|0;return(D1[A&255]+D1[A>>8&255]+D1[A>>16&255]+D1[A>>24&255]+"-"+D1[Q&255]+D1[Q>>8&255]+"-"+D1[Q>>16&15|64]+D1[Q>>24&255]+"-"+D1[B&63|128]+D1[B>>8&255]+"-"+D1[B>>16&255]+D1[B>>24&255]+D1[C&255]+D1[C>>8&255]+D1[C>>16&255]+D1[C>>24&255]).toLowerCase()},I1=function(A,Q,B){return Math.max(Q,Math.min(B,A))},TC=function(A,Q){return(A%Q+Q)%Q},bD=function(A,Q,B,C,I){return C+(A-Q)*(I-C)/(B-Q)},pD=function(A,Q,B){if(A!==Q)return(B-A)/(Q-A);else return 0},q3=function(A,Q,B){return(1-B)*A+B*Q},uD=function(A,Q,B,C){return q3(A,Q,1-Math.exp(-B*C))},mD=function(A,Q=1){return Q-Math.abs(TC(A,Q*2)-Q)},dD=function(A,Q,B){if(A<=Q)return 0;if(A>=B)return 1;return A=(A-Q)/(B-Q),A*A*(3-2*A)},cD=function(A,Q,B){if(A<=Q)return 0;if(A>=B)return 1;return A=(A-Q)/(B-Q),A*A*A*(A*(A*6-15)+10)},lD=function(A,Q){return A+Math.floor(Math.random()*(Q-A+1))},sD=function(A,Q){return A+Math.random()*(Q-A)},nD=function(A){return A*(0.5-Math.random())},oD=function(A){if(A!==void 0)lq=A;let Q=lq+=1831565813;return Q=Math.imul(Q^Q>>>15,Q|1),Q^=Q+Math.imul(Q^Q>>>7,Q|61),((Q^Q>>>14)>>>0)/4294967296},iD=function(A){return A*J3},aD=function(A){return A*z8},zC=function(A){return(A&A-1)===0&&A!==0},rD=function(A){return Math.pow(2,Math.ceil(Math.log(A)/Math.LN2))},x9=function(A){return Math.pow(2,Math.floor(Math.log(A)/Math.LN2))},tD=function(A,Q,B,C,I){const{cos:E,sin:K}=Math,J=E(B/2),q=K(B/2),G=E((Q+C)/2),Y=K((Q+C)/2),H=E((Q-C)/2),Z=K((Q-C)/2),X=E((C-Q)/2),U=K((C-Q)/2);switch(I){case"XYX":A.set(J*Y,q*H,q*Z,J*G);break;case"YZY":A.set(q*Z,J*Y,q*H,J*G);break;case"ZXZ":A.set(q*H,q*Z,J*Y,J*G);break;case"XZX":A.set(J*Y,q*U,q*X,J*G);break;case"YXY":A.set(q*X,J*Y,q*U,J*G);break;case"ZYZ":A.set(q*U,q*X,J*Y,J*G);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+I)}},D2=function(A,Q){switch(Q.constructor){case Float32Array:return A;case Uint32Array:return A/4294967295;case Uint16Array:return A/65535;case Uint8Array:return A/255;case Int32Array:return Math.max(A/2147483647,-1);case Int16Array:return Math.max(A/32767,-1);case Int8Array:return Math.max(A/127,-1);default:throw new Error("Invalid component type.")}},N0=function(A,Q){switch(Q.constructor){case Float32Array:return A;case Uint32Array:return Math.round(A*4294967295);case Uint16Array:return Math.round(A*65535);case Uint8Array:return Math.round(A*255);case Int32Array:return Math.round(A*2147483647);case Int16Array:return Math.round(A*32767);case Int8Array:return Math.round(A*127);default:throw new Error("Invalid component type.")}},RY=function(A){for(let Q=A.length-1;Q>=0;--Q)if(A[Q]>=65535)return!0;return!1};var Y3=function(A){return document.createElementNS("http://www.w3.org/1999/xhtml",A)},eD=function(){const A=Y3("canvas");return A.style.display="block",A},VY=function(A){if(A in sq)return;sq[A]=!0,console.warn(A)},L8=function(A){return A<0.04045?A*0.0773993808:Math.pow(A*0.9478672986+0.0521327014,2.4)},aB=function(A){return A<0.0031308?A*12.92:1.055*Math.pow(A,0.41666)-0.055},rB=function(A){if(typeof HTMLImageElement!=="undefined"&&A instanceof HTMLImageElement||typeof HTMLCanvasElement!=="undefined"&&A instanceof HTMLCanvasElement||typeof ImageBitmap!=="undefined"&&A instanceof ImageBitmap)return jC.getDataURL(A);else if(A.data)return{data:Array.from(A.data),width:A.width,height:A.height,type:A.data.constructor.name};else return console.warn("THREE.Texture: Unable to serialize Texture."),{}},eB=function(A,Q,B,C,I){for(let E=0,K=A.length-3;E<=K;E+=3){H6.fromArray(A,E);const J=I.x*Math.abs(H6.x)+I.y*Math.abs(H6.y)+I.z*Math.abs(H6.z),q=Q.dot(H6),G=B.dot(H6),Y=C.dot(H6);if(Math.max(-Math.max(q,G,Y),Math.min(q,G,Y))>J)return!1}return!0},YC=function(A,Q,B){if(B<0)B+=1;if(B>1)B-=1;if(B<0.16666666666666666)return A+(Q-A)*6*B;if(B<0.5)return Q;if(B<0.6666666666666666)return A+(Q-A)*6*(0.6666666666666666-B);return A},ZR=function(){const A=new ArrayBuffer(4),Q=new Float32Array(A),B=new Uint32Array(A),C=new Uint32Array(512),I=new Uint32Array(512);for(let q=0;q<256;++q){const G=q-127;if(G<-27)C[q]=0,C[q|256]=32768,I[q]=24,I[q|256]=24;else if(G<-14)C[q]=1024>>-G-14,C[q|256]=1024>>-G-14|32768,I[q]=-G-1,I[q|256]=-G-1;else if(G<=15)C[q]=G+15<<10,C[q|256]=G+15<<10|32768,I[q]=13,I[q|256]=13;else if(G<128)C[q]=31744,C[q|256]=64512,I[q]=24,I[q|256]=24;else C[q]=31744,C[q|256]=64512,I[q]=13,I[q|256]=13}const E=new Uint32Array(2048),K=new Uint32Array(64),J=new Uint32Array(64);for(let q=1;q<1024;++q){let G=q<<13,Y=0;while((G&8388608)===0)G<<=1,Y-=8388608;G&=~8388608,Y+=947912704,E[q]=G|Y}for(let q=1024;q<2048;++q)E[q]=939524096+(q-1024<<13);for(let q=1;q<31;++q)K[q]=q<<23;K[31]=1199570944,K[32]=2147483648;for(let q=33;q<63;++q)K[q]=2147483648+(q-32<<23);K[63]=3347054592;for(let q=1;q<64;++q)if(q!==32)J[q]=1024;return{floatView:Q,uint32View:B,baseTable:C,shiftTable:I,mantissaTable:E,exponentTable:K,offsetTable:J}},XR=function(A){if(Math.abs(A)>65504)console.warn("THREE.DataUtils.toHalfFloat(): Value out of range.");A=I1(A,-65504,65504),q4.floatView[0]=A;const Q=q4.uint32View[0],B=Q>>23&511;return q4.baseTable[B]+((Q&8388607)>>q4.shiftTable[B])},FR=function(A){const Q=A>>10;return q4.uint32View[0]=q4.mantissaTable[q4.offsetTable[Q]+(A&1023)]+q4.exponentTable[Q],q4.floatView[0]},UR=function(A,Q,B,C,I,E,K,J){let q;if(Q.side===1)q=C.intersectTriangle(K,E,I,!0,J);else q=C.intersectTriangle(I,E,K,Q.side===0,J);if(q===null)return null;L9.copy(J),L9.applyMatrix4(A.matrixWorld);const G=B.ray.origin.distanceTo(L9);if(G<B.near||G>B.far)return null;return{distance:G,point:L9.clone(),object:A}},z9=function(A,Q,B,C,I,E,K,J,q,G){A.getVertexPosition(J,F8),A.getVertexPosition(q,W8),A.getVertexPosition(G,U8);const Y=UR(A,Q,B,C,F8,W8,U8,O9);if(Y){if(I)V9.fromBufferAttribute(I,J),N9.fromBufferAttribute(I,q),w9.fromBufferAttribute(I,G),Y.uv=p1.getInterpolation(O9,F8,W8,U8,V9,N9,w9,new DA);if(E)V9.fromBufferAttribute(E,J),N9.fromBufferAttribute(E,q),w9.fromBufferAttribute(E,G),Y.uv1=p1.getInterpolation(O9,F8,W8,U8,V9,N9,w9,new DA);if(K){if(EG.fromBufferAttribute(K,J),KG.fromBufferAttribute(K,q),JG.fromBufferAttribute(K,G),Y.normal=p1.getInterpolation(O9,F8,W8,U8,EG,KG,JG,new P),Y.normal.dot(C.direction)>0)Y.normal.multiplyScalar(-1)}const H={a:J,b:q,c:G,normal:new P,materialIndex:0};p1.getNormal(F8,W8,U8,H.normal),Y.face=H}return Y},k8=function(A){const Q={};for(let B in A){Q[B]={};for(let C in A[B]){const I=A[B][C];if(I&&(I.isColor||I.isMatrix3||I.isMatrix4||I.isVector2||I.isVector3||I.isVector4||I.isTexture||I.isQuaternion))if(I.isRenderTargetTexture)console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),Q[B][C]=null;else Q[B][C]=I.clone();else if(Array.isArray(I))Q[B][C]=I.slice();else Q[B][C]=I}}return Q},T1=function(A){const Q={};for(let B=0;B<A.length;B++){const C=k8(A[B]);for(let I in C)Q[I]=C[I]}return Q},DR=function(A){const Q=[];for(let B=0;B<A.length;B++)Q.push(A[B].clone());return Q},OY=function(A){if(A.getRenderTarget()===null)return A.outputColorSpace;return W0.workingColorSpace},LY=function(){let A=null,Q=!1,B=null,C=null;function I(E,K){B(E,K),C=A.requestAnimationFrame(I)}return{start:function(){if(Q===!0)return;if(B===null)return;C=A.requestAnimationFrame(I),Q=!0},stop:function(){A.cancelAnimationFrame(C),Q=!1},setAnimationLoop:function(E){B=E},setContext:function(E){A=E}}},LR=function(A,Q){const B=Q.isWebGL2,C=new WeakMap;function I(G,Y){const{array:H,usage:Z}=G,X=H.byteLength,U=A.createBuffer();A.bindBuffer(Y,U),A.bufferData(Y,H,Z),G.onUploadCallback();let F;if(H instanceof Float32Array)F=A.FLOAT;else if(H instanceof Uint16Array)if(G.isFloat16BufferAttribute)if(B)F=A.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else F=A.UNSIGNED_SHORT;else if(H instanceof Int16Array)F=A.SHORT;else if(H instanceof Uint32Array)F=A.UNSIGNED_INT;else if(H instanceof Int32Array)F=A.INT;else if(H instanceof Int8Array)F=A.BYTE;else if(H instanceof Uint8Array)F=A.UNSIGNED_BYTE;else if(H instanceof Uint8ClampedArray)F=A.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+H);return{buffer:U,type:F,bytesPerElement:H.BYTES_PER_ELEMENT,version:G.version,size:X}}function E(G,Y,H){const{array:Z,_updateRange:X,updateRanges:U}=Y;if(A.bindBuffer(H,G),X.count===-1&&U.length===0)A.bufferSubData(H,0,Z);if(U.length!==0){for(let F=0,W=U.length;F<W;F++){const D=U[F];if(B)A.bufferSubData(H,D.start*Z.BYTES_PER_ELEMENT,Z,D.start,D.count);else A.bufferSubData(H,D.start*Z.BYTES_PER_ELEMENT,Z.subarray(D.start,D.start+D.count))}Y.clearUpdateRanges()}if(X.count!==-1){if(B)A.bufferSubData(H,X.offset*Z.BYTES_PER_ELEMENT,Z,X.offset,X.count);else A.bufferSubData(H,X.offset*Z.BYTES_PER_ELEMENT,Z.subarray(X.offset,X.offset+X.count));X.count=-1}Y.onUploadCallback()}function K(G){if(G.isInterleavedBufferAttribute)G=G.data;return C.get(G)}function J(G){if(G.isInterleavedBufferAttribute)G=G.data;const Y=C.get(G);if(Y)A.deleteBuffer(Y.buffer),C.delete(G)}function q(G,Y){if(G.isGLBufferAttribute){const Z=C.get(G);if(!Z||Z.version<G.version)C.set(G,{buffer:G.buffer,type:G.type,bytesPerElement:G.elementSize,version:G.version});return}if(G.isInterleavedBufferAttribute)G=G.data;const H=C.get(G);if(H===void 0)C.set(G,I(G,Y));else if(H.version<G.version){if(H.size!==G.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute\'s array buffer does not match the original size. Resizing buffer attributes is not supported.");E(H.buffer,G,Y),H.version=G.version}}return{get:K,remove:J,update:q}},Ew=function(A,Q,B,C,I,E,K){const J=new PA(0);let q=E===!0?0:1,G,Y,H=null,Z=0,X=null;function U(W,D){let V=!1,R=D.isScene===!0?D.background:null;if(R&&R.isTexture)R=(D.backgroundBlurriness>0?B:Q).get(R);if(R===null)F(J,q);else if(R&&R.isColor)F(R,1),V=!0;const O=A.xr.getEnvironmentBlendMode();if(O==="additive")C.buffers.color.setClear(0,0,0,1,K);else if(O==="alpha-blend")C.buffers.color.setClear(0,0,0,0,K);if(A.autoClear||V)A.clear(A.autoClearColor,A.autoClearDepth,A.autoClearStencil);if(R&&(R.isCubeTexture||R.mapping===306)){if(Y===void 0)Y=new nA(new Y4(1,1,1),new l0({name:"BackgroundCubeMaterial",uniforms:k8(h2.backgroundCube.uniforms),vertexShader:h2.backgroundCube.vertexShader,fragmentShader:h2.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),Y.geometry.deleteAttribute("normal"),Y.geometry.deleteAttribute("uv"),Y.onBeforeRender=function(z,w,k){this.matrixWorld.copyPosition(k.matrixWorld)},Object.defineProperty(Y.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),I.update(Y);if(F6.copy(D.backgroundRotation),F6.x*=-1,F6.y*=-1,F6.z*=-1,R.isCubeTexture&&R.isRenderTargetTexture===!1)F6.y*=-1,F6.z*=-1;if(Y.material.uniforms.envMap.value=R,Y.material.uniforms.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,Y.material.uniforms.backgroundBlurriness.value=D.backgroundBlurriness,Y.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,Y.material.uniforms.backgroundRotation.value.setFromMatrix4(Iw.makeRotationFromEuler(F6)),Y.material.toneMapped=W0.getTransfer(R.colorSpace)!=="srgb",H!==R||Z!==R.version||X!==A.toneMapping)Y.material.needsUpdate=!0,H=R,Z=R.version,X=A.toneMapping;Y.layers.enableAll(),W.unshift(Y,Y.geometry,Y.material,0,0,null)}else if(R&&R.isTexture){if(G===void 0)G=new nA(new q1(2,2),new l0({name:"BackgroundMaterial",uniforms:k8(h2.background.uniforms),vertexShader:h2.background.vertexShader,fragmentShader:h2.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),G.geometry.deleteAttribute("normal"),Object.defineProperty(G.material,"map",{get:function(){return this.uniforms.t2D.value}}),I.update(G);if(G.material.uniforms.t2D.value=R,G.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,G.material.toneMapped=W0.getTransfer(R.colorSpace)!=="srgb",R.matrixAutoUpdate===!0)R.updateMatrix();if(G.material.uniforms.uvTransform.value.copy(R.matrix),H!==R||Z!==R.version||X!==A.toneMapping)G.material.needsUpdate=!0,H=R,Z=R.version,X=A.toneMapping;G.layers.enableAll(),W.unshift(G,G.geometry,G.material,0,0,null)}}function F(W,D){W.getRGB(M9,OY(A)),C.buffers.color.setClear(M9.r,M9.g,M9.b,D,K)}return{getClearColor:function(){return J},setClearColor:function(W,D=1){J.set(W),q=D,F(J,q)},getClearAlpha:function(){return q},setClearAlpha:function(W){q=W,F(J,q)},render:U}},Kw=function(A,Q,B,C){const I=A.getParameter(A.MAX_VERTEX_ATTRIBS),E=C.isWebGL2?null:Q.get("OES_vertex_array_object"),K=C.isWebGL2||E!==null,J={},q=W(null);let G=q,Y=!1;function H(S,v,f,m,b){let l=!1;if(K){const QA=F(m,f,v);if(G!==QA)G=QA,X(G.object);if(l=D(S,m,f,b),l)V(S,m,f,b)}else{const QA=v.wireframe===!0;if(G.geometry!==m.id||G.program!==f.id||G.wireframe!==QA)G.geometry=m.id,G.program=f.id,G.wireframe=QA,l=!0}if(b!==null)B.update(b,A.ELEMENT_ARRAY_BUFFER);if(l||Y){if(Y=!1,j(S,v,f,m),b!==null)A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,B.get(b).buffer)}}function Z(){if(C.isWebGL2)return A.createVertexArray();return E.createVertexArrayOES()}function X(S){if(C.isWebGL2)return A.bindVertexArray(S);return E.bindVertexArrayOES(S)}function U(S){if(C.isWebGL2)return A.deleteVertexArray(S);return E.deleteVertexArrayOES(S)}function F(S,v,f){const m=f.wireframe===!0;let b=J[S.id];if(b===void 0)b={},J[S.id]=b;let l=b[v.id];if(l===void 0)l={},b[v.id]=l;let QA=l[m];if(QA===void 0)QA=W(Z()),l[m]=QA;return QA}function W(S){const v=[],f=[],m=[];for(let b=0;b<I;b++)v[b]=0,f[b]=0,m[b]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:v,enabledAttributes:f,attributeDivisors:m,object:S,attributes:{},index:null}}function D(S,v,f,m){const b=G.attributes,l=v.attributes;let QA=0;const BA=f.getAttributes();for(let qA in BA)if(BA[qA].location>=0){const AA=b[qA];let IA=l[qA];if(IA===void 0){if(qA==="instanceMatrix"&&S.instanceMatrix)IA=S.instanceMatrix;if(qA==="instanceColor"&&S.instanceColor)IA=S.instanceColor}if(AA===void 0)return!0;if(AA.attribute!==IA)return!0;if(IA&&AA.data!==IA.data)return!0;QA++}if(G.attributesNum!==QA)return!0;if(G.index!==m)return!0;return!1}function V(S,v,f,m){const b={},l=v.attributes;let QA=0;const BA=f.getAttributes();for(let qA in BA)if(BA[qA].location>=0){let AA=l[qA];if(AA===void 0){if(qA==="instanceMatrix"&&S.instanceMatrix)AA=S.instanceMatrix;if(qA==="instanceColor"&&S.instanceColor)AA=S.instanceColor}const IA={};if(IA.attribute=AA,AA&&AA.data)IA.data=AA.data;b[qA]=IA,QA++}G.attributes=b,G.attributesNum=QA,G.index=m}function R(){const S=G.newAttributes;for(let v=0,f=S.length;v<f;v++)S[v]=0}function O(S){z(S,0)}function z(S,v){const{newAttributes:f,enabledAttributes:m,attributeDivisors:b}=G;if(f[S]=1,m[S]===0)A.enableVertexAttribArray(S),m[S]=1;if(b[S]!==v)(C.isWebGL2?A:Q.get("ANGLE_instanced_arrays"))[C.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](S,v),b[S]=v}function w(){const{newAttributes:S,enabledAttributes:v}=G;for(let f=0,m=v.length;f<m;f++)if(v[f]!==S[f])A.disableVertexAttribArray(f),v[f]=0}function k(S,v,f,m,b,l,QA){if(QA===!0)A.vertexAttribIPointer(S,v,f,b,l);else A.vertexAttribPointer(S,v,f,m,b,l)}function j(S,v,f,m){if(C.isWebGL2===!1&&(S.isInstancedMesh||m.isInstancedBufferGeometry)){if(Q.get("ANGLE_instanced_arrays")===null)return}R();const b=m.attributes,l=f.getAttributes(),QA=v.defaultAttributeValues;for(let BA in l){const qA=l[BA];if(qA.location>=0){let a=b[BA];if(a===void 0){if(BA==="instanceMatrix"&&S.instanceMatrix)a=S.instanceMatrix;if(BA==="instanceColor"&&S.instanceColor)a=S.instanceColor}if(a!==void 0){const{normalized:AA,itemSize:IA}=a,jA=B.get(a);if(jA===void 0)continue;const{buffer:bA,type:RA,bytesPerElement:cA}=jA,E0=C.isWebGL2===!0&&(RA===A.INT||RA===A.UNSIGNED_INT||a.gpuType===1013);if(a.isInterleavedBufferAttribute){const x=a.data,u0=x.stride,C0=a.offset;if(x.isInstancedInterleavedBuffer){for(let OA=0;OA<qA.locationSize;OA++)z(qA.location+OA,x.meshPerAttribute);if(S.isInstancedMesh!==!0&&m._maxInstanceCount===void 0)m._maxInstanceCount=x.meshPerAttribute*x.count}else for(let OA=0;OA<qA.locationSize;OA++)O(qA.location+OA);A.bindBuffer(A.ARRAY_BUFFER,bA);for(let OA=0;OA<qA.locationSize;OA++)k(qA.location+OA,IA/qA.locationSize,RA,AA,u0*cA,(C0+IA/qA.locationSize*OA)*cA,E0)}else{if(a.isInstancedBufferAttribute){for(let x=0;x<qA.locationSize;x++)z(qA.location+x,a.meshPerAttribute);if(S.isInstancedMesh!==!0&&m._maxInstanceCount===void 0)m._maxInstanceCount=a.meshPerAttribute*a.count}else for(let x=0;x<qA.locationSize;x++)O(qA.location+x);A.bindBuffer(A.ARRAY_BUFFER,bA);for(let x=0;x<qA.locationSize;x++)k(qA.location+x,IA/qA.locationSize,RA,AA,IA*cA,IA/qA.locationSize*x*cA,E0)}}else if(QA!==void 0){const AA=QA[BA];if(AA!==void 0)switch(AA.length){case 2:A.vertexAttrib2fv(qA.location,AA);break;case 3:A.vertexAttrib3fv(qA.location,AA);break;case 4:A.vertexAttrib4fv(qA.location,AA);break;default:A.vertexAttrib1fv(qA.location,AA)}}}}w()}function h(){p();for(let S in J){const v=J[S];for(let f in v){const m=v[f];for(let b in m)U(m[b].object),delete m[b];delete v[f]}delete J[S]}}function N(S){if(J[S.id]===void 0)return;const v=J[S.id];for(let f in v){const m=v[f];for(let b in m)U(m[b].object),delete m[b];delete v[f]}delete J[S.id]}function $(S){for(let v in J){const f=J[v];if(f[S.id]===void 0)continue;const m=f[S.id];for(let b in m)U(m[b].object),delete m[b];delete f[S.id]}}function p(){if(n(),Y=!0,G===q)return;G=q,X(G.object)}function n(){q.geometry=null,q.program=null,q.wireframe=!1}return{setup:H,reset:p,resetDefaultState:n,dispose:h,releaseStatesOfGeometry:N,releaseStatesOfProgram:$,initAttributes:R,enableAttribute:O,disableUnusedAttributes:w}},Jw=function(A,Q,B,C){const I=C.isWebGL2;let E;function K(Y){E=Y}function J(Y,H){A.drawArrays(E,Y,H),B.update(H,E,1)}function q(Y,H,Z){if(Z===0)return;let X,U;if(I)X=A,U="drawArraysInstanced";else if(X=Q.get("ANGLE_instanced_arrays"),U="drawArraysInstancedANGLE",X===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}X[U](E,Y,H,Z),B.update(H,E,Z)}function G(Y,H,Z){if(Z===0)return;const X=Q.get("WEBGL_multi_draw");if(X===null)for(let U=0;U<Z;U++)this.render(Y[U],H[U]);else{X.multiDrawArraysWEBGL(E,Y,0,H,0,Z);let U=0;for(let F=0;F<Z;F++)U+=H[F];B.update(U,E,1)}}this.setMode=K,this.render=J,this.renderInstances=q,this.renderMultiDraw=G},qw=function(A,Q,B){let C;function I(){if(C!==void 0)return C;if(Q.has("EXT_texture_filter_anisotropic")===!0){const k=Q.get("EXT_texture_filter_anisotropic");C=A.getParameter(k.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else C=0;return C}function E(k){if(k==="highp"){if(A.getShaderPrecisionFormat(A.VERTEX_SHADER,A.HIGH_FLOAT).precision>0&&A.getShaderPrecisionFormat(A.FRAGMENT_SHADER,A.HIGH_FLOAT).precision>0)return"highp";k="mediump"}if(k==="mediump"){if(A.getShaderPrecisionFormat(A.VERTEX_SHADER,A.MEDIUM_FLOAT).precision>0&&A.getShaderPrecisionFormat(A.FRAGMENT_SHADER,A.MEDIUM_FLOAT).precision>0)return"mediump"}return"lowp"}const K=typeof WebGL2RenderingContext!=="undefined"&&A.constructor.name==="WebGL2RenderingContext";let J=B.precision!==void 0?B.precision:"highp";const q=E(J);if(q!==J)console.warn("THREE.WebGLRenderer:",J,"not supported, using",q,"instead."),J=q;const G=K||Q.has("WEBGL_draw_buffers"),Y=B.logarithmicDepthBuffer===!0,H=A.getParameter(A.MAX_TEXTURE_IMAGE_UNITS),Z=A.getParameter(A.MAX_VERTEX_TEXTURE_IMAGE_UNITS),X=A.getParameter(A.MAX_TEXTURE_SIZE),U=A.getParameter(A.MAX_CUBE_MAP_TEXTURE_SIZE),F=A.getParameter(A.MAX_VERTEX_ATTRIBS),W=A.getParameter(A.MAX_VERTEX_UNIFORM_VECTORS),D=A.getParameter(A.MAX_VARYING_VECTORS),V=A.getParameter(A.MAX_FRAGMENT_UNIFORM_VECTORS),R=Z>0,O=K||Q.has("OES_texture_float"),z=R&&O,w=K?A.getParameter(A.MAX_SAMPLES):0;return{isWebGL2:K,drawBuffers:G,getMaxAnisotropy:I,getMaxPrecision:E,precision:J,logarithmicDepthBuffer:Y,maxTextures:H,maxVertexTextures:Z,maxTextureSize:X,maxCubemapSize:U,maxAttributes:F,maxVertexUniforms:W,maxVaryings:D,maxFragmentUniforms:V,vertexTextures:R,floatFragmentTextures:O,floatVertexTextures:z,maxSamples:w}},Gw=function(A){const Q=this;let B=null,C=0,I=!1,E=!1;const K=new x2,J=new fA,q={value:null,needsUpdate:!1};this.uniform=q,this.numPlanes=0,this.numIntersection=0,this.init=function(H,Z){const X=H.length!==0||Z||C!==0||I;return I=Z,C=H.length,X},this.beginShadows=function(){E=!0,Y(null)},this.endShadows=function(){E=!1},this.setGlobalState=function(H,Z){B=Y(H,Z,0)},this.setState=function(H,Z,X){const{clippingPlanes:U,clipIntersection:F,clipShadows:W}=H,D=A.get(H);if(!I||U===null||U.length===0||E&&!W)if(E)Y(null);else G();else{const V=E?0:C,R=V*4;let O=D.clippingState||null;q.value=O,O=Y(U,Z,R,X);for(let z=0;z!==R;++z)O[z]=B[z];D.clippingState=O,this.numIntersection=F?this.numPlanes:0,this.numPlanes+=V}};function G(){if(q.value!==B)q.value=B,q.needsUpdate=C>0;Q.numPlanes=C,Q.numIntersection=0}function Y(H,Z,X,U){const F=H!==null?H.length:0;let W=null;if(F!==0){if(W=q.value,U!==!0||W===null){const D=X+F*4,V=Z.matrixWorldInverse;if(J.getNormalMatrix(V),W===null||W.length<D)W=new Float32Array(D);for(let R=0,O=X;R!==F;++R,O+=4)K.copy(H[R]).applyMatrix4(V,J),K.normal.toArray(W,O),W[O+3]=K.constant}q.value=W,q.needsUpdate=!0}return Q.numPlanes=F,Q.numIntersection=0,W}},Yw=function(A){let Q=new WeakMap;function B(K,J){if(J===303)K.mapping=301;else if(J===304)K.mapping=302;return K}function C(K){if(K&&K.isTexture){const J=K.mapping;if(J===303||J===304)if(Q.has(K)){const q=Q.get(K).texture;return B(q,K.mapping)}else{const q=K.image;if(q&&q.height>0){const G=new y8(q.height);return G.fromEquirectangularTexture(A,K),Q.set(K,G),K.addEventListener("dispose",I),B(G.texture,K.mapping)}else return null}}return K}function I(K){const J=K.target;J.removeEventListener("dispose",I);const q=Q.get(J);if(q!==void 0)Q.delete(J),q.dispose()}function E(){Q=new WeakMap}return{get:C,dispose:E}},Hw=function(A){const Q=[],B=[],C=[];let I=A;const E=A-w8+1+YG.length;for(let K=0;K<E;K++){const J=Math.pow(2,I);B.push(J);let q=1/J;if(K>A-w8)q=YG[K-A+w8-1];else if(K===0)q=0;C.push(q);const G=1/(J-2),Y=-G,H=1+G,Z=[Y,Y,H,Y,H,H,Y,Y,H,H,Y,H],X=6,U=6,F=3,W=2,D=1,V=new Float32Array(F*U*X),R=new Float32Array(W*U*X),O=new Float32Array(D*U*X);for(let w=0;w<X;w++){const k=w%3*2/3-1,j=w>2?0:-1,h=[k,j,0,k+0.6666666666666666,j,0,k+0.6666666666666666,j+1,0,k,j,0,k+0.6666666666666666,j+1,0,k,j+1,0];V.set(h,F*U*w),R.set(Z,W*U*w);const N=[w,w,w,w,w,w];O.set(N,D*U*w)}const z=new J1;if(z.setAttribute("position",new V0(V,F)),z.setAttribute("uv",new V0(R,W)),z.setAttribute("faceIndex",new V0(O,D)),Q.push(z),I>w8)I--}return{lodPlanes:Q,sizeLods:B,sigmas:C}},XG=function(A,Q,B){const C=new N1(A,Q,B);return C.texture.mapping=306,C.texture.name="PMREM.cubeUv",C.scissorTest=!0,C},$9=function(A,Q,B,C,I){A.viewport.set(Q,B,C,I),A.scissor.set(Q,B,C,I)},Zw=function(A,Q,B){const C=new Float32Array(D6),I=new P(0,1,0);return new l0({name:"SphericalGaussianBlur",defines:{n:D6,CUBEUV_TEXEL_WIDTH:1/Q,CUBEUV_TEXEL_HEIGHT:1/B,CUBEUV_MAX_MIP:`${A}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:C},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:I}},vertexShader:vC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:0,depthTest:!1,depthWrite:!1})},FG=function(){return new l0({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:vC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:0,depthTest:!1,depthWrite:!1})},WG=function(){return new l0({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:vC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:0,depthTest:!1,depthWrite:!1})},vC=function(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`},Xw=function(A){let Q=new WeakMap,B=null;function C(J){if(J&&J.isTexture){const q=J.mapping,G=q===303||q===304,Y=q===301||q===302;if(G||Y)if(J.isRenderTargetTexture&&J.needsPMREMUpdate===!0){J.needsPMREMUpdate=!1;let H=Q.get(J);if(B===null)B=new kC(A);return H=G?B.fromEquirectangular(J,H):B.fromCubemap(J,H),Q.set(J,H),H.texture}else if(Q.has(J))return Q.get(J).texture;else{const H=J.image;if(G&&H&&H.height>0||Y&&H&&I(H)){if(B===null)B=new kC(A);const Z=G?B.fromEquirectangular(J):B.fromCubemap(J);return Q.set(J,Z),J.addEventListener("dispose",E),Z.texture}else return null}}return J}function I(J){let q=0;const G=6;for(let Y=0;Y<G;Y++)if(J[Y]!==void 0)q++;return q===G}function E(J){const q=J.target;q.removeEventListener("dispose",E);const G=Q.get(q);if(G!==void 0)Q.delete(q),G.dispose()}function K(){if(Q=new WeakMap,B!==null)B.dispose(),B=null}return{get:C,dispose:K}},Fw=function(A){const Q={};function B(C){if(Q[C]!==void 0)return Q[C];let I;switch(C){case"WEBGL_depth_texture":I=A.getExtension("WEBGL_depth_texture")||A.getExtension("MOZ_WEBGL_depth_texture")||A.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":I=A.getExtension("EXT_texture_filter_anisotropic")||A.getExtension("MOZ_EXT_texture_filter_anisotropic")||A.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":I=A.getExtension("WEBGL_compressed_texture_s3tc")||A.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||A.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":I=A.getExtension("WEBGL_compressed_texture_pvrtc")||A.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:I=A.getExtension(C)}return Q[C]=I,I}return{has:function(C){return B(C)!==null},init:function(C){if(C.isWebGL2)B("EXT_color_buffer_float"),B("WEBGL_clip_cull_distance");else B("WEBGL_depth_texture"),B("OES_texture_float"),B("OES_texture_half_float"),B("OES_texture_half_float_linear"),B("OES_standard_derivatives"),B("OES_element_index_uint"),B("OES_vertex_array_object"),B("ANGLE_instanced_arrays");B("OES_texture_float_linear"),B("EXT_color_buffer_half_float"),B("WEBGL_multisampled_render_to_texture")},get:function(C){const I=B(C);if(I===null)console.warn("THREE.WebGLRenderer: "+C+" extension not supported.");return I}}},Ww=function(A,Q,B,C){const I={},E=new WeakMap;function K(H){const Z=H.target;if(Z.index!==null)Q.remove(Z.index);for(let U in Z.attributes)Q.remove(Z.attributes[U]);for(let U in Z.morphAttributes){const F=Z.morphAttributes[U];for(let W=0,D=F.length;W<D;W++)Q.remove(F[W])}Z.removeEventListener("dispose",K),delete I[Z.id];const X=E.get(Z);if(X)Q.remove(X),E.delete(Z);if(C.releaseStatesOfGeometry(Z),Z.isInstancedBufferGeometry===!0)delete Z._maxInstanceCount;B.memory.geometries--}function J(H,Z){if(I[Z.id]===!0)return Z;return Z.addEventListener("dispose",K),I[Z.id]=!0,B.memory.geometries++,Z}function q(H){const Z=H.attributes;for(let U in Z)Q.update(Z[U],A.ARRAY_BUFFER);const X=H.morphAttributes;for(let U in X){const F=X[U];for(let W=0,D=F.length;W<D;W++)Q.update(F[W],A.ARRAY_BUFFER)}}function G(H){const Z=[],X=H.index,U=H.attributes.position;let F=0;if(X!==null){const V=X.array;F=X.version;for(let R=0,O=V.length;R<O;R+=3){const z=V[R+0],w=V[R+1],k=V[R+2];Z.push(z,w,w,k,k,z)}}else if(U!==void 0){const V=U.array;F=U.version;for(let R=0,O=V.length/3-1;R<O;R+=3){const z=R+0,w=R+1,k=R+2;Z.push(z,w,w,k,k,z)}}else return;const W=new((RY(Z))?xC:yC)(Z,1);W.version=F;const D=E.get(H);if(D)Q.remove(D);E.set(H,W)}function Y(H){const Z=E.get(H);if(Z){const X=H.index;if(X!==null){if(Z.version<X.version)G(H)}}else G(H);return E.get(H)}return{get:J,update:q,getWireframeAttribute:Y}},Uw=function(A,Q,B,C){const I=C.isWebGL2;let E;function K(X){E=X}let J,q;function G(X){J=X.type,q=X.bytesPerElement}function Y(X,U){A.drawElements(E,U,J,X*q),B.update(U,E,1)}function H(X,U,F){if(F===0)return;let W,D;if(I)W=A,D="drawElementsInstanced";else if(W=Q.get("ANGLE_instanced_arrays"),D="drawElementsInstancedANGLE",W===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}W[D](E,U,J,X*q,F),B.update(U,E,F)}function Z(X,U,F){if(F===0)return;const W=Q.get("WEBGL_multi_draw");if(W===null)for(let D=0;D<F;D++)this.render(X[D]/q,U[D]);else{W.multiDrawElementsWEBGL(E,U,0,J,X,0,F);let D=0;for(let V=0;V<F;V++)D+=U[V];B.update(D,E,1)}}this.setMode=K,this.setIndex=G,this.render=Y,this.renderInstances=H,this.renderMultiDraw=Z},Dw=function(A){const Q={geometries:0,textures:0},B={frame:0,calls:0,triangles:0,points:0,lines:0};function C(E,K,J){switch(B.calls++,K){case A.TRIANGLES:B.triangles+=J*(E/3);break;case A.LINES:B.lines+=J*(E/2);break;case A.LINE_STRIP:B.lines+=J*(E-1);break;case A.LINE_LOOP:B.lines+=J*E;break;case A.POINTS:B.points+=J*E;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",K);break}}function I(){B.calls=0,B.triangles=0,B.points=0,B.lines=0}return{memory:Q,render:B,programs:null,autoReset:!0,reset:I,update:C}},Rw=function(A,Q){return A[0]-Q[0]},Vw=function(A,Q){return Math.abs(Q[1])-Math.abs(A[1])},Nw=function(A,Q,B){const C={},I=new Float32Array(8),E=new WeakMap,K=new M0,J=[];for(let G=0;G<8;G++)J[G]=[G,0];function q(G,Y,H){const Z=G.morphTargetInfluences;if(Q.isWebGL2===!0){const X=Y.morphAttributes.position||Y.morphAttributes.normal||Y.morphAttributes.color,U=X!==void 0?X.length:0;let F=E.get(Y);if(F===void 0||F.count!==U){let p=function(){N.dispose(),E.delete(Y),Y.removeEventListener("dispose",p)};if(F!==void 0)F.texture.dispose();const W=Y.morphAttributes.position!==void 0,D=Y.morphAttributes.normal!==void 0,V=Y.morphAttributes.color!==void 0,R=Y.morphAttributes.position||[],O=Y.morphAttributes.normal||[],z=Y.morphAttributes.color||[];let w=0;if(W===!0)w=1;if(D===!0)w=2;if(V===!0)w=3;let k=Y.attributes.position.count*w,j=1;if(k>Q.maxTextureSize)j=Math.ceil(k/Q.maxTextureSize),k=Q.maxTextureSize;const h=new Float32Array(k*j*4*U),N=new gC(h,k,j,U);N.type=1015,N.needsUpdate=!0;const $=w*4;for(let n=0;n<U;n++){const S=R[n],v=O[n],f=z[n],m=k*j*4*n;for(let b=0;b<S.count;b++){const l=b*$;if(W===!0)K.fromBufferAttribute(S,b),h[m+l+0]=K.x,h[m+l+1]=K.y,h[m+l+2]=K.z,h[m+l+3]=0;if(D===!0)K.fromBufferAttribute(v,b),h[m+l+4]=K.x,h[m+l+5]=K.y,h[m+l+6]=K.z,h[m+l+7]=0;if(V===!0)K.fromBufferAttribute(f,b),h[m+l+8]=K.x,h[m+l+9]=K.y,h[m+l+10]=K.z,h[m+l+11]=f.itemSize===4?K.w:1}}F={count:U,texture:N,size:new DA(k,j)},E.set(Y,F),Y.addEventListener("dispose",p)}if(G.isInstancedMesh===!0&&G.morphTexture!==null)H.getUniforms().setValue(A,"morphTexture",G.morphTexture,B);else{let W=0;for(let V=0;V<Z.length;V++)W+=Z[V];const D=Y.morphTargetsRelative?1:1-W;H.getUniforms().setValue(A,"morphTargetBaseInfluence",D),H.getUniforms().setValue(A,"morphTargetInfluences",Z)}H.getUniforms().setValue(A,"morphTargetsTexture",F.texture,B),H.getUniforms().setValue(A,"morphTargetsTextureSize",F.size)}else{const X=Z===void 0?0:Z.length;let U=C[Y.id];if(U===void 0||U.length!==X){U=[];for(let R=0;R<X;R++)U[R]=[R,0];C[Y.id]=U}for(let R=0;R<X;R++){const O=U[R];O[0]=R,O[1]=Z[R]}U.sort(Vw);for(let R=0;R<8;R++)if(R<X&&U[R][1])J[R][0]=U[R][0],J[R][1]=U[R][1];else J[R][0]=Number.MAX_SAFE_INTEGER,J[R][1]=0;J.sort(Rw);const F=Y.morphAttributes.position,W=Y.morphAttributes.normal;let D=0;for(let R=0;R<8;R++){const O=J[R],z=O[0],w=O[1];if(z!==Number.MAX_SAFE_INTEGER&&w){if(F&&Y.getAttribute("morphTarget"+R)!==F[z])Y.setAttribute("morphTarget"+R,F[z]);if(W&&Y.getAttribute("morphNormal"+R)!==W[z])Y.setAttribute("morphNormal"+R,W[z]);I[R]=w,D+=w}else{if(F&&Y.hasAttribute("morphTarget"+R)===!0)Y.deleteAttribute("morphTarget"+R);if(W&&Y.hasAttribute("morphNormal"+R)===!0)Y.deleteAttribute("morphNormal"+R);I[R]=0}}const V=Y.morphTargetsRelative?1:1-D;H.getUniforms().setValue(A,"morphTargetBaseInfluence",V),H.getUniforms().setValue(A,"morphTargetInfluences",I)}}return{update:q}},ww=function(A,Q,B,C){let I=new WeakMap;function E(q){const G=C.render.frame,Y=q.geometry,H=Q.get(q,Y);if(I.get(H)!==G)Q.update(H),I.set(H,G);if(q.isInstancedMesh){if(q.hasEventListener("dispose",J)===!1)q.addEventListener("dispose",J);if(I.get(q)!==G){if(B.update(q.instanceMatrix,A.ARRAY_BUFFER),q.instanceColor!==null)B.update(q.instanceColor,A.ARRAY_BUFFER);I.set(q,G)}}if(q.isSkinnedMesh){const Z=q.skeleton;if(I.get(Z)!==G)Z.update(),I.set(Z,G)}return H}function K(){I=new WeakMap}function J(q){const G=q.target;if(G.removeEventListener("dispose",J),B.remove(G.instanceMatrix),G.instanceColor!==null)B.remove(G.instanceColor)}return{update:E,dispose:K}},x8=function(A,Q,B){const C=A[0];if(C<=0||C>0)return A;const I=Q*B;let E=UG[I];if(E===void 0)E=new Float32Array(I),UG[I]=E;if(Q!==0){C.toArray(E,0);for(let K=1,J=0;K!==Q;++K)J+=B,A[K].toArray(E,J)}return E},s0=function(A,Q){if(A.length!==Q.length)return!1;for(let B=0,C=A.length;B<C;B++)if(A[B]!==Q[B])return!1;return!0},n0=function(A,Q){for(let B=0,C=Q.length;B<C;B++)A[B]=Q[B]},l9=function(A,Q){let B=DG[Q];if(B===void 0)B=new Int32Array(Q),DG[Q]=B;for(let C=0;C!==Q;++C)B[C]=A.allocateTextureUnit();return B},Ow=function(A,Q){const B=this.cache;if(B[0]===Q)return;A.uniform1f(this.addr,Q),B[0]=Q},Lw=function(A,Q){const B=this.cache;if(Q.x!==void 0){if(B[0]!==Q.x||B[1]!==Q.y)A.uniform2f(this.addr,Q.x,Q.y),B[0]=Q.x,B[1]=Q.y}else{if(s0(B,Q))return;A.uniform2fv(this.addr,Q),n0(B,Q)}},zw=function(A,Q){const B=this.cache;if(Q.x!==void 0){if(B[0]!==Q.x||B[1]!==Q.y||B[2]!==Q.z)A.uniform3f(this.addr,Q.x,Q.y,Q.z),B[0]=Q.x,B[1]=Q.y,B[2]=Q.z}else if(Q.r!==void 0){if(B[0]!==Q.r||B[1]!==Q.g||B[2]!==Q.b)A.uniform3f(this.addr,Q.r,Q.g,Q.b),B[0]=Q.r,B[1]=Q.g,B[2]=Q.b}else{if(s0(B,Q))return;A.uniform3fv(this.addr,Q),n0(B,Q)}},kw=function(A,Q){const B=this.cache;if(Q.x!==void 0){if(B[0]!==Q.x||B[1]!==Q.y||B[2]!==Q.z||B[3]!==Q.w)A.uniform4f(this.addr,Q.x,Q.y,Q.z,Q.w),B[0]=Q.x,B[1]=Q.y,B[2]=Q.z,B[3]=Q.w}else{if(s0(B,Q))return;A.uniform4fv(this.addr,Q),n0(B,Q)}},Mw=function(A,Q){const B=this.cache,C=Q.elements;if(C===void 0){if(s0(B,Q))return;A.uniformMatrix2fv(this.addr,!1,Q),n0(B,Q)}else{if(s0(B,C))return;NG.set(C),A.uniformMatrix2fv(this.addr,!1,NG),n0(B,C)}},$w=function(A,Q){const B=this.cache,C=Q.elements;if(C===void 0){if(s0(B,Q))return;A.uniformMatrix3fv(this.addr,!1,Q),n0(B,Q)}else{if(s0(B,C))return;VG.set(C),A.uniformMatrix3fv(this.addr,!1,VG),n0(B,C)}},_w=function(A,Q){const B=this.cache,C=Q.elements;if(C===void 0){if(s0(B,Q))return;A.uniformMatrix4fv(this.addr,!1,Q),n0(B,Q)}else{if(s0(B,C))return;RG.set(C),A.uniformMatrix4fv(this.addr,!1,RG),n0(B,C)}},Pw=function(A,Q){const B=this.cache;if(B[0]===Q)return;A.uniform1i(this.addr,Q),B[0]=Q},Sw=function(A,Q){const B=this.cache;if(Q.x!==void 0){if(B[0]!==Q.x||B[1]!==Q.y)A.uniform2i(this.addr,Q.x,Q.y),B[0]=Q.x,B[1]=Q.y}else{if(s0(B,Q))return;A.uniform2iv(this.addr,Q),n0(B,Q)}},Tw=function(A,Q){const B=this.cache;if(Q.x!==void 0){if(B[0]!==Q.x||B[1]!==Q.y||B[2]!==Q.z)A.uniform3i(this.addr,Q.x,Q.y,Q.z),B[0]=Q.x,B[1]=Q.y,B[2]=Q.z}else{if(s0(B,Q))return;A.uniform3iv(this.addr,Q),n0(B,Q)}},jw=function(A,Q){const B=this.cache;if(Q.x!==void 0){if(B[0]!==Q.x||B[1]!==Q.y||B[2]!==Q.z||B[3]!==Q.w)A.uniform4i(this.addr,Q.x,Q.y,Q.z,Q.w),B[0]=Q.x,B[1]=Q.y,B[2]=Q.z,B[3]=Q.w}else{if(s0(B,Q))return;A.uniform4iv(this.addr,Q),n0(B,Q)}},gw=function(A,Q){const B=this.cache;if(B[0]===Q)return;A.uniform1ui(this.addr,Q),B[0]=Q},yw=function(A,Q){const B=this.cache;if(Q.x!==void 0){if(B[0]!==Q.x||B[1]!==Q.y)A.uniform2ui(this.addr,Q.x,Q.y),B[0]=Q.x,B[1]=Q.y}else{if(s0(B,Q))return;A.uniform2uiv(this.addr,Q),n0(B,Q)}},xw=function(A,Q){const B=this.cache;if(Q.x!==void 0){if(B[0]!==Q.x||B[1]!==Q.y||B[2]!==Q.z)A.uniform3ui(this.addr,Q.x,Q.y,Q.z),B[0]=Q.x,B[1]=Q.y,B[2]=Q.z}else{if(s0(B,Q))return;A.uniform3uiv(this.addr,Q),n0(B,Q)}},hw=function(A,Q){const B=this.cache;if(Q.x!==void 0){if(B[0]!==Q.x||B[1]!==Q.y||B[2]!==Q.z||B[3]!==Q.w)A.uniform4ui(this.addr,Q.x,Q.y,Q.z,Q.w),B[0]=Q.x,B[1]=Q.y,B[2]=Q.z,B[3]=Q.w}else{if(s0(B,Q))return;A.uniform4uiv(this.addr,Q),n0(B,Q)}},vw=function(A,Q,B){const C=this.cache,I=B.allocateTextureUnit();if(C[0]!==I)A.uniform1i(this.addr,I),C[0]=I;const E=this.type===A.SAMPLER_2D_SHADOW?kY:zY;B.setTexture2D(Q||E,I)},fw=function(A,Q,B){const C=this.cache,I=B.allocateTextureUnit();if(C[0]!==I)A.uniform1i(this.addr,I),C[0]=I;B.setTexture3D(Q||$Y,I)},bw=function(A,Q,B){const C=this.cache,I=B.allocateTextureUnit();if(C[0]!==I)A.uniform1i(this.addr,I),C[0]=I;B.setTextureCube(Q||_Y,I)},pw=function(A,Q,B){const C=this.cache,I=B.allocateTextureUnit();if(C[0]!==I)A.uniform1i(this.addr,I),C[0]=I;B.setTexture2DArray(Q||MY,I)},uw=function(A){switch(A){case 5126:return Ow;case 35664:return Lw;case 35665:return zw;case 35666:return kw;case 35674:return Mw;case 35675:return $w;case 35676:return _w;case 5124:case 35670:return Pw;case 35667:case 35671:return Sw;case 35668:case 35672:return Tw;case 35669:case 35673:return jw;case 5125:return gw;case 36294:return yw;case 36295:return xw;case 36296:return hw;case 35678:case 36198:case 36298:case 36306:case 35682:return vw;case 35679:case 36299:case 36307:return fw;case 35680:case 36300:case 36308:case 36293:return bw;case 36289:case 36303:case 36311:case 36292:return pw}},mw=function(A,Q){A.uniform1fv(this.addr,Q)},dw=function(A,Q){const B=x8(Q,this.size,2);A.uniform2fv(this.addr,B)},cw=function(A,Q){const B=x8(Q,this.size,3);A.uniform3fv(this.addr,B)},lw=function(A,Q){const B=x8(Q,this.size,4);A.uniform4fv(this.addr,B)},sw=function(A,Q){const B=x8(Q,this.size,4);A.uniformMatrix2fv(this.addr,!1,B)},nw=function(A,Q){const B=x8(Q,this.size,9);A.uniformMatrix3fv(this.addr,!1,B)},ow=function(A,Q){const B=x8(Q,this.size,16);A.uniformMatrix4fv(this.addr,!1,B)},iw=function(A,Q){A.uniform1iv(this.addr,Q)},aw=function(A,Q){A.uniform2iv(this.addr,Q)},rw=function(A,Q){A.uniform3iv(this.addr,Q)},tw=function(A,Q){A.uniform4iv(this.addr,Q)},ew=function(A,Q){A.uniform1uiv(this.addr,Q)},AO=function(A,Q){A.uniform2uiv(this.addr,Q)},QO=function(A,Q){A.uniform3uiv(this.addr,Q)},BO=function(A,Q){A.uniform4uiv(this.addr,Q)},CO=function(A,Q,B){const C=this.cache,I=Q.length,E=l9(B,I);if(!s0(C,E))A.uniform1iv(this.addr,E),n0(C,E);for(let K=0;K!==I;++K)B.setTexture2D(Q[K]||zY,E[K])},IO=function(A,Q,B){const C=this.cache,I=Q.length,E=l9(B,I);if(!s0(C,E))A.uniform1iv(this.addr,E),n0(C,E);for(let K=0;K!==I;++K)B.setTexture3D(Q[K]||$Y,E[K])},EO=function(A,Q,B){const C=this.cache,I=Q.length,E=l9(B,I);if(!s0(C,E))A.uniform1iv(this.addr,E),n0(C,E);for(let K=0;K!==I;++K)B.setTextureCube(Q[K]||_Y,E[K])},KO=function(A,Q,B){const C=this.cache,I=Q.length,E=l9(B,I);if(!s0(C,E))A.uniform1iv(this.addr,E),n0(C,E);for(let K=0;K!==I;++K)B.setTexture2DArray(Q[K]||MY,E[K])},JO=function(A){switch(A){case 5126:return mw;case 35664:return dw;case 35665:return cw;case 35666:return lw;case 35674:return sw;case 35675:return nw;case 35676:return ow;case 5124:case 35670:return iw;case 35667:case 35671:return aw;case 35668:case 35672:return rw;case 35669:case 35673:return tw;case 5125:return ew;case 36294:return AO;case 36295:return QO;case 36296:return BO;case 35678:case 36198:case 36298:case 36306:case 35682:return CO;case 35679:case 36299:case 36307:return IO;case 35680:case 36300:case 36308:case 36293:return EO;case 36289:case 36303:case 36311:case 36292:return KO}},wG=function(A,Q){A.seq.push(Q),A.map[Q.id]=Q},qO=function(A,Q,B){const C=A.name,I=C.length;RC.lastIndex=0;while(!0){const E=RC.exec(C),K=RC.lastIndex;let J=E[1];const q=E[2]==="]",G=E[3];if(q)J=J|0;if(G===void 0||G==="["&&K+2===I){wG(B,G===void 0?new PY(J,A,Q):new SY(J,A,Q));break}else{let H=B.map[J];if(H===void 0)H=new TY(J),wG(B,H);B=H}}},OG=function(A,Q,B){const C=A.createShader(Q);return A.shaderSource(C,B),A.compileShader(C),C},HO=function(A,Q){const B=A.split("\n"),C=[],I=Math.max(Q-6,0),E=Math.min(Q+6,B.length);for(let K=I;K<E;K++){const J=K+1;C.push(`${J===Q?">":" "} ${J}: ${B[K]}`)}return C.join("\n")},ZO=function(A){const Q=W0.getPrimaries(W0.workingColorSpace),B=W0.getPrimaries(A);let C;if(Q===B)C="";else if(Q==="p3"&&B==="rec709")C="LinearDisplayP3ToLinearSRGB";else if(Q==="rec709"&&B==="p3")C="LinearSRGBToLinearDisplayP3";switch(A){case"srgb-linear":case"display-p3-linear":return[C,"LinearTransferOETF"];case"srgb":case"display-p3":return[C,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",A),[C,"LinearTransferOETF"]}},LG=function(A,Q,B){const C=A.getShaderParameter(Q,A.COMPILE_STATUS),I=A.getShaderInfoLog(Q).trim();if(C&&I==="")return"";const E=/ERROR: 0:(\d+)/.exec(I);if(E){const K=parseInt(E[1]);return B.toUpperCase()+"\n\n"+I+"\n\n"+HO(A.getShaderSource(Q),K)}else return I},XO=function(A,Q){const B=ZO(Q);return`vec4 ${A}( vec4 value ) { return ${B[0]}( ${B[1]}( value ) ); }`},FO=function(A,Q){let B;switch(Q){case 1:B="Linear";break;case 2:B="Reinhard";break;case 3:B="OptimizedCineon";break;case 4:B="ACESFilmic";break;case 6:B="AgX";break;case 7:B="Neutral";break;case 5:B="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",Q),B="Linear"}return"vec3 "+A+"( vec3 color ) { return "+B+"ToneMapping( color ); }"},WO=function(A){return[A.extensionDerivatives||!!A.envMapCubeUVHeight||A.bumpMap||A.normalMapTangentSpace||A.clearcoatNormalMap||A.flatShading||A.alphaToCoverage||A.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(A.extensionFragDepth||A.logarithmicDepthBuffer)&&A.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",A.extensionDrawBuffers&&A.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(A.extensionShaderTextureLOD||A.envMap||A.transmission)&&A.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(O8).join("\n")},UO=function(A){return[A.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",A.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(O8).join("\n")},DO=function(A){const Q=[];for(let B in A){const C=A[B];if(C===!1)continue;Q.push("#define "+B+" "+C)}return Q.join("\n")},RO=function(A,Q){const B={},C=A.getProgramParameter(Q,A.ACTIVE_ATTRIBUTES);for(let I=0;I<C;I++){const E=A.getActiveAttrib(Q,I),K=E.name;let J=1;if(E.type===A.FLOAT_MAT2)J=2;if(E.type===A.FLOAT_MAT3)J=3;if(E.type===A.FLOAT_MAT4)J=4;B[K]={type:E.type,location:A.getAttribLocation(Q,K),locationSize:J}}return B},O8=function(A){return A!==""},zG=function(A,Q){const B=Q.numSpotLightShadows+Q.numSpotLightMaps-Q.numSpotLightShadowsWithMaps;return A.replace(/NUM_DIR_LIGHTS/g,Q.numDirLights).replace(/NUM_SPOT_LIGHTS/g,Q.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,Q.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,B).replace(/NUM_RECT_AREA_LIGHTS/g,Q.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,Q.numPointLights).replace(/NUM_HEMI_LIGHTS/g,Q.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,Q.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,Q.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,Q.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,Q.numPointLightShadows)},kG=function(A,Q){return A.replace(/NUM_CLIPPING_PLANES/g,Q.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,Q.numClippingPlanes-Q.numClipIntersection)},MC=function(A){return A.replace(VO,wO)},wO=function(A,Q){let B=dA[Q];if(B===void 0){const C=NO.get(Q);if(C!==void 0)B=dA[C],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',Q,C);else throw new Error("Can not resolve #include <"+Q+">")}return MC(B)},MG=function(A){return A.replace(OO,LO)},LO=function(A,Q,B,C){let I="";for(let E=parseInt(Q);E<parseInt(B);E++)I+=C.replace(/\[\s*i\s*\]/g,"[ "+E+" ]").replace(/UNROLLED_LOOP_INDEX/g,E);return I},$G=function(A){let Q=`precision ${A.precision} float;
	precision ${A.precision} int;
	precision ${A.precision} sampler2D;
	precision ${A.precision} samplerCube;
	`;if(A.isWebGL2)Q+=`precision ${A.precision} sampler3D;
		precision ${A.precision} sampler2DArray;
		precision ${A.precision} sampler2DShadow;
		precision ${A.precision} samplerCubeShadow;
		precision ${A.precision} sampler2DArrayShadow;
		precision ${A.precision} isampler2D;
		precision ${A.precision} isampler3D;
		precision ${A.precision} isamplerCube;
		precision ${A.precision} isampler2DArray;
		precision ${A.precision} usampler2D;
		precision ${A.precision} usampler3D;
		precision ${A.precision} usamplerCube;
		precision ${A.precision} usampler2DArray;
		`;if(A.precision==="highp")Q+="\n#define HIGH_PRECISION";else if(A.precision==="mediump")Q+="\n#define MEDIUM_PRECISION";else if(A.precision==="lowp")Q+="\n#define LOW_PRECISION";return Q},zO=function(A){let Q="SHADOWMAP_TYPE_BASIC";if(A.shadowMapType===1)Q="SHADOWMAP_TYPE_PCF";else if(A.shadowMapType===2)Q="SHADOWMAP_TYPE_PCF_SOFT";else if(A.shadowMapType===3)Q="SHADOWMAP_TYPE_VSM";return Q},kO=function(A){let Q="ENVMAP_TYPE_CUBE";if(A.envMap)switch(A.envMapMode){case 301:case 302:Q="ENVMAP_TYPE_CUBE";break;case 306:Q="ENVMAP_TYPE_CUBE_UV";break}return Q},MO=function(A){let Q="ENVMAP_MODE_REFLECTION";if(A.envMap)switch(A.envMapMode){case 302:Q="ENVMAP_MODE_REFRACTION";break}return Q},$O=function(A){let Q="ENVMAP_BLENDING_NONE";if(A.envMap)switch(A.combine){case 0:Q="ENVMAP_BLENDING_MULTIPLY";break;case 1:Q="ENVMAP_BLENDING_MIX";break;case 2:Q="ENVMAP_BLENDING_ADD";break}return Q},_O=function(A){const Q=A.envMapCubeUVHeight;if(Q===null)return null;const B=Math.log2(Q)-2,C=1/Q;return{texelWidth:1/(3*Math.max(Math.pow(2,B),112)),texelHeight:C,maxMip:B}},PO=function(A,Q,B,C){const I=A.getContext(),E=B.defines;let{vertexShader:K,fragmentShader:J}=B;const q=zO(B),G=kO(B),Y=MO(B),H=$O(B),Z=_O(B),X=B.isWebGL2?"":WO(B),U=UO(B),F=DO(E),W=I.createProgram();let D,V,R=B.glslVersion?"#version "+B.glslVersion+"\n":"";if(B.isRawShaderMaterial){if(D=["#define SHADER_TYPE "+B.shaderType,"#define SHADER_NAME "+B.shaderName,F].filter(O8).join("\n"),D.length>0)D+="\n";if(V=[X,"#define SHADER_TYPE "+B.shaderType,"#define SHADER_NAME "+B.shaderName,F].filter(O8).join("\n"),V.length>0)V+="\n"}else D=[$G(B),"#define SHADER_TYPE "+B.shaderType,"#define SHADER_NAME "+B.shaderName,F,B.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",B.batching?"#define USE_BATCHING":"",B.instancing?"#define USE_INSTANCING":"",B.instancingColor?"#define USE_INSTANCING_COLOR":"",B.instancingMorph?"#define USE_INSTANCING_MORPH":"",B.useFog&&B.fog?"#define USE_FOG":"",B.useFog&&B.fogExp2?"#define FOG_EXP2":"",B.map?"#define USE_MAP":"",B.envMap?"#define USE_ENVMAP":"",B.envMap?"#define "+Y:"",B.lightMap?"#define USE_LIGHTMAP":"",B.aoMap?"#define USE_AOMAP":"",B.bumpMap?"#define USE_BUMPMAP":"",B.normalMap?"#define USE_NORMALMAP":"",B.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",B.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",B.displacementMap?"#define USE_DISPLACEMENTMAP":"",B.emissiveMap?"#define USE_EMISSIVEMAP":"",B.anisotropy?"#define USE_ANISOTROPY":"",B.anisotropyMap?"#define USE_ANISOTROPYMAP":"",B.clearcoatMap?"#define USE_CLEARCOATMAP":"",B.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",B.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",B.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",B.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",B.specularMap?"#define USE_SPECULARMAP":"",B.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",B.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",B.roughnessMap?"#define USE_ROUGHNESSMAP":"",B.metalnessMap?"#define USE_METALNESSMAP":"",B.alphaMap?"#define USE_ALPHAMAP":"",B.alphaHash?"#define USE_ALPHAHASH":"",B.transmission?"#define USE_TRANSMISSION":"",B.transmissionMap?"#define USE_TRANSMISSIONMAP":"",B.thicknessMap?"#define USE_THICKNESSMAP":"",B.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",B.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",B.mapUv?"#define MAP_UV "+B.mapUv:"",B.alphaMapUv?"#define ALPHAMAP_UV "+B.alphaMapUv:"",B.lightMapUv?"#define LIGHTMAP_UV "+B.lightMapUv:"",B.aoMapUv?"#define AOMAP_UV "+B.aoMapUv:"",B.emissiveMapUv?"#define EMISSIVEMAP_UV "+B.emissiveMapUv:"",B.bumpMapUv?"#define BUMPMAP_UV "+B.bumpMapUv:"",B.normalMapUv?"#define NORMALMAP_UV "+B.normalMapUv:"",B.displacementMapUv?"#define DISPLACEMENTMAP_UV "+B.displacementMapUv:"",B.metalnessMapUv?"#define METALNESSMAP_UV "+B.metalnessMapUv:"",B.roughnessMapUv?"#define ROUGHNESSMAP_UV "+B.roughnessMapUv:"",B.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+B.anisotropyMapUv:"",B.clearcoatMapUv?"#define CLEARCOATMAP_UV "+B.clearcoatMapUv:"",B.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+B.clearcoatNormalMapUv:"",B.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+B.clearcoatRoughnessMapUv:"",B.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+B.iridescenceMapUv:"",B.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+B.iridescenceThicknessMapUv:"",B.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+B.sheenColorMapUv:"",B.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+B.sheenRoughnessMapUv:"",B.specularMapUv?"#define SPECULARMAP_UV "+B.specularMapUv:"",B.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+B.specularColorMapUv:"",B.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+B.specularIntensityMapUv:"",B.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+B.transmissionMapUv:"",B.thicknessMapUv?"#define THICKNESSMAP_UV "+B.thicknessMapUv:"",B.vertexTangents&&B.flatShading===!1?"#define USE_TANGENT":"",B.vertexColors?"#define USE_COLOR":"",B.vertexAlphas?"#define USE_COLOR_ALPHA":"",B.vertexUv1s?"#define USE_UV1":"",B.vertexUv2s?"#define USE_UV2":"",B.vertexUv3s?"#define USE_UV3":"",B.pointsUvs?"#define USE_POINTS_UV":"",B.flatShading?"#define FLAT_SHADED":"",B.skinning?"#define USE_SKINNING":"",B.morphTargets?"#define USE_MORPHTARGETS":"",B.morphNormals&&B.flatShading===!1?"#define USE_MORPHNORMALS":"",B.morphColors&&B.isWebGL2?"#define USE_MORPHCOLORS":"",B.morphTargetsCount>0&&B.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",B.morphTargetsCount>0&&B.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+B.morphTextureStride:"",B.morphTargetsCount>0&&B.isWebGL2?"#define MORPHTARGETS_COUNT "+B.morphTargetsCount:"",B.doubleSided?"#define DOUBLE_SIDED":"",B.flipSided?"#define FLIP_SIDED":"",B.shadowMapEnabled?"#define USE_SHADOWMAP":"",B.shadowMapEnabled?"#define "+q:"",B.sizeAttenuation?"#define USE_SIZEATTENUATION":"",B.numLightProbes>0?"#define USE_LIGHT_PROBES":"",B.useLegacyLights?"#define LEGACY_LIGHTS":"",B.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",B.logarithmicDepthBuffer&&B.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif","\n"].filter(O8).join("\n"),V=[X,$G(B),"#define SHADER_TYPE "+B.shaderType,"#define SHADER_NAME "+B.shaderName,F,B.useFog&&B.fog?"#define USE_FOG":"",B.useFog&&B.fogExp2?"#define FOG_EXP2":"",B.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",B.map?"#define USE_MAP":"",B.matcap?"#define USE_MATCAP":"",B.envMap?"#define USE_ENVMAP":"",B.envMap?"#define "+G:"",B.envMap?"#define "+Y:"",B.envMap?"#define "+H:"",Z?"#define CUBEUV_TEXEL_WIDTH "+Z.texelWidth:"",Z?"#define CUBEUV_TEXEL_HEIGHT "+Z.texelHeight:"",Z?"#define CUBEUV_MAX_MIP "+Z.maxMip+".0":"",B.lightMap?"#define USE_LIGHTMAP":"",B.aoMap?"#define USE_AOMAP":"",B.bumpMap?"#define USE_BUMPMAP":"",B.normalMap?"#define USE_NORMALMAP":"",B.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",B.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",B.emissiveMap?"#define USE_EMISSIVEMAP":"",B.anisotropy?"#define USE_ANISOTROPY":"",B.anisotropyMap?"#define USE_ANISOTROPYMAP":"",B.clearcoat?"#define USE_CLEARCOAT":"",B.clearcoatMap?"#define USE_CLEARCOATMAP":"",B.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",B.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",B.iridescence?"#define USE_IRIDESCENCE":"",B.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",B.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",B.specularMap?"#define USE_SPECULARMAP":"",B.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",B.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",B.roughnessMap?"#define USE_ROUGHNESSMAP":"",B.metalnessMap?"#define USE_METALNESSMAP":"",B.alphaMap?"#define USE_ALPHAMAP":"",B.alphaTest?"#define USE_ALPHATEST":"",B.alphaHash?"#define USE_ALPHAHASH":"",B.sheen?"#define USE_SHEEN":"",B.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",B.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",B.transmission?"#define USE_TRANSMISSION":"",B.transmissionMap?"#define USE_TRANSMISSIONMAP":"",B.thicknessMap?"#define USE_THICKNESSMAP":"",B.vertexTangents&&B.flatShading===!1?"#define USE_TANGENT":"",B.vertexColors||B.instancingColor?"#define USE_COLOR":"",B.vertexAlphas?"#define USE_COLOR_ALPHA":"",B.vertexUv1s?"#define USE_UV1":"",B.vertexUv2s?"#define USE_UV2":"",B.vertexUv3s?"#define USE_UV3":"",B.pointsUvs?"#define USE_POINTS_UV":"",B.gradientMap?"#define USE_GRADIENTMAP":"",B.flatShading?"#define FLAT_SHADED":"",B.doubleSided?"#define DOUBLE_SIDED":"",B.flipSided?"#define FLIP_SIDED":"",B.shadowMapEnabled?"#define USE_SHADOWMAP":"",B.shadowMapEnabled?"#define "+q:"",B.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",B.numLightProbes>0?"#define USE_LIGHT_PROBES":"",B.useLegacyLights?"#define LEGACY_LIGHTS":"",B.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",B.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",B.logarithmicDepthBuffer&&B.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",B.toneMapping!==0?"#define TONE_MAPPING":"",B.toneMapping!==0?dA.tonemapping_pars_fragment:"",B.toneMapping!==0?FO("toneMapping",B.toneMapping):"",B.dithering?"#define DITHERING":"",B.opaque?"#define OPAQUE":"",dA.colorspace_pars_fragment,XO("linearToOutputTexel",B.outputColorSpace),B.useDepthPacking?"#define DEPTH_PACKING "+B.depthPacking:"","\n"].filter(O8).join("\n");if(K=MC(K),K=zG(K,B),K=kG(K,B),J=MC(J),J=zG(J,B),J=kG(J,B),K=MG(K),J=MG(J),B.isWebGL2&&B.isRawShaderMaterial!==!0)R="#version 300 es\n",D=[U,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+D,V=["precision mediump sampler2DArray;","#define varying in",B.glslVersion==="300 es"?"":"layout(location = 0) out highp vec4 pc_fragColor;",B.glslVersion==="300 es"?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+V;const O=R+D+K,z=R+V+J,w=OG(I,I.VERTEX_SHADER,O),k=OG(I,I.FRAGMENT_SHADER,z);if(I.attachShader(W,w),I.attachShader(W,k),B.index0AttributeName!==void 0)I.bindAttribLocation(W,0,B.index0AttributeName);else if(B.morphTargets===!0)I.bindAttribLocation(W,0,"position");I.linkProgram(W);function j(p){if(A.debug.checkShaderErrors){const n=I.getProgramInfoLog(W).trim(),S=I.getShaderInfoLog(w).trim(),v=I.getShaderInfoLog(k).trim();let f=!0,m=!0;if(I.getProgramParameter(W,I.LINK_STATUS)===!1)if(f=!1,typeof A.debug.onShaderError==="function")A.debug.onShaderError(I,W,w,k);else{const b=LG(I,w,"vertex"),l=LG(I,k,"fragment");console.error("THREE.WebGLProgram: Shader Error "+I.getError()+" - VALIDATE_STATUS "+I.getProgramParameter(W,I.VALIDATE_STATUS)+"\n\nMaterial Name: "+p.name+"\nMaterial Type: "+p.type+"\n\nProgram Info Log: "+n+"\n"+b+"\n"+l)}else if(n!=="")console.warn("THREE.WebGLProgram: Program Info Log:",n);else if(S===""||v==="")m=!1;if(m)p.diagnostics={runnable:f,programLog:n,vertexShader:{log:S,prefix:D},fragmentShader:{log:v,prefix:V}}}I.deleteShader(w),I.deleteShader(k),h=new G3(I,W),N=RO(I,W)}let h;this.getUniforms=function(){if(h===void 0)j(this);return h};let N;this.getAttributes=function(){if(N===void 0)j(this);return N};let $=B.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){if($===!1)$=I.getProgramParameter(W,GO);return $},this.destroy=function(){C.releaseStatesOfProgram(this),I.deleteProgram(W),this.program=void 0},this.type=B.shaderType,this.name=B.shaderName,this.id=YO++,this.cacheKey=Q,this.usedTimes=1,this.program=W,this.vertexShader=w,this.fragmentShader=k,this},TO=function(A,Q,B,C,I,E,K){const J=new d9,q=new jY,G=new Set,Y=[],H=I.isWebGL2,Z=I.logarithmicDepthBuffer,X=I.vertexTextures;let U=I.precision;const F={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function W(N){if(G.add(N),N===0)return"uv";return`uv${N}`}function D(N,$,p,n,S){const v=n.fog,f=S.geometry,m=N.isMeshStandardMaterial?n.environment:null,b=(N.isMeshStandardMaterial?B:Q).get(N.envMap||m),l=!!b&&b.mapping===306?b.image.height:null,QA=F[N.type];if(N.precision!==null){if(U=I.getMaxPrecision(N.precision),U!==N.precision)console.warn("THREE.WebGLProgram.getParameters:",N.precision,"not supported, using",U,"instead.")}const BA=f.morphAttributes.position||f.morphAttributes.normal||f.morphAttributes.color,qA=BA!==void 0?BA.length:0;let a=0;if(f.morphAttributes.position!==void 0)a=1;if(f.morphAttributes.normal!==void 0)a=2;if(f.morphAttributes.color!==void 0)a=3;let AA,IA,jA,bA;if(QA){const H0=h2[QA];AA=H0.vertexShader,IA=H0.fragmentShader}else AA=N.vertexShader,IA=N.fragmentShader,q.update(N),jA=q.getVertexShaderID(N),bA=q.getFragmentShaderID(N);const RA=A.getRenderTarget(),cA=S.isInstancedMesh===!0,E0=S.isBatchedMesh===!0,x=!!N.map,u0=!!N.matcap,C0=!!b,OA=!!N.aoMap,pA=!!N.lightMap,R0=!!N.bumpMap,SA=!!N.normalMap,aA=!!N.displacementMap,x0=!!N.emissiveMap,k0=!!N.metalnessMap,T=!!N.roughnessMap,L=N.anisotropy>0,r=N.clearcoat>0,e=N.iridescence>0,GA=N.sheen>0,CA=N.transmission>0,mA=L&&!!N.anisotropyMap,kA=r&&!!N.clearcoatMap,ZA=r&&!!N.clearcoatNormalMap,WA=r&&!!N.clearcoatRoughnessMap,Y0=e&&!!N.iridescenceMap,JA=e&&!!N.iridescenceThicknessMap,f0=GA&&!!N.sheenColorMap,xA=GA&&!!N.sheenRoughnessMap,MA=!!N.specularMap,_A=!!N.specularColorMap,_=!!N.specularIntensityMap,t=CA&&!!N.transmissionMap,NA=CA&&!!N.thicknessMap,TA=!!N.gradientMap,g=!!N.alphaMap,YA=N.alphaTest>0,c=!!N.alphaHash,HA=!!N.extensions;let UA=0;if(N.toneMapped){if(RA===null||RA.isXRRenderTarget===!0)UA=A.toneMapping}const rA={isWebGL2:H,shaderID:QA,shaderType:N.type,shaderName:N.name,vertexShader:AA,fragmentShader:IA,defines:N.defines,customVertexShaderID:jA,customFragmentShaderID:bA,isRawShaderMaterial:N.isRawShaderMaterial===!0,glslVersion:N.glslVersion,precision:U,batching:E0,instancing:cA,instancingColor:cA&&S.instanceColor!==null,instancingMorph:cA&&S.morphTexture!==null,supportsVertexTextures:X,outputColorSpace:RA===null?A.outputColorSpace:RA.isXRRenderTarget===!0?RA.texture.colorSpace:"srgb-linear",alphaToCoverage:!!N.alphaToCoverage,map:x,matcap:u0,envMap:C0,envMapMode:C0&&b.mapping,envMapCubeUVHeight:l,aoMap:OA,lightMap:pA,bumpMap:R0,normalMap:SA,displacementMap:X&&aA,emissiveMap:x0,normalMapObjectSpace:SA&&N.normalMapType===1,normalMapTangentSpace:SA&&N.normalMapType===0,metalnessMap:k0,roughnessMap:T,anisotropy:L,anisotropyMap:mA,clearcoat:r,clearcoatMap:kA,clearcoatNormalMap:ZA,clearcoatRoughnessMap:WA,iridescence:e,iridescenceMap:Y0,iridescenceThicknessMap:JA,sheen:GA,sheenColorMap:f0,sheenRoughnessMap:xA,specularMap:MA,specularColorMap:_A,specularIntensityMap:_,transmission:CA,transmissionMap:t,thicknessMap:NA,gradientMap:TA,opaque:N.transparent===!1&&N.blending===1&&N.alphaToCoverage===!1,alphaMap:g,alphaTest:YA,alphaHash:c,combine:N.combine,mapUv:x&&W(N.map.channel),aoMapUv:OA&&W(N.aoMap.channel),lightMapUv:pA&&W(N.lightMap.channel),bumpMapUv:R0&&W(N.bumpMap.channel),normalMapUv:SA&&W(N.normalMap.channel),displacementMapUv:aA&&W(N.displacementMap.channel),emissiveMapUv:x0&&W(N.emissiveMap.channel),metalnessMapUv:k0&&W(N.metalnessMap.channel),roughnessMapUv:T&&W(N.roughnessMap.channel),anisotropyMapUv:mA&&W(N.anisotropyMap.channel),clearcoatMapUv:kA&&W(N.clearcoatMap.channel),clearcoatNormalMapUv:ZA&&W(N.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:WA&&W(N.clearcoatRoughnessMap.channel),iridescenceMapUv:Y0&&W(N.iridescenceMap.channel),iridescenceThicknessMapUv:JA&&W(N.iridescenceThicknessMap.channel),sheenColorMapUv:f0&&W(N.sheenColorMap.channel),sheenRoughnessMapUv:xA&&W(N.sheenRoughnessMap.channel),specularMapUv:MA&&W(N.specularMap.channel),specularColorMapUv:_A&&W(N.specularColorMap.channel),specularIntensityMapUv:_&&W(N.specularIntensityMap.channel),transmissionMapUv:t&&W(N.transmissionMap.channel),thicknessMapUv:NA&&W(N.thicknessMap.channel),alphaMapUv:g&&W(N.alphaMap.channel),vertexTangents:!!f.attributes.tangent&&(SA||L),vertexColors:N.vertexColors,vertexAlphas:N.vertexColors===!0&&!!f.attributes.color&&f.attributes.color.itemSize===4,pointsUvs:S.isPoints===!0&&!!f.attributes.uv&&(x||g),fog:!!v,useFog:N.fog===!0,fogExp2:!!v&&v.isFogExp2,flatShading:N.flatShading===!0,sizeAttenuation:N.sizeAttenuation===!0,logarithmicDepthBuffer:Z,skinning:S.isSkinnedMesh===!0,morphTargets:f.morphAttributes.position!==void 0,morphNormals:f.morphAttributes.normal!==void 0,morphColors:f.morphAttributes.color!==void 0,morphTargetsCount:qA,morphTextureStride:a,numDirLights:$.directional.length,numPointLights:$.point.length,numSpotLights:$.spot.length,numSpotLightMaps:$.spotLightMap.length,numRectAreaLights:$.rectArea.length,numHemiLights:$.hemi.length,numDirLightShadows:$.directionalShadowMap.length,numPointLightShadows:$.pointShadowMap.length,numSpotLightShadows:$.spotShadowMap.length,numSpotLightShadowsWithMaps:$.numSpotLightShadowsWithMaps,numLightProbes:$.numLightProbes,numClippingPlanes:K.numPlanes,numClipIntersection:K.numIntersection,dithering:N.dithering,shadowMapEnabled:A.shadowMap.enabled&&p.length>0,shadowMapType:A.shadowMap.type,toneMapping:UA,useLegacyLights:A._useLegacyLights,decodeVideoTexture:x&&N.map.isVideoTexture===!0&&W0.getTransfer(N.map.colorSpace)==="srgb",premultipliedAlpha:N.premultipliedAlpha,doubleSided:N.side===2,flipSided:N.side===1,useDepthPacking:N.depthPacking>=0,depthPacking:N.depthPacking||0,index0AttributeName:N.index0AttributeName,extensionDerivatives:HA&&N.extensions.derivatives===!0,extensionFragDepth:HA&&N.extensions.fragDepth===!0,extensionDrawBuffers:HA&&N.extensions.drawBuffers===!0,extensionShaderTextureLOD:HA&&N.extensions.shaderTextureLOD===!0,extensionClipCullDistance:HA&&N.extensions.clipCullDistance===!0&&C.has("WEBGL_clip_cull_distance"),extensionMultiDraw:HA&&N.extensions.multiDraw===!0&&C.has("WEBGL_multi_draw"),rendererExtensionFragDepth:H||C.has("EXT_frag_depth"),rendererExtensionDrawBuffers:H||C.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:H||C.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:C.has("KHR_parallel_shader_compile"),customProgramCacheKey:N.customProgramCacheKey()};return rA.vertexUv1s=G.has(1),rA.vertexUv2s=G.has(2),rA.vertexUv3s=G.has(3),G.clear(),rA}function V(N){const $=[];if(N.shaderID)$.push(N.shaderID);else $.push(N.customVertexShaderID),$.push(N.customFragmentShaderID);if(N.defines!==void 0)for(let p in N.defines)$.push(p),$.push(N.defines[p]);if(N.isRawShaderMaterial===!1)R($,N),O($,N),$.push(A.outputColorSpace);return $.push(N.customProgramCacheKey),$.join()}function R(N,$){N.push($.precision),N.push($.outputColorSpace),N.push($.envMapMode),N.push($.envMapCubeUVHeight),N.push($.mapUv),N.push($.alphaMapUv),N.push($.lightMapUv),N.push($.aoMapUv),N.push($.bumpMapUv),N.push($.normalMapUv),N.push($.displacementMapUv),N.push($.emissiveMapUv),N.push($.metalnessMapUv),N.push($.roughnessMapUv),N.push($.anisotropyMapUv),N.push($.clearcoatMapUv),N.push($.clearcoatNormalMapUv),N.push($.clearcoatRoughnessMapUv),N.push($.iridescenceMapUv),N.push($.iridescenceThicknessMapUv),N.push($.sheenColorMapUv),N.push($.sheenRoughnessMapUv),N.push($.specularMapUv),N.push($.specularColorMapUv),N.push($.specularIntensityMapUv),N.push($.transmissionMapUv),N.push($.thicknessMapUv),N.push($.combine),N.push($.fogExp2),N.push($.sizeAttenuation),N.push($.morphTargetsCount),N.push($.morphAttributeCount),N.push($.numDirLights),N.push($.numPointLights),N.push($.numSpotLights),N.push($.numSpotLightMaps),N.push($.numHemiLights),N.push($.numRectAreaLights),N.push($.numDirLightShadows),N.push($.numPointLightShadows),N.push($.numSpotLightShadows),N.push($.numSpotLightShadowsWithMaps),N.push($.numLightProbes),N.push($.shadowMapType),N.push($.toneMapping),N.push($.numClippingPlanes),N.push($.numClipIntersection),N.push($.depthPacking)}function O(N,$){if(J.disableAll(),$.isWebGL2)J.enable(0);if($.supportsVertexTextures)J.enable(1);if($.instancing)J.enable(2);if($.instancingColor)J.enable(3);if($.instancingMorph)J.enable(4);if($.matcap)J.enable(5);if($.envMap)J.enable(6);if($.normalMapObjectSpace)J.enable(7);if($.normalMapTangentSpace)J.enable(8);if($.clearcoat)J.enable(9);if($.iridescence)J.enable(10);if($.alphaTest)J.enable(11);if($.vertexColors)J.enable(12);if($.vertexAlphas)J.enable(13);if($.vertexUv1s)J.enable(14);if($.vertexUv2s)J.enable(15);if($.vertexUv3s)J.enable(16);if($.vertexTangents)J.enable(17);if($.anisotropy)J.enable(18);if($.alphaHash)J.enable(19);if($.batching)J.enable(20);if(N.push(J.mask),J.disableAll(),$.fog)J.enable(0);if($.useFog)J.enable(1);if($.flatShading)J.enable(2);if($.logarithmicDepthBuffer)J.enable(3);if($.skinning)J.enable(4);if($.morphTargets)J.enable(5);if($.morphNormals)J.enable(6);if($.morphColors)J.enable(7);if($.premultipliedAlpha)J.enable(8);if($.shadowMapEnabled)J.enable(9);if($.useLegacyLights)J.enable(10);if($.doubleSided)J.enable(11);if($.flipSided)J.enable(12);if($.useDepthPacking)J.enable(13);if($.dithering)J.enable(14);if($.transmission)J.enable(15);if($.sheen)J.enable(16);if($.opaque)J.enable(17);if($.pointsUvs)J.enable(18);if($.decodeVideoTexture)J.enable(19);if($.alphaToCoverage)J.enable(20);N.push(J.mask)}function z(N){const $=F[N.type];let p;if($){const n=h2[$];p=RR.clone(n.uniforms)}else p=N.uniforms;return p}function w(N,$){let p;for(let n=0,S=Y.length;n<S;n++){const v=Y[n];if(v.cacheKey===$){p=v,++p.usedTimes;break}}if(p===void 0)p=new PO(A,$,N,E),Y.push(p);return p}function k(N){if(--N.usedTimes===0){const $=Y.indexOf(N);Y[$]=Y[Y.length-1],Y.pop(),N.destroy()}}function j(N){q.remove(N)}function h(){q.dispose()}return{getParameters:D,getProgramCacheKey:V,getUniforms:z,acquireProgram:w,releaseProgram:k,releaseShaderCache:j,programs:Y,dispose:h}},jO=function(){let A=new WeakMap;function Q(E){let K=A.get(E);if(K===void 0)K={},A.set(E,K);return K}function B(E){A.delete(E)}function C(E,K,J){A.get(E)[K]=J}function I(){A=new WeakMap}return{get:Q,remove:B,update:C,dispose:I}},gO=function(A,Q){if(A.groupOrder!==Q.groupOrder)return A.groupOrder-Q.groupOrder;else if(A.renderOrder!==Q.renderOrder)return A.renderOrder-Q.renderOrder;else if(A.material.id!==Q.material.id)return A.material.id-Q.material.id;else if(A.z!==Q.z)return A.z-Q.z;else return A.id-Q.id},_G=function(A,Q){if(A.groupOrder!==Q.groupOrder)return A.groupOrder-Q.groupOrder;else if(A.renderOrder!==Q.renderOrder)return A.renderOrder-Q.renderOrder;else if(A.z!==Q.z)return Q.z-A.z;else return A.id-Q.id},PG=function(){const A=[];let Q=0;const B=[],C=[],I=[];function E(){Q=0,B.length=0,C.length=0,I.length=0}function K(H,Z,X,U,F,W){let D=A[Q];if(D===void 0)D={id:H.id,object:H,geometry:Z,material:X,groupOrder:U,renderOrder:H.renderOrder,z:F,group:W},A[Q]=D;else D.id=H.id,D.object=H,D.geometry=Z,D.material=X,D.groupOrder=U,D.renderOrder=H.renderOrder,D.z=F,D.group=W;return Q++,D}function J(H,Z,X,U,F,W){const D=K(H,Z,X,U,F,W);if(X.transmission>0)C.push(D);else if(X.transparent===!0)I.push(D);else B.push(D)}function q(H,Z,X,U,F,W){const D=K(H,Z,X,U,F,W);if(X.transmission>0)C.unshift(D);else if(X.transparent===!0)I.unshift(D);else B.unshift(D)}function G(H,Z){if(B.length>1)B.sort(H||gO);if(C.length>1)C.sort(Z||_G);if(I.length>1)I.sort(Z||_G)}function Y(){for(let H=Q,Z=A.length;H<Z;H++){const X=A[H];if(X.id===null)break;X.id=null,X.object=null,X.geometry=null,X.material=null,X.group=null}}return{opaque:B,transmissive:C,transparent:I,init:E,push:J,unshift:q,finish:Y,sort:G}},yO=function(){let A=new WeakMap;function Q(C,I){const E=A.get(C);let K;if(E===void 0)K=new PG,A.set(C,[K]);else if(I>=E.length)K=new PG,E.push(K);else K=E[I];return K}function B(){A=new WeakMap}return{get:Q,dispose:B}},xO=function(){const A={};return{get:function(Q){if(A[Q.id]!==void 0)return A[Q.id];let B;switch(Q.type){case"DirectionalLight":B={direction:new P,color:new PA};break;case"SpotLight":B={position:new P,direction:new P,color:new PA,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":B={position:new P,color:new PA,distance:0,decay:0};break;case"HemisphereLight":B={direction:new P,skyColor:new PA,groundColor:new PA};break;case"RectAreaLight":B={color:new PA,position:new P,halfWidth:new P,halfHeight:new P};break}return A[Q.id]=B,B}}},hO=function(){const A={};return{get:function(Q){if(A[Q.id]!==void 0)return A[Q.id];let B;switch(Q.type){case"DirectionalLight":B={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new DA};break;case"SpotLight":B={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new DA};break;case"PointLight":B={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new DA,shadowCameraNear:1,shadowCameraFar:1000};break}return A[Q.id]=B,B}}},fO=function(A,Q){return(Q.castShadow?2:0)-(A.castShadow?2:0)+(Q.map?1:0)-(A.map?1:0)},bO=function(A,Q){const B=new xO,C=hO(),I={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let Y=0;Y<9;Y++)I.probe.push(new P);const E=new P,K=new zA,J=new zA;function q(Y,H){let Z=0,X=0,U=0;for(let p=0;p<9;p++)I.probe[p].set(0,0,0);let F=0,W=0,D=0,V=0,R=0,O=0,z=0,w=0,k=0,j=0,h=0;Y.sort(fO);const N=H===!0?Math.PI:1;for(let p=0,n=Y.length;p<n;p++){const S=Y[p],v=S.color,f=S.intensity,m=S.distance,b=S.shadow&&S.shadow.map?S.shadow.map.texture:null;if(S.isAmbientLight)Z+=v.r*f*N,X+=v.g*f*N,U+=v.b*f*N;else if(S.isLightProbe){for(let l=0;l<9;l++)I.probe[l].addScaledVector(S.sh.coefficients[l],f);h++}else if(S.isDirectionalLight){const l=B.get(S);if(l.color.copy(S.color).multiplyScalar(S.intensity*N),S.castShadow){const QA=S.shadow,BA=C.get(S);BA.shadowBias=QA.bias,BA.shadowNormalBias=QA.normalBias,BA.shadowRadius=QA.radius,BA.shadowMapSize=QA.mapSize,I.directionalShadow[F]=BA,I.directionalShadowMap[F]=b,I.directionalShadowMatrix[F]=S.shadow.matrix,O++}I.directional[F]=l,F++}else if(S.isSpotLight){const l=B.get(S);l.position.setFromMatrixPosition(S.matrixWorld),l.color.copy(v).multiplyScalar(f*N),l.distance=m,l.coneCos=Math.cos(S.angle),l.penumbraCos=Math.cos(S.angle*(1-S.penumbra)),l.decay=S.decay,I.spot[D]=l;const QA=S.shadow;if(S.map){if(I.spotLightMap[k]=S.map,k++,QA.updateMatrices(S),S.castShadow)j++}if(I.spotLightMatrix[D]=QA.matrix,S.castShadow){const BA=C.get(S);BA.shadowBias=QA.bias,BA.shadowNormalBias=QA.normalBias,BA.shadowRadius=QA.radius,BA.shadowMapSize=QA.mapSize,I.spotShadow[D]=BA,I.spotShadowMap[D]=b,w++}D++}else if(S.isRectAreaLight){const l=B.get(S);l.color.copy(v).multiplyScalar(f),l.halfWidth.set(S.width*0.5,0,0),l.halfHeight.set(0,S.height*0.5,0),I.rectArea[V]=l,V++}else if(S.isPointLight){const l=B.get(S);if(l.color.copy(S.color).multiplyScalar(S.intensity*N),l.distance=S.distance,l.decay=S.decay,S.castShadow){const QA=S.shadow,BA=C.get(S);BA.shadowBias=QA.bias,BA.shadowNormalBias=QA.normalBias,BA.shadowRadius=QA.radius,BA.shadowMapSize=QA.mapSize,BA.shadowCameraNear=QA.camera.near,BA.shadowCameraFar=QA.camera.far,I.pointShadow[W]=BA,I.pointShadowMap[W]=b,I.pointShadowMatrix[W]=S.shadow.matrix,z++}I.point[W]=l,W++}else if(S.isHemisphereLight){const l=B.get(S);l.skyColor.copy(S.color).multiplyScalar(f*N),l.groundColor.copy(S.groundColor).multiplyScalar(f*N),I.hemi[R]=l,R++}}if(V>0)if(Q.isWebGL2)if(A.has("OES_texture_float_linear")===!0)I.rectAreaLTC1=XA.LTC_FLOAT_1,I.rectAreaLTC2=XA.LTC_FLOAT_2;else I.rectAreaLTC1=XA.LTC_HALF_1,I.rectAreaLTC2=XA.LTC_HALF_2;else if(A.has("OES_texture_float_linear")===!0)I.rectAreaLTC1=XA.LTC_FLOAT_1,I.rectAreaLTC2=XA.LTC_FLOAT_2;else if(A.has("OES_texture_half_float_linear")===!0)I.rectAreaLTC1=XA.LTC_HALF_1,I.rectAreaLTC2=XA.LTC_HALF_2;else console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.");I.ambient[0]=Z,I.ambient[1]=X,I.ambient[2]=U;const $=I.hash;if($.directionalLength!==F||$.pointLength!==W||$.spotLength!==D||$.rectAreaLength!==V||$.hemiLength!==R||$.numDirectionalShadows!==O||$.numPointShadows!==z||$.numSpotShadows!==w||$.numSpotMaps!==k||$.numLightProbes!==h)I.directional.length=F,I.spot.length=D,I.rectArea.length=V,I.point.length=W,I.hemi.length=R,I.directionalShadow.length=O,I.directionalShadowMap.length=O,I.pointShadow.length=z,I.pointShadowMap.length=z,I.spotShadow.length=w,I.spotShadowMap.length=w,I.directionalShadowMatrix.length=O,I.pointShadowMatrix.length=z,I.spotLightMatrix.length=w+k-j,I.spotLightMap.length=k,I.numSpotLightShadowsWithMaps=j,I.numLightProbes=h,$.directionalLength=F,$.pointLength=W,$.spotLength=D,$.rectAreaLength=V,$.hemiLength=R,$.numDirectionalShadows=O,$.numPointShadows=z,$.numSpotShadows=w,$.numSpotMaps=k,$.numLightProbes=h,I.version=vO++}function G(Y,H){let Z=0,X=0,U=0,F=0,W=0;const D=H.matrixWorldInverse;for(let V=0,R=Y.length;V<R;V++){const O=Y[V];if(O.isDirectionalLight){const z=I.directional[Z];z.direction.setFromMatrixPosition(O.matrixWorld),E.setFromMatrixPosition(O.target.matrixWorld),z.direction.sub(E),z.direction.transformDirection(D),Z++}else if(O.isSpotLight){const z=I.spot[U];z.position.setFromMatrixPosition(O.matrixWorld),z.position.applyMatrix4(D),z.direction.setFromMatrixPosition(O.matrixWorld),E.setFromMatrixPosition(O.target.matrixWorld),z.direction.sub(E),z.direction.transformDirection(D),U++}else if(O.isRectAreaLight){const z=I.rectArea[F];z.position.setFromMatrixPosition(O.matrixWorld),z.position.applyMatrix4(D),J.identity(),K.copy(O.matrixWorld),K.premultiply(D),J.extractRotation(K),z.halfWidth.set(O.width*0.5,0,0),z.halfHeight.set(0,O.height*0.5,0),z.halfWidth.applyMatrix4(J),z.halfHeight.applyMatrix4(J),F++}else if(O.isPointLight){const z=I.point[X];z.position.setFromMatrixPosition(O.matrixWorld),z.position.applyMatrix4(D),X++}else if(O.isHemisphereLight){const z=I.hemi[W];z.direction.setFromMatrixPosition(O.matrixWorld),z.direction.transformDirection(D),W++}}}return{setup:q,setupView:G,state:I}},SG=function(A,Q){const B=new bO(A,Q),C=[],I=[];function E(){C.length=0,I.length=0}function K(H){C.push(H)}function J(H){I.push(H)}function q(H){B.setup(C,H)}function G(H){B.setupView(C,H)}return{init:E,state:{lightsArray:C,shadowsArray:I,lights:B},setupLights:q,setupLightsView:G,pushLight:K,pushShadow:J}},pO=function(A,Q){let B=new WeakMap;function C(E,K=0){const J=B.get(E);let q;if(J===void 0)q=new SG(A,Q),B.set(E,[q]);else if(K>=J.length)q=new SG(A,Q),J.push(q);else q=J[K];return q}function I(){B=new WeakMap}return{get:C,dispose:I}},dO=function(A,Q,B){let C=new c9;const I=new DA,E=new DA,K=new M0,J=new s9({depthPacking:3201}),q=new yY,G={},Y=B.maxTextureSize,H={[0]:1,[1]:0,[2]:2},Z=new l0({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new DA},radius:{value:4}},vertexShader:uO,fragmentShader:mO}),X=Z.clone();X.defines.HORIZONTAL_PASS=1;const U=new J1;U.setAttribute("position",new V0(new Float32Array([-1,-1,0.5,3,-1,0.5,-1,3,0.5]),3));const F=new nA(U,Z),W=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;let D=this.type;this.render=function(w,k,j){if(W.enabled===!1)return;if(W.autoUpdate===!1&&W.needsUpdate===!1)return;if(w.length===0)return;const h=A.getRenderTarget(),N=A.getActiveCubeFace(),$=A.getActiveMipmapLevel(),p=A.state;p.setBlending(0),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);const n=D!==3&&this.type===3,S=D===3&&this.type!==3;for(let v=0,f=w.length;v<f;v++){const m=w[v],b=m.shadow;if(b===void 0){console.warn("THREE.WebGLShadowMap:",m,"has no shadow.");continue}if(b.autoUpdate===!1&&b.needsUpdate===!1)continue;I.copy(b.mapSize);const l=b.getFrameExtents();if(I.multiply(l),E.copy(b.mapSize),I.x>Y||I.y>Y){if(I.x>Y)E.x=Math.floor(Y/l.x),I.x=E.x*l.x,b.mapSize.x=E.x;if(I.y>Y)E.y=Math.floor(Y/l.y),I.y=E.y*l.y,b.mapSize.y=E.y}if(b.map===null||n===!0||S===!0){const BA=this.type!==3?{minFilter:1003,magFilter:1003}:{};if(b.map!==null)b.map.dispose();b.map=new N1(I.x,I.y,BA),b.map.texture.name=m.name+".shadowMap",b.camera.updateProjectionMatrix()}A.setRenderTarget(b.map),A.clear();const QA=b.getViewportCount();for(let BA=0;BA<QA;BA++){const qA=b.getViewport(BA);K.set(E.x*qA.x,E.y*qA.y,E.x*qA.z,E.y*qA.w),p.viewport(K),b.updateMatrices(m,BA),C=b.getFrustum(),O(k,j,b.camera,m,this.type)}if(b.isPointLightShadow!==!0&&this.type===3)V(b,j);b.needsUpdate=!1}D=this.type,W.needsUpdate=!1,A.setRenderTarget(h,N,$)};function V(w,k){const j=Q.update(F);if(Z.defines.VSM_SAMPLES!==w.blurSamples)Z.defines.VSM_SAMPLES=w.blurSamples,X.defines.VSM_SAMPLES=w.blurSamples,Z.needsUpdate=!0,X.needsUpdate=!0;if(w.mapPass===null)w.mapPass=new N1(I.x,I.y);Z.uniforms.shadow_pass.value=w.map.texture,Z.uniforms.resolution.value=w.mapSize,Z.uniforms.radius.value=w.radius,A.setRenderTarget(w.mapPass),A.clear(),A.renderBufferDirect(k,null,j,Z,F,null),X.uniforms.shadow_pass.value=w.mapPass.texture,X.uniforms.resolution.value=w.mapSize,X.uniforms.radius.value=w.radius,A.setRenderTarget(w.map),A.clear(),A.renderBufferDirect(k,null,j,X,F,null)}function R(w,k,j,h){let N=null;const $=j.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if($!==void 0)N=$;else if(N=j.isPointLight===!0?q:J,A.localClippingEnabled&&k.clipShadows===!0&&Array.isArray(k.clippingPlanes)&&k.clippingPlanes.length!==0||k.displacementMap&&k.displacementScale!==0||k.alphaMap&&k.alphaTest>0||k.map&&k.alphaTest>0){const p=N.uuid,n=k.uuid;let S=G[p];if(S===void 0)S={},G[p]=S;let v=S[n];if(v===void 0)v=N.clone(),S[n]=v,k.addEventListener("dispose",z);N=v}if(N.visible=k.visible,N.wireframe=k.wireframe,h===3)N.side=k.shadowSide!==null?k.shadowSide:k.side;else N.side=k.shadowSide!==null?k.shadowSide:H[k.side];if(N.alphaMap=k.alphaMap,N.alphaTest=k.alphaTest,N.map=k.map,N.clipShadows=k.clipShadows,N.clippingPlanes=k.clippingPlanes,N.clipIntersection=k.clipIntersection,N.displacementMap=k.displacementMap,N.displacementScale=k.displacementScale,N.displacementBias=k.displacementBias,N.wireframeLinewidth=k.wireframeLinewidth,N.linewidth=k.linewidth,j.isPointLight===!0&&N.isMeshDistanceMaterial===!0){const p=A.properties.get(N);p.light=j}return N}function O(w,k,j,h,N){if(w.visible===!1)return;if(w.layers.test(k.layers)&&(w.isMesh||w.isLine||w.isPoints)){if((w.castShadow||w.receiveShadow&&N===3)&&(!w.frustumCulled||C.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(j.matrixWorldInverse,w.matrixWorld);const n=Q.update(w),S=w.material;if(Array.isArray(S)){const v=n.groups;for(let f=0,m=v.length;f<m;f++){const b=v[f],l=S[b.materialIndex];if(l&&l.visible){const QA=R(w,l,h,N);w.onBeforeShadow(A,w,k,j,n,QA,b),A.renderBufferDirect(j,null,n,QA,w,b),w.onAfterShadow(A,w,k,j,n,QA,b)}}}else if(S.visible){const v=R(w,S,h,N);w.onBeforeShadow(A,w,k,j,n,v,null),A.renderBufferDirect(j,null,n,v,w,null),w.onAfterShadow(A,w,k,j,n,v,null)}}}const p=w.children;for(let n=0,S=p.length;n<S;n++)O(p[n],k,j,h,N)}function z(w){w.target.removeEventListener("dispose",z);for(let j in G){const h=G[j],N=w.target.uuid;if(N in h)h[N].dispose(),delete h[N]}}},cO=function(A,Q,B){const C=B.isWebGL2;function I(){let g=!1;const YA=new M0;let c=null;const HA=new M0(0,0,0,0);return{setMask:function(UA){if(c!==UA&&!g)A.colorMask(UA,UA,UA,UA),c=UA},setLocked:function(UA){g=UA},setClear:function(UA,rA,H0,O0,A1){if(A1===!0)UA*=O0,rA*=O0,H0*=O0;if(YA.set(UA,rA,H0,O0),HA.equals(YA)===!1)A.clearColor(UA,rA,H0,O0),HA.copy(YA)},reset:function(){g=!1,c=null,HA.set(-1,0,0,0)}}}function E(){let g=!1,YA=null,c=null,HA=null;return{setTest:function(UA){if(UA)cA(A.DEPTH_TEST);else E0(A.DEPTH_TEST)},setMask:function(UA){if(YA!==UA&&!g)A.depthMask(UA),YA=UA},setFunc:function(UA){if(c!==UA){switch(UA){case 0:A.depthFunc(A.NEVER);break;case 1:A.depthFunc(A.ALWAYS);break;case 2:A.depthFunc(A.LESS);break;case 3:A.depthFunc(A.LEQUAL);break;case 4:A.depthFunc(A.EQUAL);break;case 5:A.depthFunc(A.GEQUAL);break;case 6:A.depthFunc(A.GREATER);break;case 7:A.depthFunc(A.NOTEQUAL);break;default:A.depthFunc(A.LEQUAL)}c=UA}},setLocked:function(UA){g=UA},setClear:function(UA){if(HA!==UA)A.clearDepth(UA),HA=UA},reset:function(){g=!1,YA=null,c=null,HA=null}}}function K(){let g=!1,YA=null,c=null,HA=null,UA=null,rA=null,H0=null,O0=null,A1=null;return{setTest:function(oA){if(!g)if(oA)cA(A.STENCIL_TEST);else E0(A.STENCIL_TEST)},setMask:function(oA){if(YA!==oA&&!g)A.stencilMask(oA),YA=oA},setFunc:function(oA,W1,$1){if(c!==oA||HA!==W1||UA!==$1)A.stencilFunc(oA,W1,$1),c=oA,HA=W1,UA=$1},setOp:function(oA,W1,$1){if(rA!==oA||H0!==W1||O0!==$1)A.stencilOp(oA,W1,$1),rA=oA,H0=W1,O0=$1},setLocked:function(oA){g=oA},setClear:function(oA){if(A1!==oA)A.clearStencil(oA),A1=oA},reset:function(){g=!1,YA=null,c=null,HA=null,UA=null,rA=null,H0=null,O0=null,A1=null}}}const J=new I,q=new E,G=new K,Y=new WeakMap,H=new WeakMap;let Z={},X={},U=new WeakMap,F=[],W=null,D=!1,V=null,R=null,O=null,z=null,w=null,k=null,j=null,h=new PA(0,0,0),N=0,$=!1,p=null,n=null,S=null,v=null,f=null;const m=A.getParameter(A.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let b=!1,l=0;const QA=A.getParameter(A.VERSION);if(QA.indexOf("WebGL")!==-1)l=parseFloat(/^WebGL (\d)/.exec(QA)[1]),b=l>=1;else if(QA.indexOf("OpenGL ES")!==-1)l=parseFloat(/^OpenGL ES (\d)/.exec(QA)[1]),b=l>=2;let BA=null,qA={};const a=A.getParameter(A.SCISSOR_BOX),AA=A.getParameter(A.VIEWPORT),IA=new M0().fromArray(a),jA=new M0().fromArray(AA);function bA(g,YA,c,HA){const UA=new Uint8Array(4),rA=A.createTexture();A.bindTexture(g,rA),A.texParameteri(g,A.TEXTURE_MIN_FILTER,A.NEAREST),A.texParameteri(g,A.TEXTURE_MAG_FILTER,A.NEAREST);for(let H0=0;H0<c;H0++)if(C&&(g===A.TEXTURE_3D||g===A.TEXTURE_2D_ARRAY))A.texImage3D(YA,0,A.RGBA,1,1,HA,0,A.RGBA,A.UNSIGNED_BYTE,UA);else A.texImage2D(YA+H0,0,A.RGBA,1,1,0,A.RGBA,A.UNSIGNED_BYTE,UA);return rA}const RA={};if(RA[A.TEXTURE_2D]=bA(A.TEXTURE_2D,A.TEXTURE_2D,1),RA[A.TEXTURE_CUBE_MAP]=bA(A.TEXTURE_CUBE_MAP,A.TEXTURE_CUBE_MAP_POSITIVE_X,6),C)RA[A.TEXTURE_2D_ARRAY]=bA(A.TEXTURE_2D_ARRAY,A.TEXTURE_2D_ARRAY,1,1),RA[A.TEXTURE_3D]=bA(A.TEXTURE_3D,A.TEXTURE_3D,1,1);J.setClear(0,0,0,1),q.setClear(1),G.setClear(0),cA(A.DEPTH_TEST),q.setFunc(3),aA(!1),x0(1),cA(A.CULL_FACE),R0(0);function cA(g){if(Z[g]!==!0)A.enable(g),Z[g]=!0}function E0(g){if(Z[g]!==!1)A.disable(g),Z[g]=!1}function x(g,YA){if(X[g]!==YA){if(A.bindFramebuffer(g,YA),X[g]=YA,C){if(g===A.DRAW_FRAMEBUFFER)X[A.FRAMEBUFFER]=YA;if(g===A.FRAMEBUFFER)X[A.DRAW_FRAMEBUFFER]=YA}return!0}return!1}function u0(g,YA){let c=F,HA=!1;if(g){if(c=U.get(YA),c===void 0)c=[],U.set(YA,c);const UA=g.textures;if(c.length!==UA.length||c[0]!==A.COLOR_ATTACHMENT0){for(let rA=0,H0=UA.length;rA<H0;rA++)c[rA]=A.COLOR_ATTACHMENT0+rA;c.length=UA.length,HA=!0}}else if(c[0]!==A.BACK)c[0]=A.BACK,HA=!0;if(HA)if(B.isWebGL2)A.drawBuffers(c);else if(Q.has("WEBGL_draw_buffers")===!0)Q.get("WEBGL_draw_buffers").drawBuffersWEBGL(c);else throw new Error("THREE.WebGLState: Usage of gl.drawBuffers() require WebGL2 or WEBGL_draw_buffers extension")}function C0(g){if(W!==g)return A.useProgram(g),W=g,!0;return!1}const OA={[100]:A.FUNC_ADD,[101]:A.FUNC_SUBTRACT,[102]:A.FUNC_REVERSE_SUBTRACT};if(C)OA[103]=A.MIN,OA[104]=A.MAX;else{const g=Q.get("EXT_blend_minmax");if(g!==null)OA[103]=g.MIN_EXT,OA[104]=g.MAX_EXT}const pA={[200]:A.ZERO,[201]:A.ONE,[202]:A.SRC_COLOR,[204]:A.SRC_ALPHA,[210]:A.SRC_ALPHA_SATURATE,[208]:A.DST_COLOR,[206]:A.DST_ALPHA,[203]:A.ONE_MINUS_SRC_COLOR,[205]:A.ONE_MINUS_SRC_ALPHA,[209]:A.ONE_MINUS_DST_COLOR,[207]:A.ONE_MINUS_DST_ALPHA,[211]:A.CONSTANT_COLOR,[212]:A.ONE_MINUS_CONSTANT_COLOR,[213]:A.CONSTANT_ALPHA,[214]:A.ONE_MINUS_CONSTANT_ALPHA};function R0(g,YA,c,HA,UA,rA,H0,O0,A1,oA){if(g===0){if(D===!0)E0(A.BLEND),D=!1;return}if(D===!1)cA(A.BLEND),D=!0;if(g!==5){if(g!==V||oA!==$){if(R!==100||w!==100)A.blendEquation(A.FUNC_ADD),R=100,w=100;if(oA)switch(g){case 1:A.blendFuncSeparate(A.ONE,A.ONE_MINUS_SRC_ALPHA,A.ONE,A.ONE_MINUS_SRC_ALPHA);break;case 2:A.blendFunc(A.ONE,A.ONE);break;case 3:A.blendFuncSeparate(A.ZERO,A.ONE_MINUS_SRC_COLOR,A.ZERO,A.ONE);break;case 4:A.blendFuncSeparate(A.ZERO,A.SRC_COLOR,A.ZERO,A.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",g);break}else switch(g){case 1:A.blendFuncSeparate(A.SRC_ALPHA,A.ONE_MINUS_SRC_ALPHA,A.ONE,A.ONE_MINUS_SRC_ALPHA);break;case 2:A.blendFunc(A.SRC_ALPHA,A.ONE);break;case 3:A.blendFuncSeparate(A.ZERO,A.ONE_MINUS_SRC_COLOR,A.ZERO,A.ONE);break;case 4:A.blendFunc(A.ZERO,A.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",g);break}O=null,z=null,k=null,j=null,h.set(0,0,0),N=0,V=g,$=oA}return}if(UA=UA||YA,rA=rA||c,H0=H0||HA,YA!==R||UA!==w)A.blendEquationSeparate(OA[YA],OA[UA]),R=YA,w=UA;if(c!==O||HA!==z||rA!==k||H0!==j)A.blendFuncSeparate(pA[c],pA[HA],pA[rA],pA[H0]),O=c,z=HA,k=rA,j=H0;if(O0.equals(h)===!1||A1!==N)A.blendColor(O0.r,O0.g,O0.b,A1),h.copy(O0),N=A1;V=g,$=!1}function SA(g,YA){g.side===2?E0(A.CULL_FACE):cA(A.CULL_FACE);let c=g.side===1;if(YA)c=!c;aA(c),g.blending===1&&g.transparent===!1?R0(0):R0(g.blending,g.blendEquation,g.blendSrc,g.blendDst,g.blendEquationAlpha,g.blendSrcAlpha,g.blendDstAlpha,g.blendColor,g.blendAlpha,g.premultipliedAlpha),q.setFunc(g.depthFunc),q.setTest(g.depthTest),q.setMask(g.depthWrite),J.setMask(g.colorWrite);const HA=g.stencilWrite;if(G.setTest(HA),HA)G.setMask(g.stencilWriteMask),G.setFunc(g.stencilFunc,g.stencilRef,g.stencilFuncMask),G.setOp(g.stencilFail,g.stencilZFail,g.stencilZPass);T(g.polygonOffset,g.polygonOffsetFactor,g.polygonOffsetUnits),g.alphaToCoverage===!0?cA(A.SAMPLE_ALPHA_TO_COVERAGE):E0(A.SAMPLE_ALPHA_TO_COVERAGE)}function aA(g){if(p!==g){if(g)A.frontFace(A.CW);else A.frontFace(A.CCW);p=g}}function x0(g){if(g!==0){if(cA(A.CULL_FACE),g!==n)if(g===1)A.cullFace(A.BACK);else if(g===2)A.cullFace(A.FRONT);else A.cullFace(A.FRONT_AND_BACK)}else E0(A.CULL_FACE);n=g}function k0(g){if(g!==S){if(b)A.lineWidth(g);S=g}}function T(g,YA,c){if(g){if(cA(A.POLYGON_OFFSET_FILL),v!==YA||f!==c)A.polygonOffset(YA,c),v=YA,f=c}else E0(A.POLYGON_OFFSET_FILL)}function L(g){if(g)cA(A.SCISSOR_TEST);else E0(A.SCISSOR_TEST)}function r(g){if(g===void 0)g=A.TEXTURE0+m-1;if(BA!==g)A.activeTexture(g),BA=g}function e(g,YA,c){if(c===void 0)if(BA===null)c=A.TEXTURE0+m-1;else c=BA;let HA=qA[c];if(HA===void 0)HA={type:void 0,texture:void 0},qA[c]=HA;if(HA.type!==g||HA.texture!==YA){if(BA!==c)A.activeTexture(c),BA=c;A.bindTexture(g,YA||RA[g]),HA.type=g,HA.texture=YA}}function GA(){const g=qA[BA];if(g!==void 0&&g.type!==void 0)A.bindTexture(g.type,null),g.type=void 0,g.texture=void 0}function CA(){try{A.compressedTexImage2D.apply(A,arguments)}catch(g){console.error("THREE.WebGLState:",g)}}function mA(){try{A.compressedTexImage3D.apply(A,arguments)}catch(g){console.error("THREE.WebGLState:",g)}}function kA(){try{A.texSubImage2D.apply(A,arguments)}catch(g){console.error("THREE.WebGLState:",g)}}function ZA(){try{A.texSubImage3D.apply(A,arguments)}catch(g){console.error("THREE.WebGLState:",g)}}function WA(){try{A.compressedTexSubImage2D.apply(A,arguments)}catch(g){console.error("THREE.WebGLState:",g)}}function Y0(){try{A.compressedTexSubImage3D.apply(A,arguments)}catch(g){console.error("THREE.WebGLState:",g)}}function JA(){try{A.texStorage2D.apply(A,arguments)}catch(g){console.error("THREE.WebGLState:",g)}}function f0(){try{A.texStorage3D.apply(A,arguments)}catch(g){console.error("THREE.WebGLState:",g)}}function xA(){try{A.texImage2D.apply(A,arguments)}catch(g){console.error("THREE.WebGLState:",g)}}function MA(){try{A.texImage3D.apply(A,arguments)}catch(g){console.error("THREE.WebGLState:",g)}}function _A(g){if(IA.equals(g)===!1)A.scissor(g.x,g.y,g.z,g.w),IA.copy(g)}function _(g){if(jA.equals(g)===!1)A.viewport(g.x,g.y,g.z,g.w),jA.copy(g)}function t(g,YA){let c=H.get(YA);if(c===void 0)c=new WeakMap,H.set(YA,c);let HA=c.get(g);if(HA===void 0)HA=A.getUniformBlockIndex(YA,g.name),c.set(g,HA)}function NA(g,YA){const HA=H.get(YA).get(g);if(Y.get(YA)!==HA)A.uniformBlockBinding(YA,HA,g.__bindingPointIndex),Y.set(YA,HA)}function TA(){if(A.disable(A.BLEND),A.disable(A.CULL_FACE),A.disable(A.DEPTH_TEST),A.disable(A.POLYGON_OFFSET_FILL),A.disable(A.SCISSOR_TEST),A.disable(A.STENCIL_TEST),A.disable(A.SAMPLE_ALPHA_TO_COVERAGE),A.blendEquation(A.FUNC_ADD),A.blendFunc(A.ONE,A.ZERO),A.blendFuncSeparate(A.ONE,A.ZERO,A.ONE,A.ZERO),A.blendColor(0,0,0,0),A.colorMask(!0,!0,!0,!0),A.clearColor(0,0,0,0),A.depthMask(!0),A.depthFunc(A.LESS),A.clearDepth(1),A.stencilMask(4294967295),A.stencilFunc(A.ALWAYS,0,4294967295),A.stencilOp(A.KEEP,A.KEEP,A.KEEP),A.clearStencil(0),A.cullFace(A.BACK),A.frontFace(A.CCW),A.polygonOffset(0,0),A.activeTexture(A.TEXTURE0),A.bindFramebuffer(A.FRAMEBUFFER,null),C===!0)A.bindFramebuffer(A.DRAW_FRAMEBUFFER,null),A.bindFramebuffer(A.READ_FRAMEBUFFER,null);A.useProgram(null),A.lineWidth(1),A.scissor(0,0,A.canvas.width,A.canvas.height),A.viewport(0,0,A.canvas.width,A.canvas.height),Z={},BA=null,qA={},X={},U=new WeakMap,F=[],W=null,D=!1,V=null,R=null,O=null,z=null,w=null,k=null,j=null,h=new PA(0,0,0),N=0,$=!1,p=null,n=null,S=null,v=null,f=null,IA.set(0,0,A.canvas.width,A.canvas.height),jA.set(0,0,A.canvas.width,A.canvas.height),J.reset(),q.reset(),G.reset()}return{buffers:{color:J,depth:q,stencil:G},enable:cA,disable:E0,bindFramebuffer:x,drawBuffers:u0,useProgram:C0,setBlending:R0,setMaterial:SA,setFlipSided:aA,setCullFace:x0,setLineWidth:k0,setPolygonOffset:T,setScissorTest:L,activeTexture:r,bindTexture:e,unbindTexture:GA,compressedTexImage2D:CA,compressedTexImage3D:mA,texImage2D:xA,texImage3D:MA,updateUBOMapping:t,uniformBlockBinding:NA,texStorage2D:JA,texStorage3D:f0,texSubImage2D:kA,texSubImage3D:ZA,compressedTexSubImage2D:WA,compressedTexSubImage3D:Y0,scissor:_A,viewport:_,reset:TA}},lO=function(A,Q,B,C,I,E,K){const J=I.isWebGL2,q=Q.has("WEBGL_multisampled_render_to_texture")?Q.get("WEBGL_multisampled_render_to_texture"):null,G=typeof navigator==="undefined"?!1:/OculusBrowser/g.test(navigator.userAgent),Y=new DA,H=new WeakMap;let Z;const X=new WeakMap;let U=!1;try{U=typeof OffscreenCanvas!=="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(T){}function F(T,L){return U?new OffscreenCanvas(T,L):Y3("canvas")}function W(T,L,r,e){let GA=1;const CA=k0(T);if(CA.width>e||CA.height>e)GA=e/Math.max(CA.width,CA.height);if(GA<1||L===!0)if(typeof HTMLImageElement!=="undefined"&&T instanceof HTMLImageElement||typeof HTMLCanvasElement!=="undefined"&&T instanceof HTMLCanvasElement||typeof ImageBitmap!=="undefined"&&T instanceof ImageBitmap||typeof VideoFrame!=="undefined"&&T instanceof VideoFrame){const mA=L?x9:Math.floor,kA=mA(GA*CA.width),ZA=mA(GA*CA.height);if(Z===void 0)Z=F(kA,ZA);const WA=r?F(kA,ZA):Z;return WA.width=kA,WA.height=ZA,WA.getContext("2d").drawImage(T,0,0,kA,ZA),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+CA.width+"x"+CA.height+") to ("+kA+"x"+ZA+")."),WA}else{if("data"in T)console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+CA.width+"x"+CA.height+").");return T}return T}function D(T){const L=k0(T);return zC(L.width)&&zC(L.height)}function V(T){if(J)return!1;return T.wrapS!==1001||T.wrapT!==1001||T.minFilter!==1003&&T.minFilter!==1006}function R(T,L){return T.generateMipmaps&&L&&T.minFilter!==1003&&T.minFilter!==1006}function O(T){A.generateMipmap(T)}function z(T,L,r,e,GA=!1){if(J===!1)return L;if(T!==null){if(A[T]!==void 0)return A[T];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format \'"+T+"\'")}let CA=L;if(L===A.RED){if(r===A.FLOAT)CA=A.R32F;if(r===A.HALF_FLOAT)CA=A.R16F;if(r===A.UNSIGNED_BYTE)CA=A.R8}if(L===A.RED_INTEGER){if(r===A.UNSIGNED_BYTE)CA=A.R8UI;if(r===A.UNSIGNED_SHORT)CA=A.R16UI;if(r===A.UNSIGNED_INT)CA=A.R32UI;if(r===A.BYTE)CA=A.R8I;if(r===A.SHORT)CA=A.R16I;if(r===A.INT)CA=A.R32I}if(L===A.RG){if(r===A.FLOAT)CA=A.RG32F;if(r===A.HALF_FLOAT)CA=A.RG16F;if(r===A.UNSIGNED_BYTE)CA=A.RG8}if(L===A.RG_INTEGER){if(r===A.UNSIGNED_BYTE)CA=A.RG8UI;if(r===A.UNSIGNED_SHORT)CA=A.RG16UI;if(r===A.UNSIGNED_INT)CA=A.RG32UI;if(r===A.BYTE)CA=A.RG8I;if(r===A.SHORT)CA=A.RG16I;if(r===A.INT)CA=A.RG32I}if(L===A.RGBA){const mA=GA?"linear":W0.getTransfer(e);if(r===A.FLOAT)CA=A.RGBA32F;if(r===A.HALF_FLOAT)CA=A.RGBA16F;if(r===A.UNSIGNED_BYTE)CA=mA==="srgb"?A.SRGB8_ALPHA8:A.RGBA8;if(r===A.UNSIGNED_SHORT_4_4_4_4)CA=A.RGBA4;if(r===A.UNSIGNED_SHORT_5_5_5_1)CA=A.RGB5_A1}if(CA===A.R16F||CA===A.R32F||CA===A.RG16F||CA===A.RG32F||CA===A.RGBA16F||CA===A.RGBA32F)Q.get("EXT_color_buffer_float");return CA}function w(T,L,r){if(R(T,r)===!0||T.isFramebufferTexture&&T.minFilter!==1003&&T.minFilter!==1006)return Math.log2(Math.max(L.width,L.height))+1;else if(T.mipmaps!==void 0&&T.mipmaps.length>0)return T.mipmaps.length;else if(T.isCompressedTexture&&Array.isArray(T.image))return L.mipmaps.length;else return 1}function k(T){if(T===1003||T===1004||T===1005)return A.NEAREST;return A.LINEAR}function j(T){const L=T.target;if(L.removeEventListener("dispose",j),N(L),L.isVideoTexture)H.delete(L)}function h(T){const L=T.target;L.removeEventListener("dispose",h),p(L)}function N(T){const L=C.get(T);if(L.__webglInit===void 0)return;const r=T.source,e=X.get(r);if(e){const GA=e[L.__cacheKey];if(GA.usedTimes--,GA.usedTimes===0)$(T);if(Object.keys(e).length===0)X.delete(r)}C.remove(T)}function $(T){const L=C.get(T);A.deleteTexture(L.__webglTexture);const r=T.source,e=X.get(r);delete e[L.__cacheKey],K.memory.textures--}function p(T){const L=C.get(T);if(T.depthTexture)T.depthTexture.dispose();if(T.isWebGLCubeRenderTarget)for(let e=0;e<6;e++){if(Array.isArray(L.__webglFramebuffer[e]))for(let GA=0;GA<L.__webglFramebuffer[e].length;GA++)A.deleteFramebuffer(L.__webglFramebuffer[e][GA]);else A.deleteFramebuffer(L.__webglFramebuffer[e]);if(L.__webglDepthbuffer)A.deleteRenderbuffer(L.__webglDepthbuffer[e])}else{if(Array.isArray(L.__webglFramebuffer))for(let e=0;e<L.__webglFramebuffer.length;e++)A.deleteFramebuffer(L.__webglFramebuffer[e]);else A.deleteFramebuffer(L.__webglFramebuffer);if(L.__webglDepthbuffer)A.deleteRenderbuffer(L.__webglDepthbuffer);if(L.__webglMultisampledFramebuffer)A.deleteFramebuffer(L.__webglMultisampledFramebuffer);if(L.__webglColorRenderbuffer){for(let e=0;e<L.__webglColorRenderbuffer.length;e++)if(L.__webglColorRenderbuffer[e])A.deleteRenderbuffer(L.__webglColorRenderbuffer[e])}if(L.__webglDepthRenderbuffer)A.deleteRenderbuffer(L.__webglDepthRenderbuffer)}const r=T.textures;for(let e=0,GA=r.length;e<GA;e++){const CA=C.get(r[e]);if(CA.__webglTexture)A.deleteTexture(CA.__webglTexture),K.memory.textures--;C.remove(r[e])}C.remove(T)}let n=0;function S(){n=0}function v(){const T=n;if(T>=I.maxTextures)console.warn("THREE.WebGLTextures: Trying to use "+T+" texture units while this GPU supports only "+I.maxTextures);return n+=1,T}function f(T){const L=[];return L.push(T.wrapS),L.push(T.wrapT),L.push(T.wrapR||0),L.push(T.magFilter),L.push(T.minFilter),L.push(T.anisotropy),L.push(T.internalFormat),L.push(T.format),L.push(T.type),L.push(T.generateMipmaps),L.push(T.premultiplyAlpha),L.push(T.flipY),L.push(T.unpackAlignment),L.push(T.colorSpace),L.join()}function m(T,L){const r=C.get(T);if(T.isVideoTexture)aA(T);if(T.isRenderTargetTexture===!1&&T.version>0&&r.__version!==T.version){const e=T.image;if(e===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(e.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{jA(r,T,L);return}}B.bindTexture(A.TEXTURE_2D,r.__webglTexture,A.TEXTURE0+L)}function b(T,L){const r=C.get(T);if(T.version>0&&r.__version!==T.version){jA(r,T,L);return}B.bindTexture(A.TEXTURE_2D_ARRAY,r.__webglTexture,A.TEXTURE0+L)}function l(T,L){const r=C.get(T);if(T.version>0&&r.__version!==T.version){jA(r,T,L);return}B.bindTexture(A.TEXTURE_3D,r.__webglTexture,A.TEXTURE0+L)}function QA(T,L){const r=C.get(T);if(T.version>0&&r.__version!==T.version){bA(r,T,L);return}B.bindTexture(A.TEXTURE_CUBE_MAP,r.__webglTexture,A.TEXTURE0+L)}const BA={[1000]:A.REPEAT,[1001]:A.CLAMP_TO_EDGE,[1002]:A.MIRRORED_REPEAT},qA={[1003]:A.NEAREST,[1004]:A.NEAREST_MIPMAP_NEAREST,[1005]:A.NEAREST_MIPMAP_LINEAR,[1006]:A.LINEAR,[1007]:A.LINEAR_MIPMAP_NEAREST,[1008]:A.LINEAR_MIPMAP_LINEAR},a={[512]:A.NEVER,[519]:A.ALWAYS,[513]:A.LESS,[515]:A.LEQUAL,[514]:A.EQUAL,[518]:A.GEQUAL,[516]:A.GREATER,[517]:A.NOTEQUAL};function AA(T,L,r){if(L.type===1015&&Q.has("OES_texture_float_linear")===!1&&(L.magFilter===1006||L.magFilter===1007||L.magFilter===1005||L.magFilter===1008||L.minFilter===1006||L.minFilter===1007||L.minFilter===1005||L.minFilter===1008))console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device.");if(r){if(A.texParameteri(T,A.TEXTURE_WRAP_S,BA[L.wrapS]),A.texParameteri(T,A.TEXTURE_WRAP_T,BA[L.wrapT]),T===A.TEXTURE_3D||T===A.TEXTURE_2D_ARRAY)A.texParameteri(T,A.TEXTURE_WRAP_R,BA[L.wrapR]);A.texParameteri(T,A.TEXTURE_MAG_FILTER,qA[L.magFilter]),A.texParameteri(T,A.TEXTURE_MIN_FILTER,qA[L.minFilter])}else{if(A.texParameteri(T,A.TEXTURE_WRAP_S,A.CLAMP_TO_EDGE),A.texParameteri(T,A.TEXTURE_WRAP_T,A.CLAMP_TO_EDGE),T===A.TEXTURE_3D||T===A.TEXTURE_2D_ARRAY)A.texParameteri(T,A.TEXTURE_WRAP_R,A.CLAMP_TO_EDGE);if(L.wrapS!==1001||L.wrapT!==1001)console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.");if(A.texParameteri(T,A.TEXTURE_MAG_FILTER,k(L.magFilter)),A.texParameteri(T,A.TEXTURE_MIN_FILTER,k(L.minFilter)),L.minFilter!==1003&&L.minFilter!==1006)console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")}if(L.compareFunction)A.texParameteri(T,A.TEXTURE_COMPARE_MODE,A.COMPARE_REF_TO_TEXTURE),A.texParameteri(T,A.TEXTURE_COMPARE_FUNC,a[L.compareFunction]);if(Q.has("EXT_texture_filter_anisotropic")===!0){if(L.magFilter===1003)return;if(L.minFilter!==1005&&L.minFilter!==1008)return;if(L.type===1015&&Q.has("OES_texture_float_linear")===!1)return;if(J===!1&&(L.type===1016&&Q.has("OES_texture_half_float_linear")===!1))return;if(L.anisotropy>1||C.get(L).__currentAnisotropy){const e=Q.get("EXT_texture_filter_anisotropic");A.texParameterf(T,e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(L.anisotropy,I.getMaxAnisotropy())),C.get(L).__currentAnisotropy=L.anisotropy}}}function IA(T,L){let r=!1;if(T.__webglInit===void 0)T.__webglInit=!0,L.addEventListener("dispose",j);const e=L.source;let GA=X.get(e);if(GA===void 0)GA={},X.set(e,GA);const CA=f(L);if(CA!==T.__cacheKey){if(GA[CA]===void 0)GA[CA]={texture:A.createTexture(),usedTimes:0},K.memory.textures++,r=!0;GA[CA].usedTimes++;const mA=GA[T.__cacheKey];if(mA!==void 0){if(GA[T.__cacheKey].usedTimes--,mA.usedTimes===0)$(L)}T.__cacheKey=CA,T.__webglTexture=GA[CA].texture}return r}function jA(T,L,r){let e=A.TEXTURE_2D;if(L.isDataArrayTexture||L.isCompressedArrayTexture)e=A.TEXTURE_2D_ARRAY;if(L.isData3DTexture)e=A.TEXTURE_3D;const GA=IA(T,L),CA=L.source;B.bindTexture(e,T.__webglTexture,A.TEXTURE0+r);const mA=C.get(CA);if(CA.version!==mA.__version||GA===!0){B.activeTexture(A.TEXTURE0+r);const kA=W0.getPrimaries(W0.workingColorSpace),ZA=L.colorSpace===""?null:W0.getPrimaries(L.colorSpace),WA=L.colorSpace===""||kA===ZA?A.NONE:A.BROWSER_DEFAULT_WEBGL;A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,L.flipY),A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),A.pixelStorei(A.UNPACK_ALIGNMENT,L.unpackAlignment),A.pixelStorei(A.UNPACK_COLORSPACE_CONVERSION_WEBGL,WA);const Y0=V(L)&&D(L.image)===!1;let JA=W(L.image,Y0,!1,I.maxTextureSize);JA=x0(L,JA);const f0=D(JA)||J,xA=E.convert(L.format,L.colorSpace);let MA=E.convert(L.type),_A=z(L.internalFormat,xA,MA,L.colorSpace,L.isVideoTexture);AA(e,L,f0);let _;const t=L.mipmaps,NA=J&&L.isVideoTexture!==!0&&_A!==36196,TA=mA.__version===void 0||GA===!0,g=CA.dataReady,YA=w(L,JA,f0);if(L.isDepthTexture){if(_A=A.DEPTH_COMPONENT,J)if(L.type===1015)_A=A.DEPTH_COMPONENT32F;else if(L.type===1014)_A=A.DEPTH_COMPONENT24;else if(L.type===1020)_A=A.DEPTH24_STENCIL8;else _A=A.DEPTH_COMPONENT16;else if(L.type===1015)console.error("WebGLRenderer: Floating point depth texture requires WebGL2.");if(L.format===1026&&_A===A.DEPTH_COMPONENT){if(L.type!==1012&&L.type!==1014)console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),L.type=1014,MA=E.convert(L.type)}if(L.format===1027&&_A===A.DEPTH_COMPONENT){if(_A=A.DEPTH_STENCIL,L.type!==1020)console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),L.type=1020,MA=E.convert(L.type)}if(TA)if(NA)B.texStorage2D(A.TEXTURE_2D,1,_A,JA.width,JA.height);else B.texImage2D(A.TEXTURE_2D,0,_A,JA.width,JA.height,0,xA,MA,null)}else if(L.isDataTexture)if(t.length>0&&f0){if(NA&&TA)B.texStorage2D(A.TEXTURE_2D,YA,_A,t[0].width,t[0].height);for(let c=0,HA=t.length;c<HA;c++)if(_=t[c],NA){if(g)B.texSubImage2D(A.TEXTURE_2D,c,0,0,_.width,_.height,xA,MA,_.data)}else B.texImage2D(A.TEXTURE_2D,c,_A,_.width,_.height,0,xA,MA,_.data);L.generateMipmaps=!1}else if(NA){if(TA)B.texStorage2D(A.TEXTURE_2D,YA,_A,JA.width,JA.height);if(g)B.texSubImage2D(A.TEXTURE_2D,0,0,0,JA.width,JA.height,xA,MA,JA.data)}else B.texImage2D(A.TEXTURE_2D,0,_A,JA.width,JA.height,0,xA,MA,JA.data);else if(L.isCompressedTexture)if(L.isCompressedArrayTexture){if(NA&&TA)B.texStorage3D(A.TEXTURE_2D_ARRAY,YA,_A,t[0].width,t[0].height,JA.depth);for(let c=0,HA=t.length;c<HA;c++)if(_=t[c],L.format!==1023)if(xA!==null)if(NA){if(g)B.compressedTexSubImage3D(A.TEXTURE_2D_ARRAY,c,0,0,0,_.width,_.height,JA.depth,xA,_.data,0,0)}else B.compressedTexImage3D(A.TEXTURE_2D_ARRAY,c,_A,_.width,_.height,JA.depth,0,_.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else if(NA){if(g)B.texSubImage3D(A.TEXTURE_2D_ARRAY,c,0,0,0,_.width,_.height,JA.depth,xA,MA,_.data)}else B.texImage3D(A.TEXTURE_2D_ARRAY,c,_A,_.width,_.height,JA.depth,0,xA,MA,_.data)}else{if(NA&&TA)B.texStorage2D(A.TEXTURE_2D,YA,_A,t[0].width,t[0].height);for(let c=0,HA=t.length;c<HA;c++)if(_=t[c],L.format!==1023)if(xA!==null)if(NA){if(g)B.compressedTexSubImage2D(A.TEXTURE_2D,c,0,0,_.width,_.height,xA,_.data)}else B.compressedTexImage2D(A.TEXTURE_2D,c,_A,_.width,_.height,0,_.data);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else if(NA){if(g)B.texSubImage2D(A.TEXTURE_2D,c,0,0,_.width,_.height,xA,MA,_.data)}else B.texImage2D(A.TEXTURE_2D,c,_A,_.width,_.height,0,xA,MA,_.data)}else if(L.isDataArrayTexture)if(NA){if(TA)B.texStorage3D(A.TEXTURE_2D_ARRAY,YA,_A,JA.width,JA.height,JA.depth);if(g)B.texSubImage3D(A.TEXTURE_2D_ARRAY,0,0,0,0,JA.width,JA.height,JA.depth,xA,MA,JA.data)}else B.texImage3D(A.TEXTURE_2D_ARRAY,0,_A,JA.width,JA.height,JA.depth,0,xA,MA,JA.data);else if(L.isData3DTexture)if(NA){if(TA)B.texStorage3D(A.TEXTURE_3D,YA,_A,JA.width,JA.height,JA.depth);if(g)B.texSubImage3D(A.TEXTURE_3D,0,0,0,0,JA.width,JA.height,JA.depth,xA,MA,JA.data)}else B.texImage3D(A.TEXTURE_3D,0,_A,JA.width,JA.height,JA.depth,0,xA,MA,JA.data);else if(L.isFramebufferTexture){if(TA)if(NA)B.texStorage2D(A.TEXTURE_2D,YA,_A,JA.width,JA.height);else{let{width:c,height:HA}=JA;for(let UA=0;UA<YA;UA++)B.texImage2D(A.TEXTURE_2D,UA,_A,c,HA,0,xA,MA,null),c>>=1,HA>>=1}}else if(t.length>0&&f0){if(NA&&TA){const c=k0(t[0]);B.texStorage2D(A.TEXTURE_2D,YA,_A,c.width,c.height)}for(let c=0,HA=t.length;c<HA;c++)if(_=t[c],NA){if(g)B.texSubImage2D(A.TEXTURE_2D,c,0,0,xA,MA,_)}else B.texImage2D(A.TEXTURE_2D,c,_A,xA,MA,_);L.generateMipmaps=!1}else if(NA){if(TA){const c=k0(JA);B.texStorage2D(A.TEXTURE_2D,YA,_A,c.width,c.height)}if(g)B.texSubImage2D(A.TEXTURE_2D,0,0,0,xA,MA,JA)}else B.texImage2D(A.TEXTURE_2D,0,_A,xA,MA,JA);if(R(L,f0))O(e);if(mA.__version=CA.version,L.onUpdate)L.onUpdate(L)}T.__version=L.version}function bA(T,L,r){if(L.image.length!==6)return;const e=IA(T,L),GA=L.source;B.bindTexture(A.TEXTURE_CUBE_MAP,T.__webglTexture,A.TEXTURE0+r);const CA=C.get(GA);if(GA.version!==CA.__version||e===!0){B.activeTexture(A.TEXTURE0+r);const mA=W0.getPrimaries(W0.workingColorSpace),kA=L.colorSpace===""?null:W0.getPrimaries(L.colorSpace),ZA=L.colorSpace===""||mA===kA?A.NONE:A.BROWSER_DEFAULT_WEBGL;A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,L.flipY),A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),A.pixelStorei(A.UNPACK_ALIGNMENT,L.unpackAlignment),A.pixelStorei(A.UNPACK_COLORSPACE_CONVERSION_WEBGL,ZA);const WA=L.isCompressedTexture||L.image[0].isCompressedTexture,Y0=L.image[0]&&L.image[0].isDataTexture,JA=[];for(let c=0;c<6;c++){if(!WA&&!Y0)JA[c]=W(L.image[c],!1,!0,I.maxCubemapSize);else JA[c]=Y0?L.image[c].image:L.image[c];JA[c]=x0(L,JA[c])}const f0=JA[0],xA=D(f0)||J,MA=E.convert(L.format,L.colorSpace),_A=E.convert(L.type),_=z(L.internalFormat,MA,_A,L.colorSpace),t=J&&L.isVideoTexture!==!0,NA=CA.__version===void 0||e===!0,TA=GA.dataReady;let g=w(L,f0,xA);AA(A.TEXTURE_CUBE_MAP,L,xA);let YA;if(WA){if(t&&NA)B.texStorage2D(A.TEXTURE_CUBE_MAP,g,_,f0.width,f0.height);for(let c=0;c<6;c++){YA=JA[c].mipmaps;for(let HA=0;HA<YA.length;HA++){const UA=YA[HA];if(L.format!==1023)if(MA!==null)if(t){if(TA)B.compressedTexSubImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+c,HA,0,0,UA.width,UA.height,MA,UA.data)}else B.compressedTexImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+c,HA,_,UA.width,UA.height,0,UA.data);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()");else if(t){if(TA)B.texSubImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+c,HA,0,0,UA.width,UA.height,MA,_A,UA.data)}else B.texImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+c,HA,_,UA.width,UA.height,0,MA,_A,UA.data)}}}else{if(YA=L.mipmaps,t&&NA){if(YA.length>0)g++;const c=k0(JA[0]);B.texStorage2D(A.TEXTURE_CUBE_MAP,g,_,c.width,c.height)}for(let c=0;c<6;c++)if(Y0){if(t){if(TA)B.texSubImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+c,0,0,0,JA[c].width,JA[c].height,MA,_A,JA[c].data)}else B.texImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+c,0,_,JA[c].width,JA[c].height,0,MA,_A,JA[c].data);for(let HA=0;HA<YA.length;HA++){const rA=YA[HA].image[c].image;if(t){if(TA)B.texSubImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+c,HA+1,0,0,rA.width,rA.height,MA,_A,rA.data)}else B.texImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+c,HA+1,_,rA.width,rA.height,0,MA,_A,rA.data)}}else{if(t){if(TA)B.texSubImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+c,0,0,0,MA,_A,JA[c])}else B.texImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+c,0,_,MA,_A,JA[c]);for(let HA=0;HA<YA.length;HA++){const UA=YA[HA];if(t){if(TA)B.texSubImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+c,HA+1,0,0,MA,_A,UA.image[c])}else B.texImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+c,HA+1,_,MA,_A,UA.image[c])}}}if(R(L,xA))O(A.TEXTURE_CUBE_MAP);if(CA.__version=GA.version,L.onUpdate)L.onUpdate(L)}T.__version=L.version}function RA(T,L,r,e,GA,CA){const mA=E.convert(r.format,r.colorSpace),kA=E.convert(r.type),ZA=z(r.internalFormat,mA,kA,r.colorSpace);if(!C.get(L).__hasExternalTextures){const Y0=Math.max(1,L.width>>CA),JA=Math.max(1,L.height>>CA);if(GA===A.TEXTURE_3D||GA===A.TEXTURE_2D_ARRAY)B.texImage3D(GA,CA,ZA,Y0,JA,L.depth,0,mA,kA,null);else B.texImage2D(GA,CA,ZA,Y0,JA,0,mA,kA,null)}if(B.bindFramebuffer(A.FRAMEBUFFER,T),SA(L))q.framebufferTexture2DMultisampleEXT(A.FRAMEBUFFER,e,GA,C.get(r).__webglTexture,0,R0(L));else if(GA===A.TEXTURE_2D||GA>=A.TEXTURE_CUBE_MAP_POSITIVE_X&&GA<=A.TEXTURE_CUBE_MAP_NEGATIVE_Z)A.framebufferTexture2D(A.FRAMEBUFFER,e,GA,C.get(r).__webglTexture,CA);B.bindFramebuffer(A.FRAMEBUFFER,null)}function cA(T,L,r){if(A.bindRenderbuffer(A.RENDERBUFFER,T),L.depthBuffer&&!L.stencilBuffer){let e=J===!0?A.DEPTH_COMPONENT24:A.DEPTH_COMPONENT16;if(r||SA(L)){const GA=L.depthTexture;if(GA&&GA.isDepthTexture){if(GA.type===1015)e=A.DEPTH_COMPONENT32F;else if(GA.type===1014)e=A.DEPTH_COMPONENT24}const CA=R0(L);if(SA(L))q.renderbufferStorageMultisampleEXT(A.RENDERBUFFER,CA,e,L.width,L.height);else A.renderbufferStorageMultisample(A.RENDERBUFFER,CA,e,L.width,L.height)}else A.renderbufferStorage(A.RENDERBUFFER,e,L.width,L.height);A.framebufferRenderbuffer(A.FRAMEBUFFER,A.DEPTH_ATTACHMENT,A.RENDERBUFFER,T)}else if(L.depthBuffer&&L.stencilBuffer){const e=R0(L);if(r&&SA(L)===!1)A.renderbufferStorageMultisample(A.RENDERBUFFER,e,A.DEPTH24_STENCIL8,L.width,L.height);else if(SA(L))q.renderbufferStorageMultisampleEXT(A.RENDERBUFFER,e,A.DEPTH24_STENCIL8,L.width,L.height);else A.renderbufferStorage(A.RENDERBUFFER,A.DEPTH_STENCIL,L.width,L.height);A.framebufferRenderbuffer(A.FRAMEBUFFER,A.DEPTH_STENCIL_ATTACHMENT,A.RENDERBUFFER,T)}else{const e=L.textures;for(let GA=0;GA<e.length;GA++){const CA=e[GA],mA=E.convert(CA.format,CA.colorSpace),kA=E.convert(CA.type),ZA=z(CA.internalFormat,mA,kA,CA.colorSpace),WA=R0(L);if(r&&SA(L)===!1)A.renderbufferStorageMultisample(A.RENDERBUFFER,WA,ZA,L.width,L.height);else if(SA(L))q.renderbufferStorageMultisampleEXT(A.RENDERBUFFER,WA,ZA,L.width,L.height);else A.renderbufferStorage(A.RENDERBUFFER,ZA,L.width,L.height)}}A.bindRenderbuffer(A.RENDERBUFFER,null)}function E0(T,L){if(L&&L.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(B.bindFramebuffer(A.FRAMEBUFFER,T),!(L.depthTexture&&L.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(!C.get(L.depthTexture).__webglTexture||L.depthTexture.image.width!==L.width||L.depthTexture.image.height!==L.height)L.depthTexture.image.width=L.width,L.depthTexture.image.height=L.height,L.depthTexture.needsUpdate=!0;m(L.depthTexture,0);const e=C.get(L.depthTexture).__webglTexture,GA=R0(L);if(L.depthTexture.format===1026)if(SA(L))q.framebufferTexture2DMultisampleEXT(A.FRAMEBUFFER,A.DEPTH_ATTACHMENT,A.TEXTURE_2D,e,0,GA);else A.framebufferTexture2D(A.FRAMEBUFFER,A.DEPTH_ATTACHMENT,A.TEXTURE_2D,e,0);else if(L.depthTexture.format===1027)if(SA(L))q.framebufferTexture2DMultisampleEXT(A.FRAMEBUFFER,A.DEPTH_STENCIL_ATTACHMENT,A.TEXTURE_2D,e,0,GA);else A.framebufferTexture2D(A.FRAMEBUFFER,A.DEPTH_STENCIL_ATTACHMENT,A.TEXTURE_2D,e,0);else throw new Error("Unknown depthTexture format")}function x(T){const L=C.get(T),r=T.isWebGLCubeRenderTarget===!0;if(T.depthTexture&&!L.__autoAllocateDepthBuffer){if(r)throw new Error("target.depthTexture not supported in Cube render targets");E0(L.__webglFramebuffer,T)}else if(r){L.__webglDepthbuffer=[];for(let e=0;e<6;e++)B.bindFramebuffer(A.FRAMEBUFFER,L.__webglFramebuffer[e]),L.__webglDepthbuffer[e]=A.createRenderbuffer(),cA(L.__webglDepthbuffer[e],T,!1)}else B.bindFramebuffer(A.FRAMEBUFFER,L.__webglFramebuffer),L.__webglDepthbuffer=A.createRenderbuffer(),cA(L.__webglDepthbuffer,T,!1);B.bindFramebuffer(A.FRAMEBUFFER,null)}function u0(T,L,r){const e=C.get(T);if(L!==void 0)RA(e.__webglFramebuffer,T,T.texture,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,0);if(r!==void 0)x(T)}function C0(T){const L=T.texture,r=C.get(T),e=C.get(L);T.addEventListener("dispose",h);const GA=T.textures,CA=T.isWebGLCubeRenderTarget===!0,mA=GA.length>1,kA=D(T)||J;if(!mA){if(e.__webglTexture===void 0)e.__webglTexture=A.createTexture();e.__version=L.version,K.memory.textures++}if(CA){r.__webglFramebuffer=[];for(let ZA=0;ZA<6;ZA++)if(J&&L.mipmaps&&L.mipmaps.length>0){r.__webglFramebuffer[ZA]=[];for(let WA=0;WA<L.mipmaps.length;WA++)r.__webglFramebuffer[ZA][WA]=A.createFramebuffer()}else r.__webglFramebuffer[ZA]=A.createFramebuffer()}else{if(J&&L.mipmaps&&L.mipmaps.length>0){r.__webglFramebuffer=[];for(let ZA=0;ZA<L.mipmaps.length;ZA++)r.__webglFramebuffer[ZA]=A.createFramebuffer()}else r.__webglFramebuffer=A.createFramebuffer();if(mA)if(I.drawBuffers)for(let ZA=0,WA=GA.length;ZA<WA;ZA++){const Y0=C.get(GA[ZA]);if(Y0.__webglTexture===void 0)Y0.__webglTexture=A.createTexture(),K.memory.textures++}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(J&&T.samples>0&&SA(T)===!1){r.__webglMultisampledFramebuffer=A.createFramebuffer(),r.__webglColorRenderbuffer=[],B.bindFramebuffer(A.FRAMEBUFFER,r.__webglMultisampledFramebuffer);for(let ZA=0;ZA<GA.length;ZA++){const WA=GA[ZA];r.__webglColorRenderbuffer[ZA]=A.createRenderbuffer(),A.bindRenderbuffer(A.RENDERBUFFER,r.__webglColorRenderbuffer[ZA]);const Y0=E.convert(WA.format,WA.colorSpace),JA=E.convert(WA.type),f0=z(WA.internalFormat,Y0,JA,WA.colorSpace,T.isXRRenderTarget===!0),xA=R0(T);A.renderbufferStorageMultisample(A.RENDERBUFFER,xA,f0,T.width,T.height),A.framebufferRenderbuffer(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0+ZA,A.RENDERBUFFER,r.__webglColorRenderbuffer[ZA])}if(A.bindRenderbuffer(A.RENDERBUFFER,null),T.depthBuffer)r.__webglDepthRenderbuffer=A.createRenderbuffer(),cA(r.__webglDepthRenderbuffer,T,!0);B.bindFramebuffer(A.FRAMEBUFFER,null)}}if(CA){B.bindTexture(A.TEXTURE_CUBE_MAP,e.__webglTexture),AA(A.TEXTURE_CUBE_MAP,L,kA);for(let ZA=0;ZA<6;ZA++)if(J&&L.mipmaps&&L.mipmaps.length>0)for(let WA=0;WA<L.mipmaps.length;WA++)RA(r.__webglFramebuffer[ZA][WA],T,L,A.COLOR_ATTACHMENT0,A.TEXTURE_CUBE_MAP_POSITIVE_X+ZA,WA);else RA(r.__webglFramebuffer[ZA],T,L,A.COLOR_ATTACHMENT0,A.TEXTURE_CUBE_MAP_POSITIVE_X+ZA,0);if(R(L,kA))O(A.TEXTURE_CUBE_MAP);B.unbindTexture()}else if(mA){for(let ZA=0,WA=GA.length;ZA<WA;ZA++){const Y0=GA[ZA],JA=C.get(Y0);if(B.bindTexture(A.TEXTURE_2D,JA.__webglTexture),AA(A.TEXTURE_2D,Y0,kA),RA(r.__webglFramebuffer,T,Y0,A.COLOR_ATTACHMENT0+ZA,A.TEXTURE_2D,0),R(Y0,kA))O(A.TEXTURE_2D)}B.unbindTexture()}else{let ZA=A.TEXTURE_2D;if(T.isWebGL3DRenderTarget||T.isWebGLArrayRenderTarget)if(J)ZA=T.isWebGL3DRenderTarget?A.TEXTURE_3D:A.TEXTURE_2D_ARRAY;else console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.");if(B.bindTexture(ZA,e.__webglTexture),AA(ZA,L,kA),J&&L.mipmaps&&L.mipmaps.length>0)for(let WA=0;WA<L.mipmaps.length;WA++)RA(r.__webglFramebuffer[WA],T,L,A.COLOR_ATTACHMENT0,ZA,WA);else RA(r.__webglFramebuffer,T,L,A.COLOR_ATTACHMENT0,ZA,0);if(R(L,kA))O(ZA);B.unbindTexture()}if(T.depthBuffer)x(T)}function OA(T){const L=D(T)||J,r=T.textures;for(let e=0,GA=r.length;e<GA;e++){const CA=r[e];if(R(CA,L)){const mA=T.isWebGLCubeRenderTarget?A.TEXTURE_CUBE_MAP:A.TEXTURE_2D,kA=C.get(CA).__webglTexture;B.bindTexture(mA,kA),O(mA),B.unbindTexture()}}}function pA(T){if(J&&T.samples>0&&SA(T)===!1){const{textures:L,width:r,height:e}=T;let GA=A.COLOR_BUFFER_BIT;const CA=[],mA=T.stencilBuffer?A.DEPTH_STENCIL_ATTACHMENT:A.DEPTH_ATTACHMENT,kA=C.get(T),ZA=L.length>1;if(ZA)for(let WA=0;WA<L.length;WA++)B.bindFramebuffer(A.FRAMEBUFFER,kA.__webglMultisampledFramebuffer),A.framebufferRenderbuffer(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0+WA,A.RENDERBUFFER,null),B.bindFramebuffer(A.FRAMEBUFFER,kA.__webglFramebuffer),A.framebufferTexture2D(A.DRAW_FRAMEBUFFER,A.COLOR_ATTACHMENT0+WA,A.TEXTURE_2D,null,0);B.bindFramebuffer(A.READ_FRAMEBUFFER,kA.__webglMultisampledFramebuffer),B.bindFramebuffer(A.DRAW_FRAMEBUFFER,kA.__webglFramebuffer);for(let WA=0;WA<L.length;WA++){if(CA.push(A.COLOR_ATTACHMENT0+WA),T.depthBuffer)CA.push(mA);const Y0=kA.__ignoreDepthValues!==void 0?kA.__ignoreDepthValues:!1;if(Y0===!1){if(T.depthBuffer)GA|=A.DEPTH_BUFFER_BIT;if(T.stencilBuffer)GA|=A.STENCIL_BUFFER_BIT}if(ZA)A.framebufferRenderbuffer(A.READ_FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.RENDERBUFFER,kA.__webglColorRenderbuffer[WA]);if(Y0===!0)A.invalidateFramebuffer(A.READ_FRAMEBUFFER,[mA]),A.invalidateFramebuffer(A.DRAW_FRAMEBUFFER,[mA]);if(ZA){const JA=C.get(L[WA]).__webglTexture;A.framebufferTexture2D(A.DRAW_FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,JA,0)}if(A.blitFramebuffer(0,0,r,e,0,0,r,e,GA,A.NEAREST),G)A.invalidateFramebuffer(A.READ_FRAMEBUFFER,CA)}if(B.bindFramebuffer(A.READ_FRAMEBUFFER,null),B.bindFramebuffer(A.DRAW_FRAMEBUFFER,null),ZA)for(let WA=0;WA<L.length;WA++){B.bindFramebuffer(A.FRAMEBUFFER,kA.__webglMultisampledFramebuffer),A.framebufferRenderbuffer(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0+WA,A.RENDERBUFFER,kA.__webglColorRenderbuffer[WA]);const Y0=C.get(L[WA]).__webglTexture;B.bindFramebuffer(A.FRAMEBUFFER,kA.__webglFramebuffer),A.framebufferTexture2D(A.DRAW_FRAMEBUFFER,A.COLOR_ATTACHMENT0+WA,A.TEXTURE_2D,Y0,0)}B.bindFramebuffer(A.DRAW_FRAMEBUFFER,kA.__webglMultisampledFramebuffer)}}function R0(T){return Math.min(I.maxSamples,T.samples)}function SA(T){const L=C.get(T);return J&&T.samples>0&&Q.has("WEBGL_multisampled_render_to_texture")===!0&&L.__useRenderToTexture!==!1}function aA(T){const L=K.render.frame;if(H.get(T)!==L)H.set(T,L),T.update()}function x0(T,L){const{colorSpace:r,format:e,type:GA}=T;if(T.isCompressedTexture===!0||T.isVideoTexture===!0||T.format===1035)return L;if(r!=="srgb-linear"&&r!=="")if(W0.getTransfer(r)==="srgb"){if(J===!1)if(Q.has("EXT_sRGB")===!0&&e===1023)T.format=1035,T.minFilter=1006,T.generateMipmaps=!1;else L=jC.sRGBToLinear(L);else if(e!==1023||GA!==1009)console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType.")}else console.error("THREE.WebGLTextures: Unsupported texture color space:",r);return L}function k0(T){if(typeof HTMLImageElement!=="undefined"&&T instanceof HTMLImageElement)Y.width=T.naturalWidth||T.width,Y.height=T.naturalHeight||T.height;else if(typeof VideoFrame!=="undefined"&&T instanceof VideoFrame)Y.width=T.displayWidth,Y.height=T.displayHeight;else Y.width=T.width,Y.height=T.height;return Y}this.allocateTextureUnit=v,this.resetTextureUnits=S,this.setTexture2D=m,this.setTexture2DArray=b,this.setTexture3D=l,this.setTextureCube=QA,this.rebindTextures=u0,this.setupRenderTarget=C0,this.updateRenderTargetMipmap=OA,this.updateMultisampleRenderTarget=pA,this.setupDepthRenderbuffer=x,this.setupFrameBufferTexture=RA,this.useMultisampledRTT=SA},sO=function(A,Q,B){const C=B.isWebGL2;function I(E,K=""){let J;const q=W0.getTransfer(K);if(E===1009)return A.UNSIGNED_BYTE;if(E===1017)return A.UNSIGNED_SHORT_4_4_4_4;if(E===1018)return A.UNSIGNED_SHORT_5_5_5_1;if(E===1010)return A.BYTE;if(E===1011)return A.SHORT;if(E===1012)return A.UNSIGNED_SHORT;if(E===1013)return A.INT;if(E===1014)return A.UNSIGNED_INT;if(E===1015)return A.FLOAT;if(E===1016){if(C)return A.HALF_FLOAT;if(J=Q.get("OES_texture_half_float"),J!==null)return J.HALF_FLOAT_OES;else return null}if(E===1021)return A.ALPHA;if(E===1023)return A.RGBA;if(E===1024)return A.LUMINANCE;if(E===1025)return A.LUMINANCE_ALPHA;if(E===1026)return A.DEPTH_COMPONENT;if(E===1027)return A.DEPTH_STENCIL;if(E===1035)if(J=Q.get("EXT_sRGB"),J!==null)return J.SRGB_ALPHA_EXT;else return null;if(E===1028)return A.RED;if(E===1029)return A.RED_INTEGER;if(E===1030)return A.RG;if(E===1031)return A.RG_INTEGER;if(E===1033)return A.RGBA_INTEGER;if(E===33776||E===33777||E===33778||E===33779)if(q==="srgb")if(J=Q.get("WEBGL_compressed_texture_s3tc_srgb"),J!==null){if(E===33776)return J.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(E===33777)return J.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(E===33778)return J.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(E===33779)return J.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(J=Q.get("WEBGL_compressed_texture_s3tc"),J!==null){if(E===33776)return J.COMPRESSED_RGB_S3TC_DXT1_EXT;if(E===33777)return J.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(E===33778)return J.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(E===33779)return J.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(E===35840||E===35841||E===35842||E===35843)if(J=Q.get("WEBGL_compressed_texture_pvrtc"),J!==null){if(E===35840)return J.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(E===35841)return J.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(E===35842)return J.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(E===35843)return J.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(E===36196)if(J=Q.get("WEBGL_compressed_texture_etc1"),J!==null)return J.COMPRESSED_RGB_ETC1_WEBGL;else return null;if(E===37492||E===37496)if(J=Q.get("WEBGL_compressed_texture_etc"),J!==null){if(E===37492)return q==="srgb"?J.COMPRESSED_SRGB8_ETC2:J.COMPRESSED_RGB8_ETC2;if(E===37496)return q==="srgb"?J.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:J.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(E===37808||E===37809||E===37810||E===37811||E===37812||E===37813||E===37814||E===37815||E===37816||E===37817||E===37818||E===37819||E===37820||E===37821)if(J=Q.get("WEBGL_compressed_texture_astc"),J!==null){if(E===37808)return q==="srgb"?J.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:J.COMPRESSED_RGBA_ASTC_4x4_KHR;if(E===37809)return q==="srgb"?J.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:J.COMPRESSED_RGBA_ASTC_5x4_KHR;if(E===37810)return q==="srgb"?J.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:J.COMPRESSED_RGBA_ASTC_5x5_KHR;if(E===37811)return q==="srgb"?J.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:J.COMPRESSED_RGBA_ASTC_6x5_KHR;if(E===37812)return q==="srgb"?J.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:J.COMPRESSED_RGBA_ASTC_6x6_KHR;if(E===37813)return q==="srgb"?J.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:J.COMPRESSED_RGBA_ASTC_8x5_KHR;if(E===37814)return q==="srgb"?J.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:J.COMPRESSED_RGBA_ASTC_8x6_KHR;if(E===37815)return q==="srgb"?J.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:J.COMPRESSED_RGBA_ASTC_8x8_KHR;if(E===37816)return q==="srgb"?J.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:J.COMPRESSED_RGBA_ASTC_10x5_KHR;if(E===37817)return q==="srgb"?J.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:J.COMPRESSED_RGBA_ASTC_10x6_KHR;if(E===37818)return q==="srgb"?J.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:J.COMPRESSED_RGBA_ASTC_10x8_KHR;if(E===37819)return q==="srgb"?J.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:J.COMPRESSED_RGBA_ASTC_10x10_KHR;if(E===37820)return q==="srgb"?J.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:J.COMPRESSED_RGBA_ASTC_12x10_KHR;if(E===37821)return q==="srgb"?J.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:J.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(E===36492||E===36494||E===36495)if(J=Q.get("EXT_texture_compression_bptc"),J!==null){if(E===36492)return q==="srgb"?J.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:J.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(E===36494)return J.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(E===36495)return J.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(E===36283||E===36284||E===36285||E===36286)if(J=Q.get("EXT_texture_compression_rgtc"),J!==null){if(E===36492)return J.COMPRESSED_RED_RGTC1_EXT;if(E===36284)return J.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(E===36285)return J.COMPRESSED_RED_GREEN_RGTC2_EXT;if(E===36286)return J.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;if(E===1020){if(C)return A.UNSIGNED_INT_24_8;if(J=Q.get("WEBGL_depth_texture"),J!==null)return J.UNSIGNED_INT_24_8_WEBGL;else return null}return A[E]!==void 0?A[E]:null}return{convert:I}},rO=function(A,Q){function B(W,D){if(W.matrixAutoUpdate===!0)W.updateMatrix();D.value.copy(W.matrix)}function C(W,D){if(D.color.getRGB(W.fogColor.value,OY(A)),D.isFog)W.fogNear.value=D.near,W.fogFar.value=D.far;else if(D.isFogExp2)W.fogDensity.value=D.density}function I(W,D,V,R,O){if(D.isMeshBasicMaterial)E(W,D);else if(D.isMeshLambertMaterial)E(W,D);else if(D.isMeshToonMaterial)E(W,D),H(W,D);else if(D.isMeshPhongMaterial)E(W,D),Y(W,D);else if(D.isMeshStandardMaterial){if(E(W,D),Z(W,D),D.isMeshPhysicalMaterial)X(W,D,O)}else if(D.isMeshMatcapMaterial)E(W,D),U(W,D);else if(D.isMeshDepthMaterial)E(W,D);else if(D.isMeshDistanceMaterial)E(W,D),F(W,D);else if(D.isMeshNormalMaterial)E(W,D);else if(D.isLineBasicMaterial){if(K(W,D),D.isLineDashedMaterial)J(W,D)}else if(D.isPointsMaterial)q(W,D,V,R);else if(D.isSpriteMaterial)G(W,D);else if(D.isShadowMaterial)W.color.value.copy(D.color),W.opacity.value=D.opacity;else if(D.isShaderMaterial)D.uniformsNeedUpdate=!1}function E(W,D){if(W.opacity.value=D.opacity,D.color)W.diffuse.value.copy(D.color);if(D.emissive)W.emissive.value.copy(D.emissive).multiplyScalar(D.emissiveIntensity);if(D.map)W.map.value=D.map,B(D.map,W.mapTransform);if(D.alphaMap)W.alphaMap.value=D.alphaMap,B(D.alphaMap,W.alphaMapTransform);if(D.bumpMap){if(W.bumpMap.value=D.bumpMap,B(D.bumpMap,W.bumpMapTransform),W.bumpScale.value=D.bumpScale,D.side===1)W.bumpScale.value*=-1}if(D.normalMap){if(W.normalMap.value=D.normalMap,B(D.normalMap,W.normalMapTransform),W.normalScale.value.copy(D.normalScale),D.side===1)W.normalScale.value.negate()}if(D.displacementMap)W.displacementMap.value=D.displacementMap,B(D.displacementMap,W.displacementMapTransform),W.displacementScale.value=D.displacementScale,W.displacementBias.value=D.displacementBias;if(D.emissiveMap)W.emissiveMap.value=D.emissiveMap,B(D.emissiveMap,W.emissiveMapTransform);if(D.specularMap)W.specularMap.value=D.specularMap,B(D.specularMap,W.specularMapTransform);if(D.alphaTest>0)W.alphaTest.value=D.alphaTest;const V=Q.get(D),R=V.envMap,O=V.envMapRotation;if(R){if(W.envMap.value=R,W6.copy(O),W6.x*=-1,W6.y*=-1,W6.z*=-1,R.isCubeTexture&&R.isRenderTargetTexture===!1)W6.y*=-1,W6.z*=-1;W.envMapRotation.value.setFromMatrix4(aO.makeRotationFromEuler(W6)),W.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,W.reflectivity.value=D.reflectivity,W.ior.value=D.ior,W.refractionRatio.value=D.refractionRatio}if(D.lightMap){W.lightMap.value=D.lightMap;const z=A._useLegacyLights===!0?Math.PI:1;W.lightMapIntensity.value=D.lightMapIntensity*z,B(D.lightMap,W.lightMapTransform)}if(D.aoMap)W.aoMap.value=D.aoMap,W.aoMapIntensity.value=D.aoMapIntensity,B(D.aoMap,W.aoMapTransform)}function K(W,D){if(W.diffuse.value.copy(D.color),W.opacity.value=D.opacity,D.map)W.map.value=D.map,B(D.map,W.mapTransform)}function J(W,D){W.dashSize.value=D.dashSize,W.totalSize.value=D.dashSize+D.gapSize,W.scale.value=D.scale}function q(W,D,V,R){if(W.diffuse.value.copy(D.color),W.opacity.value=D.opacity,W.size.value=D.size*V,W.scale.value=R*0.5,D.map)W.map.value=D.map,B(D.map,W.uvTransform);if(D.alphaMap)W.alphaMap.value=D.alphaMap,B(D.alphaMap,W.alphaMapTransform);if(D.alphaTest>0)W.alphaTest.value=D.alphaTest}function G(W,D){if(W.diffuse.value.copy(D.color),W.opacity.value=D.opacity,W.rotation.value=D.rotation,D.map)W.map.value=D.map,B(D.map,W.mapTransform);if(D.alphaMap)W.alphaMap.value=D.alphaMap,B(D.alphaMap,W.alphaMapTransform);if(D.alphaTest>0)W.alphaTest.value=D.alphaTest}function Y(W,D){W.specular.value.copy(D.specular),W.shininess.value=Math.max(D.shininess,0.0001)}function H(W,D){if(D.gradientMap)W.gradientMap.value=D.gradientMap}function Z(W,D){if(W.metalness.value=D.metalness,D.metalnessMap)W.metalnessMap.value=D.metalnessMap,B(D.metalnessMap,W.metalnessMapTransform);if(W.roughness.value=D.roughness,D.roughnessMap)W.roughnessMap.value=D.roughnessMap,B(D.roughnessMap,W.roughnessMapTransform);if(Q.get(D).envMap)W.envMapIntensity.value=D.envMapIntensity}function X(W,D,V){if(W.ior.value=D.ior,D.sheen>0){if(W.sheenColor.value.copy(D.sheenColor).multiplyScalar(D.sheen),W.sheenRoughness.value=D.sheenRoughness,D.sheenColorMap)W.sheenColorMap.value=D.sheenColorMap,B(D.sheenColorMap,W.sheenColorMapTransform);if(D.sheenRoughnessMap)W.sheenRoughnessMap.value=D.sheenRoughnessMap,B(D.sheenRoughnessMap,W.sheenRoughnessMapTransform)}if(D.clearcoat>0){if(W.clearcoat.value=D.clearcoat,W.clearcoatRoughness.value=D.clearcoatRoughness,D.clearcoatMap)W.clearcoatMap.value=D.clearcoatMap,B(D.clearcoatMap,W.clearcoatMapTransform);if(D.clearcoatRoughnessMap)W.clearcoatRoughnessMap.value=D.clearcoatRoughnessMap,B(D.clearcoatRoughnessMap,W.clearcoatRoughnessMapTransform);if(D.clearcoatNormalMap){if(W.clearcoatNormalMap.value=D.clearcoatNormalMap,B(D.clearcoatNormalMap,W.clearcoatNormalMapTransform),W.clearcoatNormalScale.value.copy(D.clearcoatNormalScale),D.side===1)W.clearcoatNormalScale.value.negate()}}if(D.iridescence>0){if(W.iridescence.value=D.iridescence,W.iridescenceIOR.value=D.iridescenceIOR,W.iridescenceThicknessMinimum.value=D.iridescenceThicknessRange[0],W.iridescenceThicknessMaximum.value=D.iridescenceThicknessRange[1],D.iridescenceMap)W.iridescenceMap.value=D.iridescenceMap,B(D.iridescenceMap,W.iridescenceMapTransform);if(D.iridescenceThicknessMap)W.iridescenceThicknessMap.value=D.iridescenceThicknessMap,B(D.iridescenceThicknessMap,W.iridescenceThicknessMapTransform)}if(D.transmission>0){if(W.transmission.value=D.transmission,W.transmissionSamplerMap.value=V.texture,W.transmissionSamplerSize.value.set(V.width,V.height),D.transmissionMap)W.transmissionMap.value=D.transmissionMap,B(D.transmissionMap,W.transmissionMapTransform);if(W.thickness.value=D.thickness,D.thicknessMap)W.thicknessMap.value=D.thicknessMap,B(D.thicknessMap,W.thicknessMapTransform);W.attenuationDistance.value=D.attenuationDistance,W.attenuationColor.value.copy(D.attenuationColor)}if(D.anisotropy>0){if(W.anisotropyVector.value.set(D.anisotropy*Math.cos(D.anisotropyRotation),D.anisotropy*Math.sin(D.anisotropyRotation)),D.anisotropyMap)W.anisotropyMap.value=D.anisotropyMap,B(D.anisotropyMap,W.anisotropyMapTransform)}if(W.specularIntensity.value=D.specularIntensity,W.specularColor.value.copy(D.specularColor),D.specularColorMap)W.specularColorMap.value=D.specularColorMap,B(D.specularColorMap,W.specularColorMapTransform);if(D.specularIntensityMap)W.specularIntensityMap.value=D.specularIntensityMap,B(D.specularIntensityMap,W.specularIntensityMapTransform)}function U(W,D){if(D.matcap)W.matcap.value=D.matcap}function F(W,D){const V=Q.get(D).light;W.referencePosition.value.setFromMatrixPosition(V.matrixWorld),W.nearDistance.value=V.shadow.camera.near,W.farDistance.value=V.shadow.camera.far}return{refreshFogUniforms:C,refreshMaterialUniforms:I}},tO=function(A,Q,B,C){let I={},E={},K=[];const J=B.isWebGL2?A.getParameter(A.MAX_UNIFORM_BUFFER_BINDINGS):0;function q(V,R){const O=R.program;C.uniformBlockBinding(V,O)}function G(V,R){let O=I[V.id];if(O===void 0)U(V),O=Y(V),I[V.id]=O,V.addEventListener("dispose",W);const z=R.program;C.updateUBOMapping(V,z);const w=Q.render.frame;if(E[V.id]!==w)Z(V),E[V.id]=w}function Y(V){const R=H();V.__bindingPointIndex=R;const O=A.createBuffer(),z=V.__size,w=V.usage;return A.bindBuffer(A.UNIFORM_BUFFER,O),A.bufferData(A.UNIFORM_BUFFER,z,w),A.bindBuffer(A.UNIFORM_BUFFER,null),A.bindBufferBase(A.UNIFORM_BUFFER,R,O),O}function H(){for(let V=0;V<J;V++)if(K.indexOf(V)===-1)return K.push(V),V;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function Z(V){const R=I[V.id],O=V.uniforms,z=V.__cache;A.bindBuffer(A.UNIFORM_BUFFER,R);for(let w=0,k=O.length;w<k;w++){const j=Array.isArray(O[w])?O[w]:[O[w]];for(let h=0,N=j.length;h<N;h++){const $=j[h];if(X($,w,h,z)===!0){const p=$.__offset,n=Array.isArray($.value)?$.value:[$.value];let S=0;for(let v=0;v<n.length;v++){const f=n[v],m=F(f);if(typeof f==="number"||typeof f==="boolean")$.__data[0]=f,A.bufferSubData(A.UNIFORM_BUFFER,p+S,$.__data);else if(f.isMatrix3)$.__data[0]=f.elements[0],$.__data[1]=f.elements[1],$.__data[2]=f.elements[2],$.__data[3]=0,$.__data[4]=f.elements[3],$.__data[5]=f.elements[4],$.__data[6]=f.elements[5],$.__data[7]=0,$.__data[8]=f.elements[6],$.__data[9]=f.elements[7],$.__data[10]=f.elements[8],$.__data[11]=0;else f.toArray($.__data,S),S+=m.storage/Float32Array.BYTES_PER_ELEMENT}A.bufferSubData(A.UNIFORM_BUFFER,p,$.__data)}}}A.bindBuffer(A.UNIFORM_BUFFER,null)}function X(V,R,O,z){const w=V.value,k=R+"_"+O;if(z[k]===void 0){if(typeof w==="number"||typeof w==="boolean")z[k]=w;else z[k]=w.clone();return!0}else{const j=z[k];if(typeof w==="number"||typeof w==="boolean"){if(j!==w)return z[k]=w,!0}else if(j.equals(w)===!1)return j.copy(w),!0}return!1}function U(V){const R=V.uniforms;let O=0;const z=16;for(let k=0,j=R.length;k<j;k++){const h=Array.isArray(R[k])?R[k]:[R[k]];for(let N=0,$=h.length;N<$;N++){const p=h[N],n=Array.isArray(p.value)?p.value:[p.value];for(let S=0,v=n.length;S<v;S++){const f=n[S],m=F(f),b=O%z;if(b!==0&&z-b<m.boundary)O+=z-b;p.__data=new Float32Array(m.storage/Float32Array.BYTES_PER_ELEMENT),p.__offset=O,O+=m.storage}}}const w=O%z;if(w>0)O+=z-w;return V.__size=O,V.__cache={},this}function F(V){const R={boundary:0,storage:0};if(typeof V==="number"||typeof V==="boolean")R.boundary=4,R.storage=4;else if(V.isVector2)R.boundary=8,R.storage=8;else if(V.isVector3||V.isColor)R.boundary=16,R.storage=12;else if(V.isVector4)R.boundary=16,R.storage=16;else if(V.isMatrix3)R.boundary=48,R.storage=48;else if(V.isMatrix4)R.boundary=64,R.storage=64;else if(V.isTexture)console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group.");else console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",V);return R}function W(V){const R=V.target;R.removeEventListener("dispose",W);const O=K.indexOf(R.__bindingPointIndex);K.splice(O,1),A.deleteBuffer(I[R.id]),delete I[R.id],delete E[R.id]}function D(){for(let V in I)A.deleteBuffer(I[V]);K=[],I={},E={}}return{bind:q,update:G,dispose:D}};var lG=function(A,Q,B,C,I,E,K){const J=$C.distanceSqToPoint(A);if(J<B){const q=new P;$C.closestPointToPoint(A,q),q.applyMatrix4(C);const G=I.ray.origin.distanceTo(q);if(G<I.near||G>I.far)return;E.push({distance:G,distanceToRay:Math.sqrt(J),point:q,index:Q,face:null,object:K})}};var g9=function(A,Q,B){if(!A||!B&&A.constructor===Q)return A;if(typeof Q.BYTES_PER_ELEMENT==="number")return new Q(A);return Array.prototype.slice.call(A)},BL=function(A){return ArrayBuffer.isView(A)&&!(A instanceof DataView)},CL=function(A){function Q(I,E){return A[I]-A[E]}const B=A.length,C=new Array(B);for(let I=0;I!==B;++I)C[I]=I;return C.sort(Q),C},sG=function(A,Q,B){const C=A.length,I=new A.constructor(C);for(let E=0,K=0;K!==C;++E){const J=B[E]*Q;for(let q=0;q!==Q;++q)I[K++]=A[J+q]}return I},bY=function(A,Q,B,C){let I=1,E=A[0];while(E!==void 0&&E[C]===void 0)E=A[I++];if(E===void 0)return;let K=E[C];if(K===void 0)return;if(Array.isArray(K))do{if(K=E[C],K!==void 0)Q.push(E.time),B.push.apply(B,K);E=A[I++]}while(E!==void 0);else if(K.toArray!==void 0)do{if(K=E[C],K!==void 0)Q.push(E.time),K.toArray(B,B.length);E=A[I++]}while(E!==void 0);else do{if(K=E[C],K!==void 0)Q.push(E.time),B.push(K);E=A[I++]}while(E!==void 0)};var IL=function(A){switch(A.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return h4;case"vector":case"vector2":case"vector3":case"vector4":return G4;case"color":return oC;case"quaternion":return u2;case"bool":case"boolean":return M6;case"string":return $6}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+A)},EL=function(A){if(A.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const Q=IL(A.type);if(A.times===void 0){const B=[],C=[];bY(A.keys,B,C,"value"),A.times=B,A.values=C}if(Q.parse!==void 0)return Q.parse(A);else return new Q(A.name,A.times,A.values,A.interpolation)};var rG=function(A,Q){return A.distance-Q.distance},_C=function(A,Q,B,C){if(A.layers.test(Q.layers))A.raycast(Q,B);if(C===!0){const I=A.children;for(let E=0,K=I.length;E<K;E++)_C(I[E],Q,B,!0)}};var R6={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},V6={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3};var _8=0,P8=1,I2=2,h9=0;var tG=0;var S8=4,v9=5,eG=6;var T8=300;var AY=303;var E2=1000,H1=1001,N6=1002,v2=1003,w6=1004;var O6=1005;var g0=1006,L6=1007;var f2=1008,PC=1008,Z1=1009,QY=1010,BY=1011;var CY=1013,IY=1014,a1=1015,E1=1016;var o0=1023;var j8=1028;var g8=1030;var EY=33776;var KY=33779,JY=35840;var qY=35842;var GY=36196,YY=37492,HY=37496,ZY=37808;var SC=37812;var XY=36492;var FY=2200,f9=2201,b9=2202,p9=2300,H3=2301;var WY=0,u9=1,Z3=2;var z6="",$0="srgb",z0="srgb-linear",UY="display-p3",DY="display-p3-linear";class K1{addEventListener(A,Q){if(this._listeners===void 0)this._listeners={};const B=this._listeners;if(B[A]===void 0)B[A]=[];if(B[A].indexOf(Q)===-1)B[A].push(Q)}hasEventListener(A,Q){if(this._listeners===void 0)return!1;const B=this._listeners;return B[A]!==void 0&&B[A].indexOf(Q)!==-1}removeEventListener(A,Q){if(this._listeners===void 0)return;const C=this._listeners[A];if(C!==void 0){const I=C.indexOf(Q);if(I!==-1)C.splice(I,1)}}dispatchEvent(A){if(this._listeners===void 0)return;const B=this._listeners[A.type];if(B!==void 0){A.target=this;const C=B.slice(0);for(let I=0,E=C.length;I<E;I++)C[I].call(this,A);A.target=null}}}var D1=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],lq=1234567,J3=Math.PI/180,z8=180/Math.PI,v4={DEG2RAD:J3,RAD2DEG:z8,generateUUID:R2,clamp:I1,euclideanModulo:TC,mapLinear:bD,inverseLerp:pD,lerp:q3,damp:uD,pingpong:mD,smoothstep:dD,smootherstep:cD,randInt:lD,randFloat:sD,randFloatSpread:nD,seededRandom:oD,degToRad:iD,radToDeg:aD,isPowerOfTwo:zC,ceilPowerOfTwo:rD,floorPowerOfTwo:x9,setQuaternionFromProperEuler:tD,normalize:N0,denormalize:D2};class DA{constructor(A=0,Q=0){DA.prototype.isVector2=!0,this.x=A,this.y=Q}get width(){return this.x}set width(A){this.x=A}get height(){return this.y}set height(A){this.y=A}set(A,Q){return this.x=A,this.y=Q,this}setScalar(A){return this.x=A,this.y=A,this}setX(A){return this.x=A,this}setY(A){return this.y=A,this}setComponent(A,Q){switch(A){case 0:this.x=Q;break;case 1:this.y=Q;break;default:throw new Error("index is out of range: "+A)}return this}getComponent(A){switch(A){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+A)}}clone(){return new this.constructor(this.x,this.y)}copy(A){return this.x=A.x,this.y=A.y,this}add(A){return this.x+=A.x,this.y+=A.y,this}addScalar(A){return this.x+=A,this.y+=A,this}addVectors(A,Q){return this.x=A.x+Q.x,this.y=A.y+Q.y,this}addScaledVector(A,Q){return this.x+=A.x*Q,this.y+=A.y*Q,this}sub(A){return this.x-=A.x,this.y-=A.y,this}subScalar(A){return this.x-=A,this.y-=A,this}subVectors(A,Q){return this.x=A.x-Q.x,this.y=A.y-Q.y,this}multiply(A){return this.x*=A.x,this.y*=A.y,this}multiplyScalar(A){return this.x*=A,this.y*=A,this}divide(A){return this.x/=A.x,this.y/=A.y,this}divideScalar(A){return this.multiplyScalar(1/A)}applyMatrix3(A){const Q=this.x,B=this.y,C=A.elements;return this.x=C[0]*Q+C[3]*B+C[6],this.y=C[1]*Q+C[4]*B+C[7],this}min(A){return this.x=Math.min(this.x,A.x),this.y=Math.min(this.y,A.y),this}max(A){return this.x=Math.max(this.x,A.x),this.y=Math.max(this.y,A.y),this}clamp(A,Q){return this.x=Math.max(A.x,Math.min(Q.x,this.x)),this.y=Math.max(A.y,Math.min(Q.y,this.y)),this}clampScalar(A,Q){return this.x=Math.max(A,Math.min(Q,this.x)),this.y=Math.max(A,Math.min(Q,this.y)),this}clampLength(A,Q){const B=this.length();return this.divideScalar(B||1).multiplyScalar(Math.max(A,Math.min(Q,B)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(A){return this.x*A.x+this.y*A.y}cross(A){return this.x*A.y-this.y*A.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(A){const Q=Math.sqrt(this.lengthSq()*A.lengthSq());if(Q===0)return Math.PI/2;const B=this.dot(A)/Q;return Math.acos(I1(B,-1,1))}distanceTo(A){return Math.sqrt(this.distanceToSquared(A))}distanceToSquared(A){const Q=this.x-A.x,B=this.y-A.y;return Q*Q+B*B}manhattanDistanceTo(A){return Math.abs(this.x-A.x)+Math.abs(this.y-A.y)}setLength(A){return this.normalize().multiplyScalar(A)}lerp(A,Q){return this.x+=(A.x-this.x)*Q,this.y+=(A.y-this.y)*Q,this}lerpVectors(A,Q,B){return this.x=A.x+(Q.x-A.x)*B,this.y=A.y+(Q.y-A.y)*B,this}equals(A){return A.x===this.x&&A.y===this.y}fromArray(A,Q=0){return this.x=A[Q],this.y=A[Q+1],this}toArray(A=[],Q=0){return A[Q]=this.x,A[Q+1]=this.y,A}fromBufferAttribute(A,Q){return this.x=A.getX(Q),this.y=A.getY(Q),this}rotateAround(A,Q){const B=Math.cos(Q),C=Math.sin(Q),I=this.x-A.x,E=this.y-A.y;return this.x=I*B-E*C+A.x,this.y=I*C+E*B+A.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class fA{constructor(A,Q,B,C,I,E,K,J,q){if(fA.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],A!==void 0)this.set(A,Q,B,C,I,E,K,J,q)}set(A,Q,B,C,I,E,K,J,q){const G=this.elements;return G[0]=A,G[1]=C,G[2]=K,G[3]=Q,G[4]=I,G[5]=J,G[6]=B,G[7]=E,G[8]=q,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(A){const Q=this.elements,B=A.elements;return Q[0]=B[0],Q[1]=B[1],Q[2]=B[2],Q[3]=B[3],Q[4]=B[4],Q[5]=B[5],Q[6]=B[6],Q[7]=B[7],Q[8]=B[8],this}extractBasis(A,Q,B){return A.setFromMatrix3Column(this,0),Q.setFromMatrix3Column(this,1),B.setFromMatrix3Column(this,2),this}setFromMatrix4(A){const Q=A.elements;return this.set(Q[0],Q[4],Q[8],Q[1],Q[5],Q[9],Q[2],Q[6],Q[10]),this}multiply(A){return this.multiplyMatrices(this,A)}premultiply(A){return this.multiplyMatrices(A,this)}multiplyMatrices(A,Q){const B=A.elements,C=Q.elements,I=this.elements,E=B[0],K=B[3],J=B[6],q=B[1],G=B[4],Y=B[7],H=B[2],Z=B[5],X=B[8],U=C[0],F=C[3],W=C[6],D=C[1],V=C[4],R=C[7],O=C[2],z=C[5],w=C[8];return I[0]=E*U+K*D+J*O,I[3]=E*F+K*V+J*z,I[6]=E*W+K*R+J*w,I[1]=q*U+G*D+Y*O,I[4]=q*F+G*V+Y*z,I[7]=q*W+G*R+Y*w,I[2]=H*U+Z*D+X*O,I[5]=H*F+Z*V+X*z,I[8]=H*W+Z*R+X*w,this}multiplyScalar(A){const Q=this.elements;return Q[0]*=A,Q[3]*=A,Q[6]*=A,Q[1]*=A,Q[4]*=A,Q[7]*=A,Q[2]*=A,Q[5]*=A,Q[8]*=A,this}determinant(){const A=this.elements,Q=A[0],B=A[1],C=A[2],I=A[3],E=A[4],K=A[5],J=A[6],q=A[7],G=A[8];return Q*E*G-Q*K*q-B*I*G+B*K*J+C*I*q-C*E*J}invert(){const A=this.elements,Q=A[0],B=A[1],C=A[2],I=A[3],E=A[4],K=A[5],J=A[6],q=A[7],G=A[8],Y=G*E-K*q,H=K*J-G*I,Z=q*I-E*J,X=Q*Y+B*H+C*Z;if(X===0)return this.set(0,0,0,0,0,0,0,0,0);const U=1/X;return A[0]=Y*U,A[1]=(C*q-G*B)*U,A[2]=(K*B-C*E)*U,A[3]=H*U,A[4]=(G*Q-C*J)*U,A[5]=(C*I-K*Q)*U,A[6]=Z*U,A[7]=(B*J-q*Q)*U,A[8]=(E*Q-B*I)*U,this}transpose(){let A;const Q=this.elements;return A=Q[1],Q[1]=Q[3],Q[3]=A,A=Q[2],Q[2]=Q[6],Q[6]=A,A=Q[5],Q[5]=Q[7],Q[7]=A,this}getNormalMatrix(A){return this.setFromMatrix4(A).invert().transpose()}transposeIntoArray(A){const Q=this.elements;return A[0]=Q[0],A[1]=Q[3],A[2]=Q[6],A[3]=Q[1],A[4]=Q[4],A[5]=Q[7],A[6]=Q[2],A[7]=Q[5],A[8]=Q[8],this}setUvTransform(A,Q,B,C,I,E,K){const J=Math.cos(I),q=Math.sin(I);return this.set(B*J,B*q,-B*(J*E+q*K)+E+A,-C*q,C*J,-C*(-q*E+J*K)+K+Q,0,0,1),this}scale(A,Q){return this.premultiply(iB.makeScale(A,Q)),this}rotate(A){return this.premultiply(iB.makeRotation(-A)),this}translate(A,Q){return this.premultiply(iB.makeTranslation(A,Q)),this}makeTranslation(A,Q){if(A.isVector2)this.set(1,0,A.x,0,1,A.y,0,0,1);else this.set(1,0,A,0,1,Q,0,0,1);return this}makeRotation(A){const Q=Math.cos(A),B=Math.sin(A);return this.set(Q,-B,0,B,Q,0,0,0,1),this}makeScale(A,Q){return this.set(A,0,0,0,Q,0,0,0,1),this}equals(A){const Q=this.elements,B=A.elements;for(let C=0;C<9;C++)if(Q[C]!==B[C])return!1;return!0}fromArray(A,Q=0){for(let B=0;B<9;B++)this.elements[B]=A[B+Q];return this}toArray(A=[],Q=0){const B=this.elements;return A[Q]=B[0],A[Q+1]=B[1],A[Q+2]=B[2],A[Q+3]=B[3],A[Q+4]=B[4],A[Q+5]=B[5],A[Q+6]=B[6],A[Q+7]=B[7],A[Q+8]=B[8],A}clone(){return new this.constructor().fromArray(this.elements)}}var iB=new fA;var sq={},nq=new fA().set(0.8224621,0.177538,0,0.0331941,0.9668058,0,0.0170827,0.0723974,0.9105199),oq=new fA().set(1.2249401,-0.2249404,0,-0.0420569,1.0420571,0,-0.0196376,-0.0786361,1.0982735),J9={["srgb-linear"]:{transfer:"linear",primaries:"rec709",toReference:(A)=>A,fromReference:(A)=>A},["srgb"]:{transfer:"srgb",primaries:"rec709",toReference:(A)=>A.convertSRGBToLinear(),fromReference:(A)=>A.convertLinearToSRGB()},["display-p3-linear"]:{transfer:"linear",primaries:"p3",toReference:(A)=>A.applyMatrix3(oq),fromReference:(A)=>A.applyMatrix3(nq)},["display-p3"]:{transfer:"srgb",primaries:"p3",toReference:(A)=>A.convertSRGBToLinear().applyMatrix3(oq),fromReference:(A)=>A.applyMatrix3(nq).convertLinearToSRGB()}},AR=new Set(["srgb-linear","display-p3-linear"]),W0={enabled:!0,_workingColorSpace:"srgb-linear",get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(A){if(!AR.has(A))throw new Error(`Unsupported working color space, "${A}".`);this._workingColorSpace=A},convert:function(A,Q,B){if(this.enabled===!1||Q===B||!Q||!B)return A;const C=J9[Q].toReference,I=J9[B].fromReference;return I(C(A))},fromWorkingColorSpace:function(A,Q){return this.convert(A,this._workingColorSpace,Q)},toWorkingColorSpace:function(A,Q){return this.convert(A,Q,this._workingColorSpace)},getPrimaries:function(A){return J9[A].primaries},getTransfer:function(A){if(A==="")return"linear";return J9[A].transfer}},E8;class jC{static getDataURL(A){if(/^data:/i.test(A.src))return A.src;if(typeof HTMLCanvasElement==="undefined")return A.src;let Q;if(A instanceof HTMLCanvasElement)Q=A;else{if(E8===void 0)E8=Y3("canvas");E8.width=A.width,E8.height=A.height;const B=E8.getContext("2d");if(A instanceof ImageData)B.putImageData(A,0,0);else B.drawImage(A,0,0,A.width,A.height);Q=E8}if(Q.width>2048||Q.height>2048)return console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",A),Q.toDataURL("image/jpeg",0.6);else return Q.toDataURL("image/png")}static sRGBToLinear(A){if(typeof HTMLImageElement!=="undefined"&&A instanceof HTMLImageElement||typeof HTMLCanvasElement!=="undefined"&&A instanceof HTMLCanvasElement||typeof ImageBitmap!=="undefined"&&A instanceof ImageBitmap){const Q=Y3("canvas");Q.width=A.width,Q.height=A.height;const B=Q.getContext("2d");B.drawImage(A,0,0,A.width,A.height);const C=B.getImageData(0,0,A.width,A.height),I=C.data;for(let E=0;E<I.length;E++)I[E]=L8(I[E]/255)*255;return B.putImageData(C,0,0),Q}else if(A.data){const Q=A.data.slice(0);for(let B=0;B<Q.length;B++)if(Q instanceof Uint8Array||Q instanceof Uint8ClampedArray)Q[B]=Math.floor(L8(Q[B]/255)*255);else Q[B]=L8(Q[B]);return{data:Q,width:A.width,height:A.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),A}}var QR=0;class X3{constructor(A=null){this.isSource=!0,Object.defineProperty(this,"id",{value:QR++}),this.uuid=R2(),this.data=A,this.dataReady=!0,this.version=0}set needsUpdate(A){if(A===!0)this.version++}toJSON(A){const Q=A===void 0||typeof A==="string";if(!Q&&A.images[this.uuid]!==void 0)return A.images[this.uuid];const B={uuid:this.uuid,url:""},C=this.data;if(C!==null){let I;if(Array.isArray(C)){I=[];for(let E=0,K=C.length;E<K;E++)if(C[E].isDataTexture)I.push(rB(C[E].image));else I.push(rB(C[E]))}else I=rB(C);B.url=I}if(!Q)A.images[this.uuid]=B;return B}}var BR=0;class Z0 extends K1{constructor(A=Z0.DEFAULT_IMAGE,Q=Z0.DEFAULT_MAPPING,B=1001,C=1001,I=1006,E=1008,K=1023,J=1009,q=Z0.DEFAULT_ANISOTROPY,G=""){super();this.isTexture=!0,Object.defineProperty(this,"id",{value:BR++}),this.uuid=R2(),this.name="",this.source=new X3(A),this.mipmaps=[],this.mapping=Q,this.channel=0,this.wrapS=B,this.wrapT=C,this.magFilter=I,this.minFilter=E,this.anisotropy=q,this.format=K,this.internalFormat=null,this.type=J,this.offset=new DA(0,0),this.repeat=new DA(1,1),this.center=new DA(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new fA,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=G,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(A=null){this.source.data=A}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(A){return this.name=A.name,this.source=A.source,this.mipmaps=A.mipmaps.slice(0),this.mapping=A.mapping,this.channel=A.channel,this.wrapS=A.wrapS,this.wrapT=A.wrapT,this.magFilter=A.magFilter,this.minFilter=A.minFilter,this.anisotropy=A.anisotropy,this.format=A.format,this.internalFormat=A.internalFormat,this.type=A.type,this.offset.copy(A.offset),this.repeat.copy(A.repeat),this.center.copy(A.center),this.rotation=A.rotation,this.matrixAutoUpdate=A.matrixAutoUpdate,this.matrix.copy(A.matrix),this.generateMipmaps=A.generateMipmaps,this.premultiplyAlpha=A.premultiplyAlpha,this.flipY=A.flipY,this.unpackAlignment=A.unpackAlignment,this.colorSpace=A.colorSpace,this.userData=JSON.parse(JSON.stringify(A.userData)),this.needsUpdate=!0,this}toJSON(A){const Q=A===void 0||typeof A==="string";if(!Q&&A.textures[this.uuid]!==void 0)return A.textures[this.uuid];const B={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(A).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(Object.keys(this.userData).length>0)B.userData=this.userData;if(!Q)A.textures[this.uuid]=B;return B}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(A){if(this.mapping!==300)return A;if(A.applyMatrix3(this.matrix),A.x<0||A.x>1)switch(this.wrapS){case 1000:A.x=A.x-Math.floor(A.x);break;case 1001:A.x=A.x<0?0:1;break;case 1002:if(Math.abs(Math.floor(A.x)%2)===1)A.x=Math.ceil(A.x)-A.x;else A.x=A.x-Math.floor(A.x);break}if(A.y<0||A.y>1)switch(this.wrapT){case 1000:A.y=A.y-Math.floor(A.y);break;case 1001:A.y=A.y<0?0:1;break;case 1002:if(Math.abs(Math.floor(A.y)%2)===1)A.y=Math.ceil(A.y)-A.y;else A.y=A.y-Math.floor(A.y);break}if(this.flipY)A.y=1-A.y;return A}set needsUpdate(A){if(A===!0)this.version++,this.source.needsUpdate=!0}}Z0.DEFAULT_IMAGE=null;Z0.DEFAULT_MAPPING=300;Z0.DEFAULT_ANISOTROPY=1;class M0{constructor(A=0,Q=0,B=0,C=1){M0.prototype.isVector4=!0,this.x=A,this.y=Q,this.z=B,this.w=C}get width(){return this.z}set width(A){this.z=A}get height(){return this.w}set height(A){this.w=A}set(A,Q,B,C){return this.x=A,this.y=Q,this.z=B,this.w=C,this}setScalar(A){return this.x=A,this.y=A,this.z=A,this.w=A,this}setX(A){return this.x=A,this}setY(A){return this.y=A,this}setZ(A){return this.z=A,this}setW(A){return this.w=A,this}setComponent(A,Q){switch(A){case 0:this.x=Q;break;case 1:this.y=Q;break;case 2:this.z=Q;break;case 3:this.w=Q;break;default:throw new Error("index is out of range: "+A)}return this}getComponent(A){switch(A){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+A)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(A){return this.x=A.x,this.y=A.y,this.z=A.z,this.w=A.w!==void 0?A.w:1,this}add(A){return this.x+=A.x,this.y+=A.y,this.z+=A.z,this.w+=A.w,this}addScalar(A){return this.x+=A,this.y+=A,this.z+=A,this.w+=A,this}addVectors(A,Q){return this.x=A.x+Q.x,this.y=A.y+Q.y,this.z=A.z+Q.z,this.w=A.w+Q.w,this}addScaledVector(A,Q){return this.x+=A.x*Q,this.y+=A.y*Q,this.z+=A.z*Q,this.w+=A.w*Q,this}sub(A){return this.x-=A.x,this.y-=A.y,this.z-=A.z,this.w-=A.w,this}subScalar(A){return this.x-=A,this.y-=A,this.z-=A,this.w-=A,this}subVectors(A,Q){return this.x=A.x-Q.x,this.y=A.y-Q.y,this.z=A.z-Q.z,this.w=A.w-Q.w,this}multiply(A){return this.x*=A.x,this.y*=A.y,this.z*=A.z,this.w*=A.w,this}multiplyScalar(A){return this.x*=A,this.y*=A,this.z*=A,this.w*=A,this}applyMatrix4(A){const Q=this.x,B=this.y,C=this.z,I=this.w,E=A.elements;return this.x=E[0]*Q+E[4]*B+E[8]*C+E[12]*I,this.y=E[1]*Q+E[5]*B+E[9]*C+E[13]*I,this.z=E[2]*Q+E[6]*B+E[10]*C+E[14]*I,this.w=E[3]*Q+E[7]*B+E[11]*C+E[15]*I,this}divideScalar(A){return this.multiplyScalar(1/A)}setAxisAngleFromQuaternion(A){this.w=2*Math.acos(A.w);const Q=Math.sqrt(1-A.w*A.w);if(Q<0.0001)this.x=1,this.y=0,this.z=0;else this.x=A.x/Q,this.y=A.y/Q,this.z=A.z/Q;return this}setAxisAngleFromRotationMatrix(A){let Q,B,C,I;const E=0.01,K=0.1,J=A.elements,q=J[0],G=J[4],Y=J[8],H=J[1],Z=J[5],X=J[9],U=J[2],F=J[6],W=J[10];if(Math.abs(G-H)<0.01&&Math.abs(Y-U)<0.01&&Math.abs(X-F)<0.01){if(Math.abs(G+H)<0.1&&Math.abs(Y+U)<0.1&&Math.abs(X+F)<0.1&&Math.abs(q+Z+W-3)<0.1)return this.set(1,0,0,0),this;Q=Math.PI;const V=(q+1)/2,R=(Z+1)/2,O=(W+1)/2,z=(G+H)/4,w=(Y+U)/4,k=(X+F)/4;if(V>R&&V>O)if(V<0.01)B=0,C=0.707106781,I=0.707106781;else B=Math.sqrt(V),C=z/B,I=w/B;else if(R>O)if(R<0.01)B=0.707106781,C=0,I=0.707106781;else C=Math.sqrt(R),B=z/C,I=k/C;else if(O<0.01)B=0.707106781,C=0.707106781,I=0;else I=Math.sqrt(O),B=w/I,C=k/I;return this.set(B,C,I,Q),this}let D=Math.sqrt((F-X)*(F-X)+(Y-U)*(Y-U)+(H-G)*(H-G));if(Math.abs(D)<0.001)D=1;return this.x=(F-X)/D,this.y=(Y-U)/D,this.z=(H-G)/D,this.w=Math.acos((q+Z+W-1)/2),this}min(A){return this.x=Math.min(this.x,A.x),this.y=Math.min(this.y,A.y),this.z=Math.min(this.z,A.z),this.w=Math.min(this.w,A.w),this}max(A){return this.x=Math.max(this.x,A.x),this.y=Math.max(this.y,A.y),this.z=Math.max(this.z,A.z),this.w=Math.max(this.w,A.w),this}clamp(A,Q){return this.x=Math.max(A.x,Math.min(Q.x,this.x)),this.y=Math.max(A.y,Math.min(Q.y,this.y)),this.z=Math.max(A.z,Math.min(Q.z,this.z)),this.w=Math.max(A.w,Math.min(Q.w,this.w)),this}clampScalar(A,Q){return this.x=Math.max(A,Math.min(Q,this.x)),this.y=Math.max(A,Math.min(Q,this.y)),this.z=Math.max(A,Math.min(Q,this.z)),this.w=Math.max(A,Math.min(Q,this.w)),this}clampLength(A,Q){const B=this.length();return this.divideScalar(B||1).multiplyScalar(Math.max(A,Math.min(Q,B)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(A){return this.x*A.x+this.y*A.y+this.z*A.z+this.w*A.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(A){return this.normalize().multiplyScalar(A)}lerp(A,Q){return this.x+=(A.x-this.x)*Q,this.y+=(A.y-this.y)*Q,this.z+=(A.z-this.z)*Q,this.w+=(A.w-this.w)*Q,this}lerpVectors(A,Q,B){return this.x=A.x+(Q.x-A.x)*B,this.y=A.y+(Q.y-A.y)*B,this.z=A.z+(Q.z-A.z)*B,this.w=A.w+(Q.w-A.w)*B,this}equals(A){return A.x===this.x&&A.y===this.y&&A.z===this.z&&A.w===this.w}fromArray(A,Q=0){return this.x=A[Q],this.y=A[Q+1],this.z=A[Q+2],this.w=A[Q+3],this}toArray(A=[],Q=0){return A[Q]=this.x,A[Q+1]=this.y,A[Q+2]=this.z,A[Q+3]=this.w,A}fromBufferAttribute(A,Q){return this.x=A.getX(Q),this.y=A.getY(Q),this.z=A.getZ(Q),this.w=A.getW(Q),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class NY extends K1{constructor(A=1,Q=1,B={}){super();this.isRenderTarget=!0,this.width=A,this.height=Q,this.depth=1,this.scissor=new M0(0,0,A,Q),this.scissorTest=!1,this.viewport=new M0(0,0,A,Q);const C={width:A,height:Q,depth:1};B=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:1006,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0,count:1},B);const I=new Z0(C,B.mapping,B.wrapS,B.wrapT,B.magFilter,B.minFilter,B.format,B.type,B.anisotropy,B.colorSpace);I.flipY=!1,I.generateMipmaps=B.generateMipmaps,I.internalFormat=B.internalFormat,this.textures=[];const E=B.count;for(let K=0;K<E;K++)this.textures[K]=I.clone(),this.textures[K].isRenderTargetTexture=!0;this.depthBuffer=B.depthBuffer,this.stencilBuffer=B.stencilBuffer,this.depthTexture=B.depthTexture,this.samples=B.samples}get texture(){return this.textures[0]}set texture(A){this.textures[0]=A}setSize(A,Q,B=1){if(this.width!==A||this.height!==Q||this.depth!==B){this.width=A,this.height=Q,this.depth=B;for(let C=0,I=this.textures.length;C<I;C++)this.textures[C].image.width=A,this.textures[C].image.height=Q,this.textures[C].image.depth=B;this.dispose()}this.viewport.set(0,0,A,Q),this.scissor.set(0,0,A,Q)}clone(){return new this.constructor().copy(this)}copy(A){this.width=A.width,this.height=A.height,this.depth=A.depth,this.scissor.copy(A.scissor),this.scissorTest=A.scissorTest,this.viewport.copy(A.viewport),this.textures.length=0;for(let B=0,C=A.textures.length;B<C;B++)this.textures[B]=A.textures[B].clone(),this.textures[B].isRenderTargetTexture=!0;const Q=Object.assign({},A.texture.image);if(this.texture.source=new X3(Q),this.depthBuffer=A.depthBuffer,this.stencilBuffer=A.stencilBuffer,A.depthTexture!==null)this.depthTexture=A.depthTexture.clone();return this.samples=A.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class N1 extends NY{constructor(A=1,Q=1,B={}){super(A,Q,B);this.isWebGLRenderTarget=!0}}class gC extends Z0{constructor(A=null,Q=1,B=1,C=1){super(null);this.isDataArrayTexture=!0,this.image={data:A,width:Q,height:B,depth:C},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class m9 extends Z0{constructor(A=null,Q=1,B=1,C=1){super(null);this.isData3DTexture=!0,this.image={data:A,width:Q,height:B,depth:C},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class v0{constructor(A=0,Q=0,B=0,C=1){this.isQuaternion=!0,this._x=A,this._y=Q,this._z=B,this._w=C}static slerpFlat(A,Q,B,C,I,E,K){let J=B[C+0],q=B[C+1],G=B[C+2],Y=B[C+3];const H=I[E+0],Z=I[E+1],X=I[E+2],U=I[E+3];if(K===0){A[Q+0]=J,A[Q+1]=q,A[Q+2]=G,A[Q+3]=Y;return}if(K===1){A[Q+0]=H,A[Q+1]=Z,A[Q+2]=X,A[Q+3]=U;return}if(Y!==U||J!==H||q!==Z||G!==X){let F=1-K;const W=J*H+q*Z+G*X+Y*U,D=W>=0?1:-1,V=1-W*W;if(V>Number.EPSILON){const O=Math.sqrt(V),z=Math.atan2(O,W*D);F=Math.sin(F*z)/O,K=Math.sin(K*z)/O}const R=K*D;if(J=J*F+H*R,q=q*F+Z*R,G=G*F+X*R,Y=Y*F+U*R,F===1-K){const O=1/Math.sqrt(J*J+q*q+G*G+Y*Y);J*=O,q*=O,G*=O,Y*=O}}A[Q]=J,A[Q+1]=q,A[Q+2]=G,A[Q+3]=Y}static multiplyQuaternionsFlat(A,Q,B,C,I,E){const K=B[C],J=B[C+1],q=B[C+2],G=B[C+3],Y=I[E],H=I[E+1],Z=I[E+2],X=I[E+3];return A[Q]=K*X+G*Y+J*Z-q*H,A[Q+1]=J*X+G*H+q*Y-K*Z,A[Q+2]=q*X+G*Z+K*H-J*Y,A[Q+3]=G*X-K*Y-J*H-q*Z,A}get x(){return this._x}set x(A){this._x=A,this._onChangeCallback()}get y(){return this._y}set y(A){this._y=A,this._onChangeCallback()}get z(){return this._z}set z(A){this._z=A,this._onChangeCallback()}get w(){return this._w}set w(A){this._w=A,this._onChangeCallback()}set(A,Q,B,C){return this._x=A,this._y=Q,this._z=B,this._w=C,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(A){return this._x=A.x,this._y=A.y,this._z=A.z,this._w=A.w,this._onChangeCallback(),this}setFromEuler(A,Q=!0){const{_x:B,_y:C,_z:I,_order:E}=A,K=Math.cos,J=Math.sin,q=K(B/2),G=K(C/2),Y=K(I/2),H=J(B/2),Z=J(C/2),X=J(I/2);switch(E){case"XYZ":this._x=H*G*Y+q*Z*X,this._y=q*Z*Y-H*G*X,this._z=q*G*X+H*Z*Y,this._w=q*G*Y-H*Z*X;break;case"YXZ":this._x=H*G*Y+q*Z*X,this._y=q*Z*Y-H*G*X,this._z=q*G*X-H*Z*Y,this._w=q*G*Y+H*Z*X;break;case"ZXY":this._x=H*G*Y-q*Z*X,this._y=q*Z*Y+H*G*X,this._z=q*G*X+H*Z*Y,this._w=q*G*Y-H*Z*X;break;case"ZYX":this._x=H*G*Y-q*Z*X,this._y=q*Z*Y+H*G*X,this._z=q*G*X-H*Z*Y,this._w=q*G*Y+H*Z*X;break;case"YZX":this._x=H*G*Y+q*Z*X,this._y=q*Z*Y+H*G*X,this._z=q*G*X-H*Z*Y,this._w=q*G*Y-H*Z*X;break;case"XZY":this._x=H*G*Y-q*Z*X,this._y=q*Z*Y-H*G*X,this._z=q*G*X+H*Z*Y,this._w=q*G*Y+H*Z*X;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+E)}if(Q===!0)this._onChangeCallback();return this}setFromAxisAngle(A,Q){const B=Q/2,C=Math.sin(B);return this._x=A.x*C,this._y=A.y*C,this._z=A.z*C,this._w=Math.cos(B),this._onChangeCallback(),this}setFromRotationMatrix(A){const Q=A.elements,B=Q[0],C=Q[4],I=Q[8],E=Q[1],K=Q[5],J=Q[9],q=Q[2],G=Q[6],Y=Q[10],H=B+K+Y;if(H>0){const Z=0.5/Math.sqrt(H+1);this._w=0.25/Z,this._x=(G-J)*Z,this._y=(I-q)*Z,this._z=(E-C)*Z}else if(B>K&&B>Y){const Z=2*Math.sqrt(1+B-K-Y);this._w=(G-J)/Z,this._x=0.25*Z,this._y=(C+E)/Z,this._z=(I+q)/Z}else if(K>Y){const Z=2*Math.sqrt(1+K-B-Y);this._w=(I-q)/Z,this._x=(C+E)/Z,this._y=0.25*Z,this._z=(J+G)/Z}else{const Z=2*Math.sqrt(1+Y-B-K);this._w=(E-C)/Z,this._x=(I+q)/Z,this._y=(J+G)/Z,this._z=0.25*Z}return this._onChangeCallback(),this}setFromUnitVectors(A,Q){let B=A.dot(Q)+1;if(B<Number.EPSILON)if(B=0,Math.abs(A.x)>Math.abs(A.z))this._x=-A.y,this._y=A.x,this._z=0,this._w=B;else this._x=0,this._y=-A.z,this._z=A.y,this._w=B;else this._x=A.y*Q.z-A.z*Q.y,this._y=A.z*Q.x-A.x*Q.z,this._z=A.x*Q.y-A.y*Q.x,this._w=B;return this.normalize()}angleTo(A){return 2*Math.acos(Math.abs(I1(this.dot(A),-1,1)))}rotateTowards(A,Q){const B=this.angleTo(A);if(B===0)return this;const C=Math.min(1,Q/B);return this.slerp(A,C),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(A){return this._x*A._x+this._y*A._y+this._z*A._z+this._w*A._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let A=this.length();if(A===0)this._x=0,this._y=0,this._z=0,this._w=1;else A=1/A,this._x=this._x*A,this._y=this._y*A,this._z=this._z*A,this._w=this._w*A;return this._onChangeCallback(),this}multiply(A){return this.multiplyQuaternions(this,A)}premultiply(A){return this.multiplyQuaternions(A,this)}multiplyQuaternions(A,Q){const{_x:B,_y:C,_z:I,_w:E}=A,K=Q._x,J=Q._y,q=Q._z,G=Q._w;return this._x=B*G+E*K+C*q-I*J,this._y=C*G+E*J+I*K-B*q,this._z=I*G+E*q+B*J-C*K,this._w=E*G-B*K-C*J-I*q,this._onChangeCallback(),this}slerp(A,Q){if(Q===0)return this;if(Q===1)return this.copy(A);const B=this._x,C=this._y,I=this._z,E=this._w;let K=E*A._w+B*A._x+C*A._y+I*A._z;if(K<0)this._w=-A._w,this._x=-A._x,this._y=-A._y,this._z=-A._z,K=-K;else this.copy(A);if(K>=1)return this._w=E,this._x=B,this._y=C,this._z=I,this;const J=1-K*K;if(J<=Number.EPSILON){const Z=1-Q;return this._w=Z*E+Q*this._w,this._x=Z*B+Q*this._x,this._y=Z*C+Q*this._y,this._z=Z*I+Q*this._z,this.normalize(),this}const q=Math.sqrt(J),G=Math.atan2(q,K),Y=Math.sin((1-Q)*G)/q,H=Math.sin(Q*G)/q;return this._w=E*Y+this._w*H,this._x=B*Y+this._x*H,this._y=C*Y+this._y*H,this._z=I*Y+this._z*H,this._onChangeCallback(),this}slerpQuaternions(A,Q,B){return this.copy(A).slerp(Q,B)}random(){const A=2*Math.PI*Math.random(),Q=2*Math.PI*Math.random(),B=Math.random(),C=Math.sqrt(1-B),I=Math.sqrt(B);return this.set(C*Math.sin(A),C*Math.cos(A),I*Math.sin(Q),I*Math.cos(Q))}equals(A){return A._x===this._x&&A._y===this._y&&A._z===this._z&&A._w===this._w}fromArray(A,Q=0){return this._x=A[Q],this._y=A[Q+1],this._z=A[Q+2],this._w=A[Q+3],this._onChangeCallback(),this}toArray(A=[],Q=0){return A[Q]=this._x,A[Q+1]=this._y,A[Q+2]=this._z,A[Q+3]=this._w,A}fromBufferAttribute(A,Q){return this._x=A.getX(Q),this._y=A.getY(Q),this._z=A.getZ(Q),this._w=A.getW(Q),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(A){return this._onChangeCallback=A,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class P{constructor(A=0,Q=0,B=0){P.prototype.isVector3=!0,this.x=A,this.y=Q,this.z=B}set(A,Q,B){if(B===void 0)B=this.z;return this.x=A,this.y=Q,this.z=B,this}setScalar(A){return this.x=A,this.y=A,this.z=A,this}setX(A){return this.x=A,this}setY(A){return this.y=A,this}setZ(A){return this.z=A,this}setComponent(A,Q){switch(A){case 0:this.x=Q;break;case 1:this.y=Q;break;case 2:this.z=Q;break;default:throw new Error("index is out of range: "+A)}return this}getComponent(A){switch(A){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+A)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(A){return this.x=A.x,this.y=A.y,this.z=A.z,this}add(A){return this.x+=A.x,this.y+=A.y,this.z+=A.z,this}addScalar(A){return this.x+=A,this.y+=A,this.z+=A,this}addVectors(A,Q){return this.x=A.x+Q.x,this.y=A.y+Q.y,this.z=A.z+Q.z,this}addScaledVector(A,Q){return this.x+=A.x*Q,this.y+=A.y*Q,this.z+=A.z*Q,this}sub(A){return this.x-=A.x,this.y-=A.y,this.z-=A.z,this}subScalar(A){return this.x-=A,this.y-=A,this.z-=A,this}subVectors(A,Q){return this.x=A.x-Q.x,this.y=A.y-Q.y,this.z=A.z-Q.z,this}multiply(A){return this.x*=A.x,this.y*=A.y,this.z*=A.z,this}multiplyScalar(A){return this.x*=A,this.y*=A,this.z*=A,this}multiplyVectors(A,Q){return this.x=A.x*Q.x,this.y=A.y*Q.y,this.z=A.z*Q.z,this}applyEuler(A){return this.applyQuaternion(iq.setFromEuler(A))}applyAxisAngle(A,Q){return this.applyQuaternion(iq.setFromAxisAngle(A,Q))}applyMatrix3(A){const Q=this.x,B=this.y,C=this.z,I=A.elements;return this.x=I[0]*Q+I[3]*B+I[6]*C,this.y=I[1]*Q+I[4]*B+I[7]*C,this.z=I[2]*Q+I[5]*B+I[8]*C,this}applyNormalMatrix(A){return this.applyMatrix3(A).normalize()}applyMatrix4(A){const Q=this.x,B=this.y,C=this.z,I=A.elements,E=1/(I[3]*Q+I[7]*B+I[11]*C+I[15]);return this.x=(I[0]*Q+I[4]*B+I[8]*C+I[12])*E,this.y=(I[1]*Q+I[5]*B+I[9]*C+I[13])*E,this.z=(I[2]*Q+I[6]*B+I[10]*C+I[14])*E,this}applyQuaternion(A){const Q=this.x,B=this.y,C=this.z,I=A.x,E=A.y,K=A.z,J=A.w,q=2*(E*C-K*B),G=2*(K*Q-I*C),Y=2*(I*B-E*Q);return this.x=Q+J*q+E*Y-K*G,this.y=B+J*G+K*q-I*Y,this.z=C+J*Y+I*G-E*q,this}project(A){return this.applyMatrix4(A.matrixWorldInverse).applyMatrix4(A.projectionMatrix)}unproject(A){return this.applyMatrix4(A.projectionMatrixInverse).applyMatrix4(A.matrixWorld)}transformDirection(A){const Q=this.x,B=this.y,C=this.z,I=A.elements;return this.x=I[0]*Q+I[4]*B+I[8]*C,this.y=I[1]*Q+I[5]*B+I[9]*C,this.z=I[2]*Q+I[6]*B+I[10]*C,this.normalize()}divide(A){return this.x/=A.x,this.y/=A.y,this.z/=A.z,this}divideScalar(A){return this.multiplyScalar(1/A)}min(A){return this.x=Math.min(this.x,A.x),this.y=Math.min(this.y,A.y),this.z=Math.min(this.z,A.z),this}max(A){return this.x=Math.max(this.x,A.x),this.y=Math.max(this.y,A.y),this.z=Math.max(this.z,A.z),this}clamp(A,Q){return this.x=Math.max(A.x,Math.min(Q.x,this.x)),this.y=Math.max(A.y,Math.min(Q.y,this.y)),this.z=Math.max(A.z,Math.min(Q.z,this.z)),this}clampScalar(A,Q){return this.x=Math.max(A,Math.min(Q,this.x)),this.y=Math.max(A,Math.min(Q,this.y)),this.z=Math.max(A,Math.min(Q,this.z)),this}clampLength(A,Q){const B=this.length();return this.divideScalar(B||1).multiplyScalar(Math.max(A,Math.min(Q,B)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(A){return this.x*A.x+this.y*A.y+this.z*A.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(A){return this.normalize().multiplyScalar(A)}lerp(A,Q){return this.x+=(A.x-this.x)*Q,this.y+=(A.y-this.y)*Q,this.z+=(A.z-this.z)*Q,this}lerpVectors(A,Q,B){return this.x=A.x+(Q.x-A.x)*B,this.y=A.y+(Q.y-A.y)*B,this.z=A.z+(Q.z-A.z)*B,this}cross(A){return this.crossVectors(this,A)}crossVectors(A,Q){const{x:B,y:C,z:I}=A,E=Q.x,K=Q.y,J=Q.z;return this.x=C*J-I*K,this.y=I*E-B*J,this.z=B*K-C*E,this}projectOnVector(A){const Q=A.lengthSq();if(Q===0)return this.set(0,0,0);const B=A.dot(this)/Q;return this.copy(A).multiplyScalar(B)}projectOnPlane(A){return tB.copy(this).projectOnVector(A),this.sub(tB)}reflect(A){return this.sub(tB.copy(A).multiplyScalar(2*this.dot(A)))}angleTo(A){const Q=Math.sqrt(this.lengthSq()*A.lengthSq());if(Q===0)return Math.PI/2;const B=this.dot(A)/Q;return Math.acos(I1(B,-1,1))}distanceTo(A){return Math.sqrt(this.distanceToSquared(A))}distanceToSquared(A){const Q=this.x-A.x,B=this.y-A.y,C=this.z-A.z;return Q*Q+B*B+C*C}manhattanDistanceTo(A){return Math.abs(this.x-A.x)+Math.abs(this.y-A.y)+Math.abs(this.z-A.z)}setFromSpherical(A){return this.setFromSphericalCoords(A.radius,A.phi,A.theta)}setFromSphericalCoords(A,Q,B){const C=Math.sin(Q)*A;return this.x=C*Math.sin(B),this.y=Math.cos(Q)*A,this.z=C*Math.cos(B),this}setFromCylindrical(A){return this.setFromCylindricalCoords(A.radius,A.theta,A.y)}setFromCylindricalCoords(A,Q,B){return this.x=A*Math.sin(Q),this.y=B,this.z=A*Math.cos(Q),this}setFromMatrixPosition(A){const Q=A.elements;return this.x=Q[12],this.y=Q[13],this.z=Q[14],this}setFromMatrixScale(A){const Q=this.setFromMatrixColumn(A,0).length(),B=this.setFromMatrixColumn(A,1).length(),C=this.setFromMatrixColumn(A,2).length();return this.x=Q,this.y=B,this.z=C,this}setFromMatrixColumn(A,Q){return this.fromArray(A.elements,Q*4)}setFromMatrix3Column(A,Q){return this.fromArray(A.elements,Q*3)}setFromEuler(A){return this.x=A._x,this.y=A._y,this.z=A._z,this}setFromColor(A){return this.x=A.r,this.y=A.g,this.z=A.b,this}equals(A){return A.x===this.x&&A.y===this.y&&A.z===this.z}fromArray(A,Q=0){return this.x=A[Q],this.y=A[Q+1],this.z=A[Q+2],this}toArray(A=[],Q=0){return A[Q]=this.x,A[Q+1]=this.y,A[Q+2]=this.z,A}fromBufferAttribute(A,Q){return this.x=A.getX(Q),this.y=A.getY(Q),this.z=A.getZ(Q),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const A=Math.random()*Math.PI*2,Q=Math.random()*2-1,B=Math.sqrt(1-Q*Q);return this.x=B*Math.cos(A),this.y=Q,this.z=B*Math.sin(A),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}var tB=new P,iq=new v0;class i0{constructor(A=new P(Infinity,Infinity,Infinity),Q=new P((-Infinity),(-Infinity),(-Infinity))){this.isBox3=!0,this.min=A,this.max=Q}set(A,Q){return this.min.copy(A),this.max.copy(Q),this}setFromArray(A){this.makeEmpty();for(let Q=0,B=A.length;Q<B;Q+=3)this.expandByPoint(F2.fromArray(A,Q));return this}setFromBufferAttribute(A){this.makeEmpty();for(let Q=0,B=A.count;Q<B;Q++)this.expandByPoint(F2.fromBufferAttribute(A,Q));return this}setFromPoints(A){this.makeEmpty();for(let Q=0,B=A.length;Q<B;Q++)this.expandByPoint(A[Q]);return this}setFromCenterAndSize(A,Q){const B=F2.copy(Q).multiplyScalar(0.5);return this.min.copy(A).sub(B),this.max.copy(A).add(B),this}setFromObject(A,Q=!1){return this.makeEmpty(),this.expandByObject(A,Q)}clone(){return new this.constructor().copy(this)}copy(A){return this.min.copy(A.min),this.max.copy(A.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=Infinity,this.max.x=this.max.y=this.max.z=(-Infinity),this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(A){return this.isEmpty()?A.set(0,0,0):A.addVectors(this.min,this.max).multiplyScalar(0.5)}getSize(A){return this.isEmpty()?A.set(0,0,0):A.subVectors(this.max,this.min)}expandByPoint(A){return this.min.min(A),this.max.max(A),this}expandByVector(A){return this.min.sub(A),this.max.add(A),this}expandByScalar(A){return this.min.addScalar(-A),this.max.addScalar(A),this}expandByObject(A,Q=!1){A.updateWorldMatrix(!1,!1);const B=A.geometry;if(B!==void 0){const I=B.getAttribute("position");if(Q===!0&&I!==void 0&&A.isInstancedMesh!==!0)for(let E=0,K=I.count;E<K;E++){if(A.isMesh===!0)A.getVertexPosition(E,F2);else F2.fromBufferAttribute(I,E);F2.applyMatrix4(A.matrixWorld),this.expandByPoint(F2)}else{if(A.boundingBox!==void 0){if(A.boundingBox===null)A.computeBoundingBox();q9.copy(A.boundingBox)}else{if(B.boundingBox===null)B.computeBoundingBox();q9.copy(B.boundingBox)}q9.applyMatrix4(A.matrixWorld),this.union(q9)}}const C=A.children;for(let I=0,E=C.length;I<E;I++)this.expandByObject(C[I],Q);return this}containsPoint(A){return A.x<this.min.x||A.x>this.max.x||A.y<this.min.y||A.y>this.max.y||A.z<this.min.z||A.z>this.max.z?!1:!0}containsBox(A){return this.min.x<=A.min.x&&A.max.x<=this.max.x&&this.min.y<=A.min.y&&A.max.y<=this.max.y&&this.min.z<=A.min.z&&A.max.z<=this.max.z}getParameter(A,Q){return Q.set((A.x-this.min.x)/(this.max.x-this.min.x),(A.y-this.min.y)/(this.max.y-this.min.y),(A.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(A){return A.max.x<this.min.x||A.min.x>this.max.x||A.max.y<this.min.y||A.min.y>this.max.y||A.max.z<this.min.z||A.min.z>this.max.z?!1:!0}intersectsSphere(A){return this.clampPoint(A.center,F2),F2.distanceToSquared(A.center)<=A.radius*A.radius}intersectsPlane(A){let Q,B;if(A.normal.x>0)Q=A.normal.x*this.min.x,B=A.normal.x*this.max.x;else Q=A.normal.x*this.max.x,B=A.normal.x*this.min.x;if(A.normal.y>0)Q+=A.normal.y*this.min.y,B+=A.normal.y*this.max.y;else Q+=A.normal.y*this.max.y,B+=A.normal.y*this.min.y;if(A.normal.z>0)Q+=A.normal.z*this.min.z,B+=A.normal.z*this.max.z;else Q+=A.normal.z*this.max.z,B+=A.normal.z*this.min.z;return Q<=-A.constant&&B>=-A.constant}intersectsTriangle(A){if(this.isEmpty())return!1;this.getCenter(A3),G9.subVectors(this.max,A3),K8.subVectors(A.a,A3),J8.subVectors(A.b,A3),q8.subVectors(A.c,A3),P4.subVectors(J8,K8),S4.subVectors(q8,J8),Y6.subVectors(K8,q8);let Q=[0,-P4.z,P4.y,0,-S4.z,S4.y,0,-Y6.z,Y6.y,P4.z,0,-P4.x,S4.z,0,-S4.x,Y6.z,0,-Y6.x,-P4.y,P4.x,0,-S4.y,S4.x,0,-Y6.y,Y6.x,0];if(!eB(Q,K8,J8,q8,G9))return!1;if(Q=[1,0,0,0,1,0,0,0,1],!eB(Q,K8,J8,q8,G9))return!1;return Y9.crossVectors(P4,S4),Q=[Y9.x,Y9.y,Y9.z],eB(Q,K8,J8,q8,G9)}clampPoint(A,Q){return Q.copy(A).clamp(this.min,this.max)}distanceToPoint(A){return this.clampPoint(A,F2).distanceTo(A)}getBoundingSphere(A){if(this.isEmpty())A.makeEmpty();else this.getCenter(A.center),A.radius=this.getSize(F2).length()*0.5;return A}intersect(A){if(this.min.max(A.min),this.max.min(A.max),this.isEmpty())this.makeEmpty();return this}union(A){return this.min.min(A.min),this.max.max(A.max),this}applyMatrix4(A){if(this.isEmpty())return this;return B4[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(A),B4[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(A),B4[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(A),B4[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(A),B4[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(A),B4[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(A),B4[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(A),B4[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(A),this.setFromPoints(B4),this}translate(A){return this.min.add(A),this.max.add(A),this}equals(A){return A.min.equals(this.min)&&A.max.equals(this.max)}}var B4=[new P,new P,new P,new P,new P,new P,new P,new P],F2=new P,q9=new i0,K8=new P,J8=new P,q8=new P,P4=new P,S4=new P,Y6=new P,A3=new P,G9=new P,Y9=new P,H6=new P,CR=new i0,Q3=new P,AC=new P;class w1{constructor(A=new P,Q=-1){this.isSphere=!0,this.center=A,this.radius=Q}set(A,Q){return this.center.copy(A),this.radius=Q,this}setFromPoints(A,Q){const B=this.center;if(Q!==void 0)B.copy(Q);else CR.setFromPoints(A).getCenter(B);let C=0;for(let I=0,E=A.length;I<E;I++)C=Math.max(C,B.distanceToSquared(A[I]));return this.radius=Math.sqrt(C),this}copy(A){return this.center.copy(A.center),this.radius=A.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(A){return A.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(A){return A.distanceTo(this.center)-this.radius}intersectsSphere(A){const Q=this.radius+A.radius;return A.center.distanceToSquared(this.center)<=Q*Q}intersectsBox(A){return A.intersectsSphere(this)}intersectsPlane(A){return Math.abs(A.distanceToPoint(this.center))<=this.radius}clampPoint(A,Q){const B=this.center.distanceToSquared(A);if(Q.copy(A),B>this.radius*this.radius)Q.sub(this.center).normalize(),Q.multiplyScalar(this.radius).add(this.center);return Q}getBoundingBox(A){if(this.isEmpty())return A.makeEmpty(),A;return A.set(this.center,this.center),A.expandByScalar(this.radius),A}applyMatrix4(A){return this.center.applyMatrix4(A),this.radius=this.radius*A.getMaxScaleOnAxis(),this}translate(A){return this.center.add(A),this}expandByPoint(A){if(this.isEmpty())return this.center.copy(A),this.radius=0,this;Q3.subVectors(A,this.center);const Q=Q3.lengthSq();if(Q>this.radius*this.radius){const B=Math.sqrt(Q),C=(B-this.radius)*0.5;this.center.addScaledVector(Q3,C/B),this.radius+=C}return this}union(A){if(A.isEmpty())return this;if(this.isEmpty())return this.copy(A),this;if(this.center.equals(A.center)===!0)this.radius=Math.max(this.radius,A.radius);else AC.subVectors(A.center,this.center).setLength(A.radius),this.expandByPoint(Q3.copy(A.center).add(AC)),this.expandByPoint(Q3.copy(A.center).sub(AC));return this}equals(A){return A.center.equals(this.center)&&A.radius===this.radius}clone(){return new this.constructor().copy(this)}}var C4=new P,QC=new P,H9=new P,T4=new P,BC=new P,Z9=new P,CC=new P;class f4{constructor(A=new P,Q=new P(0,0,-1)){this.origin=A,this.direction=Q}set(A,Q){return this.origin.copy(A),this.direction.copy(Q),this}copy(A){return this.origin.copy(A.origin),this.direction.copy(A.direction),this}at(A,Q){return Q.copy(this.origin).addScaledVector(this.direction,A)}lookAt(A){return this.direction.copy(A).sub(this.origin).normalize(),this}recast(A){return this.origin.copy(this.at(A,C4)),this}closestPointToPoint(A,Q){Q.subVectors(A,this.origin);const B=Q.dot(this.direction);if(B<0)return Q.copy(this.origin);return Q.copy(this.origin).addScaledVector(this.direction,B)}distanceToPoint(A){return Math.sqrt(this.distanceSqToPoint(A))}distanceSqToPoint(A){const Q=C4.subVectors(A,this.origin).dot(this.direction);if(Q<0)return this.origin.distanceToSquared(A);return C4.copy(this.origin).addScaledVector(this.direction,Q),C4.distanceToSquared(A)}distanceSqToSegment(A,Q,B,C){QC.copy(A).add(Q).multiplyScalar(0.5),H9.copy(Q).sub(A).normalize(),T4.copy(this.origin).sub(QC);const I=A.distanceTo(Q)*0.5,E=-this.direction.dot(H9),K=T4.dot(this.direction),J=-T4.dot(H9),q=T4.lengthSq(),G=Math.abs(1-E*E);let Y,H,Z,X;if(G>0)if(Y=E*J-K,H=E*K-J,X=I*G,Y>=0)if(H>=-X)if(H<=X){const U=1/G;Y*=U,H*=U,Z=Y*(Y+E*H+2*K)+H*(E*Y+H+2*J)+q}else H=I,Y=Math.max(0,-(E*H+K)),Z=-Y*Y+H*(H+2*J)+q;else H=-I,Y=Math.max(0,-(E*H+K)),Z=-Y*Y+H*(H+2*J)+q;else if(H<=-X)Y=Math.max(0,-(-E*I+K)),H=Y>0?-I:Math.min(Math.max(-I,-J),I),Z=-Y*Y+H*(H+2*J)+q;else if(H<=X)Y=0,H=Math.min(Math.max(-I,-J),I),Z=H*(H+2*J)+q;else Y=Math.max(0,-(E*I+K)),H=Y>0?I:Math.min(Math.max(-I,-J),I),Z=-Y*Y+H*(H+2*J)+q;else H=E>0?-I:I,Y=Math.max(0,-(E*H+K)),Z=-Y*Y+H*(H+2*J)+q;if(B)B.copy(this.origin).addScaledVector(this.direction,Y);if(C)C.copy(QC).addScaledVector(H9,H);return Z}intersectSphere(A,Q){C4.subVectors(A.center,this.origin);const B=C4.dot(this.direction),C=C4.dot(C4)-B*B,I=A.radius*A.radius;if(C>I)return null;const E=Math.sqrt(I-C),K=B-E,J=B+E;if(J<0)return null;if(K<0)return this.at(J,Q);return this.at(K,Q)}intersectsSphere(A){return this.distanceSqToPoint(A.center)<=A.radius*A.radius}distanceToPlane(A){const Q=A.normal.dot(this.direction);if(Q===0){if(A.distanceToPoint(this.origin)===0)return 0;return null}const B=-(this.origin.dot(A.normal)+A.constant)/Q;return B>=0?B:null}intersectPlane(A,Q){const B=this.distanceToPlane(A);if(B===null)return null;return this.at(B,Q)}intersectsPlane(A){const Q=A.distanceToPoint(this.origin);if(Q===0)return!0;if(A.normal.dot(this.direction)*Q<0)return!0;return!1}intersectBox(A,Q){let B,C,I,E,K,J;const q=1/this.direction.x,G=1/this.direction.y,Y=1/this.direction.z,H=this.origin;if(q>=0)B=(A.min.x-H.x)*q,C=(A.max.x-H.x)*q;else B=(A.max.x-H.x)*q,C=(A.min.x-H.x)*q;if(G>=0)I=(A.min.y-H.y)*G,E=(A.max.y-H.y)*G;else I=(A.max.y-H.y)*G,E=(A.min.y-H.y)*G;if(B>E||I>C)return null;if(I>B||isNaN(B))B=I;if(E<C||isNaN(C))C=E;if(Y>=0)K=(A.min.z-H.z)*Y,J=(A.max.z-H.z)*Y;else K=(A.max.z-H.z)*Y,J=(A.min.z-H.z)*Y;if(B>J||K>C)return null;if(K>B||B!==B)B=K;if(J<C||C!==C)C=J;if(C<0)return null;return this.at(B>=0?B:C,Q)}intersectsBox(A){return this.intersectBox(A,C4)!==null}intersectTriangle(A,Q,B,C,I){BC.subVectors(Q,A),Z9.subVectors(B,A),CC.crossVectors(BC,Z9);let E=this.direction.dot(CC),K;if(E>0){if(C)return null;K=1}else if(E<0)K=-1,E=-E;else return null;T4.subVectors(this.origin,A);const J=K*this.direction.dot(Z9.crossVectors(T4,Z9));if(J<0)return null;const q=K*this.direction.dot(BC.cross(T4));if(q<0)return null;if(J+q>E)return null;const G=-K*T4.dot(CC);if(G<0)return null;return this.at(G/E,I)}applyMatrix4(A){return this.origin.applyMatrix4(A),this.direction.transformDirection(A),this}equals(A){return A.origin.equals(this.origin)&&A.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class zA{constructor(A,Q,B,C,I,E,K,J,q,G,Y,H,Z,X,U,F){if(zA.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],A!==void 0)this.set(A,Q,B,C,I,E,K,J,q,G,Y,H,Z,X,U,F)}set(A,Q,B,C,I,E,K,J,q,G,Y,H,Z,X,U,F){const W=this.elements;return W[0]=A,W[4]=Q,W[8]=B,W[12]=C,W[1]=I,W[5]=E,W[9]=K,W[13]=J,W[2]=q,W[6]=G,W[10]=Y,W[14]=H,W[3]=Z,W[7]=X,W[11]=U,W[15]=F,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new zA().fromArray(this.elements)}copy(A){const Q=this.elements,B=A.elements;return Q[0]=B[0],Q[1]=B[1],Q[2]=B[2],Q[3]=B[3],Q[4]=B[4],Q[5]=B[5],Q[6]=B[6],Q[7]=B[7],Q[8]=B[8],Q[9]=B[9],Q[10]=B[10],Q[11]=B[11],Q[12]=B[12],Q[13]=B[13],Q[14]=B[14],Q[15]=B[15],this}copyPosition(A){const Q=this.elements,B=A.elements;return Q[12]=B[12],Q[13]=B[13],Q[14]=B[14],this}setFromMatrix3(A){const Q=A.elements;return this.set(Q[0],Q[3],Q[6],0,Q[1],Q[4],Q[7],0,Q[2],Q[5],Q[8],0,0,0,0,1),this}extractBasis(A,Q,B){return A.setFromMatrixColumn(this,0),Q.setFromMatrixColumn(this,1),B.setFromMatrixColumn(this,2),this}makeBasis(A,Q,B){return this.set(A.x,Q.x,B.x,0,A.y,Q.y,B.y,0,A.z,Q.z,B.z,0,0,0,0,1),this}extractRotation(A){const Q=this.elements,B=A.elements,C=1/G8.setFromMatrixColumn(A,0).length(),I=1/G8.setFromMatrixColumn(A,1).length(),E=1/G8.setFromMatrixColumn(A,2).length();return Q[0]=B[0]*C,Q[1]=B[1]*C,Q[2]=B[2]*C,Q[3]=0,Q[4]=B[4]*I,Q[5]=B[5]*I,Q[6]=B[6]*I,Q[7]=0,Q[8]=B[8]*E,Q[9]=B[9]*E,Q[10]=B[10]*E,Q[11]=0,Q[12]=0,Q[13]=0,Q[14]=0,Q[15]=1,this}makeRotationFromEuler(A){const Q=this.elements,B=A.x,C=A.y,I=A.z,E=Math.cos(B),K=Math.sin(B),J=Math.cos(C),q=Math.sin(C),G=Math.cos(I),Y=Math.sin(I);if(A.order==="XYZ"){const H=E*G,Z=E*Y,X=K*G,U=K*Y;Q[0]=J*G,Q[4]=-J*Y,Q[8]=q,Q[1]=Z+X*q,Q[5]=H-U*q,Q[9]=-K*J,Q[2]=U-H*q,Q[6]=X+Z*q,Q[10]=E*J}else if(A.order==="YXZ"){const H=J*G,Z=J*Y,X=q*G,U=q*Y;Q[0]=H+U*K,Q[4]=X*K-Z,Q[8]=E*q,Q[1]=E*Y,Q[5]=E*G,Q[9]=-K,Q[2]=Z*K-X,Q[6]=U+H*K,Q[10]=E*J}else if(A.order==="ZXY"){const H=J*G,Z=J*Y,X=q*G,U=q*Y;Q[0]=H-U*K,Q[4]=-E*Y,Q[8]=X+Z*K,Q[1]=Z+X*K,Q[5]=E*G,Q[9]=U-H*K,Q[2]=-E*q,Q[6]=K,Q[10]=E*J}else if(A.order==="ZYX"){const H=E*G,Z=E*Y,X=K*G,U=K*Y;Q[0]=J*G,Q[4]=X*q-Z,Q[8]=H*q+U,Q[1]=J*Y,Q[5]=U*q+H,Q[9]=Z*q-X,Q[2]=-q,Q[6]=K*J,Q[10]=E*J}else if(A.order==="YZX"){const H=E*J,Z=E*q,X=K*J,U=K*q;Q[0]=J*G,Q[4]=U-H*Y,Q[8]=X*Y+Z,Q[1]=Y,Q[5]=E*G,Q[9]=-K*G,Q[2]=-q*G,Q[6]=Z*Y+X,Q[10]=H-U*Y}else if(A.order==="XZY"){const H=E*J,Z=E*q,X=K*J,U=K*q;Q[0]=J*G,Q[4]=-Y,Q[8]=q*G,Q[1]=H*Y+U,Q[5]=E*G,Q[9]=Z*Y-X,Q[2]=X*Y-Z,Q[6]=K*G,Q[10]=U*Y+H}return Q[3]=0,Q[7]=0,Q[11]=0,Q[12]=0,Q[13]=0,Q[14]=0,Q[15]=1,this}makeRotationFromQuaternion(A){return this.compose(IR,A,ER)}lookAt(A,Q,B){const C=this.elements;if(o1.subVectors(A,Q),o1.lengthSq()===0)o1.z=1;if(o1.normalize(),j4.crossVectors(B,o1),j4.lengthSq()===0){if(Math.abs(B.z)===1)o1.x+=0.0001;else o1.z+=0.0001;o1.normalize(),j4.crossVectors(B,o1)}return j4.normalize(),X9.crossVectors(o1,j4),C[0]=j4.x,C[4]=X9.x,C[8]=o1.x,C[1]=j4.y,C[5]=X9.y,C[9]=o1.y,C[2]=j4.z,C[6]=X9.z,C[10]=o1.z,this}multiply(A){return this.multiplyMatrices(this,A)}premultiply(A){return this.multiplyMatrices(A,this)}multiplyMatrices(A,Q){const B=A.elements,C=Q.elements,I=this.elements,E=B[0],K=B[4],J=B[8],q=B[12],G=B[1],Y=B[5],H=B[9],Z=B[13],X=B[2],U=B[6],F=B[10],W=B[14],D=B[3],V=B[7],R=B[11],O=B[15],z=C[0],w=C[4],k=C[8],j=C[12],h=C[1],N=C[5],$=C[9],p=C[13],n=C[2],S=C[6],v=C[10],f=C[14],m=C[3],b=C[7],l=C[11],QA=C[15];return I[0]=E*z+K*h+J*n+q*m,I[4]=E*w+K*N+J*S+q*b,I[8]=E*k+K*$+J*v+q*l,I[12]=E*j+K*p+J*f+q*QA,I[1]=G*z+Y*h+H*n+Z*m,I[5]=G*w+Y*N+H*S+Z*b,I[9]=G*k+Y*$+H*v+Z*l,I[13]=G*j+Y*p+H*f+Z*QA,I[2]=X*z+U*h+F*n+W*m,I[6]=X*w+U*N+F*S+W*b,I[10]=X*k+U*$+F*v+W*l,I[14]=X*j+U*p+F*f+W*QA,I[3]=D*z+V*h+R*n+O*m,I[7]=D*w+V*N+R*S+O*b,I[11]=D*k+V*$+R*v+O*l,I[15]=D*j+V*p+R*f+O*QA,this}multiplyScalar(A){const Q=this.elements;return Q[0]*=A,Q[4]*=A,Q[8]*=A,Q[12]*=A,Q[1]*=A,Q[5]*=A,Q[9]*=A,Q[13]*=A,Q[2]*=A,Q[6]*=A,Q[10]*=A,Q[14]*=A,Q[3]*=A,Q[7]*=A,Q[11]*=A,Q[15]*=A,this}determinant(){const A=this.elements,Q=A[0],B=A[4],C=A[8],I=A[12],E=A[1],K=A[5],J=A[9],q=A[13],G=A[2],Y=A[6],H=A[10],Z=A[14],X=A[3],U=A[7],F=A[11],W=A[15];return X*(+I*J*Y-C*q*Y-I*K*H+B*q*H+C*K*Z-B*J*Z)+U*(+Q*J*Z-Q*q*H+I*E*H-C*E*Z+C*q*G-I*J*G)+F*(+Q*q*Y-Q*K*Z-I*E*Y+B*E*Z+I*K*G-B*q*G)+W*(-C*K*G-Q*J*Y+Q*K*H+C*E*Y-B*E*H+B*J*G)}transpose(){const A=this.elements;let Q;return Q=A[1],A[1]=A[4],A[4]=Q,Q=A[2],A[2]=A[8],A[8]=Q,Q=A[6],A[6]=A[9],A[9]=Q,Q=A[3],A[3]=A[12],A[12]=Q,Q=A[7],A[7]=A[13],A[13]=Q,Q=A[11],A[11]=A[14],A[14]=Q,this}setPosition(A,Q,B){const C=this.elements;if(A.isVector3)C[12]=A.x,C[13]=A.y,C[14]=A.z;else C[12]=A,C[13]=Q,C[14]=B;return this}invert(){const A=this.elements,Q=A[0],B=A[1],C=A[2],I=A[3],E=A[4],K=A[5],J=A[6],q=A[7],G=A[8],Y=A[9],H=A[10],Z=A[11],X=A[12],U=A[13],F=A[14],W=A[15],D=Y*F*q-U*H*q+U*J*Z-K*F*Z-Y*J*W+K*H*W,V=X*H*q-G*F*q-X*J*Z+E*F*Z+G*J*W-E*H*W,R=G*U*q-X*Y*q+X*K*Z-E*U*Z-G*K*W+E*Y*W,O=X*Y*J-G*U*J-X*K*H+E*U*H+G*K*F-E*Y*F,z=Q*D+B*V+C*R+I*O;if(z===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/z;return A[0]=D*w,A[1]=(U*H*I-Y*F*I-U*C*Z+B*F*Z+Y*C*W-B*H*W)*w,A[2]=(K*F*I-U*J*I+U*C*q-B*F*q-K*C*W+B*J*W)*w,A[3]=(Y*J*I-K*H*I-Y*C*q+B*H*q+K*C*Z-B*J*Z)*w,A[4]=V*w,A[5]=(G*F*I-X*H*I+X*C*Z-Q*F*Z-G*C*W+Q*H*W)*w,A[6]=(X*J*I-E*F*I-X*C*q+Q*F*q+E*C*W-Q*J*W)*w,A[7]=(E*H*I-G*J*I+G*C*q-Q*H*q-E*C*Z+Q*J*Z)*w,A[8]=R*w,A[9]=(X*Y*I-G*U*I-X*B*Z+Q*U*Z+G*B*W-Q*Y*W)*w,A[10]=(E*U*I-X*K*I+X*B*q-Q*U*q-E*B*W+Q*K*W)*w,A[11]=(G*K*I-E*Y*I-G*B*q+Q*Y*q+E*B*Z-Q*K*Z)*w,A[12]=O*w,A[13]=(G*U*C-X*Y*C+X*B*H-Q*U*H-G*B*F+Q*Y*F)*w,A[14]=(X*K*C-E*U*C-X*B*J+Q*U*J+E*B*F-Q*K*F)*w,A[15]=(E*Y*C-G*K*C+G*B*J-Q*Y*J-E*B*H+Q*K*H)*w,this}scale(A){const Q=this.elements,B=A.x,C=A.y,I=A.z;return Q[0]*=B,Q[4]*=C,Q[8]*=I,Q[1]*=B,Q[5]*=C,Q[9]*=I,Q[2]*=B,Q[6]*=C,Q[10]*=I,Q[3]*=B,Q[7]*=C,Q[11]*=I,this}getMaxScaleOnAxis(){const A=this.elements,Q=A[0]*A[0]+A[1]*A[1]+A[2]*A[2],B=A[4]*A[4]+A[5]*A[5]+A[6]*A[6],C=A[8]*A[8]+A[9]*A[9]+A[10]*A[10];return Math.sqrt(Math.max(Q,B,C))}makeTranslation(A,Q,B){if(A.isVector3)this.set(1,0,0,A.x,0,1,0,A.y,0,0,1,A.z,0,0,0,1);else this.set(1,0,0,A,0,1,0,Q,0,0,1,B,0,0,0,1);return this}makeRotationX(A){const Q=Math.cos(A),B=Math.sin(A);return this.set(1,0,0,0,0,Q,-B,0,0,B,Q,0,0,0,0,1),this}makeRotationY(A){const Q=Math.cos(A),B=Math.sin(A);return this.set(Q,0,B,0,0,1,0,0,-B,0,Q,0,0,0,0,1),this}makeRotationZ(A){const Q=Math.cos(A),B=Math.sin(A);return this.set(Q,-B,0,0,B,Q,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(A,Q){const B=Math.cos(Q),C=Math.sin(Q),I=1-B,E=A.x,K=A.y,J=A.z,q=I*E,G=I*K;return this.set(q*E+B,q*K-C*J,q*J+C*K,0,q*K+C*J,G*K+B,G*J-C*E,0,q*J-C*K,G*J+C*E,I*J*J+B,0,0,0,0,1),this}makeScale(A,Q,B){return this.set(A,0,0,0,0,Q,0,0,0,0,B,0,0,0,0,1),this}makeShear(A,Q,B,C,I,E){return this.set(1,B,I,0,A,1,E,0,Q,C,1,0,0,0,0,1),this}compose(A,Q,B){const C=this.elements,I=Q._x,E=Q._y,K=Q._z,J=Q._w,q=I+I,G=E+E,Y=K+K,H=I*q,Z=I*G,X=I*Y,U=E*G,F=E*Y,W=K*Y,D=J*q,V=J*G,R=J*Y,O=B.x,z=B.y,w=B.z;return C[0]=(1-(U+W))*O,C[1]=(Z+R)*O,C[2]=(X-V)*O,C[3]=0,C[4]=(Z-R)*z,C[5]=(1-(H+W))*z,C[6]=(F+D)*z,C[7]=0,C[8]=(X+V)*w,C[9]=(F-D)*w,C[10]=(1-(H+U))*w,C[11]=0,C[12]=A.x,C[13]=A.y,C[14]=A.z,C[15]=1,this}decompose(A,Q,B){const C=this.elements;let I=G8.set(C[0],C[1],C[2]).length();const E=G8.set(C[4],C[5],C[6]).length(),K=G8.set(C[8],C[9],C[10]).length();if(this.determinant()<0)I=-I;A.x=C[12],A.y=C[13],A.z=C[14],W2.copy(this);const q=1/I,G=1/E,Y=1/K;return W2.elements[0]*=q,W2.elements[1]*=q,W2.elements[2]*=q,W2.elements[4]*=G,W2.elements[5]*=G,W2.elements[6]*=G,W2.elements[8]*=Y,W2.elements[9]*=Y,W2.elements[10]*=Y,Q.setFromRotationMatrix(W2),B.x=I,B.y=E,B.z=K,this}makePerspective(A,Q,B,C,I,E,K=2000){const J=this.elements,q=2*I/(Q-A),G=2*I/(B-C),Y=(Q+A)/(Q-A),H=(B+C)/(B-C);let Z,X;if(K===2000)Z=-(E+I)/(E-I),X=-2*E*I/(E-I);else if(K===2001)Z=-E/(E-I),X=-E*I/(E-I);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+K);return J[0]=q,J[4]=0,J[8]=Y,J[12]=0,J[1]=0,J[5]=G,J[9]=H,J[13]=0,J[2]=0,J[6]=0,J[10]=Z,J[14]=X,J[3]=0,J[7]=0,J[11]=-1,J[15]=0,this}makeOrthographic(A,Q,B,C,I,E,K=2000){const J=this.elements,q=1/(Q-A),G=1/(B-C),Y=1/(E-I),H=(Q+A)*q,Z=(B+C)*G;let X,U;if(K===2000)X=(E+I)*Y,U=-2*Y;else if(K===2001)X=I*Y,U=-1*Y;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+K);return J[0]=2*q,J[4]=0,J[8]=0,J[12]=-H,J[1]=0,J[5]=2*G,J[9]=0,J[13]=-Z,J[2]=0,J[6]=0,J[10]=U,J[14]=-X,J[3]=0,J[7]=0,J[11]=0,J[15]=1,this}equals(A){const Q=this.elements,B=A.elements;for(let C=0;C<16;C++)if(Q[C]!==B[C])return!1;return!0}fromArray(A,Q=0){for(let B=0;B<16;B++)this.elements[B]=A[B+Q];return this}toArray(A=[],Q=0){const B=this.elements;return A[Q]=B[0],A[Q+1]=B[1],A[Q+2]=B[2],A[Q+3]=B[3],A[Q+4]=B[4],A[Q+5]=B[5],A[Q+6]=B[6],A[Q+7]=B[7],A[Q+8]=B[8],A[Q+9]=B[9],A[Q+10]=B[10],A[Q+11]=B[11],A[Q+12]=B[12],A[Q+13]=B[13],A[Q+14]=B[14],A[Q+15]=B[15],A}}var G8=new P,W2=new zA,IR=new P(0,0,0),ER=new P(1,1,1),j4=new P,X9=new P,o1=new P,aq=new zA,rq=new v0;class u1{constructor(A=0,Q=0,B=0,C=u1.DEFAULT_ORDER){this.isEuler=!0,this._x=A,this._y=Q,this._z=B,this._order=C}get x(){return this._x}set x(A){this._x=A,this._onChangeCallback()}get y(){return this._y}set y(A){this._y=A,this._onChangeCallback()}get z(){return this._z}set z(A){this._z=A,this._onChangeCallback()}get order(){return this._order}set order(A){this._order=A,this._onChangeCallback()}set(A,Q,B,C=this._order){return this._x=A,this._y=Q,this._z=B,this._order=C,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(A){return this._x=A._x,this._y=A._y,this._z=A._z,this._order=A._order,this._onChangeCallback(),this}setFromRotationMatrix(A,Q=this._order,B=!0){const C=A.elements,I=C[0],E=C[4],K=C[8],J=C[1],q=C[5],G=C[9],Y=C[2],H=C[6],Z=C[10];switch(Q){case"XYZ":if(this._y=Math.asin(I1(K,-1,1)),Math.abs(K)<0.9999999)this._x=Math.atan2(-G,Z),this._z=Math.atan2(-E,I);else this._x=Math.atan2(H,q),this._z=0;break;case"YXZ":if(this._x=Math.asin(-I1(G,-1,1)),Math.abs(G)<0.9999999)this._y=Math.atan2(K,Z),this._z=Math.atan2(J,q);else this._y=Math.atan2(-Y,I),this._z=0;break;case"ZXY":if(this._x=Math.asin(I1(H,-1,1)),Math.abs(H)<0.9999999)this._y=Math.atan2(-Y,Z),this._z=Math.atan2(-E,q);else this._y=0,this._z=Math.atan2(J,I);break;case"ZYX":if(this._y=Math.asin(-I1(Y,-1,1)),Math.abs(Y)<0.9999999)this._x=Math.atan2(H,Z),this._z=Math.atan2(J,I);else this._x=0,this._z=Math.atan2(-E,q);break;case"YZX":if(this._z=Math.asin(I1(J,-1,1)),Math.abs(J)<0.9999999)this._x=Math.atan2(-G,q),this._y=Math.atan2(-Y,I);else this._x=0,this._y=Math.atan2(K,Z);break;case"XZY":if(this._z=Math.asin(-I1(E,-1,1)),Math.abs(E)<0.9999999)this._x=Math.atan2(H,q),this._y=Math.atan2(K,I);else this._x=Math.atan2(-G,Z),this._y=0;break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+Q)}if(this._order=Q,B===!0)this._onChangeCallback();return this}setFromQuaternion(A,Q,B){return aq.makeRotationFromQuaternion(A),this.setFromRotationMatrix(aq,Q,B)}setFromVector3(A,Q=this._order){return this.set(A.x,A.y,A.z,Q)}reorder(A){return rq.setFromEuler(this),this.setFromQuaternion(rq,A)}equals(A){return A._x===this._x&&A._y===this._y&&A._z===this._z&&A._order===this._order}fromArray(A){if(this._x=A[0],this._y=A[1],this._z=A[2],A[3]!==void 0)this._order=A[3];return this._onChangeCallback(),this}toArray(A=[],Q=0){return A[Q]=this._x,A[Q+1]=this._y,A[Q+2]=this._z,A[Q+3]=this._order,A}_onChange(A){return this._onChangeCallback=A,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}u1.DEFAULT_ORDER="XYZ";class d9{constructor(){this.mask=1|0}set(A){this.mask=(1<<A|0)>>>0}enable(A){this.mask|=1<<A|0}enableAll(){this.mask=4294967295|0}toggle(A){this.mask^=1<<A|0}disable(A){this.mask&=~(1<<A|0)}disableAll(){this.mask=0}test(A){return(this.mask&A.mask)!==0}isEnabled(A){return(this.mask&(1<<A|0))!==0}}var KR=0,tq=new P,Y8=new v0,I4=new zA,F9=new P,B3=new P,JR=new P,qR=new v0,eq=new P(1,0,0),AG=new P(0,1,0),QG=new P(0,0,1),GR={type:"added"},YR={type:"removed"},IC={type:"childadded",child:null},EC={type:"childremoved",child:null};class F0 extends K1{constructor(){super();this.isObject3D=!0,Object.defineProperty(this,"id",{value:KR++}),this.uuid=R2(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=F0.DEFAULT_UP.clone();const A=new P,Q=new u1,B=new v0,C=new P(1,1,1);function I(){B.setFromEuler(Q,!1)}function E(){Q.setFromQuaternion(B,void 0,!1)}Q._onChange(I),B._onChange(E),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:A},rotation:{configurable:!0,enumerable:!0,value:Q},quaternion:{configurable:!0,enumerable:!0,value:B},scale:{configurable:!0,enumerable:!0,value:C},modelViewMatrix:{value:new zA},normalMatrix:{value:new fA}}),this.matrix=new zA,this.matrixWorld=new zA,this.matrixAutoUpdate=F0.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=F0.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new d9,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(A){if(this.matrixAutoUpdate)this.updateMatrix();this.matrix.premultiply(A),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(A){return this.quaternion.premultiply(A),this}setRotationFromAxisAngle(A,Q){this.quaternion.setFromAxisAngle(A,Q)}setRotationFromEuler(A){this.quaternion.setFromEuler(A,!0)}setRotationFromMatrix(A){this.quaternion.setFromRotationMatrix(A)}setRotationFromQuaternion(A){this.quaternion.copy(A)}rotateOnAxis(A,Q){return Y8.setFromAxisAngle(A,Q),this.quaternion.multiply(Y8),this}rotateOnWorldAxis(A,Q){return Y8.setFromAxisAngle(A,Q),this.quaternion.premultiply(Y8),this}rotateX(A){return this.rotateOnAxis(eq,A)}rotateY(A){return this.rotateOnAxis(AG,A)}rotateZ(A){return this.rotateOnAxis(QG,A)}translateOnAxis(A,Q){return tq.copy(A).applyQuaternion(this.quaternion),this.position.add(tq.multiplyScalar(Q)),this}translateX(A){return this.translateOnAxis(eq,A)}translateY(A){return this.translateOnAxis(AG,A)}translateZ(A){return this.translateOnAxis(QG,A)}localToWorld(A){return this.updateWorldMatrix(!0,!1),A.applyMatrix4(this.matrixWorld)}worldToLocal(A){return this.updateWorldMatrix(!0,!1),A.applyMatrix4(I4.copy(this.matrixWorld).invert())}lookAt(A,Q,B){if(A.isVector3)F9.copy(A);else F9.set(A,Q,B);const C=this.parent;if(this.updateWorldMatrix(!0,!1),B3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight)I4.lookAt(B3,F9,this.up);else I4.lookAt(F9,B3,this.up);if(this.quaternion.setFromRotationMatrix(I4),C)I4.extractRotation(C.matrixWorld),Y8.setFromRotationMatrix(I4),this.quaternion.premultiply(Y8.invert())}add(A){if(arguments.length>1){for(let Q=0;Q<arguments.length;Q++)this.add(arguments[Q]);return this}if(A===this)return console.error("THREE.Object3D.add: object can\'t be added as a child of itself.",A),this;if(A&&A.isObject3D){if(A.parent!==null)A.parent.remove(A);A.parent=this,this.children.push(A),A.dispatchEvent(GR),IC.child=A,this.dispatchEvent(IC),IC.child=null}else console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",A);return this}remove(A){if(arguments.length>1){for(let B=0;B<arguments.length;B++)this.remove(arguments[B]);return this}const Q=this.children.indexOf(A);if(Q!==-1)A.parent=null,this.children.splice(Q,1),A.dispatchEvent(YR),EC.child=A,this.dispatchEvent(EC),EC.child=null;return this}removeFromParent(){const A=this.parent;if(A!==null)A.remove(this);return this}clear(){return this.remove(...this.children)}attach(A){if(this.updateWorldMatrix(!0,!1),I4.copy(this.matrixWorld).invert(),A.parent!==null)A.parent.updateWorldMatrix(!0,!1),I4.multiply(A.parent.matrixWorld);return A.applyMatrix4(I4),this.add(A),A.updateWorldMatrix(!1,!0),this}getObjectById(A){return this.getObjectByProperty("id",A)}getObjectByName(A){return this.getObjectByProperty("name",A)}getObjectByProperty(A,Q){if(this[A]===Q)return this;for(let B=0,C=this.children.length;B<C;B++){const E=this.children[B].getObjectByProperty(A,Q);if(E!==void 0)return E}return}getObjectsByProperty(A,Q,B=[]){if(this[A]===Q)B.push(this);const C=this.children;for(let I=0,E=C.length;I<E;I++)C[I].getObjectsByProperty(A,Q,B);return B}getWorldPosition(A){return this.updateWorldMatrix(!0,!1),A.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(A){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(B3,A,JR),A}getWorldScale(A){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(B3,qR,A),A}getWorldDirection(A){this.updateWorldMatrix(!0,!1);const Q=this.matrixWorld.elements;return A.set(Q[8],Q[9],Q[10]).normalize()}raycast(){}traverse(A){A(this);const Q=this.children;for(let B=0,C=Q.length;B<C;B++)Q[B].traverse(A)}traverseVisible(A){if(this.visible===!1)return;A(this);const Q=this.children;for(let B=0,C=Q.length;B<C;B++)Q[B].traverseVisible(A)}traverseAncestors(A){const Q=this.parent;if(Q!==null)A(Q),Q.traverseAncestors(A)}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(A){if(this.matrixAutoUpdate)this.updateMatrix();if(this.matrixWorldNeedsUpdate||A){if(this.parent===null)this.matrixWorld.copy(this.matrix);else this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix);this.matrixWorldNeedsUpdate=!1,A=!0}const Q=this.children;for(let B=0,C=Q.length;B<C;B++){const I=Q[B];if(I.matrixWorldAutoUpdate===!0||A===!0)I.updateMatrixWorld(A)}}updateWorldMatrix(A,Q){const B=this.parent;if(A===!0&&B!==null&&B.matrixWorldAutoUpdate===!0)B.updateWorldMatrix(!0,!1);if(this.matrixAutoUpdate)this.updateMatrix();if(this.parent===null)this.matrixWorld.copy(this.matrix);else this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix);if(Q===!0){const C=this.children;for(let I=0,E=C.length;I<E;I++){const K=C[I];if(K.matrixWorldAutoUpdate===!0)K.updateWorldMatrix(!1,!0)}}}toJSON(A){const Q=A===void 0||typeof A==="string",B={};if(Q)A={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},B.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"};const C={};if(C.uuid=this.uuid,C.type=this.type,this.name!=="")C.name=this.name;if(this.castShadow===!0)C.castShadow=!0;if(this.receiveShadow===!0)C.receiveShadow=!0;if(this.visible===!1)C.visible=!1;if(this.frustumCulled===!1)C.frustumCulled=!1;if(this.renderOrder!==0)C.renderOrder=this.renderOrder;if(Object.keys(this.userData).length>0)C.userData=this.userData;if(C.layers=this.layers.mask,C.matrix=this.matrix.toArray(),C.up=this.up.toArray(),this.matrixAutoUpdate===!1)C.matrixAutoUpdate=!1;if(this.isInstancedMesh){if(C.type="InstancedMesh",C.count=this.count,C.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null)C.instanceColor=this.instanceColor.toJSON()}if(this.isBatchedMesh){if(C.type="BatchedMesh",C.perObjectFrustumCulled=this.perObjectFrustumCulled,C.sortObjects=this.sortObjects,C.drawRanges=this._drawRanges,C.reservedRanges=this._reservedRanges,C.visibility=this._visibility,C.active=this._active,C.bounds=this._bounds.map((K)=>({boxInitialized:K.boxInitialized,boxMin:K.box.min.toArray(),boxMax:K.box.max.toArray(),sphereInitialized:K.sphereInitialized,sphereRadius:K.sphere.radius,sphereCenter:K.sphere.center.toArray()})),C.maxGeometryCount=this._maxGeometryCount,C.maxVertexCount=this._maxVertexCount,C.maxIndexCount=this._maxIndexCount,C.geometryInitialized=this._geometryInitialized,C.geometryCount=this._geometryCount,C.matricesTexture=this._matricesTexture.toJSON(A),this.boundingSphere!==null)C.boundingSphere={center:C.boundingSphere.center.toArray(),radius:C.boundingSphere.radius};if(this.boundingBox!==null)C.boundingBox={min:C.boundingBox.min.toArray(),max:C.boundingBox.max.toArray()}}function I(K,J){if(K[J.uuid]===void 0)K[J.uuid]=J.toJSON(A);return J.uuid}if(this.isScene){if(this.background){if(this.background.isColor)C.background=this.background.toJSON();else if(this.background.isTexture)C.background=this.background.toJSON(A).uuid}if(this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0)C.environment=this.environment.toJSON(A).uuid}else if(this.isMesh||this.isLine||this.isPoints){C.geometry=I(A.geometries,this.geometry);const K=this.geometry.parameters;if(K!==void 0&&K.shapes!==void 0){const J=K.shapes;if(Array.isArray(J))for(let q=0,G=J.length;q<G;q++){const Y=J[q];I(A.shapes,Y)}else I(A.shapes,J)}}if(this.isSkinnedMesh){if(C.bindMode=this.bindMode,C.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0)I(A.skeletons,this.skeleton),C.skeleton=this.skeleton.uuid}if(this.material!==void 0)if(Array.isArray(this.material)){const K=[];for(let J=0,q=this.material.length;J<q;J++)K.push(I(A.materials,this.material[J]));C.material=K}else C.material=I(A.materials,this.material);if(this.children.length>0){C.children=[];for(let K=0;K<this.children.length;K++)C.children.push(this.children[K].toJSON(A).object)}if(this.animations.length>0){C.animations=[];for(let K=0;K<this.animations.length;K++){const J=this.animations[K];C.animations.push(I(A.animations,J))}}if(Q){const K=E(A.geometries),J=E(A.materials),q=E(A.textures),G=E(A.images),Y=E(A.shapes),H=E(A.skeletons),Z=E(A.animations),X=E(A.nodes);if(K.length>0)B.geometries=K;if(J.length>0)B.materials=J;if(q.length>0)B.textures=q;if(G.length>0)B.images=G;if(Y.length>0)B.shapes=Y;if(H.length>0)B.skeletons=H;if(Z.length>0)B.animations=Z;if(X.length>0)B.nodes=X}return B.object=C,B;function E(K){const J=[];for(let q in K){const G=K[q];delete G.metadata,J.push(G)}return J}}clone(A){return new this.constructor().copy(this,A)}copy(A,Q=!0){if(this.name=A.name,this.up.copy(A.up),this.position.copy(A.position),this.rotation.order=A.rotation.order,this.quaternion.copy(A.quaternion),this.scale.copy(A.scale),this.matrix.copy(A.matrix),this.matrixWorld.copy(A.matrixWorld),this.matrixAutoUpdate=A.matrixAutoUpdate,this.matrixWorldAutoUpdate=A.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=A.matrixWorldNeedsUpdate,this.layers.mask=A.layers.mask,this.visible=A.visible,this.castShadow=A.castShadow,this.receiveShadow=A.receiveShadow,this.frustumCulled=A.frustumCulled,this.renderOrder=A.renderOrder,this.animations=A.animations.slice(),this.userData=JSON.parse(JSON.stringify(A.userData)),Q===!0)for(let B=0;B<A.children.length;B++){const C=A.children[B];this.add(C.clone())}return this}}F0.DEFAULT_UP=new P(0,1,0);F0.DEFAULT_MATRIX_AUTO_UPDATE=!0;F0.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var U2=new P,E4=new P,KC=new P,K4=new P,H8=new P,Z8=new P,BG=new P,JC=new P,qC=new P,GC=new P;class p1{constructor(A=new P,Q=new P,B=new P){this.a=A,this.b=Q,this.c=B}static getNormal(A,Q,B,C){C.subVectors(B,Q),U2.subVectors(A,Q),C.cross(U2);const I=C.lengthSq();if(I>0)return C.multiplyScalar(1/Math.sqrt(I));return C.set(0,0,0)}static getBarycoord(A,Q,B,C,I){U2.subVectors(C,Q),E4.subVectors(B,Q),KC.subVectors(A,Q);const E=U2.dot(U2),K=U2.dot(E4),J=U2.dot(KC),q=E4.dot(E4),G=E4.dot(KC),Y=E*q-K*K;if(Y===0)return I.set(0,0,0),null;const H=1/Y,Z=(q*J-K*G)*H,X=(E*G-K*J)*H;return I.set(1-Z-X,X,Z)}static containsPoint(A,Q,B,C){if(this.getBarycoord(A,Q,B,C,K4)===null)return!1;return K4.x>=0&&K4.y>=0&&K4.x+K4.y<=1}static getInterpolation(A,Q,B,C,I,E,K,J){if(this.getBarycoord(A,Q,B,C,K4)===null){if(J.x=0,J.y=0,"z"in J)J.z=0;if("w"in J)J.w=0;return null}return J.setScalar(0),J.addScaledVector(I,K4.x),J.addScaledVector(E,K4.y),J.addScaledVector(K,K4.z),J}static isFrontFacing(A,Q,B,C){return U2.subVectors(B,Q),E4.subVectors(A,Q),U2.cross(E4).dot(C)<0?!0:!1}set(A,Q,B){return this.a.copy(A),this.b.copy(Q),this.c.copy(B),this}setFromPointsAndIndices(A,Q,B,C){return this.a.copy(A[Q]),this.b.copy(A[B]),this.c.copy(A[C]),this}setFromAttributeAndIndices(A,Q,B,C){return this.a.fromBufferAttribute(A,Q),this.b.fromBufferAttribute(A,B),this.c.fromBufferAttribute(A,C),this}clone(){return new this.constructor().copy(this)}copy(A){return this.a.copy(A.a),this.b.copy(A.b),this.c.copy(A.c),this}getArea(){return U2.subVectors(this.c,this.b),E4.subVectors(this.a,this.b),U2.cross(E4).length()*0.5}getMidpoint(A){return A.addVectors(this.a,this.b).add(this.c).multiplyScalar(0.3333333333333333)}getNormal(A){return p1.getNormal(this.a,this.b,this.c,A)}getPlane(A){return A.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(A,Q){return p1.getBarycoord(A,this.a,this.b,this.c,Q)}getInterpolation(A,Q,B,C,I){return p1.getInterpolation(A,this.a,this.b,this.c,Q,B,C,I)}containsPoint(A){return p1.containsPoint(A,this.a,this.b,this.c)}isFrontFacing(A){return p1.isFrontFacing(this.a,this.b,this.c,A)}intersectsBox(A){return A.intersectsTriangle(this)}closestPointToPoint(A,Q){const B=this.a,C=this.b,I=this.c;let E,K;H8.subVectors(C,B),Z8.subVectors(I,B),JC.subVectors(A,B);const J=H8.dot(JC),q=Z8.dot(JC);if(J<=0&&q<=0)return Q.copy(B);qC.subVectors(A,C);const G=H8.dot(qC),Y=Z8.dot(qC);if(G>=0&&Y<=G)return Q.copy(C);const H=J*Y-G*q;if(H<=0&&J>=0&&G<=0)return E=J/(J-G),Q.copy(B).addScaledVector(H8,E);GC.subVectors(A,I);const Z=H8.dot(GC),X=Z8.dot(GC);if(X>=0&&Z<=X)return Q.copy(I);const U=Z*q-J*X;if(U<=0&&q>=0&&X<=0)return K=q/(q-X),Q.copy(B).addScaledVector(Z8,K);const F=G*X-Z*Y;if(F<=0&&Y-G>=0&&Z-X>=0)return BG.subVectors(I,C),K=(Y-G)/(Y-G+(Z-X)),Q.copy(C).addScaledVector(BG,K);const W=1/(F+U+H);return E=U*W,K=H*W,Q.copy(B).addScaledVector(H8,E).addScaledVector(Z8,K)}equals(A){return A.a.equals(this.a)&&A.b.equals(this.b)&&A.c.equals(this.c)}}var wY={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},g4={h:0,s:0,l:0},W9={h:0,s:0,l:0};class PA{constructor(A,Q,B){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(A,Q,B)}set(A,Q,B){if(Q===void 0&&B===void 0){const C=A;if(C&&C.isColor)this.copy(C);else if(typeof C==="number")this.setHex(C);else if(typeof C==="string")this.setStyle(C)}else this.setRGB(A,Q,B);return this}setScalar(A){return this.r=A,this.g=A,this.b=A,this}setHex(A,Q="srgb"){return A=Math.floor(A),this.r=(A>>16&255)/255,this.g=(A>>8&255)/255,this.b=(A&255)/255,W0.toWorkingColorSpace(this,Q),this}setRGB(A,Q,B,C=W0.workingColorSpace){return this.r=A,this.g=Q,this.b=B,W0.toWorkingColorSpace(this,C),this}setHSL(A,Q,B,C=W0.workingColorSpace){if(A=TC(A,1),Q=I1(Q,0,1),B=I1(B,0,1),Q===0)this.r=this.g=this.b=B;else{const I=B<=0.5?B*(1+Q):B+Q-B*Q,E=2*B-I;this.r=YC(E,I,A+0.3333333333333333),this.g=YC(E,I,A),this.b=YC(E,I,A-0.3333333333333333)}return W0.toWorkingColorSpace(this,C),this}setStyle(A,Q="srgb"){function B(I){if(I===void 0)return;if(parseFloat(I)<1)console.warn("THREE.Color: Alpha component of "+A+" will be ignored.")}let C;if(C=/^(\w+)\(([^\)]*)\)/.exec(A)){let I;const E=C[1],K=C[2];switch(E){case"rgb":case"rgba":if(I=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(K))return B(I[4]),this.setRGB(Math.min(255,parseInt(I[1],10))/255,Math.min(255,parseInt(I[2],10))/255,Math.min(255,parseInt(I[3],10))/255,Q);if(I=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(K))return B(I[4]),this.setRGB(Math.min(100,parseInt(I[1],10))/100,Math.min(100,parseInt(I[2],10))/100,Math.min(100,parseInt(I[3],10))/100,Q);break;case"hsl":case"hsla":if(I=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(K))return B(I[4]),this.setHSL(parseFloat(I[1])/360,parseFloat(I[2])/100,parseFloat(I[3])/100,Q);break;default:console.warn("THREE.Color: Unknown color model "+A)}}else if(C=/^\#([A-Fa-f\d]+)$/.exec(A)){const I=C[1],E=I.length;if(E===3)return this.setRGB(parseInt(I.charAt(0),16)/15,parseInt(I.charAt(1),16)/15,parseInt(I.charAt(2),16)/15,Q);else if(E===6)return this.setHex(parseInt(I,16),Q);else console.warn("THREE.Color: Invalid hex color "+A)}else if(A&&A.length>0)return this.setColorName(A,Q);return this}setColorName(A,Q="srgb"){const B=wY[A.toLowerCase()];if(B!==void 0)this.setHex(B,Q);else console.warn("THREE.Color: Unknown color "+A);return this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(A){return this.r=A.r,this.g=A.g,this.b=A.b,this}copySRGBToLinear(A){return this.r=L8(A.r),this.g=L8(A.g),this.b=L8(A.b),this}copyLinearToSRGB(A){return this.r=aB(A.r),this.g=aB(A.g),this.b=aB(A.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(A="srgb"){return W0.fromWorkingColorSpace(R1.copy(this),A),Math.round(I1(R1.r*255,0,255))*65536+Math.round(I1(R1.g*255,0,255))*256+Math.round(I1(R1.b*255,0,255))}getHexString(A="srgb"){return("000000"+this.getHex(A).toString(16)).slice(-6)}getHSL(A,Q=W0.workingColorSpace){W0.fromWorkingColorSpace(R1.copy(this),Q);const{r:B,g:C,b:I}=R1,E=Math.max(B,C,I),K=Math.min(B,C,I);let J,q;const G=(K+E)/2;if(K===E)J=0,q=0;else{const Y=E-K;switch(q=G<=0.5?Y/(E+K):Y/(2-E-K),E){case B:J=(C-I)/Y+(C<I?6:0);break;case C:J=(I-B)/Y+2;break;case I:J=(B-C)/Y+4;break}J/=6}return A.h=J,A.s=q,A.l=G,A}getRGB(A,Q=W0.workingColorSpace){return W0.fromWorkingColorSpace(R1.copy(this),Q),A.r=R1.r,A.g=R1.g,A.b=R1.b,A}getStyle(A="srgb"){W0.fromWorkingColorSpace(R1.copy(this),A);const{r:Q,g:B,b:C}=R1;if(A!=="srgb")return`color(${A} ${Q.toFixed(3)} ${B.toFixed(3)} ${C.toFixed(3)})`;return`rgb(${Math.round(Q*255)},${Math.round(B*255)},${Math.round(C*255)})`}offsetHSL(A,Q,B){return this.getHSL(g4),this.setHSL(g4.h+A,g4.s+Q,g4.l+B)}add(A){return this.r+=A.r,this.g+=A.g,this.b+=A.b,this}addColors(A,Q){return this.r=A.r+Q.r,this.g=A.g+Q.g,this.b=A.b+Q.b,this}addScalar(A){return this.r+=A,this.g+=A,this.b+=A,this}sub(A){return this.r=Math.max(0,this.r-A.r),this.g=Math.max(0,this.g-A.g),this.b=Math.max(0,this.b-A.b),this}multiply(A){return this.r*=A.r,this.g*=A.g,this.b*=A.b,this}multiplyScalar(A){return this.r*=A,this.g*=A,this.b*=A,this}lerp(A,Q){return this.r+=(A.r-this.r)*Q,this.g+=(A.g-this.g)*Q,this.b+=(A.b-this.b)*Q,this}lerpColors(A,Q,B){return this.r=A.r+(Q.r-A.r)*B,this.g=A.g+(Q.g-A.g)*B,this.b=A.b+(Q.b-A.b)*B,this}lerpHSL(A,Q){this.getHSL(g4),A.getHSL(W9);const B=q3(g4.h,W9.h,Q),C=q3(g4.s,W9.s,Q),I=q3(g4.l,W9.l,Q);return this.setHSL(B,C,I),this}setFromVector3(A){return this.r=A.x,this.g=A.y,this.b=A.z,this}applyMatrix3(A){const Q=this.r,B=this.g,C=this.b,I=A.elements;return this.r=I[0]*Q+I[3]*B+I[6]*C,this.g=I[1]*Q+I[4]*B+I[7]*C,this.b=I[2]*Q+I[5]*B+I[8]*C,this}equals(A){return A.r===this.r&&A.g===this.g&&A.b===this.b}fromArray(A,Q=0){return this.r=A[Q],this.g=A[Q+1],this.b=A[Q+2],this}toArray(A=[],Q=0){return A[Q]=this.r,A[Q+1]=this.g,A[Q+2]=this.b,A}fromBufferAttribute(A,Q){return this.r=A.getX(Q),this.g=A.getY(Q),this.b=A.getZ(Q),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}var R1=new PA;PA.NAMES=wY;var HR=0;class m1 extends K1{constructor(){super();this.isMaterial=!0,Object.defineProperty(this,"id",{value:HR++}),this.uuid=R2(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new PA(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(A){if(this._alphaTest>0!==A>0)this.version++;this._alphaTest=A}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(A){if(A===void 0)return;for(let Q in A){const B=A[Q];if(B===void 0){console.warn(`THREE.Material: parameter '${Q}' has value of undefined.`);continue}const C=this[Q];if(C===void 0){console.warn(`THREE.Material: '${Q}' is not a property of THREE.${this.type}.`);continue}if(C&&C.isColor)C.set(B);else if(C&&C.isVector3&&(B&&B.isVector3))C.copy(B);else this[Q]=B}}toJSON(A){const Q=A===void 0||typeof A==="string";if(Q)A={textures:{},images:{}};const B={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};if(B.uuid=this.uuid,B.type=this.type,this.name!=="")B.name=this.name;if(this.color&&this.color.isColor)B.color=this.color.getHex();if(this.roughness!==void 0)B.roughness=this.roughness;if(this.metalness!==void 0)B.metalness=this.metalness;if(this.sheen!==void 0)B.sheen=this.sheen;if(this.sheenColor&&this.sheenColor.isColor)B.sheenColor=this.sheenColor.getHex();if(this.sheenRoughness!==void 0)B.sheenRoughness=this.sheenRoughness;if(this.emissive&&this.emissive.isColor)B.emissive=this.emissive.getHex();if(this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1)B.emissiveIntensity=this.emissiveIntensity;if(this.specular&&this.specular.isColor)B.specular=this.specular.getHex();if(this.specularIntensity!==void 0)B.specularIntensity=this.specularIntensity;if(this.specularColor&&this.specularColor.isColor)B.specularColor=this.specularColor.getHex();if(this.shininess!==void 0)B.shininess=this.shininess;if(this.clearcoat!==void 0)B.clearcoat=this.clearcoat;if(this.clearcoatRoughness!==void 0)B.clearcoatRoughness=this.clearcoatRoughness;if(this.clearcoatMap&&this.clearcoatMap.isTexture)B.clearcoatMap=this.clearcoatMap.toJSON(A).uuid;if(this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture)B.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(A).uuid;if(this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture)B.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(A).uuid,B.clearcoatNormalScale=this.clearcoatNormalScale.toArray();if(this.iridescence!==void 0)B.iridescence=this.iridescence;if(this.iridescenceIOR!==void 0)B.iridescenceIOR=this.iridescenceIOR;if(this.iridescenceThicknessRange!==void 0)B.iridescenceThicknessRange=this.iridescenceThicknessRange;if(this.iridescenceMap&&this.iridescenceMap.isTexture)B.iridescenceMap=this.iridescenceMap.toJSON(A).uuid;if(this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture)B.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(A).uuid;if(this.anisotropy!==void 0)B.anisotropy=this.anisotropy;if(this.anisotropyRotation!==void 0)B.anisotropyRotation=this.anisotropyRotation;if(this.anisotropyMap&&this.anisotropyMap.isTexture)B.anisotropyMap=this.anisotropyMap.toJSON(A).uuid;if(this.map&&this.map.isTexture)B.map=this.map.toJSON(A).uuid;if(this.matcap&&this.matcap.isTexture)B.matcap=this.matcap.toJSON(A).uuid;if(this.alphaMap&&this.alphaMap.isTexture)B.alphaMap=this.alphaMap.toJSON(A).uuid;if(this.lightMap&&this.lightMap.isTexture)B.lightMap=this.lightMap.toJSON(A).uuid,B.lightMapIntensity=this.lightMapIntensity;if(this.aoMap&&this.aoMap.isTexture)B.aoMap=this.aoMap.toJSON(A).uuid,B.aoMapIntensity=this.aoMapIntensity;if(this.bumpMap&&this.bumpMap.isTexture)B.bumpMap=this.bumpMap.toJSON(A).uuid,B.bumpScale=this.bumpScale;if(this.normalMap&&this.normalMap.isTexture)B.normalMap=this.normalMap.toJSON(A).uuid,B.normalMapType=this.normalMapType,B.normalScale=this.normalScale.toArray();if(this.displacementMap&&this.displacementMap.isTexture)B.displacementMap=this.displacementMap.toJSON(A).uuid,B.displacementScale=this.displacementScale,B.displacementBias=this.displacementBias;if(this.roughnessMap&&this.roughnessMap.isTexture)B.roughnessMap=this.roughnessMap.toJSON(A).uuid;if(this.metalnessMap&&this.metalnessMap.isTexture)B.metalnessMap=this.metalnessMap.toJSON(A).uuid;if(this.emissiveMap&&this.emissiveMap.isTexture)B.emissiveMap=this.emissiveMap.toJSON(A).uuid;if(this.specularMap&&this.specularMap.isTexture)B.specularMap=this.specularMap.toJSON(A).uuid;if(this.specularIntensityMap&&this.specularIntensityMap.isTexture)B.specularIntensityMap=this.specularIntensityMap.toJSON(A).uuid;if(this.specularColorMap&&this.specularColorMap.isTexture)B.specularColorMap=this.specularColorMap.toJSON(A).uuid;if(this.envMap&&this.envMap.isTexture){if(B.envMap=this.envMap.toJSON(A).uuid,this.combine!==void 0)B.combine=this.combine}if(this.envMapRotation!==void 0)B.envMapRotation=this.envMapRotation.toArray();if(this.envMapIntensity!==void 0)B.envMapIntensity=this.envMapIntensity;if(this.reflectivity!==void 0)B.reflectivity=this.reflectivity;if(this.refractionRatio!==void 0)B.refractionRatio=this.refractionRatio;if(this.gradientMap&&this.gradientMap.isTexture)B.gradientMap=this.gradientMap.toJSON(A).uuid;if(this.transmission!==void 0)B.transmission=this.transmission;if(this.transmissionMap&&this.transmissionMap.isTexture)B.transmissionMap=this.transmissionMap.toJSON(A).uuid;if(this.thickness!==void 0)B.thickness=this.thickness;if(this.thicknessMap&&this.thicknessMap.isTexture)B.thicknessMap=this.thicknessMap.toJSON(A).uuid;if(this.attenuationDistance!==void 0&&this.attenuationDistance!==Infinity)B.attenuationDistance=this.attenuationDistance;if(this.attenuationColor!==void 0)B.attenuationColor=this.attenuationColor.getHex();if(this.size!==void 0)B.size=this.size;if(this.shadowSide!==null)B.shadowSide=this.shadowSide;if(this.sizeAttenuation!==void 0)B.sizeAttenuation=this.sizeAttenuation;if(this.blending!==1)B.blending=this.blending;if(this.side!==0)B.side=this.side;if(this.vertexColors===!0)B.vertexColors=!0;if(this.opacity<1)B.opacity=this.opacity;if(this.transparent===!0)B.transparent=!0;if(this.blendSrc!==204)B.blendSrc=this.blendSrc;if(this.blendDst!==205)B.blendDst=this.blendDst;if(this.blendEquation!==100)B.blendEquation=this.blendEquation;if(this.blendSrcAlpha!==null)B.blendSrcAlpha=this.blendSrcAlpha;if(this.blendDstAlpha!==null)B.blendDstAlpha=this.blendDstAlpha;if(this.blendEquationAlpha!==null)B.blendEquationAlpha=this.blendEquationAlpha;if(this.blendColor&&this.blendColor.isColor)B.blendColor=this.blendColor.getHex();if(this.blendAlpha!==0)B.blendAlpha=this.blendAlpha;if(this.depthFunc!==3)B.depthFunc=this.depthFunc;if(this.depthTest===!1)B.depthTest=this.depthTest;if(this.depthWrite===!1)B.depthWrite=this.depthWrite;if(this.colorWrite===!1)B.colorWrite=this.colorWrite;if(this.stencilWriteMask!==255)B.stencilWriteMask=this.stencilWriteMask;if(this.stencilFunc!==519)B.stencilFunc=this.stencilFunc;if(this.stencilRef!==0)B.stencilRef=this.stencilRef;if(this.stencilFuncMask!==255)B.stencilFuncMask=this.stencilFuncMask;if(this.stencilFail!==7680)B.stencilFail=this.stencilFail;if(this.stencilZFail!==7680)B.stencilZFail=this.stencilZFail;if(this.stencilZPass!==7680)B.stencilZPass=this.stencilZPass;if(this.stencilWrite===!0)B.stencilWrite=this.stencilWrite;if(this.rotation!==void 0&&this.rotation!==0)B.rotation=this.rotation;if(this.polygonOffset===!0)B.polygonOffset=!0;if(this.polygonOffsetFactor!==0)B.polygonOffsetFactor=this.polygonOffsetFactor;if(this.polygonOffsetUnits!==0)B.polygonOffsetUnits=this.polygonOffsetUnits;if(this.linewidth!==void 0&&this.linewidth!==1)B.linewidth=this.linewidth;if(this.dashSize!==void 0)B.dashSize=this.dashSize;if(this.gapSize!==void 0)B.gapSize=this.gapSize;if(this.scale!==void 0)B.scale=this.scale;if(this.dithering===!0)B.dithering=!0;if(this.alphaTest>0)B.alphaTest=this.alphaTest;if(this.alphaHash===!0)B.alphaHash=!0;if(this.alphaToCoverage===!0)B.alphaToCoverage=!0;if(this.premultipliedAlpha===!0)B.premultipliedAlpha=!0;if(this.forceSinglePass===!0)B.forceSinglePass=!0;if(this.wireframe===!0)B.wireframe=!0;if(this.wireframeLinewidth>1)B.wireframeLinewidth=this.wireframeLinewidth;if(this.wireframeLinecap!=="round")B.wireframeLinecap=this.wireframeLinecap;if(this.wireframeLinejoin!=="round")B.wireframeLinejoin=this.wireframeLinejoin;if(this.flatShading===!0)B.flatShading=!0;if(this.visible===!1)B.visible=!1;if(this.toneMapped===!1)B.toneMapped=!1;if(this.fog===!1)B.fog=!1;if(Object.keys(this.userData).length>0)B.userData=this.userData;function C(I){const E=[];for(let K in I){const J=I[K];delete J.metadata,E.push(J)}return E}if(Q){const I=C(A.textures),E=C(A.images);if(I.length>0)B.textures=I;if(E.length>0)B.images=E}return B}clone(){return new this.constructor().copy(this)}copy(A){this.name=A.name,this.blending=A.blending,this.side=A.side,this.vertexColors=A.vertexColors,this.opacity=A.opacity,this.transparent=A.transparent,this.blendSrc=A.blendSrc,this.blendDst=A.blendDst,this.blendEquation=A.blendEquation,this.blendSrcAlpha=A.blendSrcAlpha,this.blendDstAlpha=A.blendDstAlpha,this.blendEquationAlpha=A.blendEquationAlpha,this.blendColor.copy(A.blendColor),this.blendAlpha=A.blendAlpha,this.depthFunc=A.depthFunc,this.depthTest=A.depthTest,this.depthWrite=A.depthWrite,this.stencilWriteMask=A.stencilWriteMask,this.stencilFunc=A.stencilFunc,this.stencilRef=A.stencilRef,this.stencilFuncMask=A.stencilFuncMask,this.stencilFail=A.stencilFail,this.stencilZFail=A.stencilZFail,this.stencilZPass=A.stencilZPass,this.stencilWrite=A.stencilWrite;const Q=A.clippingPlanes;let B=null;if(Q!==null){const C=Q.length;B=new Array(C);for(let I=0;I!==C;++I)B[I]=Q[I].clone()}return this.clippingPlanes=B,this.clipIntersection=A.clipIntersection,this.clipShadows=A.clipShadows,this.shadowSide=A.shadowSide,this.colorWrite=A.colorWrite,this.precision=A.precision,this.polygonOffset=A.polygonOffset,this.polygonOffsetFactor=A.polygonOffsetFactor,this.polygonOffsetUnits=A.polygonOffsetUnits,this.dithering=A.dithering,this.alphaTest=A.alphaTest,this.alphaHash=A.alphaHash,this.alphaToCoverage=A.alphaToCoverage,this.premultipliedAlpha=A.premultipliedAlpha,this.forceSinglePass=A.forceSinglePass,this.visible=A.visible,this.toneMapped=A.toneMapped,this.userData=JSON.parse(JSON.stringify(A.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(A){if(A===!0)this.version++}}class b0 extends m1{constructor(A){super();this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new PA(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new u1,this.combine=0,this.reflectivity=1,this.refractionRatio=0.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(A)}copy(A){return super.copy(A),this.color.copy(A.color),this.map=A.map,this.lightMap=A.lightMap,this.lightMapIntensity=A.lightMapIntensity,this.aoMap=A.aoMap,this.aoMapIntensity=A.aoMapIntensity,this.specularMap=A.specularMap,this.alphaMap=A.alphaMap,this.envMap=A.envMap,this.envMapRotation.copy(A.envMapRotation),this.combine=A.combine,this.reflectivity=A.reflectivity,this.refractionRatio=A.refractionRatio,this.wireframe=A.wireframe,this.wireframeLinewidth=A.wireframeLinewidth,this.wireframeLinecap=A.wireframeLinecap,this.wireframeLinejoin=A.wireframeLinejoin,this.fog=A.fog,this}}var q4=ZR(),F3={toHalfFloat:XR,fromHalfFloat:FR},c0=new P,U9=new DA;class V0{constructor(A,Q,B=!1){if(Array.isArray(A))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=A,this.itemSize=Q,this.count=A!==void 0?A.length/Q:0,this.normalized=B,this.usage=35044,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=1015,this.version=0}onUploadCallback(){}set needsUpdate(A){if(A===!0)this.version++}get updateRange(){return VY("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(A){return this.usage=A,this}addUpdateRange(A,Q){this.updateRanges.push({start:A,count:Q})}clearUpdateRanges(){this.updateRanges.length=0}copy(A){return this.name=A.name,this.array=new A.array.constructor(A.array),this.itemSize=A.itemSize,this.count=A.count,this.normalized=A.normalized,this.usage=A.usage,this.gpuType=A.gpuType,this}copyAt(A,Q,B){A*=this.itemSize,B*=Q.itemSize;for(let C=0,I=this.itemSize;C<I;C++)this.array[A+C]=Q.array[B+C];return this}copyArray(A){return this.array.set(A),this}applyMatrix3(A){if(this.itemSize===2)for(let Q=0,B=this.count;Q<B;Q++)U9.fromBufferAttribute(this,Q),U9.applyMatrix3(A),this.setXY(Q,U9.x,U9.y);else if(this.itemSize===3)for(let Q=0,B=this.count;Q<B;Q++)c0.fromBufferAttribute(this,Q),c0.applyMatrix3(A),this.setXYZ(Q,c0.x,c0.y,c0.z);return this}applyMatrix4(A){for(let Q=0,B=this.count;Q<B;Q++)c0.fromBufferAttribute(this,Q),c0.applyMatrix4(A),this.setXYZ(Q,c0.x,c0.y,c0.z);return this}applyNormalMatrix(A){for(let Q=0,B=this.count;Q<B;Q++)c0.fromBufferAttribute(this,Q),c0.applyNormalMatrix(A),this.setXYZ(Q,c0.x,c0.y,c0.z);return this}transformDirection(A){for(let Q=0,B=this.count;Q<B;Q++)c0.fromBufferAttribute(this,Q),c0.transformDirection(A),this.setXYZ(Q,c0.x,c0.y,c0.z);return this}set(A,Q=0){return this.array.set(A,Q),this}getComponent(A,Q){let B=this.array[A*this.itemSize+Q];if(this.normalized)B=D2(B,this.array);return B}setComponent(A,Q,B){if(this.normalized)B=N0(B,this.array);return this.array[A*this.itemSize+Q]=B,this}getX(A){let Q=this.array[A*this.itemSize];if(this.normalized)Q=D2(Q,this.array);return Q}setX(A,Q){if(this.normalized)Q=N0(Q,this.array);return this.array[A*this.itemSize]=Q,this}getY(A){let Q=this.array[A*this.itemSize+1];if(this.normalized)Q=D2(Q,this.array);return Q}setY(A,Q){if(this.normalized)Q=N0(Q,this.array);return this.array[A*this.itemSize+1]=Q,this}getZ(A){let Q=this.array[A*this.itemSize+2];if(this.normalized)Q=D2(Q,this.array);return Q}setZ(A,Q){if(this.normalized)Q=N0(Q,this.array);return this.array[A*this.itemSize+2]=Q,this}getW(A){let Q=this.array[A*this.itemSize+3];if(this.normalized)Q=D2(Q,this.array);return Q}setW(A,Q){if(this.normalized)Q=N0(Q,this.array);return this.array[A*this.itemSize+3]=Q,this}setXY(A,Q,B){if(A*=this.itemSize,this.normalized)Q=N0(Q,this.array),B=N0(B,this.array);return this.array[A+0]=Q,this.array[A+1]=B,this}setXYZ(A,Q,B,C){if(A*=this.itemSize,this.normalized)Q=N0(Q,this.array),B=N0(B,this.array),C=N0(C,this.array);return this.array[A+0]=Q,this.array[A+1]=B,this.array[A+2]=C,this}setXYZW(A,Q,B,C,I){if(A*=this.itemSize,this.normalized)Q=N0(Q,this.array),B=N0(B,this.array),C=N0(C,this.array),I=N0(I,this.array);return this.array[A+0]=Q,this.array[A+1]=B,this.array[A+2]=C,this.array[A+3]=I,this}onUpload(A){return this.onUploadCallback=A,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const A={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};if(this.name!=="")A.name=this.name;if(this.usage!==35044)A.usage=this.usage;return A}}class yC extends V0{constructor(A,Q,B){super(new Uint16Array(A),Q,B)}}class xC extends V0{constructor(A,Q,B){super(new Uint32Array(A),Q,B)}}class V1 extends V0{constructor(A,Q,B){super(new Float32Array(A),Q,B)}}var WR=0,B2=new zA,HC=new F0,X8=new P,i1=new i0,C3=new i0,C1=new P;class J1 extends K1{constructor(){super();this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:WR++}),this.uuid=R2(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:Infinity},this.userData={}}getIndex(){return this.index}setIndex(A){if(Array.isArray(A))this.index=new((RY(A))?xC:yC)(A,1);else this.index=A;return this}getAttribute(A){return this.attributes[A]}setAttribute(A,Q){return this.attributes[A]=Q,this}deleteAttribute(A){return delete this.attributes[A],this}hasAttribute(A){return this.attributes[A]!==void 0}addGroup(A,Q,B=0){this.groups.push({start:A,count:Q,materialIndex:B})}clearGroups(){this.groups=[]}setDrawRange(A,Q){this.drawRange.start=A,this.drawRange.count=Q}applyMatrix4(A){const Q=this.attributes.position;if(Q!==void 0)Q.applyMatrix4(A),Q.needsUpdate=!0;const B=this.attributes.normal;if(B!==void 0){const I=new fA().getNormalMatrix(A);B.applyNormalMatrix(I),B.needsUpdate=!0}const C=this.attributes.tangent;if(C!==void 0)C.transformDirection(A),C.needsUpdate=!0;if(this.boundingBox!==null)this.computeBoundingBox();if(this.boundingSphere!==null)this.computeBoundingSphere();return this}applyQuaternion(A){return B2.makeRotationFromQuaternion(A),this.applyMatrix4(B2),this}rotateX(A){return B2.makeRotationX(A),this.applyMatrix4(B2),this}rotateY(A){return B2.makeRotationY(A),this.applyMatrix4(B2),this}rotateZ(A){return B2.makeRotationZ(A),this.applyMatrix4(B2),this}translate(A,Q,B){return B2.makeTranslation(A,Q,B),this.applyMatrix4(B2),this}scale(A,Q,B){return B2.makeScale(A,Q,B),this.applyMatrix4(B2),this}lookAt(A){return HC.lookAt(A),HC.updateMatrix(),this.applyMatrix4(HC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(X8).negate(),this.translate(X8.x,X8.y,X8.z),this}setFromPoints(A){const Q=[];for(let B=0,C=A.length;B<C;B++){const I=A[B];Q.push(I.x,I.y,I.z||0)}return this.setAttribute("position",new V1(Q,3)),this}computeBoundingBox(){if(this.boundingBox===null)this.boundingBox=new i0;const A=this.attributes.position,Q=this.morphAttributes.position;if(A&&A.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new P((-Infinity),(-Infinity),(-Infinity)),new P(Infinity,Infinity,Infinity));return}if(A!==void 0){if(this.boundingBox.setFromBufferAttribute(A),Q)for(let B=0,C=Q.length;B<C;B++){const I=Q[B];if(i1.setFromBufferAttribute(I),this.morphTargetsRelative)C1.addVectors(this.boundingBox.min,i1.min),this.boundingBox.expandByPoint(C1),C1.addVectors(this.boundingBox.max,i1.max),this.boundingBox.expandByPoint(C1);else this.boundingBox.expandByPoint(i1.min),this.boundingBox.expandByPoint(i1.max)}}else this.boundingBox.makeEmpty();if(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){if(this.boundingSphere===null)this.boundingSphere=new w1;const A=this.attributes.position,Q=this.morphAttributes.position;if(A&&A.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new P,Infinity);return}if(A){const B=this.boundingSphere.center;if(i1.setFromBufferAttribute(A),Q)for(let I=0,E=Q.length;I<E;I++){const K=Q[I];if(C3.setFromBufferAttribute(K),this.morphTargetsRelative)C1.addVectors(i1.min,C3.min),i1.expandByPoint(C1),C1.addVectors(i1.max,C3.max),i1.expandByPoint(C1);else i1.expandByPoint(C3.min),i1.expandByPoint(C3.max)}i1.getCenter(B);let C=0;for(let I=0,E=A.count;I<E;I++)C1.fromBufferAttribute(A,I),C=Math.max(C,B.distanceToSquared(C1));if(Q)for(let I=0,E=Q.length;I<E;I++){const K=Q[I],J=this.morphTargetsRelative;for(let q=0,G=K.count;q<G;q++){if(C1.fromBufferAttribute(K,q),J)X8.fromBufferAttribute(A,q),C1.add(X8);C=Math.max(C,B.distanceToSquared(C1))}}if(this.boundingSphere.radius=Math.sqrt(C),isNaN(this.boundingSphere.radius))console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const A=this.index,Q=this.attributes;if(A===null||Q.position===void 0||Q.normal===void 0||Q.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const{position:B,normal:C,uv:I}=Q;if(this.hasAttribute("tangent")===!1)this.setAttribute("tangent",new V0(new Float32Array(4*B.count),4));const E=this.getAttribute("tangent"),K=[],J=[];for(let k=0;k<B.count;k++)K[k]=new P,J[k]=new P;const q=new P,G=new P,Y=new P,H=new DA,Z=new DA,X=new DA,U=new P,F=new P;function W(k,j,h){q.fromBufferAttribute(B,k),G.fromBufferAttribute(B,j),Y.fromBufferAttribute(B,h),H.fromBufferAttribute(I,k),Z.fromBufferAttribute(I,j),X.fromBufferAttribute(I,h),G.sub(q),Y.sub(q),Z.sub(H),X.sub(H);const N=1/(Z.x*X.y-X.x*Z.y);if(!isFinite(N))return;U.copy(G).multiplyScalar(X.y).addScaledVector(Y,-Z.y).multiplyScalar(N),F.copy(Y).multiplyScalar(Z.x).addScaledVector(G,-X.x).multiplyScalar(N),K[k].add(U),K[j].add(U),K[h].add(U),J[k].add(F),J[j].add(F),J[h].add(F)}let D=this.groups;if(D.length===0)D=[{start:0,count:A.count}];for(let k=0,j=D.length;k<j;++k){const h=D[k],N=h.start,$=h.count;for(let p=N,n=N+$;p<n;p+=3)W(A.getX(p+0),A.getX(p+1),A.getX(p+2))}const V=new P,R=new P,O=new P,z=new P;function w(k){O.fromBufferAttribute(C,k),z.copy(O);const j=K[k];V.copy(j),V.sub(O.multiplyScalar(O.dot(j))).normalize(),R.crossVectors(z,j);const N=R.dot(J[k])<0?-1:1;E.setXYZW(k,V.x,V.y,V.z,N)}for(let k=0,j=D.length;k<j;++k){const h=D[k],N=h.start,$=h.count;for(let p=N,n=N+$;p<n;p+=3)w(A.getX(p+0)),w(A.getX(p+1)),w(A.getX(p+2))}}computeVertexNormals(){const A=this.index,Q=this.getAttribute("position");if(Q!==void 0){let B=this.getAttribute("normal");if(B===void 0)B=new V0(new Float32Array(Q.count*3),3),this.setAttribute("normal",B);else for(let H=0,Z=B.count;H<Z;H++)B.setXYZ(H,0,0,0);const C=new P,I=new P,E=new P,K=new P,J=new P,q=new P,G=new P,Y=new P;if(A)for(let H=0,Z=A.count;H<Z;H+=3){const X=A.getX(H+0),U=A.getX(H+1),F=A.getX(H+2);C.fromBufferAttribute(Q,X),I.fromBufferAttribute(Q,U),E.fromBufferAttribute(Q,F),G.subVectors(E,I),Y.subVectors(C,I),G.cross(Y),K.fromBufferAttribute(B,X),J.fromBufferAttribute(B,U),q.fromBufferAttribute(B,F),K.add(G),J.add(G),q.add(G),B.setXYZ(X,K.x,K.y,K.z),B.setXYZ(U,J.x,J.y,J.z),B.setXYZ(F,q.x,q.y,q.z)}else for(let H=0,Z=Q.count;H<Z;H+=3)C.fromBufferAttribute(Q,H+0),I.fromBufferAttribute(Q,H+1),E.fromBufferAttribute(Q,H+2),G.subVectors(E,I),Y.subVectors(C,I),G.cross(Y),B.setXYZ(H+0,G.x,G.y,G.z),B.setXYZ(H+1,G.x,G.y,G.z),B.setXYZ(H+2,G.x,G.y,G.z);this.normalizeNormals(),B.needsUpdate=!0}}normalizeNormals(){const A=this.attributes.normal;for(let Q=0,B=A.count;Q<B;Q++)C1.fromBufferAttribute(A,Q),C1.normalize(),A.setXYZ(Q,C1.x,C1.y,C1.z)}toNonIndexed(){function A(K,J){const{array:q,itemSize:G,normalized:Y}=K,H=new q.constructor(J.length*G);let Z=0,X=0;for(let U=0,F=J.length;U<F;U++){if(K.isInterleavedBufferAttribute)Z=J[U]*K.data.stride+K.offset;else Z=J[U]*G;for(let W=0;W<G;W++)H[X++]=q[Z++]}return new V0(H,G,Y)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const Q=new J1,B=this.index.array,C=this.attributes;for(let K in C){const J=C[K],q=A(J,B);Q.setAttribute(K,q)}const I=this.morphAttributes;for(let K in I){const J=[],q=I[K];for(let G=0,Y=q.length;G<Y;G++){const H=q[G],Z=A(H,B);J.push(Z)}Q.morphAttributes[K]=J}Q.morphTargetsRelative=this.morphTargetsRelative;const E=this.groups;for(let K=0,J=E.length;K<J;K++){const q=E[K];Q.addGroup(q.start,q.count,q.materialIndex)}return Q}toJSON(){const A={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(A.uuid=this.uuid,A.type=this.type,this.name!=="")A.name=this.name;if(Object.keys(this.userData).length>0)A.userData=this.userData;if(this.parameters!==void 0){const J=this.parameters;for(let q in J)if(J[q]!==void 0)A[q]=J[q];return A}A.data={attributes:{}};const Q=this.index;if(Q!==null)A.data.index={type:Q.array.constructor.name,array:Array.prototype.slice.call(Q.array)};const B=this.attributes;for(let J in B){const q=B[J];A.data.attributes[J]=q.toJSON(A.data)}const C={};let I=!1;for(let J in this.morphAttributes){const q=this.morphAttributes[J],G=[];for(let Y=0,H=q.length;Y<H;Y++){const Z=q[Y];G.push(Z.toJSON(A.data))}if(G.length>0)C[J]=G,I=!0}if(I)A.data.morphAttributes=C,A.data.morphTargetsRelative=this.morphTargetsRelative;const E=this.groups;if(E.length>0)A.data.groups=JSON.parse(JSON.stringify(E));const K=this.boundingSphere;if(K!==null)A.data.boundingSphere={center:K.center.toArray(),radius:K.radius};return A}clone(){return new this.constructor().copy(this)}copy(A){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const Q={};this.name=A.name;const B=A.index;if(B!==null)this.setIndex(B.clone(Q));const C=A.attributes;for(let q in C){const G=C[q];this.setAttribute(q,G.clone(Q))}const I=A.morphAttributes;for(let q in I){const G=[],Y=I[q];for(let H=0,Z=Y.length;H<Z;H++)G.push(Y[H].clone(Q));this.morphAttributes[q]=G}this.morphTargetsRelative=A.morphTargetsRelative;const E=A.groups;for(let q=0,G=E.length;q<G;q++){const Y=E[q];this.addGroup(Y.start,Y.count,Y.materialIndex)}const K=A.boundingBox;if(K!==null)this.boundingBox=K.clone();const J=A.boundingSphere;if(J!==null)this.boundingSphere=J.clone();return this.drawRange.start=A.drawRange.start,this.drawRange.count=A.drawRange.count,this.userData=A.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}var CG=new zA,Z6=new f4,D9=new w1,IG=new P,F8=new P,W8=new P,U8=new P,ZC=new P,R9=new P,V9=new DA,N9=new DA,w9=new DA,EG=new P,KG=new P,JG=new P,O9=new P,L9=new P;class nA extends F0{constructor(A=new J1,Q=new b0){super();this.isMesh=!0,this.type="Mesh",this.geometry=A,this.material=Q,this.updateMorphTargets()}copy(A,Q){if(super.copy(A,Q),A.morphTargetInfluences!==void 0)this.morphTargetInfluences=A.morphTargetInfluences.slice();if(A.morphTargetDictionary!==void 0)this.morphTargetDictionary=Object.assign({},A.morphTargetDictionary);return this.material=Array.isArray(A.material)?A.material.slice():A.material,this.geometry=A.geometry,this}updateMorphTargets(){const Q=this.geometry.morphAttributes,B=Object.keys(Q);if(B.length>0){const C=Q[B[0]];if(C!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let I=0,E=C.length;I<E;I++){const K=C[I].name||String(I);this.morphTargetInfluences.push(0),this.morphTargetDictionary[K]=I}}}}getVertexPosition(A,Q){const B=this.geometry,C=B.attributes.position,I=B.morphAttributes.position,E=B.morphTargetsRelative;Q.fromBufferAttribute(C,A);const K=this.morphTargetInfluences;if(I&&K){R9.set(0,0,0);for(let J=0,q=I.length;J<q;J++){const G=K[J],Y=I[J];if(G===0)continue;if(ZC.fromBufferAttribute(Y,A),E)R9.addScaledVector(ZC,G);else R9.addScaledVector(ZC.sub(Q),G)}Q.add(R9)}return Q}raycast(A,Q){const B=this.geometry,C=this.material,I=this.matrixWorld;if(C===void 0)return;if(B.boundingSphere===null)B.computeBoundingSphere();if(D9.copy(B.boundingSphere),D9.applyMatrix4(I),Z6.copy(A.ray).recast(A.near),D9.containsPoint(Z6.origin)===!1){if(Z6.intersectSphere(D9,IG)===null)return;if(Z6.origin.distanceToSquared(IG)>(A.far-A.near)**2)return}if(CG.copy(I).invert(),Z6.copy(A.ray).applyMatrix4(CG),B.boundingBox!==null){if(Z6.intersectsBox(B.boundingBox)===!1)return}this._computeIntersections(A,Q,Z6)}_computeIntersections(A,Q,B){let C;const I=this.geometry,E=this.material,K=I.index,J=I.attributes.position,q=I.attributes.uv,G=I.attributes.uv1,Y=I.attributes.normal,H=I.groups,Z=I.drawRange;if(K!==null)if(Array.isArray(E))for(let X=0,U=H.length;X<U;X++){const F=H[X],W=E[F.materialIndex],D=Math.max(F.start,Z.start),V=Math.min(K.count,Math.min(F.start+F.count,Z.start+Z.count));for(let R=D,O=V;R<O;R+=3){const z=K.getX(R),w=K.getX(R+1),k=K.getX(R+2);if(C=z9(this,W,A,B,q,G,Y,z,w,k),C)C.faceIndex=Math.floor(R/3),C.face.materialIndex=F.materialIndex,Q.push(C)}}else{const X=Math.max(0,Z.start),U=Math.min(K.count,Z.start+Z.count);for(let F=X,W=U;F<W;F+=3){const D=K.getX(F),V=K.getX(F+1),R=K.getX(F+2);if(C=z9(this,E,A,B,q,G,Y,D,V,R),C)C.faceIndex=Math.floor(F/3),Q.push(C)}}else if(J!==void 0)if(Array.isArray(E))for(let X=0,U=H.length;X<U;X++){const F=H[X],W=E[F.materialIndex],D=Math.max(F.start,Z.start),V=Math.min(J.count,Math.min(F.start+F.count,Z.start+Z.count));for(let R=D,O=V;R<O;R+=3){const z=R,w=R+1,k=R+2;if(C=z9(this,W,A,B,q,G,Y,z,w,k),C)C.faceIndex=Math.floor(R/3),C.face.materialIndex=F.materialIndex,Q.push(C)}}else{const X=Math.max(0,Z.start),U=Math.min(J.count,Z.start+Z.count);for(let F=X,W=U;F<W;F+=3){const D=F,V=F+1,R=F+2;if(C=z9(this,E,A,B,q,G,Y,D,V,R),C)C.faceIndex=Math.floor(F/3),Q.push(C)}}}}class Y4 extends J1{constructor(A=1,Q=1,B=1,C=1,I=1,E=1){super();this.type="BoxGeometry",this.parameters={width:A,height:Q,depth:B,widthSegments:C,heightSegments:I,depthSegments:E};const K=this;C=Math.floor(C),I=Math.floor(I),E=Math.floor(E);const J=[],q=[],G=[],Y=[];let H=0,Z=0;X("z","y","x",-1,-1,B,Q,A,E,I,0),X("z","y","x",1,-1,B,Q,-A,E,I,1),X("x","z","y",1,1,A,B,Q,C,E,2),X("x","z","y",1,-1,A,B,-Q,C,E,3),X("x","y","z",1,-1,A,Q,B,C,I,4),X("x","y","z",-1,-1,A,Q,-B,C,I,5),this.setIndex(J),this.setAttribute("position",new V1(q,3)),this.setAttribute("normal",new V1(G,3)),this.setAttribute("uv",new V1(Y,2));function X(U,F,W,D,V,R,O,z,w,k,j){const h=R/w,N=O/k,$=R/2,p=O/2,n=z/2,S=w+1,v=k+1;let f=0,m=0;const b=new P;for(let l=0;l<v;l++){const QA=l*N-p;for(let BA=0;BA<S;BA++){const qA=BA*h-$;b[U]=qA*D,b[F]=QA*V,b[W]=n,q.push(b.x,b.y,b.z),b[U]=0,b[F]=0,b[W]=z>0?1:-1,G.push(b.x,b.y,b.z),Y.push(BA/w),Y.push(1-l/k),f+=1}}for(let l=0;l<k;l++)for(let QA=0;QA<w;QA++){const BA=H+QA+S*l,qA=H+QA+S*(l+1),a=H+(QA+1)+S*(l+1),AA=H+(QA+1)+S*l;J.push(BA,qA,AA),J.push(qA,a,AA),m+=6}K.addGroup(Z,m,j),Z+=m,H+=f}}copy(A){return super.copy(A),this.parameters=Object.assign({},A.parameters),this}static fromJSON(A){return new Y4(A.width,A.height,A.depth,A.widthSegments,A.heightSegments,A.depthSegments)}}var RR={clone:k8,merge:T1},VR="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",NR="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";class l0 extends m1{constructor(A){super();if(this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=VR,this.fragmentShader=NR,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,A!==void 0)this.setValues(A)}copy(A){return super.copy(A),this.fragmentShader=A.fragmentShader,this.vertexShader=A.vertexShader,this.uniforms=k8(A.uniforms),this.uniformsGroups=DR(A.uniformsGroups),this.defines=Object.assign({},A.defines),this.wireframe=A.wireframe,this.wireframeLinewidth=A.wireframeLinewidth,this.fog=A.fog,this.lights=A.lights,this.clipping=A.clipping,this.extensions=Object.assign({},A.extensions),this.glslVersion=A.glslVersion,this}toJSON(A){const Q=super.toJSON(A);Q.glslVersion=this.glslVersion,Q.uniforms={};for(let C in this.uniforms){const E=this.uniforms[C].value;if(E&&E.isTexture)Q.uniforms[C]={type:"t",value:E.toJSON(A).uuid};else if(E&&E.isColor)Q.uniforms[C]={type:"c",value:E.getHex()};else if(E&&E.isVector2)Q.uniforms[C]={type:"v2",value:E.toArray()};else if(E&&E.isVector3)Q.uniforms[C]={type:"v3",value:E.toArray()};else if(E&&E.isVector4)Q.uniforms[C]={type:"v4",value:E.toArray()};else if(E&&E.isMatrix3)Q.uniforms[C]={type:"m3",value:E.toArray()};else if(E&&E.isMatrix4)Q.uniforms[C]={type:"m4",value:E.toArray()};else Q.uniforms[C]={value:E}}if(Object.keys(this.defines).length>0)Q.defines=this.defines;Q.vertexShader=this.vertexShader,Q.fragmentShader=this.fragmentShader,Q.lights=this.lights,Q.clipping=this.clipping;const B={};for(let C in this.extensions)if(this.extensions[C]===!0)B[C]=!0;if(Object.keys(B).length>0)Q.extensions=B;return Q}}class hC extends F0{constructor(){super();this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new zA,this.projectionMatrix=new zA,this.projectionMatrixInverse=new zA,this.coordinateSystem=2000}copy(A,Q){return super.copy(A,Q),this.matrixWorldInverse.copy(A.matrixWorldInverse),this.projectionMatrix.copy(A.projectionMatrix),this.projectionMatrixInverse.copy(A.projectionMatrixInverse),this.coordinateSystem=A.coordinateSystem,this}getWorldDirection(A){return super.getWorldDirection(A).negate()}updateMatrixWorld(A){super.updateMatrixWorld(A),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(A,Q){super.updateWorldMatrix(A,Q),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}var y4=new P,qG=new DA,GG=new DA;class P0 extends hC{constructor(A=50,Q=1,B=0.1,C=2000){super();this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=A,this.zoom=1,this.near=B,this.far=C,this.focus=10,this.aspect=Q,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(A,Q){return super.copy(A,Q),this.fov=A.fov,this.zoom=A.zoom,this.near=A.near,this.far=A.far,this.focus=A.focus,this.aspect=A.aspect,this.view=A.view===null?null:Object.assign({},A.view),this.filmGauge=A.filmGauge,this.filmOffset=A.filmOffset,this}setFocalLength(A){const Q=0.5*this.getFilmHeight()/A;this.fov=z8*2*Math.atan(Q),this.updateProjectionMatrix()}getFocalLength(){const A=Math.tan(J3*0.5*this.fov);return 0.5*this.getFilmHeight()/A}getEffectiveFOV(){return z8*2*Math.atan(Math.tan(J3*0.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(A,Q,B){y4.set(-1,-1,0.5).applyMatrix4(this.projectionMatrixInverse),Q.set(y4.x,y4.y).multiplyScalar(-A/y4.z),y4.set(1,1,0.5).applyMatrix4(this.projectionMatrixInverse),B.set(y4.x,y4.y).multiplyScalar(-A/y4.z)}getViewSize(A,Q){return this.getViewBounds(A,qG,GG),Q.subVectors(GG,qG)}setViewOffset(A,Q,B,C,I,E){if(this.aspect=A/Q,this.view===null)this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1};this.view.enabled=!0,this.view.fullWidth=A,this.view.fullHeight=Q,this.view.offsetX=B,this.view.offsetY=C,this.view.width=I,this.view.height=E,this.updateProjectionMatrix()}clearViewOffset(){if(this.view!==null)this.view.enabled=!1;this.updateProjectionMatrix()}updateProjectionMatrix(){const A=this.near;let Q=A*Math.tan(J3*0.5*this.fov)/this.zoom,B=2*Q,C=this.aspect*B,I=-0.5*C;const E=this.view;if(this.view!==null&&this.view.enabled){const{fullWidth:J,fullHeight:q}=E;I+=E.offsetX*C/J,Q-=E.offsetY*B/q,C*=E.width/J,B*=E.height/q}const K=this.filmOffset;if(K!==0)I+=A*K/this.getFilmWidth();this.projectionMatrix.makePerspective(I,I+C,Q,Q-B,A,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(A){const Q=super.toJSON(A);if(Q.object.fov=this.fov,Q.object.zoom=this.zoom,Q.object.near=this.near,Q.object.far=this.far,Q.object.focus=this.focus,Q.object.aspect=this.aspect,this.view!==null)Q.object.view=Object.assign({},this.view);return Q.object.filmGauge=this.filmGauge,Q.object.filmOffset=this.filmOffset,Q}}var D8=-90,R8=1;class W3 extends F0{constructor(A,Q,B){super();this.type="CubeCamera",this.renderTarget=B,this.coordinateSystem=null,this.activeMipmapLevel=0;const C=new P0(D8,R8,A,Q);C.layers=this.layers,this.add(C);const I=new P0(D8,R8,A,Q);I.layers=this.layers,this.add(I);const E=new P0(D8,R8,A,Q);E.layers=this.layers,this.add(E);const K=new P0(D8,R8,A,Q);K.layers=this.layers,this.add(K);const J=new P0(D8,R8,A,Q);J.layers=this.layers,this.add(J);const q=new P0(D8,R8,A,Q);q.layers=this.layers,this.add(q)}updateCoordinateSystem(){const A=this.coordinateSystem,Q=this.children.concat(),[B,C,I,E,K,J]=Q;for(let q of Q)this.remove(q);if(A===2000)B.up.set(0,1,0),B.lookAt(1,0,0),C.up.set(0,1,0),C.lookAt(-1,0,0),I.up.set(0,0,-1),I.lookAt(0,1,0),E.up.set(0,0,1),E.lookAt(0,-1,0),K.up.set(0,1,0),K.lookAt(0,0,1),J.up.set(0,1,0),J.lookAt(0,0,-1);else if(A===2001)B.up.set(0,-1,0),B.lookAt(-1,0,0),C.up.set(0,-1,0),C.lookAt(1,0,0),I.up.set(0,0,1),I.lookAt(0,1,0),E.up.set(0,0,-1),E.lookAt(0,-1,0),K.up.set(0,-1,0),K.lookAt(0,0,1),J.up.set(0,-1,0),J.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+A);for(let q of Q)this.add(q),q.updateMatrixWorld()}update(A,Q){if(this.parent===null)this.updateMatrixWorld();const{renderTarget:B,activeMipmapLevel:C}=this;if(this.coordinateSystem!==A.coordinateSystem)this.coordinateSystem=A.coordinateSystem,this.updateCoordinateSystem();const[I,E,K,J,q,G]=this.children,Y=A.getRenderTarget(),H=A.getActiveCubeFace(),Z=A.getActiveMipmapLevel(),X=A.xr.enabled;A.xr.enabled=!1;const U=B.texture.generateMipmaps;B.texture.generateMipmaps=!1,A.setRenderTarget(B,0,C),A.render(Q,I),A.setRenderTarget(B,1,C),A.render(Q,E),A.setRenderTarget(B,2,C),A.render(Q,K),A.setRenderTarget(B,3,C),A.render(Q,J),A.setRenderTarget(B,4,C),A.render(Q,q),B.texture.generateMipmaps=U,A.setRenderTarget(B,5,C),A.render(Q,G),A.setRenderTarget(Y,H,Z),A.xr.enabled=X,B.texture.needsPMREMUpdate=!0}}class U3 extends Z0{constructor(A,Q,B,C,I,E,K,J,q,G){A=A!==void 0?A:[],Q=Q!==void 0?Q:301;super(A,Q,B,C,I,E,K,J,q,G);this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(A){this.image=A}}class y8 extends N1{constructor(A=1,Q={}){super(A,A,Q);this.isWebGLCubeRenderTarget=!0;const B={width:A,height:A,depth:1},C=[B,B,B,B,B,B];this.texture=new U3(C,Q.mapping,Q.wrapS,Q.wrapT,Q.magFilter,Q.minFilter,Q.format,Q.type,Q.anisotropy,Q.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=Q.generateMipmaps!==void 0?Q.generateMipmaps:!1,this.texture.minFilter=Q.minFilter!==void 0?Q.minFilter:1006}fromEquirectangularTexture(A,Q){this.texture.type=Q.type,this.texture.colorSpace=Q.colorSpace,this.texture.generateMipmaps=Q.generateMipmaps,this.texture.minFilter=Q.minFilter,this.texture.magFilter=Q.magFilter;const B={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},C=new Y4(5,5,5),I=new l0({name:"CubemapFromEquirect",uniforms:k8(B.uniforms),vertexShader:B.vertexShader,fragmentShader:B.fragmentShader,side:1,blending:0});I.uniforms.tEquirect.value=Q;const E=new nA(C,I),K=Q.minFilter;if(Q.minFilter===1008)Q.minFilter=1006;return new W3(1,10,this).update(A,E),Q.minFilter=K,E.geometry.dispose(),E.material.dispose(),this}clear(A,Q,B,C){const I=A.getRenderTarget();for(let E=0;E<6;E++)A.setRenderTarget(this,E),A.clear(Q,B,C);A.setRenderTarget(I)}}var XC=new P,wR=new P,OR=new fA;class x2{constructor(A=new P(1,0,0),Q=0){this.isPlane=!0,this.normal=A,this.constant=Q}set(A,Q){return this.normal.copy(A),this.constant=Q,this}setComponents(A,Q,B,C){return this.normal.set(A,Q,B),this.constant=C,this}setFromNormalAndCoplanarPoint(A,Q){return this.normal.copy(A),this.constant=-Q.dot(this.normal),this}setFromCoplanarPoints(A,Q,B){const C=XC.subVectors(B,Q).cross(wR.subVectors(A,Q)).normalize();return this.setFromNormalAndCoplanarPoint(C,A),this}copy(A){return this.normal.copy(A.normal),this.constant=A.constant,this}normalize(){const A=1/this.normal.length();return this.normal.multiplyScalar(A),this.constant*=A,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(A){return this.normal.dot(A)+this.constant}distanceToSphere(A){return this.distanceToPoint(A.center)-A.radius}projectPoint(A,Q){return Q.copy(A).addScaledVector(this.normal,-this.distanceToPoint(A))}intersectLine(A,Q){const B=A.delta(XC),C=this.normal.dot(B);if(C===0){if(this.distanceToPoint(A.start)===0)return Q.copy(A.start);return null}const I=-(A.start.dot(this.normal)+this.constant)/C;if(I<0||I>1)return null;return Q.copy(A.start).addScaledVector(B,I)}intersectsLine(A){const Q=this.distanceToPoint(A.start),B=this.distanceToPoint(A.end);return Q<0&&B>0||B<0&&Q>0}intersectsBox(A){return A.intersectsPlane(this)}intersectsSphere(A){return A.intersectsPlane(this)}coplanarPoint(A){return A.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(A,Q){const B=Q||OR.getNormalMatrix(A),C=this.coplanarPoint(XC).applyMatrix4(A),I=this.normal.applyMatrix3(B).normalize();return this.constant=-C.dot(I),this}translate(A){return this.constant-=A.dot(this.normal),this}equals(A){return A.normal.equals(this.normal)&&A.constant===this.constant}clone(){return new this.constructor().copy(this)}}var X6=new w1,k9=new P;class c9{constructor(A=new x2,Q=new x2,B=new x2,C=new x2,I=new x2,E=new x2){this.planes=[A,Q,B,C,I,E]}set(A,Q,B,C,I,E){const K=this.planes;return K[0].copy(A),K[1].copy(Q),K[2].copy(B),K[3].copy(C),K[4].copy(I),K[5].copy(E),this}copy(A){const Q=this.planes;for(let B=0;B<6;B++)Q[B].copy(A.planes[B]);return this}setFromProjectionMatrix(A,Q=2000){const B=this.planes,C=A.elements,I=C[0],E=C[1],K=C[2],J=C[3],q=C[4],G=C[5],Y=C[6],H=C[7],Z=C[8],X=C[9],U=C[10],F=C[11],W=C[12],D=C[13],V=C[14],R=C[15];if(B[0].setComponents(J-I,H-q,F-Z,R-W).normalize(),B[1].setComponents(J+I,H+q,F+Z,R+W).normalize(),B[2].setComponents(J+E,H+G,F+X,R+D).normalize(),B[3].setComponents(J-E,H-G,F-X,R-D).normalize(),B[4].setComponents(J-K,H-Y,F-U,R-V).normalize(),Q===2000)B[5].setComponents(J+K,H+Y,F+U,R+V).normalize();else if(Q===2001)B[5].setComponents(K,Y,U,V).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+Q);return this}intersectsObject(A){if(A.boundingSphere!==void 0){if(A.boundingSphere===null)A.computeBoundingSphere();X6.copy(A.boundingSphere).applyMatrix4(A.matrixWorld)}else{const Q=A.geometry;if(Q.boundingSphere===null)Q.computeBoundingSphere();X6.copy(Q.boundingSphere).applyMatrix4(A.matrixWorld)}return this.intersectsSphere(X6)}intersectsSprite(A){return X6.center.set(0,0,0),X6.radius=0.7071067811865476,X6.applyMatrix4(A.matrixWorld),this.intersectsSphere(X6)}intersectsSphere(A){const Q=this.planes,B=A.center,C=-A.radius;for(let I=0;I<6;I++)if(Q[I].distanceToPoint(B)<C)return!1;return!0}intersectsBox(A){const Q=this.planes;for(let B=0;B<6;B++){const C=Q[B];if(k9.x=C.normal.x>0?A.max.x:A.min.x,k9.y=C.normal.y>0?A.max.y:A.min.y,k9.z=C.normal.z>0?A.max.z:A.min.z,C.distanceToPoint(k9)<0)return!1}return!0}containsPoint(A){const Q=this.planes;for(let B=0;B<6;B++)if(Q[B].distanceToPoint(A)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class q1 extends J1{constructor(A=1,Q=1,B=1,C=1){super();this.type="PlaneGeometry",this.parameters={width:A,height:Q,widthSegments:B,heightSegments:C};const I=A/2,E=Q/2,K=Math.floor(B),J=Math.floor(C),q=K+1,G=J+1,Y=A/K,H=Q/J,Z=[],X=[],U=[],F=[];for(let W=0;W<G;W++){const D=W*H-E;for(let V=0;V<q;V++){const R=V*Y-I;X.push(R,-D,0),U.push(0,0,1),F.push(V/K),F.push(1-W/J)}}for(let W=0;W<J;W++)for(let D=0;D<K;D++){const V=D+q*W,R=D+q*(W+1),O=D+1+q*(W+1),z=D+1+q*W;Z.push(V,R,z),Z.push(R,O,z)}this.setIndex(Z),this.setAttribute("position",new V1(X,3)),this.setAttribute("normal",new V1(U,3)),this.setAttribute("uv",new V1(F,2))}copy(A){return super.copy(A),this.parameters=Object.assign({},A.parameters),this}static fromJSON(A){return new q1(A.width,A.height,A.widthSegments,A.heightSegments)}}var zR="#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",kR="#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",MR="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",$R="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",_R="#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",PR="#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",SR="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",TR="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",jR="#ifdef USE_BATCHING\n\tattribute float batchId;\n\tuniform highp sampler2D batchingTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",gR="#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( batchId );\n#endif",yR="vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",xR="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",hR="float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",vR="#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",fR="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",bR="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",pR="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",uR="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",mR="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",dR="#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",cR="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",lR="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",sR="#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",nR="#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",oR="#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",iR="vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",aR="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",rR="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",tR="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",eR="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",AV="gl_FragColor = linearToOutputTexel( gl_FragColor );",QV="\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",BV="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",CV="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",IV="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",EV="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",KV="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",JV="#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",qV="#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",GV="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",YV="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",HV="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",ZV="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",XV="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",FV="LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",WV="varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",UV="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",DV="#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",RV="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",VV="varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",NV="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",wV="varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",OV="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",LV="struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",zV="\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",kV="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",MV="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",$V="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",_V="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",PV="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",SV="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",TV="#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",jV="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",gV="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",yV="#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",xV="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",hV="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",vV="#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[MORPHTARGETS_COUNT];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",fV="#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",bV="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",pV="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t#endif\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\t#ifndef USE_INSTANCING_MORPH\n\t\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\t#endif\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",uV="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",mV="float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",dV="#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",cV="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",lV="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",sV="#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",nV="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",oV="#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",iV="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",aV="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",rV="#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",tV="#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",eV="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",AN="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",QN="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",BN="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",CN="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",IN="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",EN="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",KN="#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",JN="#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",qN="#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",GN="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",YN="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",HN="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",ZN="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",XN="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",FN="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",WN="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",UN="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",DN="#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tfloat startCompression = 0.8 - 0.04;\n\tfloat desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min(color.r, min(color.g, color.b));\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max(color.r, max(color.g, color.b));\n\tif (peak < startCompression) return color;\n\tfloat d = 1. - startCompression;\n\tfloat newPeak = 1. - d * d / (peak + d - startCompression);\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / (desaturation * (peak - newPeak) + 1.);\n\treturn mix(color, vec3(1, 1, 1), g);\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",RN="#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",VN="#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",NN="#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",wN="#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",ON="#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",LN="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",zN="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",kN="uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",MN="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",$N="#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",_N="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",PN="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",SN="#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",TN="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",jN="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",gN="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",yN="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",xN="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",hN="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",vN="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",fN="#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",bN="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",pN="#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",uN="#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",mN="#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",dN="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",cN="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",lN="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",sN="#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",nN="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",oN="#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",iN="#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",aN="#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",rN="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",tN="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",eN="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Aw="#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Qw="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",Bw="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Cw="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",dA={alphahash_fragment:zR,alphahash_pars_fragment:kR,alphamap_fragment:MR,alphamap_pars_fragment:$R,alphatest_fragment:_R,alphatest_pars_fragment:PR,aomap_fragment:SR,aomap_pars_fragment:TR,batching_pars_vertex:jR,batching_vertex:gR,begin_vertex:yR,beginnormal_vertex:xR,bsdfs:hR,iridescence_fragment:vR,bumpmap_pars_fragment:fR,clipping_planes_fragment:bR,clipping_planes_pars_fragment:pR,clipping_planes_pars_vertex:uR,clipping_planes_vertex:mR,color_fragment:dR,color_pars_fragment:cR,color_pars_vertex:lR,color_vertex:sR,common:nR,cube_uv_reflection_fragment:oR,defaultnormal_vertex:iR,displacementmap_pars_vertex:aR,displacementmap_vertex:rR,emissivemap_fragment:tR,emissivemap_pars_fragment:eR,colorspace_fragment:AV,colorspace_pars_fragment:QV,envmap_fragment:BV,envmap_common_pars_fragment:CV,envmap_pars_fragment:IV,envmap_pars_vertex:EV,envmap_physical_pars_fragment:DV,envmap_vertex:KV,fog_vertex:JV,fog_pars_vertex:qV,fog_fragment:GV,fog_pars_fragment:YV,gradientmap_pars_fragment:HV,lightmap_fragment:ZV,lightmap_pars_fragment:XV,lights_lambert_fragment:FV,lights_lambert_pars_fragment:WV,lights_pars_begin:UV,lights_toon_fragment:RV,lights_toon_pars_fragment:VV,lights_phong_fragment:NV,lights_phong_pars_fragment:wV,lights_physical_fragment:OV,lights_physical_pars_fragment:LV,lights_fragment_begin:zV,lights_fragment_maps:kV,lights_fragment_end:MV,logdepthbuf_fragment:$V,logdepthbuf_pars_fragment:_V,logdepthbuf_pars_vertex:PV,logdepthbuf_vertex:SV,map_fragment:TV,map_pars_fragment:jV,map_particle_fragment:gV,map_particle_pars_fragment:yV,metalnessmap_fragment:xV,metalnessmap_pars_fragment:hV,morphinstance_vertex:vV,morphcolor_vertex:fV,morphnormal_vertex:bV,morphtarget_pars_vertex:pV,morphtarget_vertex:uV,normal_fragment_begin:mV,normal_fragment_maps:dV,normal_pars_fragment:cV,normal_pars_vertex:lV,normal_vertex:sV,normalmap_pars_fragment:nV,clearcoat_normal_fragment_begin:oV,clearcoat_normal_fragment_maps:iV,clearcoat_pars_fragment:aV,iridescence_pars_fragment:rV,opaque_fragment:tV,packing:eV,premultiplied_alpha_fragment:AN,project_vertex:QN,dithering_fragment:BN,dithering_pars_fragment:CN,roughnessmap_fragment:IN,roughnessmap_pars_fragment:EN,shadowmap_pars_fragment:KN,shadowmap_pars_vertex:JN,shadowmap_vertex:qN,shadowmask_pars_fragment:GN,skinbase_vertex:YN,skinning_pars_vertex:HN,skinning_vertex:ZN,skinnormal_vertex:XN,specularmap_fragment:FN,specularmap_pars_fragment:WN,tonemapping_fragment:UN,tonemapping_pars_fragment:DN,transmission_fragment:RN,transmission_pars_fragment:VN,uv_pars_fragment:NN,uv_pars_vertex:wN,uv_vertex:ON,worldpos_vertex:LN,background_vert:zN,background_frag:kN,backgroundCube_vert:MN,backgroundCube_frag:$N,cube_vert:_N,cube_frag:PN,depth_vert:SN,depth_frag:TN,distanceRGBA_vert:jN,distanceRGBA_frag:gN,equirect_vert:yN,equirect_frag:xN,linedashed_vert:hN,linedashed_frag:vN,meshbasic_vert:fN,meshbasic_frag:bN,meshlambert_vert:pN,meshlambert_frag:uN,meshmatcap_vert:mN,meshmatcap_frag:dN,meshnormal_vert:cN,meshnormal_frag:lN,meshphong_vert:sN,meshphong_frag:nN,meshphysical_vert:oN,meshphysical_frag:iN,meshtoon_vert:aN,meshtoon_frag:rN,points_vert:tN,points_frag:eN,shadow_vert:Aw,shadow_frag:Qw,sprite_vert:Bw,sprite_frag:Cw},XA={common:{diffuse:{value:new PA(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new fA},alphaMap:{value:null},alphaMapTransform:{value:new fA},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new fA}},envmap:{envMap:{value:null},envMapRotation:{value:new fA},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:0.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new fA}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new fA}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new fA},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new fA},normalScale:{value:new DA(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new fA},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new fA}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new fA}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new fA}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:0.00025},fogNear:{value:1},fogFar:{value:2000},fogColor:{value:new PA(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new PA(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new fA},alphaTest:{value:0},uvTransform:{value:new fA}},sprite:{diffuse:{value:new PA(16777215)},opacity:{value:1},center:{value:new DA(0.5,0.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new fA},alphaMap:{value:null},alphaMapTransform:{value:new fA},alphaTest:{value:0}}},h2={basic:{uniforms:T1([XA.common,XA.specularmap,XA.envmap,XA.aomap,XA.lightmap,XA.fog]),vertexShader:dA.meshbasic_vert,fragmentShader:dA.meshbasic_frag},lambert:{uniforms:T1([XA.common,XA.specularmap,XA.envmap,XA.aomap,XA.lightmap,XA.emissivemap,XA.bumpmap,XA.normalmap,XA.displacementmap,XA.fog,XA.lights,{emissive:{value:new PA(0)}}]),vertexShader:dA.meshlambert_vert,fragmentShader:dA.meshlambert_frag},phong:{uniforms:T1([XA.common,XA.specularmap,XA.envmap,XA.aomap,XA.lightmap,XA.emissivemap,XA.bumpmap,XA.normalmap,XA.displacementmap,XA.fog,XA.lights,{emissive:{value:new PA(0)},specular:{value:new PA(1118481)},shininess:{value:30}}]),vertexShader:dA.meshphong_vert,fragmentShader:dA.meshphong_frag},standard:{uniforms:T1([XA.common,XA.envmap,XA.aomap,XA.lightmap,XA.emissivemap,XA.bumpmap,XA.normalmap,XA.displacementmap,XA.roughnessmap,XA.metalnessmap,XA.fog,XA.lights,{emissive:{value:new PA(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:dA.meshphysical_vert,fragmentShader:dA.meshphysical_frag},toon:{uniforms:T1([XA.common,XA.aomap,XA.lightmap,XA.emissivemap,XA.bumpmap,XA.normalmap,XA.displacementmap,XA.gradientmap,XA.fog,XA.lights,{emissive:{value:new PA(0)}}]),vertexShader:dA.meshtoon_vert,fragmentShader:dA.meshtoon_frag},matcap:{uniforms:T1([XA.common,XA.bumpmap,XA.normalmap,XA.displacementmap,XA.fog,{matcap:{value:null}}]),vertexShader:dA.meshmatcap_vert,fragmentShader:dA.meshmatcap_frag},points:{uniforms:T1([XA.points,XA.fog]),vertexShader:dA.points_vert,fragmentShader:dA.points_frag},dashed:{uniforms:T1([XA.common,XA.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:dA.linedashed_vert,fragmentShader:dA.linedashed_frag},depth:{uniforms:T1([XA.common,XA.displacementmap]),vertexShader:dA.depth_vert,fragmentShader:dA.depth_frag},normal:{uniforms:T1([XA.common,XA.bumpmap,XA.normalmap,XA.displacementmap,{opacity:{value:1}}]),vertexShader:dA.meshnormal_vert,fragmentShader:dA.meshnormal_frag},sprite:{uniforms:T1([XA.sprite,XA.fog]),vertexShader:dA.sprite_vert,fragmentShader:dA.sprite_frag},background:{uniforms:{uvTransform:{value:new fA},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:dA.background_vert,fragmentShader:dA.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new fA}},vertexShader:dA.backgroundCube_vert,fragmentShader:dA.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:dA.cube_vert,fragmentShader:dA.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:dA.equirect_vert,fragmentShader:dA.equirect_frag},distanceRGBA:{uniforms:T1([XA.common,XA.displacementmap,{referencePosition:{value:new P},nearDistance:{value:1},farDistance:{value:1000}}]),vertexShader:dA.distanceRGBA_vert,fragmentShader:dA.distanceRGBA_frag},shadow:{uniforms:T1([XA.lights,XA.fog,{color:{value:new PA(0)},opacity:{value:1}}]),vertexShader:dA.shadow_vert,fragmentShader:dA.shadow_frag}};h2.physical={uniforms:T1([h2.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new fA},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new fA},clearcoatNormalScale:{value:new DA(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new fA},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new fA},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new fA},sheen:{value:0},sheenColor:{value:new PA(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new fA},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new fA},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new fA},transmissionSamplerSize:{value:new DA},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new fA},attenuationDistance:{value:0},attenuationColor:{value:new PA(0)},specularColor:{value:new PA(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new fA},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new fA},anisotropyVector:{value:new DA},anisotropyMap:{value:null},anisotropyMapTransform:{value:new fA}}]),vertexShader:dA.meshphysical_vert,fragmentShader:dA.meshphysical_frag};var M9={r:0,b:0,g:0},F6=new u1,Iw=new zA;class V2 extends hC{constructor(A=-1,Q=1,B=1,C=-1,I=0.1,E=2000){super();this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=A,this.right=Q,this.top=B,this.bottom=C,this.near=I,this.far=E,this.updateProjectionMatrix()}copy(A,Q){return super.copy(A,Q),this.left=A.left,this.right=A.right,this.top=A.top,this.bottom=A.bottom,this.near=A.near,this.far=A.far,this.zoom=A.zoom,this.view=A.view===null?null:Object.assign({},A.view),this}setViewOffset(A,Q,B,C,I,E){if(this.view===null)this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1};this.view.enabled=!0,this.view.fullWidth=A,this.view.fullHeight=Q,this.view.offsetX=B,this.view.offsetY=C,this.view.width=I,this.view.height=E,this.updateProjectionMatrix()}clearViewOffset(){if(this.view!==null)this.view.enabled=!1;this.updateProjectionMatrix()}updateProjectionMatrix(){const A=(this.right-this.left)/(2*this.zoom),Q=(this.top-this.bottom)/(2*this.zoom),B=(this.right+this.left)/2,C=(this.top+this.bottom)/2;let I=B-A,E=B+A,K=C+Q,J=C-Q;if(this.view!==null&&this.view.enabled){const q=(this.right-this.left)/this.view.fullWidth/this.zoom,G=(this.top-this.bottom)/this.view.fullHeight/this.zoom;I+=q*this.view.offsetX,E=I+q*this.view.width,K-=G*this.view.offsetY,J=K-G*this.view.height}this.projectionMatrix.makeOrthographic(I,E,K,J,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(A){const Q=super.toJSON(A);if(Q.object.zoom=this.zoom,Q.object.left=this.left,Q.object.right=this.right,Q.object.top=this.top,Q.object.bottom=this.bottom,Q.object.near=this.near,Q.object.far=this.far,this.view!==null)Q.object.view=Object.assign({},this.view);return Q}}var w8=4,YG=[0.125,0.215,0.35,0.446,0.526,0.582],D6=20,FC=new V2,HG=new PA,WC=null,UC=0,DC=0,U6=(1+Math.sqrt(5))/2,V8=1/U6,ZG=[new P(1,1,1),new P(-1,1,1),new P(1,1,-1),new P(-1,1,-1),new P(0,U6,V8),new P(0,U6,-V8),new P(V8,0,U6),new P(-V8,0,U6),new P(U6,V8,0),new P(-U6,V8,0)];class kC{constructor(A){this._renderer=A,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(A,Q=0,B=0.1,C=100){WC=this._renderer.getRenderTarget(),UC=this._renderer.getActiveCubeFace(),DC=this._renderer.getActiveMipmapLevel(),this._setSize(256);const I=this._allocateTargets();if(I.depthBuffer=!0,this._sceneToCubeUV(A,B,C,I),Q>0)this._blur(I,0,0,Q);return this._applyPMREM(I),this._cleanup(I),I}fromEquirectangular(A,Q=null){return this._fromTexture(A,Q)}fromCubemap(A,Q=null){return this._fromTexture(A,Q)}compileCubemapShader(){if(this._cubemapMaterial===null)this._cubemapMaterial=WG(),this._compileMaterial(this._cubemapMaterial)}compileEquirectangularShader(){if(this._equirectMaterial===null)this._equirectMaterial=FG(),this._compileMaterial(this._equirectMaterial)}dispose(){if(this._dispose(),this._cubemapMaterial!==null)this._cubemapMaterial.dispose();if(this._equirectMaterial!==null)this._equirectMaterial.dispose()}_setSize(A){this._lodMax=Math.floor(Math.log2(A)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){if(this._blurMaterial!==null)this._blurMaterial.dispose();if(this._pingPongRenderTarget!==null)this._pingPongRenderTarget.dispose();for(let A=0;A<this._lodPlanes.length;A++)this._lodPlanes[A].dispose()}_cleanup(A){this._renderer.setRenderTarget(WC,UC,DC),A.scissorTest=!1,$9(A,0,0,A.width,A.height)}_fromTexture(A,Q){if(A.mapping===301||A.mapping===302)this._setSize(A.image.length===0?16:A.image[0].width||A.image[0].image.width);else this._setSize(A.image.width/4);WC=this._renderer.getRenderTarget(),UC=this._renderer.getActiveCubeFace(),DC=this._renderer.getActiveMipmapLevel();const B=Q||this._allocateTargets();return this._textureToCubeUV(A,B),this._applyPMREM(B),this._cleanup(B),B}_allocateTargets(){const A=3*Math.max(this._cubeSize,112),Q=4*this._cubeSize,B={magFilter:1006,minFilter:1006,generateMipmaps:!1,type:1016,format:1023,colorSpace:"srgb-linear",depthBuffer:!1},C=XG(A,Q,B);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==A||this._pingPongRenderTarget.height!==Q){if(this._pingPongRenderTarget!==null)this._dispose();this._pingPongRenderTarget=XG(A,Q,B);const{_lodMax:I}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Hw(I)),this._blurMaterial=Zw(I,A,Q)}return C}_compileMaterial(A){const Q=new nA(this._lodPlanes[0],A);this._renderer.compile(Q,FC)}_sceneToCubeUV(A,Q,B,C){const K=new P0(90,1,Q,B),J=[1,-1,1,1,1,1],q=[1,1,1,-1,-1,-1],G=this._renderer,Y=G.autoClear,H=G.toneMapping;G.getClearColor(HG),G.toneMapping=0,G.autoClear=!1;const Z=new b0({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),X=new nA(new Y4,Z);let U=!1;const F=A.background;if(F){if(F.isColor)Z.color.copy(F),A.background=null,U=!0}else Z.color.copy(HG),U=!0;for(let W=0;W<6;W++){const D=W%3;if(D===0)K.up.set(0,J[W],0),K.lookAt(q[W],0,0);else if(D===1)K.up.set(0,0,J[W]),K.lookAt(0,q[W],0);else K.up.set(0,J[W],0),K.lookAt(0,0,q[W]);const V=this._cubeSize;if($9(C,D*V,W>2?V:0,V,V),G.setRenderTarget(C),U)G.render(X,K);G.render(A,K)}X.geometry.dispose(),X.material.dispose(),G.toneMapping=H,G.autoClear=Y,A.background=F}_textureToCubeUV(A,Q){const B=this._renderer,C=A.mapping===301||A.mapping===302;if(C){if(this._cubemapMaterial===null)this._cubemapMaterial=WG();this._cubemapMaterial.uniforms.flipEnvMap.value=A.isRenderTargetTexture===!1?-1:1}else if(this._equirectMaterial===null)this._equirectMaterial=FG();const I=C?this._cubemapMaterial:this._equirectMaterial,E=new nA(this._lodPlanes[0],I),K=I.uniforms;K.envMap.value=A;const J=this._cubeSize;$9(Q,0,0,3*J,2*J),B.setRenderTarget(Q),B.render(E,FC)}_applyPMREM(A){const Q=this._renderer,B=Q.autoClear;Q.autoClear=!1;for(let C=1;C<this._lodPlanes.length;C++){const I=Math.sqrt(this._sigmas[C]*this._sigmas[C]-this._sigmas[C-1]*this._sigmas[C-1]),E=ZG[(C-1)%ZG.length];this._blur(A,C-1,C,I,E)}Q.autoClear=B}_blur(A,Q,B,C,I){const E=this._pingPongRenderTarget;this._halfBlur(A,E,Q,B,C,"latitudinal",I),this._halfBlur(E,A,B,B,C,"longitudinal",I)}_halfBlur(A,Q,B,C,I,E,K){const J=this._renderer,q=this._blurMaterial;if(E!=="latitudinal"&&E!=="longitudinal")console.error("blur direction must be either latitudinal or longitudinal!");const G=3,Y=new nA(this._lodPlanes[C],q),H=q.uniforms,Z=this._sizeLods[B]-1,X=isFinite(I)?Math.PI/(2*Z):2*Math.PI/(2*D6-1),U=I/X,F=isFinite(I)?1+Math.floor(G*U):D6;if(F>D6)console.warn(`sigmaRadians, ${I}, is too large and will clip, as it requested ${F} samples when the maximum is set to ${D6}`);const W=[];let D=0;for(let w=0;w<D6;++w){const k=w/U,j=Math.exp(-k*k/2);if(W.push(j),w===0)D+=j;else if(w<F)D+=2*j}for(let w=0;w<W.length;w++)W[w]=W[w]/D;if(H.envMap.value=A.texture,H.samples.value=F,H.weights.value=W,H.latitudinal.value=E==="latitudinal",K)H.poleAxis.value=K;const{_lodMax:V}=this;H.dTheta.value=X,H.mipInt.value=V-B;const R=this._sizeLods[C],O=3*R*(C>V-w8?C-V+w8:0),z=4*(this._cubeSize-R);$9(Q,O,z,3*R,2*R),J.setRenderTarget(Q),J.render(Y,FC)}}class fC extends Z0{constructor(A,Q,B,C,I,E,K,J,q,G){if(G=G!==void 0?G:1026,G!==1026&&G!==1027)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");if(B===void 0&&G===1026)B=1014;if(B===void 0&&G===1027)B=1020;super(null,C,I,E,K,J,G,B,q);this.isDepthTexture=!0,this.image={width:A,height:Q},this.magFilter=K!==void 0?K:1003,this.minFilter=J!==void 0?J:1003,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(A){return super.copy(A),this.compareFunction=A.compareFunction,this}toJSON(A){const Q=super.toJSON(A);if(this.compareFunction!==null)Q.compareFunction=this.compareFunction;return Q}}var zY=new Z0,kY=new fC(1,1);kY.compareFunction=515;var MY=new gC,$Y=new m9,_Y=new U3,UG=[],DG=[],RG=new Float32Array(16),VG=new Float32Array(9),NG=new Float32Array(4);class PY{constructor(A,Q,B){this.id=A,this.addr=B,this.cache=[],this.type=Q.type,this.setValue=uw(Q.type)}}class SY{constructor(A,Q,B){this.id=A,this.addr=B,this.cache=[],this.type=Q.type,this.size=Q.size,this.setValue=JO(Q.type)}}class TY{constructor(A){this.id=A,this.seq=[],this.map={}}setValue(A,Q,B){const C=this.seq;for(let I=0,E=C.length;I!==E;++I){const K=C[I];K.setValue(A,Q[K.id],B)}}}var RC=/(\w+)(\])?(\[|\.)?/g;class G3{constructor(A,Q){this.seq=[],this.map={};const B=A.getProgramParameter(Q,A.ACTIVE_UNIFORMS);for(let C=0;C<B;++C){const I=A.getActiveUniform(Q,C),E=A.getUniformLocation(Q,I.name);qO(I,E,this)}}setValue(A,Q,B,C){const I=this.map[Q];if(I!==void 0)I.setValue(A,B,C)}setOptional(A,Q,B){const C=Q[B];if(C!==void 0)this.setValue(A,B,C)}static upload(A,Q,B,C){for(let I=0,E=Q.length;I!==E;++I){const K=Q[I],J=B[K.id];if(J.needsUpdate!==!1)K.setValue(A,J.value,C)}}static seqWithValue(A,Q){const B=[];for(let C=0,I=A.length;C!==I;++C){const E=A[C];if(E.id in Q)B.push(E)}return B}}var GO=37297,YO=0,VO=/^[ \t]*#include +<([\w\d./]+)>/gm,NO=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]),OO=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g,SO=0;class jY{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(A){const{vertexShader:Q,fragmentShader:B}=A,C=this._getShaderStage(Q),I=this._getShaderStage(B),E=this._getShaderCacheForMaterial(A);if(E.has(C)===!1)E.add(C),C.usedTimes++;if(E.has(I)===!1)E.add(I),I.usedTimes++;return this}remove(A){const Q=this.materialCache.get(A);for(let B of Q)if(B.usedTimes--,B.usedTimes===0)this.shaderCache.delete(B.code);return this.materialCache.delete(A),this}getVertexShaderID(A){return this._getShaderStage(A.vertexShader).id}getFragmentShaderID(A){return this._getShaderStage(A.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(A){const Q=this.materialCache;let B=Q.get(A);if(B===void 0)B=new Set,Q.set(A,B);return B}_getShaderStage(A){const Q=this.shaderCache;let B=Q.get(A);if(B===void 0)B=new gY(A),Q.set(A,B);return B}}class gY{constructor(A){this.id=SO++,this.code=A,this.usedTimes=0}}var vO=0;class s9 extends m1{constructor(A){super();this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(A)}copy(A){return super.copy(A),this.depthPacking=A.depthPacking,this.map=A.map,this.alphaMap=A.alphaMap,this.displacementMap=A.displacementMap,this.displacementScale=A.displacementScale,this.displacementBias=A.displacementBias,this.wireframe=A.wireframe,this.wireframeLinewidth=A.wireframeLinewidth,this}}class yY extends m1{constructor(A){super();this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(A)}copy(A){return super.copy(A),this.map=A.map,this.alphaMap=A.alphaMap,this.displacementMap=A.displacementMap,this.displacementScale=A.displacementScale,this.displacementBias=A.displacementBias,this}}var uO="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",mO="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";class xY extends P0{constructor(A=[]){super();this.isArrayCamera=!0,this.cameras=A}}class C2 extends F0{constructor(){super();this.isGroup=!0,this.type="Group"}}var nO={type:"move"};class y9{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){if(this._hand===null)this._hand=new C2,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1};return this._hand}getTargetRaySpace(){if(this._targetRay===null)this._targetRay=new C2,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new P,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new P;return this._targetRay}getGripSpace(){if(this._grip===null)this._grip=new C2,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new P,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new P;return this._grip}dispatchEvent(A){if(this._targetRay!==null)this._targetRay.dispatchEvent(A);if(this._grip!==null)this._grip.dispatchEvent(A);if(this._hand!==null)this._hand.dispatchEvent(A);return this}connect(A){if(A&&A.hand){const Q=this._hand;if(Q)for(let B of A.hand.values())this._getHandJoint(Q,B)}return this.dispatchEvent({type:"connected",data:A}),this}disconnect(A){if(this.dispatchEvent({type:"disconnected",data:A}),this._targetRay!==null)this._targetRay.visible=!1;if(this._grip!==null)this._grip.visible=!1;if(this._hand!==null)this._hand.visible=!1;return this}update(A,Q,B){let C=null,I=null,E=null;const K=this._targetRay,J=this._grip,q=this._hand;if(A&&Q.session.visibilityState!=="visible-blurred"){if(q&&A.hand){E=!0;for(let U of A.hand.values()){const F=Q.getJointPose(U,B),W=this._getHandJoint(q,U);if(F!==null)W.matrix.fromArray(F.transform.matrix),W.matrix.decompose(W.position,W.rotation,W.scale),W.matrixWorldNeedsUpdate=!0,W.jointRadius=F.radius;W.visible=F!==null}const G=q.joints["index-finger-tip"],Y=q.joints["thumb-tip"],H=G.position.distanceTo(Y.position),Z=0.02,X=0.005;if(q.inputState.pinching&&H>Z+X)q.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:A.handedness,target:this});else if(!q.inputState.pinching&&H<=Z-X)q.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:A.handedness,target:this})}else if(J!==null&&A.gripSpace){if(I=Q.getPose(A.gripSpace,B),I!==null){if(J.matrix.fromArray(I.transform.matrix),J.matrix.decompose(J.position,J.rotation,J.scale),J.matrixWorldNeedsUpdate=!0,I.linearVelocity)J.hasLinearVelocity=!0,J.linearVelocity.copy(I.linearVelocity);else J.hasLinearVelocity=!1;if(I.angularVelocity)J.hasAngularVelocity=!0,J.angularVelocity.copy(I.angularVelocity);else J.hasAngularVelocity=!1}}if(K!==null){if(C=Q.getPose(A.targetRaySpace,B),C===null&&I!==null)C=I;if(C!==null){if(K.matrix.fromArray(C.transform.matrix),K.matrix.decompose(K.position,K.rotation,K.scale),K.matrixWorldNeedsUpdate=!0,C.linearVelocity)K.hasLinearVelocity=!0,K.linearVelocity.copy(C.linearVelocity);else K.hasLinearVelocity=!1;if(C.angularVelocity)K.hasAngularVelocity=!0,K.angularVelocity.copy(C.angularVelocity);else K.hasAngularVelocity=!1;this.dispatchEvent(nO)}}}if(K!==null)K.visible=C!==null;if(J!==null)J.visible=I!==null;if(q!==null)q.visible=E!==null;return this}_getHandJoint(A,Q){if(A.joints[Q.jointName]===void 0){const B=new C2;B.matrixAutoUpdate=!1,B.visible=!1,A.joints[Q.jointName]=B,A.add(B)}return A.joints[Q.jointName]}}var oO=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,iO=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class hY{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(A,Q,B){if(this.texture===null){const C=new Z0,I=A.properties.get(C);if(I.__webglTexture=Q.texture,Q.depthNear!=B.depthNear||Q.depthFar!=B.depthFar)this.depthNear=Q.depthNear,this.depthFar=Q.depthFar;this.texture=C}}render(A,Q){if(this.texture!==null){if(this.mesh===null){const B=Q.cameras[0].viewport,C=new l0({extensions:{fragDepth:!0},vertexShader:oO,fragmentShader:iO,uniforms:{depthColor:{value:this.texture},depthWidth:{value:B.z},depthHeight:{value:B.w}}});this.mesh=new nA(new q1(20,20),C)}A.render(this.mesh,Q)}}reset(){this.texture=null,this.mesh=null}}class vY extends K1{constructor(A,Q){super();const B=this;let C=null,I=1,E=null,K="local-floor",J=1,q=null,G=null,Y=null,H=null,Z=null,X=null;const U=new hY,F=Q.getContextAttributes();let W=null,D=null;const V=[],R=[],O=new DA;let z=null;const w=new P0;w.layers.enable(1),w.viewport=new M0;const k=new P0;k.layers.enable(2),k.viewport=new M0;const j=[w,k],h=new xY;h.layers.enable(1),h.layers.enable(2);let N=null,$=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(a){let AA=V[a];if(AA===void 0)AA=new y9,V[a]=AA;return AA.getTargetRaySpace()},this.getControllerGrip=function(a){let AA=V[a];if(AA===void 0)AA=new y9,V[a]=AA;return AA.getGripSpace()},this.getHand=function(a){let AA=V[a];if(AA===void 0)AA=new y9,V[a]=AA;return AA.getHandSpace()};function p(a){const AA=R.indexOf(a.inputSource);if(AA===-1)return;const IA=V[AA];if(IA!==void 0)IA.update(a.inputSource,a.frame,q||E),IA.dispatchEvent({type:a.type,data:a.inputSource})}function n(){C.removeEventListener("select",p),C.removeEventListener("selectstart",p),C.removeEventListener("selectend",p),C.removeEventListener("squeeze",p),C.removeEventListener("squeezestart",p),C.removeEventListener("squeezeend",p),C.removeEventListener("end",n),C.removeEventListener("inputsourceschange",S);for(let a=0;a<V.length;a++){const AA=R[a];if(AA===null)continue;R[a]=null,V[a].disconnect(AA)}N=null,$=null,U.reset(),A.setRenderTarget(W),Z=null,H=null,Y=null,C=null,D=null,qA.stop(),B.isPresenting=!1,A.setPixelRatio(z),A.setSize(O.width,O.height,!1),B.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(a){if(I=a,B.isPresenting===!0)console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(a){if(K=a,B.isPresenting===!0)console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return q||E},this.setReferenceSpace=function(a){q=a},this.getBaseLayer=function(){return H!==null?H:Z},this.getBinding=function(){return Y},this.getFrame=function(){return X},this.getSession=function(){return C},this.setSession=async function(a){if(C=a,C!==null){if(W=A.getRenderTarget(),C.addEventListener("select",p),C.addEventListener("selectstart",p),C.addEventListener("selectend",p),C.addEventListener("squeeze",p),C.addEventListener("squeezestart",p),C.addEventListener("squeezeend",p),C.addEventListener("end",n),C.addEventListener("inputsourceschange",S),F.xrCompatible!==!0)await Q.makeXRCompatible();if(z=A.getPixelRatio(),A.getSize(O),C.renderState.layers===void 0||A.capabilities.isWebGL2===!1){const AA={antialias:C.renderState.layers===void 0?F.antialias:!0,alpha:!0,depth:F.depth,stencil:F.stencil,framebufferScaleFactor:I};Z=new XRWebGLLayer(C,Q,AA),C.updateRenderState({baseLayer:Z}),A.setPixelRatio(1),A.setSize(Z.framebufferWidth,Z.framebufferHeight,!1),D=new N1(Z.framebufferWidth,Z.framebufferHeight,{format:1023,type:1009,colorSpace:A.outputColorSpace,stencilBuffer:F.stencil})}else{let AA=null,IA=null,jA=null;if(F.depth)jA=F.stencil?Q.DEPTH24_STENCIL8:Q.DEPTH_COMPONENT24,AA=F.stencil?1027:1026,IA=F.stencil?1020:1014;const bA={colorFormat:Q.RGBA8,depthFormat:jA,scaleFactor:I};Y=new XRWebGLBinding(C,Q),H=Y.createProjectionLayer(bA),C.updateRenderState({layers:[H]}),A.setPixelRatio(1),A.setSize(H.textureWidth,H.textureHeight,!1),D=new N1(H.textureWidth,H.textureHeight,{format:1023,type:1009,depthTexture:new fC(H.textureWidth,H.textureHeight,IA,void 0,void 0,void 0,void 0,void 0,void 0,AA),stencilBuffer:F.stencil,colorSpace:A.outputColorSpace,samples:F.antialias?4:0});const RA=A.properties.get(D);RA.__ignoreDepthValues=H.ignoreDepthValues}D.isXRRenderTarget=!0,this.setFoveation(J),q=null,E=await C.requestReferenceSpace(K),qA.setContext(C),qA.start(),B.isPresenting=!0,B.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(C!==null)return C.environmentBlendMode};function S(a){for(let AA=0;AA<a.removed.length;AA++){const IA=a.removed[AA],jA=R.indexOf(IA);if(jA>=0)R[jA]=null,V[jA].disconnect(IA)}for(let AA=0;AA<a.added.length;AA++){const IA=a.added[AA];let jA=R.indexOf(IA);if(jA===-1){for(let RA=0;RA<V.length;RA++)if(RA>=R.length){R.push(IA),jA=RA;break}else if(R[RA]===null){R[RA]=IA,jA=RA;break}if(jA===-1)break}const bA=V[jA];if(bA)bA.connect(IA)}}const v=new P,f=new P;function m(a,AA,IA){v.setFromMatrixPosition(AA.matrixWorld),f.setFromMatrixPosition(IA.matrixWorld);const jA=v.distanceTo(f),bA=AA.projectionMatrix.elements,RA=IA.projectionMatrix.elements,cA=bA[14]/(bA[10]-1),E0=bA[14]/(bA[10]+1),x=(bA[9]+1)/bA[5],u0=(bA[9]-1)/bA[5],C0=(bA[8]-1)/bA[0],OA=(RA[8]+1)/RA[0],pA=cA*C0,R0=cA*OA,SA=jA/(-C0+OA),aA=SA*-C0;AA.matrixWorld.decompose(a.position,a.quaternion,a.scale),a.translateX(aA),a.translateZ(SA),a.matrixWorld.compose(a.position,a.quaternion,a.scale),a.matrixWorldInverse.copy(a.matrixWorld).invert();const x0=cA+SA,k0=E0+SA,T=pA-aA,L=R0+(jA-aA),r=x*E0/k0*x0,e=u0*E0/k0*x0;a.projectionMatrix.makePerspective(T,L,r,e,x0,k0),a.projectionMatrixInverse.copy(a.projectionMatrix).invert()}function b(a,AA){if(AA===null)a.matrixWorld.copy(a.matrix);else a.matrixWorld.multiplyMatrices(AA.matrixWorld,a.matrix);a.matrixWorldInverse.copy(a.matrixWorld).invert()}this.updateCamera=function(a){if(C===null)return;if(U.texture!==null)a.near=U.depthNear,a.far=U.depthFar;if(h.near=k.near=w.near=a.near,h.far=k.far=w.far=a.far,N!==h.near||$!==h.far)C.updateRenderState({depthNear:h.near,depthFar:h.far}),N=h.near,$=h.far,w.near=N,w.far=$,k.near=N,k.far=$,w.updateProjectionMatrix(),k.updateProjectionMatrix(),a.updateProjectionMatrix();const AA=a.parent,IA=h.cameras;b(h,AA);for(let jA=0;jA<IA.length;jA++)b(IA[jA],AA);if(IA.length===2)m(h,w,k);else h.projectionMatrix.copy(w.projectionMatrix);l(a,h,AA)};function l(a,AA,IA){if(IA===null)a.matrix.copy(AA.matrixWorld);else a.matrix.copy(IA.matrixWorld),a.matrix.invert(),a.matrix.multiply(AA.matrixWorld);if(a.matrix.decompose(a.position,a.quaternion,a.scale),a.updateMatrixWorld(!0),a.projectionMatrix.copy(AA.projectionMatrix),a.projectionMatrixInverse.copy(AA.projectionMatrixInverse),a.isPerspectiveCamera)a.fov=z8*2*Math.atan(1/a.projectionMatrix.elements[5]),a.zoom=1}this.getCamera=function(){return h},this.getFoveation=function(){if(H===null&&Z===null)return;return J},this.setFoveation=function(a){if(J=a,H!==null)H.fixedFoveation=a;if(Z!==null&&Z.fixedFoveation!==void 0)Z.fixedFoveation=a},this.hasDepthSensing=function(){return U.texture!==null};let QA=null;function BA(a,AA){if(G=AA.getViewerPose(q||E),X=AA,G!==null){const IA=G.views;if(Z!==null)A.setRenderTargetFramebuffer(D,Z.framebuffer),A.setRenderTarget(D);let jA=!1;if(IA.length!==h.cameras.length)h.cameras.length=0,jA=!0;for(let RA=0;RA<IA.length;RA++){const cA=IA[RA];let E0=null;if(Z!==null)E0=Z.getViewport(cA);else{const u0=Y.getViewSubImage(H,cA);if(E0=u0.viewport,RA===0)A.setRenderTargetTextures(D,u0.colorTexture,H.ignoreDepthValues?void 0:u0.depthStencilTexture),A.setRenderTarget(D)}let x=j[RA];if(x===void 0)x=new P0,x.layers.enable(RA),x.viewport=new M0,j[RA]=x;if(x.matrix.fromArray(cA.transform.matrix),x.matrix.decompose(x.position,x.quaternion,x.scale),x.projectionMatrix.fromArray(cA.projectionMatrix),x.projectionMatrixInverse.copy(x.projectionMatrix).invert(),x.viewport.set(E0.x,E0.y,E0.width,E0.height),RA===0)h.matrix.copy(x.matrix),h.matrix.decompose(h.position,h.quaternion,h.scale);if(jA===!0)h.cameras.push(x)}const bA=C.enabledFeatures;if(bA&&bA.includes("depth-sensing")){const RA=Y.getDepthInformation(IA[0]);if(RA&&RA.isValid&&RA.texture)U.init(A,RA,C.renderState)}}for(let IA=0;IA<V.length;IA++){const jA=R[IA],bA=V[IA];if(jA!==null&&bA!==void 0)bA.update(jA,AA,q||E)}if(U.render(A,h),QA)QA(a,AA);if(AA.detectedPlanes)B.dispatchEvent({type:"planesdetected",data:AA});X=null}const qA=new LY;qA.setAnimationLoop(BA),this.setAnimationLoop=function(a){QA=a},this.dispose=function(){}}}var W6=new u1,aO=new zA;class b2{constructor(A={}){const{canvas:Q=eD(),context:B=null,depth:C=!0,stencil:I=!0,alpha:E=!1,antialias:K=!1,premultipliedAlpha:J=!0,preserveDrawingBuffer:q=!1,powerPreference:G="default",failIfMajorPerformanceCaveat:Y=!1}=A;this.isWebGLRenderer=!0;let H;if(B!==null)H=B.getContextAttributes().alpha;else H=E;const Z=new Uint32Array(4),X=new Int32Array(4);let U=null,F=null;const W=[],D=[];this.domElement=Q,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace="srgb",this._useLegacyLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const V=this;let R=!1,O=0,z=0,w=null,k=-1,j=null;const h=new M0,N=new M0;let $=null;const p=new PA(0);let n=0,S=Q.width,v=Q.height,f=1,m=null,b=null;const l=new M0(0,0,S,v),QA=new M0(0,0,S,v);let BA=!1;const qA=new c9;let a=!1,AA=!1,IA=null;const jA=new zA,bA=new DA,RA=new P,cA={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function E0(){return w===null?f:1}let x=B;function u0(M,u){for(let o=0;o<M.length;o++){const i=M[o],s=Q.getContext(i,u);if(s!==null)return s}return null}try{const M={alpha:!0,depth:C,stencil:I,antialias:K,premultipliedAlpha:J,preserveDrawingBuffer:q,powerPreference:G,failIfMajorPerformanceCaveat:Y};if("setAttribute"in Q)Q.setAttribute("data-engine","three.js r162");if(Q.addEventListener("webglcontextlost",NA,!1),Q.addEventListener("webglcontextrestored",TA,!1),Q.addEventListener("webglcontextcreationerror",g,!1),x===null){const u=["webgl2","webgl","experimental-webgl"];if(V.isWebGL1Renderer===!0)u.shift();if(x=u0(u,M),x===null)if(u0(u))throw new Error("Error creating WebGL context with your selected attributes.");else throw new Error("Error creating WebGL context.")}if(typeof WebGLRenderingContext!=="undefined"&&x instanceof WebGLRenderingContext)console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163.");if(x.getShaderPrecisionFormat===void 0)x.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}}catch(M){throw console.error("THREE.WebGLRenderer: "+M.message),M}let C0,OA,pA,R0,SA,aA,x0,k0,T,L,r,e,GA,CA,mA,kA,ZA,WA,Y0,JA,f0,xA,MA,_A;function _(){C0=new Fw(x),OA=new qw(x,C0,A),C0.init(OA),xA=new sO(x,C0,OA),pA=new cO(x,C0,OA),R0=new Dw(x),SA=new jO,aA=new lO(x,C0,pA,SA,OA,xA,R0),x0=new Yw(V),k0=new Xw(V),T=new LR(x,OA),MA=new Kw(x,C0,T,OA),L=new Ww(x,T,R0,MA),r=new ww(x,L,T,R0),Y0=new Nw(x,OA,aA),kA=new Gw(SA),e=new TO(V,x0,k0,C0,OA,MA,kA),GA=new rO(V,SA),CA=new yO,mA=new pO(C0,OA),WA=new Ew(V,x0,k0,pA,r,H,J),ZA=new dO(V,r,OA),_A=new tO(x,R0,OA,pA),JA=new Jw(x,C0,R0,OA),f0=new Uw(x,C0,R0,OA),R0.programs=e.programs,V.capabilities=OA,V.extensions=C0,V.properties=SA,V.renderLists=CA,V.shadowMap=ZA,V.state=pA,V.info=R0}_();const t=new vY(V,x);this.xr=t,this.getContext=function(){return x},this.getContextAttributes=function(){return x.getContextAttributes()},this.forceContextLoss=function(){const M=C0.get("WEBGL_lose_context");if(M)M.loseContext()},this.forceContextRestore=function(){const M=C0.get("WEBGL_lose_context");if(M)M.restoreContext()},this.getPixelRatio=function(){return f},this.setPixelRatio=function(M){if(M===void 0)return;f=M,this.setSize(S,v,!1)},this.getSize=function(M){return M.set(S,v)},this.setSize=function(M,u,o=!0){if(t.isPresenting){console.warn("THREE.WebGLRenderer: Can\'t change size while VR device is presenting.");return}if(S=M,v=u,Q.width=Math.floor(M*f),Q.height=Math.floor(u*f),o===!0)Q.style.width=M+"px",Q.style.height=u+"px";this.setViewport(0,0,M,u)},this.getDrawingBufferSize=function(M){return M.set(S*f,v*f).floor()},this.setDrawingBufferSize=function(M,u,o){S=M,v=u,f=o,Q.width=Math.floor(M*o),Q.height=Math.floor(u*o),this.setViewport(0,0,M,u)},this.getCurrentViewport=function(M){return M.copy(h)},this.getViewport=function(M){return M.copy(l)},this.setViewport=function(M,u,o,i){if(M.isVector4)l.set(M.x,M.y,M.z,M.w);else l.set(M,u,o,i);pA.viewport(h.copy(l).multiplyScalar(f).round())},this.getScissor=function(M){return M.copy(QA)},this.setScissor=function(M,u,o,i){if(M.isVector4)QA.set(M.x,M.y,M.z,M.w);else QA.set(M,u,o,i);pA.scissor(N.copy(QA).multiplyScalar(f).round())},this.getScissorTest=function(){return BA},this.setScissorTest=function(M){pA.setScissorTest(BA=M)},this.setOpaqueSort=function(M){m=M},this.setTransparentSort=function(M){b=M},this.getClearColor=function(M){return M.copy(WA.getClearColor())},this.setClearColor=function(){WA.setClearColor.apply(WA,arguments)},this.getClearAlpha=function(){return WA.getClearAlpha()},this.setClearAlpha=function(){WA.setClearAlpha.apply(WA,arguments)},this.clear=function(M=!0,u=!0,o=!0){let i=0;if(M){let s=!1;if(w!==null){const VA=w.texture.format;s=VA===1033||VA===1031||VA===1029}if(s){const VA=w.texture.type,$A=VA===1009||VA===1014||VA===1012||VA===1020||VA===1017||VA===1018,hA=WA.getClearColor(),uA=WA.getClearAlpha(),A0=hA.r,lA=hA.g,iA=hA.b;if($A)Z[0]=A0,Z[1]=lA,Z[2]=iA,Z[3]=uA,x.clearBufferuiv(x.COLOR,0,Z);else X[0]=A0,X[1]=lA,X[2]=iA,X[3]=uA,x.clearBufferiv(x.COLOR,0,X)}else i|=x.COLOR_BUFFER_BIT}if(u)i|=x.DEPTH_BUFFER_BIT;if(o)i|=x.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295);x.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){if(Q.removeEventListener("webglcontextlost",NA,!1),Q.removeEventListener("webglcontextrestored",TA,!1),Q.removeEventListener("webglcontextcreationerror",g,!1),CA.dispose(),mA.dispose(),SA.dispose(),x0.dispose(),k0.dispose(),r.dispose(),MA.dispose(),_A.dispose(),e.dispose(),t.dispose(),t.removeEventListener("sessionstart",O0),t.removeEventListener("sessionend",A1),IA)IA.dispose(),IA=null;oA.stop()};function NA(M){M.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),R=!0}function TA(){console.log("THREE.WebGLRenderer: Context Restored."),R=!1;const M=R0.autoReset,u=ZA.enabled,o=ZA.autoUpdate,i=ZA.needsUpdate,s=ZA.type;_(),R0.autoReset=M,ZA.enabled=u,ZA.autoUpdate=o,ZA.needsUpdate=i,ZA.type=s}function g(M){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",M.statusMessage)}function YA(M){const u=M.target;u.removeEventListener("dispose",YA),c(u)}function c(M){HA(M),SA.remove(M)}function HA(M){const u=SA.get(M).programs;if(u!==void 0){if(u.forEach(function(o){e.releaseProgram(o)}),M.isShaderMaterial)e.releaseShaderCache(M)}}this.renderBufferDirect=function(M,u,o,i,s,VA){if(u===null)u=cA;const $A=s.isMesh&&s.matrixWorld.determinant()<0,hA=wU(M,u,o,i,s);pA.setMaterial(i,$A);let uA=o.index,A0=1;if(i.wireframe===!0){if(uA=L.getWireframeAttribute(o),uA===void 0)return;A0=2}const lA=o.drawRange,iA=o.attributes.position;let m0=lA.start*A0,s1=(lA.start+lA.count)*A0;if(VA!==null)m0=Math.max(m0,VA.start*A0),s1=Math.min(s1,(VA.start+VA.count)*A0);if(uA!==null)m0=Math.max(m0,0),s1=Math.min(s1,uA.count);else if(iA!==void 0&&iA!==null)m0=Math.max(m0,0),s1=Math.min(s1,iA.count);const Q1=s1-m0;if(Q1<0||Q1===Infinity)return;MA.setup(s,i,hA,o,uA);let i2,h0=JA;if(uA!==null)i2=T.get(uA),h0=f0,h0.setIndex(i2);if(s.isMesh)if(i.wireframe===!0)pA.setLineWidth(i.wireframeLinewidth*E0()),h0.setMode(x.LINES);else h0.setMode(x.TRIANGLES);else if(s.isLine){let tA=i.linewidth;if(tA===void 0)tA=1;if(pA.setLineWidth(tA*E0()),s.isLineSegments)h0.setMode(x.LINES);else if(s.isLineLoop)h0.setMode(x.LINE_LOOP);else h0.setMode(x.LINE_STRIP)}else if(s.isPoints)h0.setMode(x.POINTS);else if(s.isSprite)h0.setMode(x.TRIANGLES);if(s.isBatchedMesh)h0.renderMultiDraw(s._multiDrawStarts,s._multiDrawCounts,s._multiDrawCount);else if(s.isInstancedMesh)h0.renderInstances(m0,Q1,s.count);else if(o.isInstancedBufferGeometry){const tA=o._maxInstanceCount!==void 0?o._maxInstanceCount:Infinity,HB=Math.min(o.instanceCount,tA);h0.renderInstances(m0,Q1,HB)}else h0.render(m0,Q1)};function UA(M,u,o){if(M.transparent===!0&&M.side===2&&M.forceSinglePass===!1)M.side=1,M.needsUpdate=!0,M7(M,u,o),M.side=0,M.needsUpdate=!0,M7(M,u,o),M.side=2;else M7(M,u,o)}this.compile=function(M,u,o=null){if(o===null)o=M;if(F=mA.get(o),F.init(),D.push(F),o.traverseVisible(function(s){if(s.isLight&&s.layers.test(u.layers)){if(F.pushLight(s),s.castShadow)F.pushShadow(s)}}),M!==o)M.traverseVisible(function(s){if(s.isLight&&s.layers.test(u.layers)){if(F.pushLight(s),s.castShadow)F.pushShadow(s)}});F.setupLights(V._useLegacyLights);const i=new Set;return M.traverse(function(s){const VA=s.material;if(VA)if(Array.isArray(VA))for(let $A=0;$A<VA.length;$A++){const hA=VA[$A];UA(hA,o,s),i.add(hA)}else UA(VA,o,s),i.add(VA)}),D.pop(),F=null,i},this.compileAsync=function(M,u,o=null){const i=this.compile(M,u,o);return new Promise((s)=>{function VA(){if(i.forEach(function($A){if(SA.get($A).currentProgram.isReady())i.delete($A)}),i.size===0){s(M);return}setTimeout(VA,10)}if(C0.get("KHR_parallel_shader_compile")!==null)VA();else setTimeout(VA,10)})};let rA=null;function H0(M){if(rA)rA(M)}function O0(){oA.stop()}function A1(){oA.start()}const oA=new LY;if(oA.setAnimationLoop(H0),typeof self!=="undefined")oA.setContext(self);this.setAnimationLoop=function(M){rA=M,t.setAnimationLoop(M),M===null?oA.stop():oA.start()},t.addEventListener("sessionstart",O0),t.addEventListener("sessionend",A1),this.render=function(M,u){if(u!==void 0&&u.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(R===!0)return;if(M.matrixWorldAutoUpdate===!0)M.updateMatrixWorld();if(u.parent===null&&u.matrixWorldAutoUpdate===!0)u.updateMatrixWorld();if(t.enabled===!0&&t.isPresenting===!0){if(t.cameraAutoUpdate===!0)t.updateCamera(u);u=t.getCamera()}if(M.isScene===!0)M.onBeforeRender(V,M,u,w);if(F=mA.get(M,D.length),F.init(),D.push(F),jA.multiplyMatrices(u.projectionMatrix,u.matrixWorldInverse),qA.setFromProjectionMatrix(jA),AA=this.localClippingEnabled,a=kA.init(this.clippingPlanes,AA),U=CA.get(M,W.length),U.init(),W.push(U),W1(M,u,0,V.sortObjects),U.finish(),V.sortObjects===!0)U.sort(m,b);if(this.info.render.frame++,a===!0)kA.beginShadows();const o=F.state.shadowsArray;if(ZA.render(o,M,u),a===!0)kA.endShadows();if(this.info.autoReset===!0)this.info.reset();if(t.enabled===!1||t.isPresenting===!1||t.hasDepthSensing()===!1)WA.render(U,M);if(F.setupLights(V._useLegacyLights),u.isArrayCamera){const i=u.cameras;for(let s=0,VA=i.length;s<VA;s++){const $A=i[s];$1(U,M,$A,$A.viewport)}}else $1(U,M,u);if(w!==null)aA.updateMultisampleRenderTarget(w),aA.updateRenderTargetMipmap(w);if(M.isScene===!0)M.onAfterRender(V,M,u);if(MA.resetDefaultState(),k=-1,j=null,D.pop(),D.length>0)F=D[D.length-1];else F=null;if(W.pop(),W.length>0)U=W[W.length-1];else U=null};function W1(M,u,o,i){if(M.visible===!1)return;if(M.layers.test(u.layers)){if(M.isGroup)o=M.renderOrder;else if(M.isLOD){if(M.autoUpdate===!0)M.update(u)}else if(M.isLight){if(F.pushLight(M),M.castShadow)F.pushShadow(M)}else if(M.isSprite){if(!M.frustumCulled||qA.intersectsSprite(M)){if(i)RA.setFromMatrixPosition(M.matrixWorld).applyMatrix4(jA);const $A=r.update(M),hA=M.material;if(hA.visible)U.push(M,$A,hA,o,RA.z,null)}}else if(M.isMesh||M.isLine||M.isPoints){if(!M.frustumCulled||qA.intersectsObject(M)){const $A=r.update(M),hA=M.material;if(i){if(M.boundingSphere!==void 0){if(M.boundingSphere===null)M.computeBoundingSphere();RA.copy(M.boundingSphere.center)}else{if($A.boundingSphere===null)$A.computeBoundingSphere();RA.copy($A.boundingSphere.center)}RA.applyMatrix4(M.matrixWorld).applyMatrix4(jA)}if(Array.isArray(hA)){const uA=$A.groups;for(let A0=0,lA=uA.length;A0<lA;A0++){const iA=uA[A0],m0=hA[iA.materialIndex];if(m0&&m0.visible)U.push(M,$A,m0,o,RA.z,iA)}}else if(hA.visible)U.push(M,$A,hA,o,RA.z,null)}}}const VA=M.children;for(let $A=0,hA=VA.length;$A<hA;$A++)W1(VA[$A],u,o,i)}function $1(M,u,o,i){const{opaque:s,transmissive:VA,transparent:$A}=M;if(F.setupLightsView(o),a===!0)kA.setGlobalState(V.clippingPlanes,o);if(VA.length>0)z7(s,VA,u,o);if(i)pA.viewport(h.copy(i));if(s.length>0)k7(s,u,o);if(VA.length>0)k7(VA,u,o);if($A.length>0)k7($A,u,o);pA.buffers.depth.setTest(!0),pA.buffers.depth.setMask(!0),pA.buffers.color.setMask(!0),pA.setPolygonOffset(!1)}function z7(M,u,o,i){if((o.isScene===!0?o.overrideMaterial:null)!==null)return;const VA=OA.isWebGL2;if(IA===null)IA=new N1(1,1,{generateMipmaps:!0,type:C0.has("EXT_color_buffer_half_float")?1016:1009,minFilter:1008,samples:VA?4:0});if(V.getDrawingBufferSize(bA),VA)IA.setSize(bA.x,bA.y);else IA.setSize(x9(bA.x),x9(bA.y));const $A=V.getRenderTarget();if(V.setRenderTarget(IA),V.getClearColor(p),n=V.getClearAlpha(),n<1)V.setClearColor(16777215,0.5);V.clear();const hA=V.toneMapping;V.toneMapping=0,k7(M,o,i),aA.updateMultisampleRenderTarget(IA),aA.updateRenderTargetMipmap(IA);let uA=!1;for(let A0=0,lA=u.length;A0<lA;A0++){const iA=u[A0],m0=iA.object,s1=iA.geometry,Q1=iA.material,i2=iA.group;if(Q1.side===2&&m0.layers.test(i.layers)){const h0=Q1.side;Q1.side=1,Q1.needsUpdate=!0,oK(m0,o,i,s1,Q1,i2),Q1.side=h0,Q1.needsUpdate=!0,uA=!0}}if(uA===!0)aA.updateMultisampleRenderTarget(IA),aA.updateRenderTargetMipmap(IA);V.setRenderTarget($A),V.setClearColor(p,n),V.toneMapping=hA}function k7(M,u,o){const i=u.isScene===!0?u.overrideMaterial:null;for(let s=0,VA=M.length;s<VA;s++){const $A=M[s],hA=$A.object,uA=$A.geometry,A0=i===null?$A.material:i,lA=$A.group;if(hA.layers.test(o.layers))oK(hA,u,o,uA,A0,lA)}}function oK(M,u,o,i,s,VA){if(M.onBeforeRender(V,u,o,i,s,VA),M.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,M.matrixWorld),M.normalMatrix.getNormalMatrix(M.modelViewMatrix),s.onBeforeRender(V,u,o,i,M,VA),s.transparent===!0&&s.side===2&&s.forceSinglePass===!1)s.side=1,s.needsUpdate=!0,V.renderBufferDirect(o,u,i,s,M,VA),s.side=0,s.needsUpdate=!0,V.renderBufferDirect(o,u,i,s,M,VA),s.side=2;else V.renderBufferDirect(o,u,i,s,M,VA);M.onAfterRender(V,u,o,i,s,VA)}function M7(M,u,o){if(u.isScene!==!0)u=cA;const i=SA.get(M),s=F.state.lights,VA=F.state.shadowsArray,$A=s.state.version,hA=e.getParameters(M,s.state,VA,u,o),uA=e.getProgramCacheKey(hA);let A0=i.programs;if(i.environment=M.isMeshStandardMaterial?u.environment:null,i.fog=u.fog,i.envMap=(M.isMeshStandardMaterial?k0:x0).get(M.envMap||i.environment),i.envMapRotation=i.environment!==null&&M.envMap===null?u.environmentRotation:M.envMapRotation,A0===void 0)M.addEventListener("dispose",YA),A0=new Map,i.programs=A0;let lA=A0.get(uA);if(lA!==void 0){if(i.currentProgram===lA&&i.lightsStateVersion===$A)return aK(M,hA),lA}else hA.uniforms=e.getUniforms(M),M.onBuild(o,hA,V),M.onBeforeCompile(hA,V),lA=e.acquireProgram(hA,uA),A0.set(uA,lA),i.uniforms=hA.uniforms;const iA=i.uniforms;if(!M.isShaderMaterial&&!M.isRawShaderMaterial||M.clipping===!0)iA.clippingPlanes=kA.uniform;if(aK(M,hA),i.needsLights=LU(M),i.lightsStateVersion=$A,i.needsLights)iA.ambientLightColor.value=s.state.ambient,iA.lightProbe.value=s.state.probe,iA.directionalLights.value=s.state.directional,iA.directionalLightShadows.value=s.state.directionalShadow,iA.spotLights.value=s.state.spot,iA.spotLightShadows.value=s.state.spotShadow,iA.rectAreaLights.value=s.state.rectArea,iA.ltc_1.value=s.state.rectAreaLTC1,iA.ltc_2.value=s.state.rectAreaLTC2,iA.pointLights.value=s.state.point,iA.pointLightShadows.value=s.state.pointShadow,iA.hemisphereLights.value=s.state.hemi,iA.directionalShadowMap.value=s.state.directionalShadowMap,iA.directionalShadowMatrix.value=s.state.directionalShadowMatrix,iA.spotShadowMap.value=s.state.spotShadowMap,iA.spotLightMatrix.value=s.state.spotLightMatrix,iA.spotLightMap.value=s.state.spotLightMap,iA.pointShadowMap.value=s.state.pointShadowMap,iA.pointShadowMatrix.value=s.state.pointShadowMatrix;return i.currentProgram=lA,i.uniformsList=null,lA}function iK(M){if(M.uniformsList===null){const u=M.currentProgram.getUniforms();M.uniformsList=G3.seqWithValue(u.seq,M.uniforms)}return M.uniformsList}function aK(M,u){const o=SA.get(M);o.outputColorSpace=u.outputColorSpace,o.batching=u.batching,o.instancing=u.instancing,o.instancingColor=u.instancingColor,o.instancingMorph=u.instancingMorph,o.skinning=u.skinning,o.morphTargets=u.morphTargets,o.morphNormals=u.morphNormals,o.morphColors=u.morphColors,o.morphTargetsCount=u.morphTargetsCount,o.numClippingPlanes=u.numClippingPlanes,o.numIntersection=u.numClipIntersection,o.vertexAlphas=u.vertexAlphas,o.vertexTangents=u.vertexTangents,o.toneMapping=u.toneMapping}function wU(M,u,o,i,s){if(u.isScene!==!0)u=cA;aA.resetTextureUnits();const VA=u.fog,$A=i.isMeshStandardMaterial?u.environment:null,hA=w===null?V.outputColorSpace:w.isXRRenderTarget===!0?w.texture.colorSpace:"srgb-linear",uA=(i.isMeshStandardMaterial?k0:x0).get(i.envMap||$A),A0=i.vertexColors===!0&&!!o.attributes.color&&o.attributes.color.itemSize===4,lA=!!o.attributes.tangent&&(!!i.normalMap||i.anisotropy>0),iA=!!o.morphAttributes.position,m0=!!o.morphAttributes.normal,s1=!!o.morphAttributes.color;let Q1=0;if(i.toneMapped){if(w===null||w.isXRRenderTarget===!0)Q1=V.toneMapping}const i2=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,h0=i2!==void 0?i2.length:0,tA=SA.get(i),HB=F.state.lights;if(a===!0){if(AA===!0||M!==j){const t1=M===j&&i.id===k;kA.setState(i,M,t1)}}let j0=!1;if(i.version===tA.__version){if(tA.needsLights&&tA.lightsStateVersion!==HB.state.version)j0=!0;else if(tA.outputColorSpace!==hA)j0=!0;else if(s.isBatchedMesh&&tA.batching===!1)j0=!0;else if(!s.isBatchedMesh&&tA.batching===!0)j0=!0;else if(s.isInstancedMesh&&tA.instancing===!1)j0=!0;else if(!s.isInstancedMesh&&tA.instancing===!0)j0=!0;else if(s.isSkinnedMesh&&tA.skinning===!1)j0=!0;else if(!s.isSkinnedMesh&&tA.skinning===!0)j0=!0;else if(s.isInstancedMesh&&tA.instancingColor===!0&&s.instanceColor===null)j0=!0;else if(s.isInstancedMesh&&tA.instancingColor===!1&&s.instanceColor!==null)j0=!0;else if(s.isInstancedMesh&&tA.instancingMorph===!0&&s.morphTexture===null)j0=!0;else if(s.isInstancedMesh&&tA.instancingMorph===!1&&s.morphTexture!==null)j0=!0;else if(tA.envMap!==uA)j0=!0;else if(i.fog===!0&&tA.fog!==VA)j0=!0;else if(tA.numClippingPlanes!==void 0&&(tA.numClippingPlanes!==kA.numPlanes||tA.numIntersection!==kA.numIntersection))j0=!0;else if(tA.vertexAlphas!==A0)j0=!0;else if(tA.vertexTangents!==lA)j0=!0;else if(tA.morphTargets!==iA)j0=!0;else if(tA.morphNormals!==m0)j0=!0;else if(tA.morphColors!==s1)j0=!0;else if(tA.toneMapping!==Q1)j0=!0;else if(OA.isWebGL2===!0&&tA.morphTargetsCount!==h0)j0=!0}else j0=!0,tA.__version=i.version;let t4=tA.currentProgram;if(j0===!0)t4=M7(i,u,s);let rK=!1,D5=!1,ZB=!1;const U1=t4.getUniforms(),e4=tA.uniforms;if(pA.useProgram(t4.program))rK=!0,D5=!0,ZB=!0;if(i.id!==k)k=i.id,D5=!0;if(rK||j!==M){U1.setValue(x,"projectionMatrix",M.projectionMatrix),U1.setValue(x,"viewMatrix",M.matrixWorldInverse);const t1=U1.map.cameraPosition;if(t1!==void 0)t1.setValue(x,RA.setFromMatrixPosition(M.matrixWorld));if(OA.logarithmicDepthBuffer)U1.setValue(x,"logDepthBufFC",2/(Math.log(M.far+1)/Math.LN2));if(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)U1.setValue(x,"isOrthographic",M.isOrthographicCamera===!0);if(j!==M)j=M,D5=!0,ZB=!0}if(s.isSkinnedMesh){U1.setOptional(x,s,"bindMatrix"),U1.setOptional(x,s,"bindMatrixInverse");const t1=s.skeleton;if(t1)if(OA.floatVertexTextures){if(t1.boneTexture===null)t1.computeBoneTexture();U1.setValue(x,"boneTexture",t1.boneTexture,aA)}else console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required.")}if(s.isBatchedMesh)U1.setOptional(x,s,"batchingTexture"),U1.setValue(x,"batchingTexture",s._matricesTexture,aA);const XB=o.morphAttributes;if(XB.position!==void 0||XB.normal!==void 0||XB.color!==void 0&&OA.isWebGL2===!0)Y0.update(s,o,t4);if(D5||tA.receiveShadow!==s.receiveShadow)tA.receiveShadow=s.receiveShadow,U1.setValue(x,"receiveShadow",s.receiveShadow);if(i.isMeshGouraudMaterial&&i.envMap!==null)e4.envMap.value=uA,e4.flipEnvMap.value=uA.isCubeTexture&&uA.isRenderTargetTexture===!1?-1:1;if(D5){if(U1.setValue(x,"toneMappingExposure",V.toneMappingExposure),tA.needsLights)OU(e4,ZB);if(VA&&i.fog===!0)GA.refreshFogUniforms(e4,VA);GA.refreshMaterialUniforms(e4,i,f,v,IA),G3.upload(x,iK(tA),e4,aA)}if(i.isShaderMaterial&&i.uniformsNeedUpdate===!0)G3.upload(x,iK(tA),e4,aA),i.uniformsNeedUpdate=!1;if(i.isSpriteMaterial)U1.setValue(x,"center",s.center);if(U1.setValue(x,"modelViewMatrix",s.modelViewMatrix),U1.setValue(x,"normalMatrix",s.normalMatrix),U1.setValue(x,"modelMatrix",s.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){const t1=i.uniformsGroups;for(let FB=0,zU=t1.length;FB<zU;FB++)if(OA.isWebGL2){const tK=t1[FB];_A.update(tK,t4),_A.bind(tK,t4)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return t4}function OU(M,u){M.ambientLightColor.needsUpdate=u,M.lightProbe.needsUpdate=u,M.directionalLights.needsUpdate=u,M.directionalLightShadows.needsUpdate=u,M.pointLights.needsUpdate=u,M.pointLightShadows.needsUpdate=u,M.spotLights.needsUpdate=u,M.spotLightShadows.needsUpdate=u,M.rectAreaLights.needsUpdate=u,M.hemisphereLights.needsUpdate=u}function LU(M){return M.isMeshLambertMaterial||M.isMeshToonMaterial||M.isMeshPhongMaterial||M.isMeshStandardMaterial||M.isShadowMaterial||M.isShaderMaterial&&M.lights===!0}if(this.getActiveCubeFace=function(){return O},this.getActiveMipmapLevel=function(){return z},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(M,u,o){SA.get(M.texture).__webglTexture=u,SA.get(M.depthTexture).__webglTexture=o;const i=SA.get(M);if(i.__hasExternalTextures=!0,i.__autoAllocateDepthBuffer=o===void 0,!i.__autoAllocateDepthBuffer){if(C0.has("WEBGL_multisampled_render_to_texture")===!0)console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1}},this.setRenderTargetFramebuffer=function(M,u){const o=SA.get(M);o.__webglFramebuffer=u,o.__useDefaultFramebuffer=u===void 0},this.setRenderTarget=function(M,u=0,o=0){w=M,O=u,z=o;let i=!0,s=null,VA=!1,$A=!1;if(M){const uA=SA.get(M);if(uA.__useDefaultFramebuffer!==void 0)pA.bindFramebuffer(x.FRAMEBUFFER,null),i=!1;else if(uA.__webglFramebuffer===void 0)aA.setupRenderTarget(M);else if(uA.__hasExternalTextures)aA.rebindTextures(M,SA.get(M.texture).__webglTexture,SA.get(M.depthTexture).__webglTexture);const A0=M.texture;if(A0.isData3DTexture||A0.isDataArrayTexture||A0.isCompressedArrayTexture)$A=!0;const lA=SA.get(M).__webglFramebuffer;if(M.isWebGLCubeRenderTarget){if(Array.isArray(lA[u]))s=lA[u][o];else s=lA[u];VA=!0}else if(OA.isWebGL2&&M.samples>0&&aA.useMultisampledRTT(M)===!1)s=SA.get(M).__webglMultisampledFramebuffer;else if(Array.isArray(lA))s=lA[o];else s=lA;h.copy(M.viewport),N.copy(M.scissor),$=M.scissorTest}else h.copy(l).multiplyScalar(f).floor(),N.copy(QA).multiplyScalar(f).floor(),$=BA;if(pA.bindFramebuffer(x.FRAMEBUFFER,s)&&OA.drawBuffers&&i)pA.drawBuffers(M,s);if(pA.viewport(h),pA.scissor(N),pA.setScissorTest($),VA){const uA=SA.get(M.texture);x.framebufferTexture2D(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.TEXTURE_CUBE_MAP_POSITIVE_X+u,uA.__webglTexture,o)}else if($A){const uA=SA.get(M.texture),A0=u||0;x.framebufferTextureLayer(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,uA.__webglTexture,o||0,A0)}k=-1},this.readRenderTargetPixels=function(M,u,o,i,s,VA,$A){if(!(M&&M.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let hA=SA.get(M).__webglFramebuffer;if(M.isWebGLCubeRenderTarget&&$A!==void 0)hA=hA[$A];if(hA){pA.bindFramebuffer(x.FRAMEBUFFER,hA);try{const uA=M.texture,A0=uA.format,lA=uA.type;if(A0!==1023&&xA.convert(A0)!==x.getParameter(x.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const iA=lA===1016&&(C0.has("EXT_color_buffer_half_float")||OA.isWebGL2&&C0.has("EXT_color_buffer_float"));if(lA!==1009&&xA.convert(lA)!==x.getParameter(x.IMPLEMENTATION_COLOR_READ_TYPE)&&!(lA===1015&&(OA.isWebGL2||C0.has("OES_texture_float")||C0.has("WEBGL_color_buffer_float")))&&!iA){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}if(u>=0&&u<=M.width-i&&(o>=0&&o<=M.height-s))x.readPixels(u,o,i,s,xA.convert(A0),xA.convert(lA),VA)}finally{const uA=w!==null?SA.get(w).__webglFramebuffer:null;pA.bindFramebuffer(x.FRAMEBUFFER,uA)}}},this.copyFramebufferToTexture=function(M,u,o=0){const i=Math.pow(2,-o),s=Math.floor(u.image.width*i),VA=Math.floor(u.image.height*i);aA.setTexture2D(u,0),x.copyTexSubImage2D(x.TEXTURE_2D,o,0,0,M.x,M.y,s,VA),pA.unbindTexture()},this.copyTextureToTexture=function(M,u,o,i=0){const s=u.image.width,VA=u.image.height,$A=xA.convert(o.format),hA=xA.convert(o.type);if(aA.setTexture2D(o,0),x.pixelStorei(x.UNPACK_FLIP_Y_WEBGL,o.flipY),x.pixelStorei(x.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.premultiplyAlpha),x.pixelStorei(x.UNPACK_ALIGNMENT,o.unpackAlignment),u.isDataTexture)x.texSubImage2D(x.TEXTURE_2D,i,M.x,M.y,s,VA,$A,hA,u.image.data);else if(u.isCompressedTexture)x.compressedTexSubImage2D(x.TEXTURE_2D,i,M.x,M.y,u.mipmaps[0].width,u.mipmaps[0].height,$A,u.mipmaps[0].data);else x.texSubImage2D(x.TEXTURE_2D,i,M.x,M.y,$A,hA,u.image);if(i===0&&o.generateMipmaps)x.generateMipmap(x.TEXTURE_2D);pA.unbindTexture()},this.copyTextureToTexture3D=function(M,u,o,i,s=0){if(V.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const VA=Math.round(M.max.x-M.min.x),$A=Math.round(M.max.y-M.min.y),hA=M.max.z-M.min.z+1,uA=xA.convert(i.format),A0=xA.convert(i.type);let lA;if(i.isData3DTexture)aA.setTexture3D(i,0),lA=x.TEXTURE_3D;else if(i.isDataArrayTexture||i.isCompressedArrayTexture)aA.setTexture2DArray(i,0),lA=x.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}x.pixelStorei(x.UNPACK_FLIP_Y_WEBGL,i.flipY),x.pixelStorei(x.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),x.pixelStorei(x.UNPACK_ALIGNMENT,i.unpackAlignment);const iA=x.getParameter(x.UNPACK_ROW_LENGTH),m0=x.getParameter(x.UNPACK_IMAGE_HEIGHT),s1=x.getParameter(x.UNPACK_SKIP_PIXELS),Q1=x.getParameter(x.UNPACK_SKIP_ROWS),i2=x.getParameter(x.UNPACK_SKIP_IMAGES),h0=o.isCompressedTexture?o.mipmaps[s]:o.image;if(x.pixelStorei(x.UNPACK_ROW_LENGTH,h0.width),x.pixelStorei(x.UNPACK_IMAGE_HEIGHT,h0.height),x.pixelStorei(x.UNPACK_SKIP_PIXELS,M.min.x),x.pixelStorei(x.UNPACK_SKIP_ROWS,M.min.y),x.pixelStorei(x.UNPACK_SKIP_IMAGES,M.min.z),o.isDataTexture||o.isData3DTexture)x.texSubImage3D(lA,s,u.x,u.y,u.z,VA,$A,hA,uA,A0,h0.data);else if(i.isCompressedArrayTexture)x.compressedTexSubImage3D(lA,s,u.x,u.y,u.z,VA,$A,hA,uA,h0.data);else x.texSubImage3D(lA,s,u.x,u.y,u.z,VA,$A,hA,uA,A0,h0);if(x.pixelStorei(x.UNPACK_ROW_LENGTH,iA),x.pixelStorei(x.UNPACK_IMAGE_HEIGHT,m0),x.pixelStorei(x.UNPACK_SKIP_PIXELS,s1),x.pixelStorei(x.UNPACK_SKIP_ROWS,Q1),x.pixelStorei(x.UNPACK_SKIP_IMAGES,i2),s===0&&i.generateMipmaps)x.generateMipmap(lA);pA.unbindTexture()},this.initTexture=function(M){if(M.isCubeTexture)aA.setTextureCube(M,0);else if(M.isData3DTexture)aA.setTexture3D(M,0);else if(M.isDataArrayTexture||M.isCompressedArrayTexture)aA.setTexture2DArray(M,0);else aA.setTexture2D(M,0);pA.unbindTexture()},this.resetState=function(){O=0,z=0,w=null,pA.reset(),MA.reset()},typeof __THREE_DEVTOOLS__!=="undefined")__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return 2000}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(A){this._outputColorSpace=A;const Q=this.getContext();Q.drawingBufferColorSpace=A==="display-p3"?"display-p3":"srgb",Q.unpackColorSpace=W0.workingColorSpace==="display-p3-linear"?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(A){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=A}}class fY extends b2{}fY.prototype.isWebGL1Renderer=!0;class a0 extends F0{constructor(){super();if(this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new u1,this.environmentRotation=new u1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__!=="undefined")__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(A,Q){if(super.copy(A,Q),A.background!==null)this.background=A.background.clone();if(A.environment!==null)this.environment=A.environment.clone();if(A.fog!==null)this.fog=A.fog.clone();if(this.backgroundBlurriness=A.backgroundBlurriness,this.backgroundIntensity=A.backgroundIntensity,this.backgroundRotation.copy(A.backgroundRotation),this.environmentRotation.copy(A.environmentRotation),A.overrideMaterial!==null)this.overrideMaterial=A.overrideMaterial.clone();return this.matrixAutoUpdate=A.matrixAutoUpdate,this}toJSON(A){const Q=super.toJSON(A);if(this.fog!==null)Q.object.fog=this.fog.toJSON();if(this.backgroundBlurriness>0)Q.object.backgroundBlurriness=this.backgroundBlurriness;if(this.backgroundIntensity!==1)Q.object.backgroundIntensity=this.backgroundIntensity;return Q.object.backgroundRotation=this.backgroundRotation.toArray(),Q.object.environmentRotation=this.environmentRotation.toArray(),Q}}class n9{constructor(A,Q){this.isInterleavedBuffer=!0,this.array=A,this.stride=Q,this.count=A!==void 0?A.length/Q:0,this.usage=35044,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=R2()}onUploadCallback(){}set needsUpdate(A){if(A===!0)this.version++}get updateRange(){return VY("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(A){return this.usage=A,this}addUpdateRange(A,Q){this.updateRanges.push({start:A,count:Q})}clearUpdateRanges(){this.updateRanges.length=0}copy(A){return this.array=new A.array.constructor(A.array),this.count=A.count,this.stride=A.stride,this.usage=A.usage,this}copyAt(A,Q,B){A*=this.stride,B*=Q.stride;for(let C=0,I=this.stride;C<I;C++)this.array[A+C]=Q.array[B+C];return this}set(A,Q=0){return this.array.set(A,Q),this}clone(A){if(A.arrayBuffers===void 0)A.arrayBuffers={};if(this.array.buffer._uuid===void 0)this.array.buffer._uuid=R2();if(A.arrayBuffers[this.array.buffer._uuid]===void 0)A.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer;const Q=new this.array.constructor(A.arrayBuffers[this.array.buffer._uuid]),B=new this.constructor(Q,this.stride);return B.setUsage(this.usage),B}onUpload(A){return this.onUploadCallback=A,this}toJSON(A){if(A.arrayBuffers===void 0)A.arrayBuffers={};if(this.array.buffer._uuid===void 0)this.array.buffer._uuid=R2();if(A.arrayBuffers[this.array.buffer._uuid]===void 0)A.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer));return{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}var S1=new P;class D3{constructor(A,Q,B,C=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=A,this.itemSize=Q,this.offset=B,this.normalized=C}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(A){this.data.needsUpdate=A}applyMatrix4(A){for(let Q=0,B=this.data.count;Q<B;Q++)S1.fromBufferAttribute(this,Q),S1.applyMatrix4(A),this.setXYZ(Q,S1.x,S1.y,S1.z);return this}applyNormalMatrix(A){for(let Q=0,B=this.count;Q<B;Q++)S1.fromBufferAttribute(this,Q),S1.applyNormalMatrix(A),this.setXYZ(Q,S1.x,S1.y,S1.z);return this}transformDirection(A){for(let Q=0,B=this.count;Q<B;Q++)S1.fromBufferAttribute(this,Q),S1.transformDirection(A),this.setXYZ(Q,S1.x,S1.y,S1.z);return this}getComponent(A,Q){let B=this.array[A*this.data.stride+this.offset+Q];if(this.normalized)B=D2(B,this.array);return B}setComponent(A,Q,B){if(this.normalized)B=N0(B,this.array);return this.data.array[A*this.data.stride+this.offset+Q]=B,this}setX(A,Q){if(this.normalized)Q=N0(Q,this.array);return this.data.array[A*this.data.stride+this.offset]=Q,this}setY(A,Q){if(this.normalized)Q=N0(Q,this.array);return this.data.array[A*this.data.stride+this.offset+1]=Q,this}setZ(A,Q){if(this.normalized)Q=N0(Q,this.array);return this.data.array[A*this.data.stride+this.offset+2]=Q,this}setW(A,Q){if(this.normalized)Q=N0(Q,this.array);return this.data.array[A*this.data.stride+this.offset+3]=Q,this}getX(A){let Q=this.data.array[A*this.data.stride+this.offset];if(this.normalized)Q=D2(Q,this.array);return Q}getY(A){let Q=this.data.array[A*this.data.stride+this.offset+1];if(this.normalized)Q=D2(Q,this.array);return Q}getZ(A){let Q=this.data.array[A*this.data.stride+this.offset+2];if(this.normalized)Q=D2(Q,this.array);return Q}getW(A){let Q=this.data.array[A*this.data.stride+this.offset+3];if(this.normalized)Q=D2(Q,this.array);return Q}setXY(A,Q,B){if(A=A*this.data.stride+this.offset,this.normalized)Q=N0(Q,this.array),B=N0(B,this.array);return this.data.array[A+0]=Q,this.data.array[A+1]=B,this}setXYZ(A,Q,B,C){if(A=A*this.data.stride+this.offset,this.normalized)Q=N0(Q,this.array),B=N0(B,this.array),C=N0(C,this.array);return this.data.array[A+0]=Q,this.data.array[A+1]=B,this.data.array[A+2]=C,this}setXYZW(A,Q,B,C,I){if(A=A*this.data.stride+this.offset,this.normalized)Q=N0(Q,this.array),B=N0(B,this.array),C=N0(C,this.array),I=N0(I,this.array);return this.data.array[A+0]=Q,this.data.array[A+1]=B,this.data.array[A+2]=C,this.data.array[A+3]=I,this}clone(A){if(A===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const Q=[];for(let B=0;B<this.count;B++){const C=B*this.data.stride+this.offset;for(let I=0;I<this.itemSize;I++)Q.push(this.data.array[C+I])}return new V0(new this.array.constructor(Q),this.itemSize,this.normalized)}else{if(A.interleavedBuffers===void 0)A.interleavedBuffers={};if(A.interleavedBuffers[this.data.uuid]===void 0)A.interleavedBuffers[this.data.uuid]=this.data.clone(A);return new D3(A.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}}toJSON(A){if(A===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const Q=[];for(let B=0;B<this.count;B++){const C=B*this.data.stride+this.offset;for(let I=0;I<this.itemSize;I++)Q.push(this.data.array[C+I])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:Q,normalized:this.normalized}}else{if(A.interleavedBuffers===void 0)A.interleavedBuffers={};if(A.interleavedBuffers[this.data.uuid]===void 0)A.interleavedBuffers[this.data.uuid]=this.data.toJSON(A);return{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}}var TG=new P,jG=new M0,gG=new M0,eO=new P,yG=new zA,_9=new P,VC=new w1,xG=new zA,NC=new f4;class bC extends nA{constructor(A,Q){super(A,Q);this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new zA,this.bindMatrixInverse=new zA,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const A=this.geometry;if(this.boundingBox===null)this.boundingBox=new i0;this.boundingBox.makeEmpty();const Q=A.getAttribute("position");for(let B=0;B<Q.count;B++)this.getVertexPosition(B,_9),this.boundingBox.expandByPoint(_9)}computeBoundingSphere(){const A=this.geometry;if(this.boundingSphere===null)this.boundingSphere=new w1;this.boundingSphere.makeEmpty();const Q=A.getAttribute("position");for(let B=0;B<Q.count;B++)this.getVertexPosition(B,_9),this.boundingSphere.expandByPoint(_9)}copy(A,Q){if(super.copy(A,Q),this.bindMode=A.bindMode,this.bindMatrix.copy(A.bindMatrix),this.bindMatrixInverse.copy(A.bindMatrixInverse),this.skeleton=A.skeleton,A.boundingBox!==null)this.boundingBox=A.boundingBox.clone();if(A.boundingSphere!==null)this.boundingSphere=A.boundingSphere.clone();return this}raycast(A,Q){const B=this.material,C=this.matrixWorld;if(B===void 0)return;if(this.boundingSphere===null)this.computeBoundingSphere();if(VC.copy(this.boundingSphere),VC.applyMatrix4(C),A.ray.intersectsSphere(VC)===!1)return;if(xG.copy(C).invert(),NC.copy(A.ray).applyMatrix4(xG),this.boundingBox!==null){if(NC.intersectsBox(this.boundingBox)===!1)return}this._computeIntersections(A,Q,NC)}getVertexPosition(A,Q){return super.getVertexPosition(A,Q),this.applyBoneTransform(A,Q),Q}bind(A,Q){if(this.skeleton=A,Q===void 0)this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),Q=this.matrixWorld;this.bindMatrix.copy(Q),this.bindMatrixInverse.copy(Q).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const A=new M0,Q=this.geometry.attributes.skinWeight;for(let B=0,C=Q.count;B<C;B++){A.fromBufferAttribute(Q,B);const I=1/A.manhattanLength();if(I!==Infinity)A.multiplyScalar(I);else A.set(1,0,0,0);Q.setXYZW(B,A.x,A.y,A.z,A.w)}}updateMatrixWorld(A){if(super.updateMatrixWorld(A),this.bindMode==="attached")this.bindMatrixInverse.copy(this.matrixWorld).invert();else if(this.bindMode==="detached")this.bindMatrixInverse.copy(this.bindMatrix).invert();else console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(A,Q){const B=this.skeleton,C=this.geometry;jG.fromBufferAttribute(C.attributes.skinIndex,A),gG.fromBufferAttribute(C.attributes.skinWeight,A),TG.copy(Q).applyMatrix4(this.bindMatrix),Q.set(0,0,0);for(let I=0;I<4;I++){const E=gG.getComponent(I);if(E!==0){const K=jG.getComponent(I);yG.multiplyMatrices(B.bones[K].matrixWorld,B.boneInverses[K]),Q.addScaledVector(eO.copy(TG).applyMatrix4(yG),E)}}return Q.applyMatrix4(this.bindMatrixInverse)}}class o9 extends F0{constructor(){super();this.isBone=!0,this.type="Bone"}}class b4 extends Z0{constructor(A=null,Q=1,B=1,C,I,E,K,J,q=1003,G=1003,Y,H){super(null,E,K,J,q,G,C,I,Y,H);this.isDataTexture=!0,this.image={data:A,width:Q,height:B},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}var hG=new zA,AL=new zA;class i9{constructor(A=[],Q=[]){this.uuid=R2(),this.bones=A.slice(0),this.boneInverses=Q,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const A=this.bones,Q=this.boneInverses;if(this.boneMatrices=new Float32Array(A.length*16),Q.length===0)this.calculateInverses();else if(A.length!==Q.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let B=0,C=this.bones.length;B<C;B++)this.boneInverses.push(new zA)}}calculateInverses(){this.boneInverses.length=0;for(let A=0,Q=this.bones.length;A<Q;A++){const B=new zA;if(this.bones[A])B.copy(this.bones[A].matrixWorld).invert();this.boneInverses.push(B)}}pose(){for(let A=0,Q=this.bones.length;A<Q;A++){const B=this.bones[A];if(B)B.matrixWorld.copy(this.boneInverses[A]).invert()}for(let A=0,Q=this.bones.length;A<Q;A++){const B=this.bones[A];if(B){if(B.parent&&B.parent.isBone)B.matrix.copy(B.parent.matrixWorld).invert(),B.matrix.multiply(B.matrixWorld);else B.matrix.copy(B.matrixWorld);B.matrix.decompose(B.position,B.quaternion,B.scale)}}}update(){const A=this.bones,Q=this.boneInverses,B=this.boneMatrices,C=this.boneTexture;for(let I=0,E=A.length;I<E;I++){const K=A[I]?A[I].matrixWorld:AL;hG.multiplyMatrices(K,Q[I]),hG.toArray(B,I*16)}if(C!==null)C.needsUpdate=!0}clone(){return new i9(this.bones,this.boneInverses)}computeBoneTexture(){let A=Math.sqrt(this.bones.length*4);A=Math.ceil(A/4)*4,A=Math.max(A,4);const Q=new Float32Array(A*A*4);Q.set(this.boneMatrices);const B=new b4(Q,A,A,1023,1015);return B.needsUpdate=!0,this.boneMatrices=Q,this.boneTexture=B,this}getBoneByName(A){for(let Q=0,B=this.bones.length;Q<B;Q++){const C=this.bones[Q];if(C.name===A)return C}return}dispose(){if(this.boneTexture!==null)this.boneTexture.dispose(),this.boneTexture=null}fromJSON(A,Q){this.uuid=A.uuid;for(let B=0,C=A.bones.length;B<C;B++){const I=A.bones[B];let E=Q[I];if(E===void 0)console.warn("THREE.Skeleton: No bone found with UUID:",I),E=new o9;this.bones.push(E),this.boneInverses.push(new zA().fromArray(A.boneInverses[B]))}return this.init(),this}toJSON(){const A={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};A.uuid=this.uuid;const Q=this.bones,B=this.boneInverses;for(let C=0,I=Q.length;C<I;C++){const E=Q[C];A.bones.push(E.uuid);const K=B[C];A.boneInverses.push(K.toArray())}return A}}class M8 extends V0{constructor(A,Q,B,C=1){super(A,Q,B);this.isInstancedBufferAttribute=!0,this.meshPerAttribute=C}copy(A){return super.copy(A),this.meshPerAttribute=A.meshPerAttribute,this}toJSON(){const A=super.toJSON();return A.meshPerAttribute=this.meshPerAttribute,A.isInstancedBufferAttribute=!0,A}}var N8=new zA,vG=new zA,P9=[],fG=new i0,QL=new zA,I3=new nA,E3=new w1;class pC extends nA{constructor(A,Q,B){super(A,Q);this.isInstancedMesh=!0,this.instanceMatrix=new M8(new Float32Array(B*16),16),this.instanceColor=null,this.morphTexture=null,this.count=B,this.boundingBox=null,this.boundingSphere=null;for(let C=0;C<B;C++)this.setMatrixAt(C,QL)}computeBoundingBox(){const A=this.geometry,Q=this.count;if(this.boundingBox===null)this.boundingBox=new i0;if(A.boundingBox===null)A.computeBoundingBox();this.boundingBox.makeEmpty();for(let B=0;B<Q;B++)this.getMatrixAt(B,N8),fG.copy(A.boundingBox).applyMatrix4(N8),this.boundingBox.union(fG)}computeBoundingSphere(){const A=this.geometry,Q=this.count;if(this.boundingSphere===null)this.boundingSphere=new w1;if(A.boundingSphere===null)A.computeBoundingSphere();this.boundingSphere.makeEmpty();for(let B=0;B<Q;B++)this.getMatrixAt(B,N8),E3.copy(A.boundingSphere).applyMatrix4(N8),this.boundingSphere.union(E3)}copy(A,Q){if(super.copy(A,Q),this.instanceMatrix.copy(A.instanceMatrix),A.instanceColor!==null)this.instanceColor=A.instanceColor.clone();if(this.count=A.count,A.boundingBox!==null)this.boundingBox=A.boundingBox.clone();if(A.boundingSphere!==null)this.boundingSphere=A.boundingSphere.clone();return this}getColorAt(A,Q){Q.fromArray(this.instanceColor.array,A*3)}getMatrixAt(A,Q){Q.fromArray(this.instanceMatrix.array,A*16)}getMorphAt(A,Q){const B=Q.morphTargetInfluences,C=this.morphTexture.source.data.data,I=B.length+1,E=A*I+1;for(let K=0;K<B.length;K++)B[K]=C[E+K]}raycast(A,Q){const B=this.matrixWorld,C=this.count;if(I3.geometry=this.geometry,I3.material=this.material,I3.material===void 0)return;if(this.boundingSphere===null)this.computeBoundingSphere();if(E3.copy(this.boundingSphere),E3.applyMatrix4(B),A.ray.intersectsSphere(E3)===!1)return;for(let I=0;I<C;I++){this.getMatrixAt(I,N8),vG.multiplyMatrices(B,N8),I3.matrixWorld=vG,I3.raycast(A,P9);for(let E=0,K=P9.length;E<K;E++){const J=P9[E];J.instanceId=I,J.object=this,Q.push(J)}P9.length=0}}setColorAt(A,Q){if(this.instanceColor===null)this.instanceColor=new M8(new Float32Array(this.instanceMatrix.count*3),3);Q.toArray(this.instanceColor.array,A*3)}setMatrixAt(A,Q){Q.toArray(this.instanceMatrix.array,A*16)}setMorphAt(A,Q){const B=Q.morphTargetInfluences,C=B.length+1;if(this.morphTexture===null)this.morphTexture=new b4(new Float32Array(C*this.count),C,this.count,1028,1015);const I=this.morphTexture.source.data.data;let E=0;for(let q=0;q<B.length;q++)E+=B[q];const K=this.geometry.morphTargetsRelative?1:1-E,J=C*A;I[J]=K,I.set(B,J+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class a9 extends m1{constructor(A){super();this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new PA(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(A)}copy(A){return super.copy(A),this.color.copy(A.color),this.map=A.map,this.linewidth=A.linewidth,this.linecap=A.linecap,this.linejoin=A.linejoin,this.fog=A.fog,this}}var bG=new P,pG=new P,uG=new zA,wC=new f4,S9=new w1;class R3 extends F0{constructor(A=new J1,Q=new a9){super();this.isLine=!0,this.type="Line",this.geometry=A,this.material=Q,this.updateMorphTargets()}copy(A,Q){return super.copy(A,Q),this.material=Array.isArray(A.material)?A.material.slice():A.material,this.geometry=A.geometry,this}computeLineDistances(){const A=this.geometry;if(A.index===null){const Q=A.attributes.position,B=[0];for(let C=1,I=Q.count;C<I;C++)bG.fromBufferAttribute(Q,C-1),pG.fromBufferAttribute(Q,C),B[C]=B[C-1],B[C]+=bG.distanceTo(pG);A.setAttribute("lineDistance",new V1(B,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(A,Q){const B=this.geometry,C=this.matrixWorld,I=A.params.Line.threshold,E=B.drawRange;if(B.boundingSphere===null)B.computeBoundingSphere();if(S9.copy(B.boundingSphere),S9.applyMatrix4(C),S9.radius+=I,A.ray.intersectsSphere(S9)===!1)return;uG.copy(C).invert(),wC.copy(A.ray).applyMatrix4(uG);const K=I/((this.scale.x+this.scale.y+this.scale.z)/3),J=K*K,q=new P,G=new P,Y=new P,H=new P,Z=this.isLineSegments?2:1,X=B.index,F=B.attributes.position;if(X!==null){const W=Math.max(0,E.start),D=Math.min(X.count,E.start+E.count);for(let V=W,R=D-1;V<R;V+=Z){const O=X.getX(V),z=X.getX(V+1);if(q.fromBufferAttribute(F,O),G.fromBufferAttribute(F,z),wC.distanceSqToSegment(q,G,H,Y)>J)continue;H.applyMatrix4(this.matrixWorld);const k=A.ray.origin.distanceTo(H);if(k<A.near||k>A.far)continue;Q.push({distance:k,point:Y.clone().applyMatrix4(this.matrixWorld),index:V,face:null,faceIndex:null,object:this})}}else{const W=Math.max(0,E.start),D=Math.min(F.count,E.start+E.count);for(let V=W,R=D-1;V<R;V+=Z){if(q.fromBufferAttribute(F,V),G.fromBufferAttribute(F,V+1),wC.distanceSqToSegment(q,G,H,Y)>J)continue;H.applyMatrix4(this.matrixWorld);const z=A.ray.origin.distanceTo(H);if(z<A.near||z>A.far)continue;Q.push({distance:z,point:Y.clone().applyMatrix4(this.matrixWorld),index:V,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const Q=this.geometry.morphAttributes,B=Object.keys(Q);if(B.length>0){const C=Q[B[0]];if(C!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let I=0,E=C.length;I<E;I++){const K=C[I].name||String(I);this.morphTargetInfluences.push(0),this.morphTargetDictionary[K]=I}}}}}var mG=new P,dG=new P;class uC extends R3{constructor(A,Q){super(A,Q);this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const A=this.geometry;if(A.index===null){const Q=A.attributes.position,B=[];for(let C=0,I=Q.count;C<I;C+=2)mG.fromBufferAttribute(Q,C),dG.fromBufferAttribute(Q,C+1),B[C]=C===0?0:B[C-1],B[C+1]=B[C]+mG.distanceTo(dG);A.setAttribute("lineDistance",new V1(B,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class mC extends R3{constructor(A,Q){super(A,Q);this.isLineLoop=!0,this.type="LineLoop"}}class r9 extends m1{constructor(A){super();this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new PA(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(A)}copy(A){return super.copy(A),this.color.copy(A.color),this.map=A.map,this.alphaMap=A.alphaMap,this.size=A.size,this.sizeAttenuation=A.sizeAttenuation,this.fog=A.fog,this}}var cG=new zA,$C=new f4,T9=new w1,j9=new P;class dC extends F0{constructor(A=new J1,Q=new r9){super();this.isPoints=!0,this.type="Points",this.geometry=A,this.material=Q,this.updateMorphTargets()}copy(A,Q){return super.copy(A,Q),this.material=Array.isArray(A.material)?A.material.slice():A.material,this.geometry=A.geometry,this}raycast(A,Q){const B=this.geometry,C=this.matrixWorld,I=A.params.Points.threshold,E=B.drawRange;if(B.boundingSphere===null)B.computeBoundingSphere();if(T9.copy(B.boundingSphere),T9.applyMatrix4(C),T9.radius+=I,A.ray.intersectsSphere(T9)===!1)return;cG.copy(C).invert(),$C.copy(A.ray).applyMatrix4(cG);const K=I/((this.scale.x+this.scale.y+this.scale.z)/3),J=K*K,q=B.index,Y=B.attributes.position;if(q!==null){const H=Math.max(0,E.start),Z=Math.min(q.count,E.start+E.count);for(let X=H,U=Z;X<U;X++){const F=q.getX(X);j9.fromBufferAttribute(Y,F),lG(j9,F,J,C,A,Q,this)}}else{const H=Math.max(0,E.start),Z=Math.min(Y.count,E.start+E.count);for(let X=H,U=Z;X<U;X++)j9.fromBufferAttribute(Y,X),lG(j9,X,J,C,A,Q,this)}}updateMorphTargets(){const Q=this.geometry.morphAttributes,B=Object.keys(Q);if(B.length>0){const C=Q[B[0]];if(C!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let I=0,E=C.length;I<E;I++){const K=C[I].name||String(I);this.morphTargetInfluences.push(0),this.morphTargetDictionary[K]=I}}}}}class cC extends Z0{constructor(A,Q,B,C,I,E,K,J,q){super(A,Q,B,C,I,E,K,J,q);this.isVideoTexture=!0,this.minFilter=E!==void 0?E:1006,this.magFilter=I!==void 0?I:1006,this.generateMipmaps=!1;const G=this;function Y(){G.needsUpdate=!0,A.requestVideoFrameCallback(Y)}if("requestVideoFrameCallback"in A)A.requestVideoFrameCallback(Y)}clone(){return new this.constructor(this.image).copy(this)}update(){const A=this.image;if("requestVideoFrameCallback"in A===!1&&A.readyState>=A.HAVE_CURRENT_DATA)this.needsUpdate=!0}}class p2 extends Z0{constructor(A,Q,B,C,I,E,K,J,q,G,Y,H){super(null,E,K,J,q,G,C,I,Y,H);this.isCompressedTexture=!0,this.image={width:Q,height:B},this.mipmaps=A,this.flipY=!1,this.generateMipmaps=!1}}class lC extends p2{constructor(A,Q,B,C,I,E){super(A,Q,B,I,E);this.isCompressedArrayTexture=!0,this.image.depth=C,this.wrapR=1001}}class sC extends p2{constructor(A,Q,B){super(void 0,A[0].width,A[0].height,Q,B,301);this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=A}}class h8 extends Z0{constructor(A,Q,B,C,I,E,K,J,q){super(A,Q,B,C,I,E,K,J,q);this.isCanvasTexture=!0,this.needsUpdate=!0}}class t9 extends J1{constructor(A=1,Q=32,B=16,C=0,I=Math.PI*2,E=0,K=Math.PI){super();this.type="SphereGeometry",this.parameters={radius:A,widthSegments:Q,heightSegments:B,phiStart:C,phiLength:I,thetaStart:E,thetaLength:K},Q=Math.max(3,Math.floor(Q)),B=Math.max(2,Math.floor(B));const J=Math.min(E+K,Math.PI);let q=0;const G=[],Y=new P,H=new P,Z=[],X=[],U=[],F=[];for(let W=0;W<=B;W++){const D=[],V=W/B;let R=0;if(W===0&&E===0)R=0.5/Q;else if(W===B&&J===Math.PI)R=-0.5/Q;for(let O=0;O<=Q;O++){const z=O/Q;Y.x=-A*Math.cos(C+z*I)*Math.sin(E+V*K),Y.y=A*Math.cos(E+V*K),Y.z=A*Math.sin(C+z*I)*Math.sin(E+V*K),X.push(Y.x,Y.y,Y.z),H.copy(Y).normalize(),U.push(H.x,H.y,H.z),F.push(z+R,1-V),D.push(q++)}G.push(D)}for(let W=0;W<B;W++)for(let D=0;D<Q;D++){const V=G[W][D+1],R=G[W][D],O=G[W+1][D],z=G[W+1][D+1];if(W!==0||E>0)Z.push(V,R,z);if(W!==B-1||J<Math.PI)Z.push(R,O,z)}this.setIndex(Z),this.setAttribute("position",new V1(X,3)),this.setAttribute("normal",new V1(U,3)),this.setAttribute("uv",new V1(F,2))}copy(A){return super.copy(A),this.parameters=Object.assign({},A.parameters),this}static fromJSON(A){return new t9(A.radius,A.widthSegments,A.heightSegments,A.phiStart,A.phiLength,A.thetaStart,A.thetaLength)}}class p4 extends m1{constructor(A){super();this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new PA(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new PA(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new DA(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new u1,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(A)}copy(A){return super.copy(A),this.defines={STANDARD:""},this.color.copy(A.color),this.roughness=A.roughness,this.metalness=A.metalness,this.map=A.map,this.lightMap=A.lightMap,this.lightMapIntensity=A.lightMapIntensity,this.aoMap=A.aoMap,this.aoMapIntensity=A.aoMapIntensity,this.emissive.copy(A.emissive),this.emissiveMap=A.emissiveMap,this.emissiveIntensity=A.emissiveIntensity,this.bumpMap=A.bumpMap,this.bumpScale=A.bumpScale,this.normalMap=A.normalMap,this.normalMapType=A.normalMapType,this.normalScale.copy(A.normalScale),this.displacementMap=A.displacementMap,this.displacementScale=A.displacementScale,this.displacementBias=A.displacementBias,this.roughnessMap=A.roughnessMap,this.metalnessMap=A.metalnessMap,this.alphaMap=A.alphaMap,this.envMap=A.envMap,this.envMapRotation.copy(A.envMapRotation),this.envMapIntensity=A.envMapIntensity,this.wireframe=A.wireframe,this.wireframeLinewidth=A.wireframeLinewidth,this.wireframeLinecap=A.wireframeLinecap,this.wireframeLinejoin=A.wireframeLinejoin,this.flatShading=A.flatShading,this.fog=A.fog,this}}class N2 extends p4{constructor(A){super();this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new DA(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return I1(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(Q){this.ior=(1+0.4*Q)/(1-0.4*Q)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new PA(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=Infinity,this.attenuationColor=new PA(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new PA(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(A)}get anisotropy(){return this._anisotropy}set anisotropy(A){if(this._anisotropy>0!==A>0)this.version++;this._anisotropy=A}get clearcoat(){return this._clearcoat}set clearcoat(A){if(this._clearcoat>0!==A>0)this.version++;this._clearcoat=A}get iridescence(){return this._iridescence}set iridescence(A){if(this._iridescence>0!==A>0)this.version++;this._iridescence=A}get sheen(){return this._sheen}set sheen(A){if(this._sheen>0!==A>0)this.version++;this._sheen=A}get transmission(){return this._transmission}set transmission(A){if(this._transmission>0!==A>0)this.version++;this._transmission=A}copy(A){return super.copy(A),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=A.anisotropy,this.anisotropyRotation=A.anisotropyRotation,this.anisotropyMap=A.anisotropyMap,this.clearcoat=A.clearcoat,this.clearcoatMap=A.clearcoatMap,this.clearcoatRoughness=A.clearcoatRoughness,this.clearcoatRoughnessMap=A.clearcoatRoughnessMap,this.clearcoatNormalMap=A.clearcoatNormalMap,this.clearcoatNormalScale.copy(A.clearcoatNormalScale),this.ior=A.ior,this.iridescence=A.iridescence,this.iridescenceMap=A.iridescenceMap,this.iridescenceIOR=A.iridescenceIOR,this.iridescenceThicknessRange=[...A.iridescenceThicknessRange],this.iridescenceThicknessMap=A.iridescenceThicknessMap,this.sheen=A.sheen,this.sheenColor.copy(A.sheenColor),this.sheenColorMap=A.sheenColorMap,this.sheenRoughness=A.sheenRoughness,this.sheenRoughnessMap=A.sheenRoughnessMap,this.transmission=A.transmission,this.transmissionMap=A.transmissionMap,this.thickness=A.thickness,this.thicknessMap=A.thicknessMap,this.attenuationDistance=A.attenuationDistance,this.attenuationColor.copy(A.attenuationColor),this.specularIntensity=A.specularIntensity,this.specularIntensityMap=A.specularIntensityMap,this.specularColor.copy(A.specularColor),this.specularColorMap=A.specularColorMap,this}}class k6{constructor(A,Q,B,C){this.parameterPositions=A,this._cachedIndex=0,this.resultBuffer=C!==void 0?C:new Q.constructor(B),this.sampleValues=Q,this.valueSize=B,this.settings=null,this.DefaultSettings_={}}evaluate(A){const Q=this.parameterPositions;let B=this._cachedIndex,C=Q[B],I=Q[B-1];A:{Q:{let E;B:{C:if(!(A<C)){for(let K=B+2;;){if(C===void 0){if(A<I)break C;return B=Q.length,this._cachedIndex=B,this.copySampleValue_(B-1)}if(B===K)break;if(I=C,C=Q[++B],A<C)break Q}E=Q.length;break B}if(!(A>=I)){const K=Q[1];if(A<K)B=2,I=K;for(let J=B-2;;){if(I===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(B===J)break;if(C=I,I=Q[--B-1],A>=I)break Q}E=B,B=0;break B}break A}while(B<E){const K=B+E>>>1;if(A<Q[K])E=K;else B=K+1}if(C=Q[B],I=Q[B-1],I===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(C===void 0)return B=Q.length,this._cachedIndex=B,this.copySampleValue_(B-1)}this._cachedIndex=B,this.intervalChanged_(B,I,C)}return this.interpolate_(B,I,A,C)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(A){const Q=this.resultBuffer,B=this.sampleValues,C=this.valueSize,I=A*C;for(let E=0;E!==C;++E)Q[E]=B[I+E];return Q}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class pY extends k6{constructor(A,Q,B,C){super(A,Q,B,C);this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(A,Q,B){const C=this.parameterPositions;let I=A-2,E=A+1,K=C[I],J=C[E];if(K===void 0)switch(this.getSettings_().endingStart){case 2401:I=A,K=2*Q-B;break;case 2402:I=C.length-2,K=Q+C[I]-C[I+1];break;default:I=A,K=B}if(J===void 0)switch(this.getSettings_().endingEnd){case 2401:E=A,J=2*B-Q;break;case 2402:E=1,J=B+C[1]-C[0];break;default:E=A-1,J=Q}const q=(B-Q)*0.5,G=this.valueSize;this._weightPrev=q/(Q-K),this._weightNext=q/(J-B),this._offsetPrev=I*G,this._offsetNext=E*G}interpolate_(A,Q,B,C){const I=this.resultBuffer,E=this.sampleValues,K=this.valueSize,J=A*K,q=J-K,G=this._offsetPrev,Y=this._offsetNext,H=this._weightPrev,Z=this._weightNext,X=(B-Q)/(C-Q),U=X*X,F=U*X,W=-H*F+2*H*U-H*X,D=(1+H)*F+(-1.5-2*H)*U+(-0.5+H)*X+1,V=(-1-Z)*F+(1.5+Z)*U+0.5*X,R=Z*F-Z*U;for(let O=0;O!==K;++O)I[O]=W*E[G+O]+D*E[q+O]+V*E[J+O]+R*E[Y+O];return I}}class nC extends k6{constructor(A,Q,B,C){super(A,Q,B,C)}interpolate_(A,Q,B,C){const I=this.resultBuffer,E=this.sampleValues,K=this.valueSize,J=A*K,q=J-K,G=(B-Q)/(C-Q),Y=1-G;for(let H=0;H!==K;++H)I[H]=E[q+H]*Y+E[J+H]*G;return I}}class uY extends k6{constructor(A,Q,B,C){super(A,Q,B,C)}interpolate_(A){return this.copySampleValue_(A-1)}}class w2{constructor(A,Q,B,C){if(A===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(Q===void 0||Q.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+A);this.name=A,this.times=g9(Q,this.TimeBufferType),this.values=g9(B,this.ValueBufferType),this.setInterpolation(C||this.DefaultInterpolation)}static toJSON(A){const Q=A.constructor;let B;if(Q.toJSON!==this.toJSON)B=Q.toJSON(A);else{B={name:A.name,times:g9(A.times,Array),values:g9(A.values,Array)};const C=A.getInterpolation();if(C!==A.DefaultInterpolation)B.interpolation=C}return B.type=A.ValueTypeName,B}InterpolantFactoryMethodDiscrete(A){return new uY(this.times,this.values,this.getValueSize(),A)}InterpolantFactoryMethodLinear(A){return new nC(this.times,this.values,this.getValueSize(),A)}InterpolantFactoryMethodSmooth(A){return new pY(this.times,this.values,this.getValueSize(),A)}setInterpolation(A){let Q;switch(A){case 2300:Q=this.InterpolantFactoryMethodDiscrete;break;case 2301:Q=this.InterpolantFactoryMethodLinear;break;case 2302:Q=this.InterpolantFactoryMethodSmooth;break}if(Q===void 0){const B="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(A!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(B);return console.warn("THREE.KeyframeTrack:",B),this}return this.createInterpolant=Q,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(A){if(A!==0){const Q=this.times;for(let B=0,C=Q.length;B!==C;++B)Q[B]+=A}return this}scale(A){if(A!==1){const Q=this.times;for(let B=0,C=Q.length;B!==C;++B)Q[B]*=A}return this}trim(A,Q){const B=this.times,C=B.length;let I=0,E=C-1;while(I!==C&&B[I]<A)++I;while(E!==-1&&B[E]>Q)--E;if(++E,I!==0||E!==C){if(I>=E)E=Math.max(E,1),I=E-1;const K=this.getValueSize();this.times=B.slice(I,E),this.values=this.values.slice(I*K,E*K)}return this}validate(){let A=!0;const Q=this.getValueSize();if(Q-Math.floor(Q)!==0)console.error("THREE.KeyframeTrack: Invalid value size in track.",this),A=!1;const B=this.times,C=this.values,I=B.length;if(I===0)console.error("THREE.KeyframeTrack: Track is empty.",this),A=!1;let E=null;for(let K=0;K!==I;K++){const J=B[K];if(typeof J==="number"&&isNaN(J)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,K,J),A=!1;break}if(E!==null&&E>J){console.error("THREE.KeyframeTrack: Out of order keys.",this,K,J,E),A=!1;break}E=J}if(C!==void 0){if(BL(C))for(let K=0,J=C.length;K!==J;++K){const q=C[K];if(isNaN(q)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,K,q),A=!1;break}}}return A}optimize(){const A=this.times.slice(),Q=this.values.slice(),B=this.getValueSize(),C=this.getInterpolation()===2302,I=A.length-1;let E=1;for(let K=1;K<I;++K){let J=!1;const q=A[K],G=A[K+1];if(q!==G&&(K!==1||q!==A[0]))if(!C){const Y=K*B,H=Y-B,Z=Y+B;for(let X=0;X!==B;++X){const U=Q[Y+X];if(U!==Q[H+X]||U!==Q[Z+X]){J=!0;break}}}else J=!0;if(J){if(K!==E){A[E]=A[K];const Y=K*B,H=E*B;for(let Z=0;Z!==B;++Z)Q[H+Z]=Q[Y+Z]}++E}}if(I>0){A[E]=A[I];for(let K=I*B,J=E*B,q=0;q!==B;++q)Q[J+q]=Q[K+q];++E}if(E!==A.length)this.times=A.slice(0,E),this.values=Q.slice(0,E*B);else this.times=A,this.values=Q;return this}clone(){const A=this.times.slice(),Q=this.values.slice(),C=new this.constructor(this.name,A,Q);return C.createInterpolant=this.createInterpolant,C}}w2.prototype.TimeBufferType=Float32Array;w2.prototype.ValueBufferType=Float32Array;w2.prototype.DefaultInterpolation=2301;class M6 extends w2{}M6.prototype.ValueTypeName="bool";M6.prototype.ValueBufferType=Array;M6.prototype.DefaultInterpolation=2300;M6.prototype.InterpolantFactoryMethodLinear=void 0;M6.prototype.InterpolantFactoryMethodSmooth=void 0;class oC extends w2{}oC.prototype.ValueTypeName="color";class h4 extends w2{}h4.prototype.ValueTypeName="number";class mY extends k6{constructor(A,Q,B,C){super(A,Q,B,C)}interpolate_(A,Q,B,C){const I=this.resultBuffer,E=this.sampleValues,K=this.valueSize,J=(B-Q)/(C-Q);let q=A*K;for(let G=q+K;q!==G;q+=4)v0.slerpFlat(I,0,E,q-K,E,q,J);return I}}class u2 extends w2{InterpolantFactoryMethodLinear(A){return new mY(this.times,this.values,this.getValueSize(),A)}}u2.prototype.ValueTypeName="quaternion";u2.prototype.DefaultInterpolation=2301;u2.prototype.InterpolantFactoryMethodSmooth=void 0;class $6 extends w2{}$6.prototype.ValueTypeName="string";$6.prototype.ValueBufferType=Array;$6.prototype.DefaultInterpolation=2300;$6.prototype.InterpolantFactoryMethodLinear=void 0;$6.prototype.InterpolantFactoryMethodSmooth=void 0;class G4 extends w2{}G4.prototype.ValueTypeName="vector";class $8{constructor(A,Q=-1,B,C=2500){if(this.name=A,this.tracks=B,this.duration=Q,this.blendMode=C,this.uuid=R2(),this.duration<0)this.resetDuration()}static parse(A){const Q=[],B=A.tracks,C=1/(A.fps||1);for(let E=0,K=B.length;E!==K;++E)Q.push(EL(B[E]).scale(C));const I=new this(A.name,A.duration,Q,A.blendMode);return I.uuid=A.uuid,I}static toJSON(A){const Q=[],B=A.tracks,C={name:A.name,duration:A.duration,tracks:Q,uuid:A.uuid,blendMode:A.blendMode};for(let I=0,E=B.length;I!==E;++I)Q.push(w2.toJSON(B[I]));return C}static CreateFromMorphTargetSequence(A,Q,B,C){const I=Q.length,E=[];for(let K=0;K<I;K++){let J=[],q=[];J.push((K+I-1)%I,K,(K+1)%I),q.push(0,1,0);const G=CL(J);if(J=sG(J,1,G),q=sG(q,1,G),!C&&J[0]===0)J.push(I),q.push(q[0]);E.push(new h4(".morphTargetInfluences["+Q[K].name+"]",J,q).scale(1/B))}return new this(A,-1,E)}static findByName(A,Q){let B=A;if(!Array.isArray(A)){const C=A;B=C.geometry&&C.geometry.animations||C.animations}for(let C=0;C<B.length;C++)if(B[C].name===Q)return B[C];return null}static CreateClipsFromMorphTargetSequences(A,Q,B){const C={},I=/^([\w-]*?)([\d]+)$/;for(let K=0,J=A.length;K<J;K++){const q=A[K],G=q.name.match(I);if(G&&G.length>1){const Y=G[1];let H=C[Y];if(!H)C[Y]=H=[];H.push(q)}}const E=[];for(let K in C)E.push(this.CreateFromMorphTargetSequence(K,C[K],Q,B));return E}static parseAnimation(A,Q){if(!A)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const B=function(Y,H,Z,X,U){if(Z.length!==0){const F=[],W=[];if(bY(Z,F,W,X),F.length!==0)U.push(new Y(H,F,W))}},C=[],I=A.name||"default",E=A.fps||30,K=A.blendMode;let J=A.length||-1;const q=A.hierarchy||[];for(let Y=0;Y<q.length;Y++){const H=q[Y].keys;if(!H||H.length===0)continue;if(H[0].morphTargets){const Z={};let X;for(X=0;X<H.length;X++)if(H[X].morphTargets)for(let U=0;U<H[X].morphTargets.length;U++)Z[H[X].morphTargets[U]]=-1;for(let U in Z){const F=[],W=[];for(let D=0;D!==H[X].morphTargets.length;++D){const V=H[X];F.push(V.time),W.push(V.morphTarget===U?1:0)}C.push(new h4(".morphTargetInfluence["+U+"]",F,W))}J=Z.length*E}else{const Z=".bones["+Q[Y].name+"]";B(G4,Z+".position",H,"pos",C),B(u2,Z+".quaternion",H,"rot",C),B(G4,Z+".scale",H,"scl",C)}}if(C.length===0)return null;return new this(I,J,C,K)}resetDuration(){const A=this.tracks;let Q=0;for(let B=0,C=A.length;B!==C;++B){const I=this.tracks[B];Q=Math.max(Q,I.times[I.times.length-1])}return this.duration=Q,this}trim(){for(let A=0;A<this.tracks.length;A++)this.tracks[A].trim(0,this.duration);return this}validate(){let A=!0;for(let Q=0;Q<this.tracks.length;Q++)A=A&&this.tracks[Q].validate();return A}optimize(){for(let A=0;A<this.tracks.length;A++)this.tracks[A].optimize();return this}clone(){const A=[];for(let Q=0;Q<this.tracks.length;Q++)A.push(this.tracks[Q].clone());return new this.constructor(this.name,this.duration,A,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}var x4={enabled:!1,files:{},add:function(A,Q){if(this.enabled===!1)return;this.files[A]=Q},get:function(A){if(this.enabled===!1)return;return this.files[A]},remove:function(A){delete this.files[A]},clear:function(){this.files={}}};class e9{constructor(A,Q,B){const C=this;let I=!1,E=0,K=0,J=void 0;const q=[];this.onStart=void 0,this.onLoad=A,this.onProgress=Q,this.onError=B,this.itemStart=function(G){if(K++,I===!1){if(C.onStart!==void 0)C.onStart(G,E,K)}I=!0},this.itemEnd=function(G){if(E++,C.onProgress!==void 0)C.onProgress(G,E,K);if(E===K){if(I=!1,C.onLoad!==void 0)C.onLoad()}},this.itemError=function(G){if(C.onError!==void 0)C.onError(G)},this.resolveURL=function(G){if(J)return J(G);return G},this.setURLModifier=function(G){return J=G,this},this.addHandler=function(G,Y){return q.push(G,Y),this},this.removeHandler=function(G){const Y=q.indexOf(G);if(Y!==-1)q.splice(Y,2);return this},this.getHandler=function(G){for(let Y=0,H=q.length;Y<H;Y+=2){const Z=q[Y],X=q[Y+1];if(Z.global)Z.lastIndex=0;if(Z.test(G))return X}return null}}}var KL=new e9;class O1{constructor(A){this.manager=A!==void 0?A:KL,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(A,Q){const B=this;return new Promise(function(C,I){B.load(A,C,Q,I)})}parse(){}setCrossOrigin(A){return this.crossOrigin=A,this}setWithCredentials(A){return this.withCredentials=A,this}setPath(A){return this.path=A,this}setResourcePath(A){return this.resourcePath=A,this}setRequestHeader(A){return this.requestHeader=A,this}}O1.DEFAULT_MATERIAL_NAME="__DEFAULT";var J4={};class dY extends Error{constructor(A,Q){super(A);this.response=Q}}class j1 extends O1{constructor(A){super(A)}load(A,Q,B,C){if(A===void 0)A="";if(this.path!==void 0)A=this.path+A;A=this.manager.resolveURL(A);const I=x4.get(A);if(I!==void 0)return this.manager.itemStart(A),setTimeout(()=>{if(Q)Q(I);this.manager.itemEnd(A)},0),I;if(J4[A]!==void 0){J4[A].push({onLoad:Q,onProgress:B,onError:C});return}J4[A]=[],J4[A].push({onLoad:Q,onProgress:B,onError:C});const E=new Request(A,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),K=this.mimeType,J=this.responseType;fetch(E).then((q)=>{if(q.status===200||q.status===0){if(q.status===0)console.warn("THREE.FileLoader: HTTP Status 0 received.");if(typeof ReadableStream==="undefined"||q.body===void 0||q.body.getReader===void 0)return q;const G=J4[A],Y=q.body.getReader(),H=q.headers.get("Content-Length")||q.headers.get("X-File-Size"),Z=H?parseInt(H):0,X=Z!==0;let U=0;const F=new ReadableStream({start(W){D();function D(){Y.read().then(({done:V,value:R})=>{if(V)W.close();else{U+=R.byteLength;const O=new ProgressEvent("progress",{lengthComputable:X,loaded:U,total:Z});for(let z=0,w=G.length;z<w;z++){const k=G[z];if(k.onProgress)k.onProgress(O)}W.enqueue(R),D()}})}}});return new Response(F)}else throw new dY(`fetch for "${q.url}" responded with ${q.status}: ${q.statusText}`,q)}).then((q)=>{switch(J){case"arraybuffer":return q.arrayBuffer();case"blob":return q.blob();case"document":return q.text().then((G)=>{return new DOMParser().parseFromString(G,K)});case"json":return q.json();default:if(K===void 0)return q.text();else{const Y=/charset="?([^;"\s]*)"?/i.exec(K),H=Y&&Y[1]?Y[1].toLowerCase():void 0,Z=new TextDecoder(H);return q.arrayBuffer().then((X)=>Z.decode(X))}}}).then((q)=>{x4.add(A,q);const G=J4[A];delete J4[A];for(let Y=0,H=G.length;Y<H;Y++){const Z=G[Y];if(Z.onLoad)Z.onLoad(q)}}).catch((q)=>{const G=J4[A];if(G===void 0)throw this.manager.itemError(A),q;delete J4[A];for(let Y=0,H=G.length;Y<H;Y++){const Z=G[Y];if(Z.onError)Z.onError(q)}this.manager.itemError(A)}).finally(()=>{this.manager.itemEnd(A)}),this.manager.itemStart(A)}setResponseType(A){return this.responseType=A,this}setMimeType(A){return this.mimeType=A,this}}class cY extends O1{constructor(A){super(A)}load(A,Q,B,C){if(this.path!==void 0)A=this.path+A;A=this.manager.resolveURL(A);const I=this,E=x4.get(A);if(E!==void 0)return I.manager.itemStart(A),setTimeout(function(){if(Q)Q(E);I.manager.itemEnd(A)},0),E;const K=Y3("img");function J(){if(G(),x4.add(A,this),Q)Q(this);I.manager.itemEnd(A)}function q(Y){if(G(),C)C(Y);I.manager.itemError(A),I.manager.itemEnd(A)}function G(){K.removeEventListener("load",J,!1),K.removeEventListener("error",q,!1)}if(K.addEventListener("load",J,!1),K.addEventListener("error",q,!1),A.slice(0,5)!=="data:"){if(this.crossOrigin!==void 0)K.crossOrigin=this.crossOrigin}return I.manager.itemStart(A),K.src=A,K}}class iC extends O1{constructor(A){super(A)}load(A,Q,B,C){const I=this,E=new b4,K=new j1(this.manager);return K.setResponseType("arraybuffer"),K.setRequestHeader(this.requestHeader),K.setPath(this.path),K.setWithCredentials(I.withCredentials),K.load(A,function(J){let q;try{q=I.parse(J)}catch(G){if(C!==void 0)C(G);else{console.error(G);return}}if(q.image!==void 0)E.image=q.image;else if(q.data!==void 0)E.image.width=q.width,E.image.height=q.height,E.image.data=q.data;if(E.wrapS=q.wrapS!==void 0?q.wrapS:1001,E.wrapT=q.wrapT!==void 0?q.wrapT:1001,E.magFilter=q.magFilter!==void 0?q.magFilter:1006,E.minFilter=q.minFilter!==void 0?q.minFilter:1006,E.anisotropy=q.anisotropy!==void 0?q.anisotropy:1,q.colorSpace!==void 0)E.colorSpace=q.colorSpace;if(q.flipY!==void 0)E.flipY=q.flipY;if(q.format!==void 0)E.format=q.format;if(q.type!==void 0)E.type=q.type;if(q.mipmaps!==void 0)E.mipmaps=q.mipmaps,E.minFilter=1008;if(q.mipmapCount===1)E.minFilter=1006;if(q.generateMipmaps!==void 0)E.generateMipmaps=q.generateMipmaps;if(E.needsUpdate=!0,Q)Q(E,q)},B,C),E}}class _6 extends O1{constructor(A){super(A)}load(A,Q,B,C){const I=new Z0,E=new cY(this.manager);return E.setCrossOrigin(this.crossOrigin),E.setPath(this.path),E.load(A,function(K){if(I.image=K,I.needsUpdate=!0,Q!==void 0)Q(I)},B,C),I}}class V3 extends F0{constructor(A,Q=1){super();this.isLight=!0,this.type="Light",this.color=new PA(A),this.intensity=Q}dispose(){}copy(A,Q){return super.copy(A,Q),this.color.copy(A.color),this.intensity=A.intensity,this}toJSON(A){const Q=super.toJSON(A);if(Q.object.color=this.color.getHex(),Q.object.intensity=this.intensity,this.groundColor!==void 0)Q.object.groundColor=this.groundColor.getHex();if(this.distance!==void 0)Q.object.distance=this.distance;if(this.angle!==void 0)Q.object.angle=this.angle;if(this.decay!==void 0)Q.object.decay=this.decay;if(this.penumbra!==void 0)Q.object.penumbra=this.penumbra;if(this.shadow!==void 0)Q.object.shadow=this.shadow.toJSON();return Q}}var OC=new zA,nG=new P,oG=new P;class AQ{constructor(A){this.camera=A,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new DA(512,512),this.map=null,this.mapPass=null,this.matrix=new zA,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new c9,this._frameExtents=new DA(1,1),this._viewportCount=1,this._viewports=[new M0(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(A){const Q=this.camera,B=this.matrix;nG.setFromMatrixPosition(A.matrixWorld),Q.position.copy(nG),oG.setFromMatrixPosition(A.target.matrixWorld),Q.lookAt(oG),Q.updateMatrixWorld(),OC.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse),this._frustum.setFromProjectionMatrix(OC),B.set(0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1),B.multiply(OC)}getViewport(A){return this._viewports[A]}getFrameExtents(){return this._frameExtents}dispose(){if(this.map)this.map.dispose();if(this.mapPass)this.mapPass.dispose()}copy(A){return this.camera=A.camera.clone(),this.bias=A.bias,this.radius=A.radius,this.mapSize.copy(A.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const A={};if(this.bias!==0)A.bias=this.bias;if(this.normalBias!==0)A.normalBias=this.normalBias;if(this.radius!==1)A.radius=this.radius;if(this.mapSize.x!==512||this.mapSize.y!==512)A.mapSize=this.mapSize.toArray();return A.camera=this.camera.toJSON(!1).object,delete A.camera.matrix,A}}class lY extends AQ{constructor(){super(new P0(50,1,0.5,500));this.isSpotLightShadow=!0,this.focus=1}updateMatrices(A){const Q=this.camera,B=z8*2*A.angle*this.focus,C=this.mapSize.width/this.mapSize.height,I=A.distance||Q.far;if(B!==Q.fov||C!==Q.aspect||I!==Q.far)Q.fov=B,Q.aspect=C,Q.far=I,Q.updateProjectionMatrix();super.updateMatrices(A)}copy(A){return super.copy(A),this.focus=A.focus,this}}class aC extends V3{constructor(A,Q,B=0,C=Math.PI/3,I=0,E=2){super(A,Q);this.isSpotLight=!0,this.type="SpotLight",this.position.copy(F0.DEFAULT_UP),this.updateMatrix(),this.target=new F0,this.distance=B,this.angle=C,this.penumbra=I,this.decay=E,this.map=null,this.shadow=new lY}get power(){return this.intensity*Math.PI}set power(A){this.intensity=A/Math.PI}dispose(){this.shadow.dispose()}copy(A,Q){return super.copy(A,Q),this.distance=A.distance,this.angle=A.angle,this.penumbra=A.penumbra,this.decay=A.decay,this.target=A.target.clone(),this.shadow=A.shadow.clone(),this}}var iG=new zA,K3=new P,LC=new P;class sY extends AQ{constructor(){super(new P0(90,1,0.5,500));this.isPointLightShadow=!0,this._frameExtents=new DA(4,2),this._viewportCount=6,this._viewports=[new M0(2,1,1,1),new M0(0,1,1,1),new M0(3,1,1,1),new M0(1,1,1,1),new M0(3,0,1,1),new M0(1,0,1,1)],this._cubeDirections=[new P(1,0,0),new P(-1,0,0),new P(0,0,1),new P(0,0,-1),new P(0,1,0),new P(0,-1,0)],this._cubeUps=[new P(0,1,0),new P(0,1,0),new P(0,1,0),new P(0,1,0),new P(0,0,1),new P(0,0,-1)]}updateMatrices(A,Q=0){const B=this.camera,C=this.matrix,I=A.distance||B.far;if(I!==B.far)B.far=I,B.updateProjectionMatrix();K3.setFromMatrixPosition(A.matrixWorld),B.position.copy(K3),LC.copy(B.position),LC.add(this._cubeDirections[Q]),B.up.copy(this._cubeUps[Q]),B.lookAt(LC),B.updateMatrixWorld(),C.makeTranslation(-K3.x,-K3.y,-K3.z),iG.multiplyMatrices(B.projectionMatrix,B.matrixWorldInverse),this._frustum.setFromProjectionMatrix(iG)}}class N3 extends V3{constructor(A,Q,B=0,C=2){super(A,Q);this.isPointLight=!0,this.type="PointLight",this.distance=B,this.decay=C,this.shadow=new sY}get power(){return this.intensity*4*Math.PI}set power(A){this.intensity=A/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(A,Q){return super.copy(A,Q),this.distance=A.distance,this.decay=A.decay,this.shadow=A.shadow.clone(),this}}class nY extends AQ{constructor(){super(new V2(-5,5,5,-5,0.5,500));this.isDirectionalLightShadow=!0}}class w3 extends V3{constructor(A,Q){super(A,Q);this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(F0.DEFAULT_UP),this.updateMatrix(),this.target=new F0,this.shadow=new nY}dispose(){this.shadow.dispose()}copy(A){return super.copy(A),this.target=A.target.clone(),this.shadow=A.shadow.clone(),this}}class oY{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let A=0;A<9;A++)this.coefficients.push(new P)}set(A){for(let Q=0;Q<9;Q++)this.coefficients[Q].copy(A[Q]);return this}zero(){for(let A=0;A<9;A++)this.coefficients[A].set(0,0,0);return this}getAt(A,Q){const{x:B,y:C,z:I}=A,E=this.coefficients;return Q.copy(E[0]).multiplyScalar(0.282095),Q.addScaledVector(E[1],0.488603*C),Q.addScaledVector(E[2],0.488603*I),Q.addScaledVector(E[3],0.488603*B),Q.addScaledVector(E[4],1.092548*(B*C)),Q.addScaledVector(E[5],1.092548*(C*I)),Q.addScaledVector(E[6],0.315392*(3*I*I-1)),Q.addScaledVector(E[7],1.092548*(B*I)),Q.addScaledVector(E[8],0.546274*(B*B-C*C)),Q}getIrradianceAt(A,Q){const{x:B,y:C,z:I}=A,E=this.coefficients;return Q.copy(E[0]).multiplyScalar(0.886227),Q.addScaledVector(E[1],1.023328*C),Q.addScaledVector(E[2],1.023328*I),Q.addScaledVector(E[3],1.023328*B),Q.addScaledVector(E[4],0.858086*B*C),Q.addScaledVector(E[5],0.858086*C*I),Q.addScaledVector(E[6],0.743125*I*I-0.247708),Q.addScaledVector(E[7],0.858086*B*I),Q.addScaledVector(E[8],0.429043*(B*B-C*C)),Q}add(A){for(let Q=0;Q<9;Q++)this.coefficients[Q].add(A.coefficients[Q]);return this}addScaledSH(A,Q){for(let B=0;B<9;B++)this.coefficients[B].addScaledVector(A.coefficients[B],Q);return this}scale(A){for(let Q=0;Q<9;Q++)this.coefficients[Q].multiplyScalar(A);return this}lerp(A,Q){for(let B=0;B<9;B++)this.coefficients[B].lerp(A.coefficients[B],Q);return this}equals(A){for(let Q=0;Q<9;Q++)if(!this.coefficients[Q].equals(A.coefficients[Q]))return!1;return!0}copy(A){return this.set(A.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(A,Q=0){const B=this.coefficients;for(let C=0;C<9;C++)B[C].fromArray(A,Q+C*3);return this}toArray(A=[],Q=0){const B=this.coefficients;for(let C=0;C<9;C++)B[C].toArray(A,Q+C*3);return A}static getBasisAt(A,Q){const{x:B,y:C,z:I}=A;Q[0]=0.282095,Q[1]=0.488603*C,Q[2]=0.488603*I,Q[3]=0.488603*B,Q[4]=1.092548*B*C,Q[5]=1.092548*C*I,Q[6]=0.315392*(3*I*I-1),Q[7]=1.092548*B*I,Q[8]=0.546274*(B*B-C*C)}}class rC extends V3{constructor(A=new oY,Q=1){super(void 0,Q);this.isLightProbe=!0,this.sh=A}copy(A){return super.copy(A),this.sh.copy(A.sh),this}fromJSON(A){return this.intensity=A.intensity,this.sh.fromArray(A.sh),this}toJSON(A){const Q=super.toJSON(A);return Q.object.sh=this.sh.toArray(),Q}}class P6{static decodeText(A){if(typeof TextDecoder!=="undefined")return(new TextDecoder()).decode(A);let Q="";for(let B=0,C=A.length;B<C;B++)Q+=String.fromCharCode(A[B]);try{return decodeURIComponent(escape(Q))}catch(B){return Q}}static extractUrlBase(A){const Q=A.lastIndexOf("/");if(Q===-1)return"./";return A.slice(0,Q+1)}static resolveURL(A,Q){if(typeof A!=="string"||A==="")return"";if(/^https?:\/\//i.test(Q)&&/^\//.test(A))Q=Q.replace(/(^https?:\/\/[^\/]+).*/i,"$1");if(/^(https?:)?\/\//i.test(A))return A;if(/^data:.*,.*$/i.test(A))return A;if(/^blob:.*$/i.test(A))return A;return Q+A}}class tC extends O1{constructor(A){super(A);if(this.isImageBitmapLoader=!0,typeof createImageBitmap==="undefined")console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");if(typeof fetch==="undefined")console.warn("THREE.ImageBitmapLoader: fetch() not supported.");this.options={premultiplyAlpha:"none"}}setOptions(A){return this.options=A,this}load(A,Q,B,C){if(A===void 0)A="";if(this.path!==void 0)A=this.path+A;A=this.manager.resolveURL(A);const I=this,E=x4.get(A);if(E!==void 0){if(I.manager.itemStart(A),E.then){E.then((q)=>{if(Q)Q(q);I.manager.itemEnd(A)}).catch((q)=>{if(C)C(q)});return}return setTimeout(function(){if(Q)Q(E);I.manager.itemEnd(A)},0),E}const K={};K.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",K.headers=this.requestHeader;const J=fetch(A,K).then(function(q){return q.blob()}).then(function(q){return createImageBitmap(q,Object.assign(I.options,{colorSpaceConversion:"none"}))}).then(function(q){if(x4.add(A,q),Q)Q(q);return I.manager.itemEnd(A),q}).catch(function(q){if(C)C(q);x4.remove(A),I.manager.itemError(A),I.manager.itemEnd(A)});x4.add(A,J),I.manager.itemStart(A)}}class iY{constructor(A,Q,B){this.binding=A,this.valueSize=B;let C,I,E;switch(Q){case"quaternion":C=this._slerp,I=this._slerpAdditive,E=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(B*6),this._workIndex=5;break;case"string":case"bool":C=this._select,I=this._select,E=this._setAdditiveIdentityOther,this.buffer=new Array(B*5);break;default:C=this._lerp,I=this._lerpAdditive,E=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(B*5)}this._mixBufferRegion=C,this._mixBufferRegionAdditive=I,this._setIdentity=E,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(A,Q){const B=this.buffer,C=this.valueSize,I=A*C+C;let E=this.cumulativeWeight;if(E===0){for(let K=0;K!==C;++K)B[I+K]=B[K];E=Q}else{E+=Q;const K=Q/E;this._mixBufferRegion(B,I,0,K,C)}this.cumulativeWeight=E}accumulateAdditive(A){const Q=this.buffer,B=this.valueSize,C=B*this._addIndex;if(this.cumulativeWeightAdditive===0)this._setIdentity();this._mixBufferRegionAdditive(Q,C,0,A,B),this.cumulativeWeightAdditive+=A}apply(A){const Q=this.valueSize,B=this.buffer,C=A*Q+Q,I=this.cumulativeWeight,E=this.cumulativeWeightAdditive,K=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,I<1){const J=Q*this._origIndex;this._mixBufferRegion(B,C,J,1-I,Q)}if(E>0)this._mixBufferRegionAdditive(B,C,this._addIndex*Q,1,Q);for(let J=Q,q=Q+Q;J!==q;++J)if(B[J]!==B[J+Q]){K.setValue(B,C);break}}saveOriginalState(){const A=this.binding,Q=this.buffer,B=this.valueSize,C=B*this._origIndex;A.getValue(Q,C);for(let I=B,E=C;I!==E;++I)Q[I]=Q[C+I%B];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const A=this.valueSize*3;this.binding.setValue(this.buffer,A)}_setAdditiveIdentityNumeric(){const A=this._addIndex*this.valueSize,Q=A+this.valueSize;for(let B=A;B<Q;B++)this.buffer[B]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const A=this._origIndex*this.valueSize,Q=this._addIndex*this.valueSize;for(let B=0;B<this.valueSize;B++)this.buffer[Q+B]=this.buffer[A+B]}_select(A,Q,B,C,I){if(C>=0.5)for(let E=0;E!==I;++E)A[Q+E]=A[B+E]}_slerp(A,Q,B,C){v0.slerpFlat(A,Q,A,Q,A,B,C)}_slerpAdditive(A,Q,B,C,I){const E=this._workIndex*I;v0.multiplyQuaternionsFlat(A,E,A,Q,A,B),v0.slerpFlat(A,Q,A,Q,A,E,C)}_lerp(A,Q,B,C,I){const E=1-C;for(let K=0;K!==I;++K){const J=Q+K;A[J]=A[J]*E+A[B+K]*C}}_lerpAdditive(A,Q,B,C,I){for(let E=0;E!==I;++E){const K=Q+E;A[K]=A[K]+A[B+E]*C}}}var eC="\\[\\]\\.:\\/",JL=new RegExp("["+eC+"]","g"),AI="[^"+eC+"]",qL="[^"+eC.replace("\\.","")+"]",GL=/((?:WC+[\/:])*)/.source.replace("WC",AI),YL=/(WCOD+)?/.source.replace("WCOD",qL),HL=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",AI),ZL=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",AI),XL=new RegExp("^"+GL+YL+HL+ZL+"$"),FL=["material","materials","bones","map"];class aY{constructor(A,Q,B){const C=B||K0.parseTrackName(Q);this._targetGroup=A,this._bindings=A.subscribe_(Q,C)}getValue(A,Q){this.bind();const B=this._targetGroup.nCachedObjects_,C=this._bindings[B];if(C!==void 0)C.getValue(A,Q)}setValue(A,Q){const B=this._bindings;for(let C=this._targetGroup.nCachedObjects_,I=B.length;C!==I;++C)B[C].setValue(A,Q)}bind(){const A=this._bindings;for(let Q=this._targetGroup.nCachedObjects_,B=A.length;Q!==B;++Q)A[Q].bind()}unbind(){const A=this._bindings;for(let Q=this._targetGroup.nCachedObjects_,B=A.length;Q!==B;++Q)A[Q].unbind()}}class K0{constructor(A,Q,B){this.path=Q,this.parsedPath=B||K0.parseTrackName(Q),this.node=K0.findNode(A,this.parsedPath.nodeName),this.rootNode=A,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(A,Q,B){if(!(A&&A.isAnimationObjectGroup))return new K0(A,Q,B);else return new K0.Composite(A,Q,B)}static sanitizeNodeName(A){return A.replace(/\s/g,"_").replace(JL,"")}static parseTrackName(A){const Q=XL.exec(A);if(Q===null)throw new Error("PropertyBinding: Cannot parse trackName: "+A);const B={nodeName:Q[2],objectName:Q[3],objectIndex:Q[4],propertyName:Q[5],propertyIndex:Q[6]},C=B.nodeName&&B.nodeName.lastIndexOf(".");if(C!==void 0&&C!==-1){const I=B.nodeName.substring(C+1);if(FL.indexOf(I)!==-1)B.nodeName=B.nodeName.substring(0,C),B.objectName=I}if(B.propertyName===null||B.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+A);return B}static findNode(A,Q){if(Q===void 0||Q===""||Q==="."||Q===-1||Q===A.name||Q===A.uuid)return A;if(A.skeleton){const B=A.skeleton.getBoneByName(Q);if(B!==void 0)return B}if(A.children){const B=function(I){for(let E=0;E<I.length;E++){const K=I[E];if(K.name===Q||K.uuid===Q)return K;const J=B(K.children);if(J)return J}return null},C=B(A.children);if(C)return C}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(A,Q){A[Q]=this.targetObject[this.propertyName]}_getValue_array(A,Q){const B=this.resolvedProperty;for(let C=0,I=B.length;C!==I;++C)A[Q++]=B[C]}_getValue_arrayElement(A,Q){A[Q]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(A,Q){this.resolvedProperty.toArray(A,Q)}_setValue_direct(A,Q){this.targetObject[this.propertyName]=A[Q]}_setValue_direct_setNeedsUpdate(A,Q){this.targetObject[this.propertyName]=A[Q],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(A,Q){this.targetObject[this.propertyName]=A[Q],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(A,Q){const B=this.resolvedProperty;for(let C=0,I=B.length;C!==I;++C)B[C]=A[Q++]}_setValue_array_setNeedsUpdate(A,Q){const B=this.resolvedProperty;for(let C=0,I=B.length;C!==I;++C)B[C]=A[Q++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(A,Q){const B=this.resolvedProperty;for(let C=0,I=B.length;C!==I;++C)B[C]=A[Q++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(A,Q){this.resolvedProperty[this.propertyIndex]=A[Q]}_setValue_arrayElement_setNeedsUpdate(A,Q){this.resolvedProperty[this.propertyIndex]=A[Q],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(A,Q){this.resolvedProperty[this.propertyIndex]=A[Q],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(A,Q){this.resolvedProperty.fromArray(A,Q)}_setValue_fromArray_setNeedsUpdate(A,Q){this.resolvedProperty.fromArray(A,Q),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(A,Q){this.resolvedProperty.fromArray(A,Q),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(A,Q){this.bind(),this.getValue(A,Q)}_setValue_unbound(A,Q){this.bind(),this.setValue(A,Q)}bind(){let A=this.node;const Q=this.parsedPath,B=Q.objectName,C=Q.propertyName;let I=Q.propertyIndex;if(!A)A=K0.findNode(this.rootNode,Q.nodeName),this.node=A;if(this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!A){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(B){let q=Q.objectIndex;switch(B){case"materials":if(!A.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!A.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}A=A.material.materials;break;case"bones":if(!A.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}A=A.skeleton.bones;for(let G=0;G<A.length;G++)if(A[G].name===q){q=G;break}break;case"map":if("map"in A){A=A.map;break}if(!A.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!A.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}A=A.material.map;break;default:if(A[B]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}A=A[B]}if(q!==void 0){if(A[q]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,A);return}A=A[q]}}const E=A[C];if(E===void 0){const q=Q.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+q+"."+C+" but it wasn\'t found.",A);return}let K=this.Versioning.None;if(this.targetObject=A,A.needsUpdate!==void 0)K=this.Versioning.NeedsUpdate;else if(A.matrixWorldNeedsUpdate!==void 0)K=this.Versioning.MatrixWorldNeedsUpdate;let J=this.BindingType.Direct;if(I!==void 0){if(C==="morphTargetInfluences"){if(!A.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!A.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}if(A.morphTargetDictionary[I]!==void 0)I=A.morphTargetDictionary[I]}J=this.BindingType.ArrayElement,this.resolvedProperty=E,this.propertyIndex=I}else if(E.fromArray!==void 0&&E.toArray!==void 0)J=this.BindingType.HasFromToArray,this.resolvedProperty=E;else if(Array.isArray(E))J=this.BindingType.EntireArray,this.resolvedProperty=E;else this.propertyName=C;this.getValue=this.GetterByBindingType[J],this.setValue=this.SetterByBindingTypeAndVersioning[J][K]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}K0.Composite=aY;K0.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};K0.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};K0.prototype.GetterByBindingType=[K0.prototype._getValue_direct,K0.prototype._getValue_array,K0.prototype._getValue_arrayElement,K0.prototype._getValue_toArray];K0.prototype.SetterByBindingTypeAndVersioning=[[K0.prototype._setValue_direct,K0.prototype._setValue_direct_setNeedsUpdate,K0.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[K0.prototype._setValue_array,K0.prototype._setValue_array_setNeedsUpdate,K0.prototype._setValue_array_setMatrixWorldNeedsUpdate],[K0.prototype._setValue_arrayElement,K0.prototype._setValue_arrayElement_setNeedsUpdate,K0.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[K0.prototype._setValue_fromArray,K0.prototype._setValue_fromArray_setNeedsUpdate,K0.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class rY{constructor(A,Q,B=null,C=Q.blendMode){this._mixer=A,this._clip=Q,this._localRoot=B,this.blendMode=C;const I=Q.tracks,E=I.length,K=new Array(E),J={endingStart:2400,endingEnd:2400};for(let q=0;q!==E;++q){const G=I[q].createInterpolant(null);K[q]=G,G.settings=J}this._interpolantSettings=J,this._interpolants=K,this._propertyBindings=new Array(E),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=Infinity,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(A){return this._startTime=A,this}setLoop(A,Q){return this.loop=A,this.repetitions=Q,this}setEffectiveWeight(A){return this.weight=A,this._effectiveWeight=this.enabled?A:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(A){return this._scheduleFading(A,0,1)}fadeOut(A){return this._scheduleFading(A,1,0)}crossFadeFrom(A,Q,B){if(A.fadeOut(Q),this.fadeIn(Q),B){const C=this._clip.duration,I=A._clip.duration,E=I/C,K=C/I;A.warp(1,E,Q),this.warp(K,1,Q)}return this}crossFadeTo(A,Q,B){return A.crossFadeFrom(this,Q,B)}stopFading(){const A=this._weightInterpolant;if(A!==null)this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(A);return this}setEffectiveTimeScale(A){return this.timeScale=A,this._effectiveTimeScale=this.paused?0:A,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(A){return this.timeScale=this._clip.duration/A,this.stopWarping()}syncWith(A){return this.time=A.time,this.timeScale=A.timeScale,this.stopWarping()}halt(A){return this.warp(this._effectiveTimeScale,0,A)}warp(A,Q,B){const C=this._mixer,I=C.time,E=this.timeScale;let K=this._timeScaleInterpolant;if(K===null)K=C._lendControlInterpolant(),this._timeScaleInterpolant=K;const{parameterPositions:J,sampleValues:q}=K;return J[0]=I,J[1]=I+B,q[0]=A/E,q[1]=Q/E,this}stopWarping(){const A=this._timeScaleInterpolant;if(A!==null)this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(A);return this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(A,Q,B,C){if(!this.enabled){this._updateWeight(A);return}const I=this._startTime;if(I!==null){const J=(A-I)*B;if(J<0||B===0)Q=0;else this._startTime=null,Q=B*J}Q*=this._updateTimeScale(A);const E=this._updateTime(Q),K=this._updateWeight(A);if(K>0){const J=this._interpolants,q=this._propertyBindings;switch(this.blendMode){case 2501:for(let G=0,Y=J.length;G!==Y;++G)J[G].evaluate(E),q[G].accumulateAdditive(K);break;case 2500:default:for(let G=0,Y=J.length;G!==Y;++G)J[G].evaluate(E),q[G].accumulate(C,K)}}}_updateWeight(A){let Q=0;if(this.enabled){Q=this.weight;const B=this._weightInterpolant;if(B!==null){const C=B.evaluate(A)[0];if(Q*=C,A>B.parameterPositions[1]){if(this.stopFading(),C===0)this.enabled=!1}}}return this._effectiveWeight=Q,Q}_updateTimeScale(A){let Q=0;if(!this.paused){Q=this.timeScale;const B=this._timeScaleInterpolant;if(B!==null){const C=B.evaluate(A)[0];if(Q*=C,A>B.parameterPositions[1])if(this.stopWarping(),Q===0)this.paused=!0;else this.timeScale=Q}}return this._effectiveTimeScale=Q,Q}_updateTime(A){const Q=this._clip.duration,B=this.loop;let C=this.time+A,I=this._loopCount;const E=B===2202;if(A===0){if(I===-1)return C;return E&&(I&1)===1?Q-C:C}if(B===2200){if(I===-1)this._loopCount=0,this._setEndings(!0,!0,!1);A:{if(C>=Q)C=Q;else if(C<0)C=0;else{this.time=C;break A}if(this.clampWhenFinished)this.paused=!0;else this.enabled=!1;this.time=C,this._mixer.dispatchEvent({type:"finished",action:this,direction:A<0?-1:1})}}else{if(I===-1)if(A>=0)I=0,this._setEndings(!0,this.repetitions===0,E);else this._setEndings(this.repetitions===0,!0,E);if(C>=Q||C<0){const K=Math.floor(C/Q);C-=Q*K,I+=Math.abs(K);const J=this.repetitions-I;if(J<=0){if(this.clampWhenFinished)this.paused=!0;else this.enabled=!1;C=A>0?Q:0,this.time=C,this._mixer.dispatchEvent({type:"finished",action:this,direction:A>0?1:-1})}else{if(J===1){const q=A<0;this._setEndings(q,!q,E)}else this._setEndings(!1,!1,E);this._loopCount=I,this.time=C,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:K})}}else this.time=C;if(E&&(I&1)===1)return Q-C}return C}_setEndings(A,Q,B){const C=this._interpolantSettings;if(B)C.endingStart=2401,C.endingEnd=2401;else{if(A)C.endingStart=this.zeroSlopeAtStart?2401:2400;else C.endingStart=2402;if(Q)C.endingEnd=this.zeroSlopeAtEnd?2401:2400;else C.endingEnd=2402}}_scheduleFading(A,Q,B){const C=this._mixer,I=C.time;let E=this._weightInterpolant;if(E===null)E=C._lendControlInterpolant(),this._weightInterpolant=E;const{parameterPositions:K,sampleValues:J}=E;return K[0]=I,J[0]=Q,K[1]=I+A,J[1]=B,this}}var WL=new Float32Array(1);class QQ extends K1{constructor(A){super();this._root=A,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(A,Q){const B=A._localRoot||this._root,C=A._clip.tracks,I=C.length,E=A._propertyBindings,K=A._interpolants,J=B.uuid,q=this._bindingsByRootAndName;let G=q[J];if(G===void 0)G={},q[J]=G;for(let Y=0;Y!==I;++Y){const H=C[Y],Z=H.name;let X=G[Z];if(X!==void 0)++X.referenceCount,E[Y]=X;else{if(X=E[Y],X!==void 0){if(X._cacheIndex===null)++X.referenceCount,this._addInactiveBinding(X,J,Z);continue}const U=Q&&Q._propertyBindings[Y].binding.parsedPath;X=new iY(K0.create(B,Z,U),H.ValueTypeName,H.getValueSize()),++X.referenceCount,this._addInactiveBinding(X,J,Z),E[Y]=X}K[Y].resultBuffer=X.buffer}}_activateAction(A){if(!this._isActiveAction(A)){if(A._cacheIndex===null){const B=(A._localRoot||this._root).uuid,C=A._clip.uuid,I=this._actionsByClip[C];this._bindAction(A,I&&I.knownActions[0]),this._addInactiveAction(A,C,B)}const Q=A._propertyBindings;for(let B=0,C=Q.length;B!==C;++B){const I=Q[B];if(I.useCount++===0)this._lendBinding(I),I.saveOriginalState()}this._lendAction(A)}}_deactivateAction(A){if(this._isActiveAction(A)){const Q=A._propertyBindings;for(let B=0,C=Q.length;B!==C;++B){const I=Q[B];if(--I.useCount===0)I.restoreOriginalState(),this._takeBackBinding(I)}this._takeBackAction(A)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const A=this;this.stats={actions:{get total(){return A._actions.length},get inUse(){return A._nActiveActions}},bindings:{get total(){return A._bindings.length},get inUse(){return A._nActiveBindings}},controlInterpolants:{get total(){return A._controlInterpolants.length},get inUse(){return A._nActiveControlInterpolants}}}}_isActiveAction(A){const Q=A._cacheIndex;return Q!==null&&Q<this._nActiveActions}_addInactiveAction(A,Q,B){const C=this._actions,I=this._actionsByClip;let E=I[Q];if(E===void 0)E={knownActions:[A],actionByRoot:{}},A._byClipCacheIndex=0,I[Q]=E;else{const K=E.knownActions;A._byClipCacheIndex=K.length,K.push(A)}A._cacheIndex=C.length,C.push(A),E.actionByRoot[B]=A}_removeInactiveAction(A){const Q=this._actions,B=Q[Q.length-1],C=A._cacheIndex;B._cacheIndex=C,Q[C]=B,Q.pop(),A._cacheIndex=null;const I=A._clip.uuid,E=this._actionsByClip,K=E[I],J=K.knownActions,q=J[J.length-1],G=A._byClipCacheIndex;q._byClipCacheIndex=G,J[G]=q,J.pop(),A._byClipCacheIndex=null;const Y=K.actionByRoot,H=(A._localRoot||this._root).uuid;if(delete Y[H],J.length===0)delete E[I];this._removeInactiveBindingsForAction(A)}_removeInactiveBindingsForAction(A){const Q=A._propertyBindings;for(let B=0,C=Q.length;B!==C;++B){const I=Q[B];if(--I.referenceCount===0)this._removeInactiveBinding(I)}}_lendAction(A){const Q=this._actions,B=A._cacheIndex,C=this._nActiveActions++,I=Q[C];A._cacheIndex=C,Q[C]=A,I._cacheIndex=B,Q[B]=I}_takeBackAction(A){const Q=this._actions,B=A._cacheIndex,C=--this._nActiveActions,I=Q[C];A._cacheIndex=C,Q[C]=A,I._cacheIndex=B,Q[B]=I}_addInactiveBinding(A,Q,B){const C=this._bindingsByRootAndName,I=this._bindings;let E=C[Q];if(E===void 0)E={},C[Q]=E;E[B]=A,A._cacheIndex=I.length,I.push(A)}_removeInactiveBinding(A){const Q=this._bindings,B=A.binding,C=B.rootNode.uuid,I=B.path,E=this._bindingsByRootAndName,K=E[C],J=Q[Q.length-1],q=A._cacheIndex;if(J._cacheIndex=q,Q[q]=J,Q.pop(),delete K[I],Object.keys(K).length===0)delete E[C]}_lendBinding(A){const Q=this._bindings,B=A._cacheIndex,C=this._nActiveBindings++,I=Q[C];A._cacheIndex=C,Q[C]=A,I._cacheIndex=B,Q[B]=I}_takeBackBinding(A){const Q=this._bindings,B=A._cacheIndex,C=--this._nActiveBindings,I=Q[C];A._cacheIndex=C,Q[C]=A,I._cacheIndex=B,Q[B]=I}_lendControlInterpolant(){const A=this._controlInterpolants,Q=this._nActiveControlInterpolants++;let B=A[Q];if(B===void 0)B=new nC(new Float32Array(2),new Float32Array(2),1,WL),B.__cacheIndex=Q,A[Q]=B;return B}_takeBackControlInterpolant(A){const Q=this._controlInterpolants,B=A.__cacheIndex,C=--this._nActiveControlInterpolants,I=Q[C];A.__cacheIndex=C,Q[C]=A,I.__cacheIndex=B,Q[B]=I}clipAction(A,Q,B){const C=Q||this._root,I=C.uuid;let E=typeof A==="string"?$8.findByName(C,A):A;const K=E!==null?E.uuid:A,J=this._actionsByClip[K];let q=null;if(B===void 0)if(E!==null)B=E.blendMode;else B=2500;if(J!==void 0){const Y=J.actionByRoot[I];if(Y!==void 0&&Y.blendMode===B)return Y;if(q=J.knownActions[0],E===null)E=q._clip}if(E===null)return null;const G=new rY(this,E,Q,B);return this._bindAction(G,q),this._addInactiveAction(G,K,I),G}existingAction(A,Q){const B=Q||this._root,C=B.uuid,I=typeof A==="string"?$8.findByName(B,A):A,E=I?I.uuid:A,K=this._actionsByClip[E];if(K!==void 0)return K.actionByRoot[C]||null;return null}stopAllAction(){const A=this._actions,Q=this._nActiveActions;for(let B=Q-1;B>=0;--B)A[B].stop();return this}update(A){A*=this.timeScale;const Q=this._actions,B=this._nActiveActions,C=this.time+=A,I=Math.sign(A),E=this._accuIndex^=1;for(let q=0;q!==B;++q)Q[q]._update(C,A,I,E);const K=this._bindings,J=this._nActiveBindings;for(let q=0;q!==J;++q)K[q].apply(E);return this}setTime(A){this.time=0;for(let Q=0;Q<this._actions.length;Q++)this._actions[Q].time=0;return this.update(A)}getRoot(){return this._root}uncacheClip(A){const Q=this._actions,B=A.uuid,C=this._actionsByClip,I=C[B];if(I!==void 0){const E=I.knownActions;for(let K=0,J=E.length;K!==J;++K){const q=E[K];this._deactivateAction(q);const G=q._cacheIndex,Y=Q[Q.length-1];q._cacheIndex=null,q._byClipCacheIndex=null,Y._cacheIndex=G,Q[G]=Y,Q.pop(),this._removeInactiveBindingsForAction(q)}delete C[B]}}uncacheRoot(A){const Q=A.uuid,B=this._actionsByClip;for(let E in B){const K=B[E].actionByRoot,J=K[Q];if(J!==void 0)this._deactivateAction(J),this._removeInactiveAction(J)}const C=this._bindingsByRootAndName,I=C[Q];if(I!==void 0)for(let E in I){const K=I[E];K.restoreOriginalState(),this._removeInactiveBinding(K)}}uncacheAction(A,Q){const B=this.existingAction(A,Q);if(B!==null)this._deactivateAction(B),this._removeInactiveAction(B)}}class BQ{constructor(A){this.value=A}clone(){return new BQ(this.value.clone===void 0?this.value:this.value.clone())}}var aG=new zA;class QI{constructor(A,Q,B=0,C=Infinity){this.ray=new f4(A,Q),this.near=B,this.far=C,this.camera=null,this.layers=new d9,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(A,Q){this.ray.set(A,Q)}setFromCamera(A,Q){if(Q.isPerspectiveCamera)this.ray.origin.setFromMatrixPosition(Q.matrixWorld),this.ray.direction.set(A.x,A.y,0.5).unproject(Q).sub(this.ray.origin).normalize(),this.camera=Q;else if(Q.isOrthographicCamera)this.ray.origin.set(A.x,A.y,(Q.near+Q.far)/(Q.near-Q.far)).unproject(Q),this.ray.direction.set(0,0,-1).transformDirection(Q.matrixWorld),this.camera=Q;else console.error("THREE.Raycaster: Unsupported camera type: "+Q.type)}setFromXRController(A){return aG.identity().extractRotation(A.matrixWorld),this.ray.origin.setFromMatrixPosition(A.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(aG),this}intersectObject(A,Q=!0,B=[]){return _C(A,this,B,Q),B.sort(rG),B}intersectObjects(A,Q=!0,B=[]){for(let C=0,I=A.length;C<I;C++)_C(A[C],this,B,Q);return B.sort(rG),B}}class m2{constructor(A=1,Q=0,B=0){return this.radius=A,this.phi=Q,this.theta=B,this}set(A,Q,B){return this.radius=A,this.phi=Q,this.theta=B,this}copy(A){return this.radius=A.radius,this.phi=A.phi,this.theta=A.theta,this}makeSafe(){return this.phi=Math.max(0.000001,Math.min(Math.PI-0.000001,this.phi)),this}setFromVector3(A){return this.setFromCartesianCoords(A.x,A.y,A.z)}setFromCartesianCoords(A,Q,B){if(this.radius=Math.sqrt(A*A+Q*Q+B*B),this.radius===0)this.theta=0,this.phi=0;else this.theta=Math.atan2(A,B),this.phi=Math.acos(I1(Q/this.radius,-1,1));return this}clone(){return new this.constructor().copy(this)}}if(typeof __THREE_DEVTOOLS__!=="undefined")__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"162"}}));if(typeof window!=="undefined")if(window.__THREE__)console.warn("WARNING: Multiple instances of Three.js being imported.");else window.__THREE__="162";var CQ=window,IQ=CQ.ShadowRoot&&(CQ.ShadyCSS===void 0||CQ.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,eY=Symbol(),tY=new WeakMap;class BI{constructor(A,Q,B){if(this._$cssResult$=!0,B!==eY)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=A,this.t=Q}get styleSheet(){let A=this.o;const Q=this.t;if(IQ&&A===void 0){const B=Q!==void 0&&Q.length===1;B&&(A=tY.get(Q)),A===void 0&&((this.o=A=new CSSStyleSheet).replaceSync(this.cssText),B&&tY.set(Q,A))}return A}toString(){return this.cssText}}var AH=(A)=>new BI(typeof A=="string"?A:A+"",void 0,eY);var CI=(A,Q)=>{IQ?A.adoptedStyleSheets=Q.map((B)=>B instanceof CSSStyleSheet?B:B.styleSheet):Q.forEach((B)=>{const C=document.createElement("style"),I=CQ.litNonce;I!==void 0&&C.setAttribute("nonce",I),C.textContent=B.cssText,A.appendChild(C)})},EQ=IQ?(A)=>A:(A)=>A instanceof CSSStyleSheet?((Q)=>{let B="";for(let C of Q.cssRules)B+=C.cssText;return AH(B)})(A):A;var II,KQ=window,QH=KQ.trustedTypes,DL=QH?QH.emptyScript:"",BH=KQ.reactiveElementPolyfillSupport,KI={toAttribute(A,Q){switch(Q){case Boolean:A=A?DL:null;break;case Object:case Array:A=A==null?A:JSON.stringify(A)}return A},fromAttribute(A,Q){let B=A;switch(Q){case Boolean:B=A!==null;break;case Number:B=A===null?null:Number(A);break;case Object:case Array:try{B=JSON.parse(A)}catch(C){B=null}}return B}},CH=(A,Q)=>Q!==A&&(Q==Q||A==A),EI={attribute:!0,type:String,converter:KI,reflect:!1,hasChanged:CH},JI="finalized";class d2 extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(A){var Q;this.finalize(),((Q=this.h)!==null&&Q!==void 0?Q:this.h=[]).push(A)}static get observedAttributes(){this.finalize();const A=[];return this.elementProperties.forEach((Q,B)=>{const C=this._$Ep(B,Q);C!==void 0&&(this._$Ev.set(C,B),A.push(C))}),A}static createProperty(A,Q=EI){if(Q.state&&(Q.attribute=!1),this.finalize(),this.elementProperties.set(A,Q),!Q.noAccessor&&!this.prototype.hasOwnProperty(A)){const B=typeof A=="symbol"?Symbol():"__"+A,C=this.getPropertyDescriptor(A,B,Q);C!==void 0&&Object.defineProperty(this.prototype,A,C)}}static getPropertyDescriptor(A,Q,B){return{get(){return this[Q]},set(C){const I=this[A];this[Q]=C,this.requestUpdate(A,I,B)},configurable:!0,enumerable:!0}}static getPropertyOptions(A){return this.elementProperties.get(A)||EI}static finalize(){if(this.hasOwnProperty(JI))return!1;this[JI]=!0;const A=Object.getPrototypeOf(this);if(A.finalize(),A.h!==void 0&&(this.h=[...A.h]),this.elementProperties=new Map(A.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const Q=this.properties,B=[...Object.getOwnPropertyNames(Q),...Object.getOwnPropertySymbols(Q)];for(let C of B)this.createProperty(C,Q[C])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(A){const Q=[];if(Array.isArray(A)){const B=new Set(A.flat(Infinity).reverse());for(let C of B)Q.unshift(EQ(C))}else A!==void 0&&Q.push(EQ(A));return Q}static _$Ep(A,Q){const B=Q.attribute;return B===!1?void 0:typeof B=="string"?B:typeof A=="string"?A.toLowerCase():void 0}_$Eu(){var A;this._$E_=new Promise((Q)=>this.enableUpdating=Q),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(A=this.constructor.h)===null||A===void 0||A.forEach((Q)=>Q(this))}addController(A){var Q,B;((Q=this._$ES)!==null&&Q!==void 0?Q:this._$ES=[]).push(A),this.renderRoot!==void 0&&this.isConnected&&((B=A.hostConnected)===null||B===void 0||B.call(A))}removeController(A){var Q;(Q=this._$ES)===null||Q===void 0||Q.splice(this._$ES.indexOf(A)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((A,Q)=>{this.hasOwnProperty(Q)&&(this._$Ei.set(Q,this[Q]),delete this[Q])})}createRenderRoot(){var A;const Q=(A=this.shadowRoot)!==null&&A!==void 0?A:this.attachShadow(this.constructor.shadowRootOptions);return CI(Q,this.constructor.elementStyles),Q}connectedCallback(){var A;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(A=this._$ES)===null||A===void 0||A.forEach((Q)=>{var B;return(B=Q.hostConnected)===null||B===void 0?void 0:B.call(Q)})}enableUpdating(A){}disconnectedCallback(){var A;(A=this._$ES)===null||A===void 0||A.forEach((Q)=>{var B;return(B=Q.hostDisconnected)===null||B===void 0?void 0:B.call(Q)})}attributeChangedCallback(A,Q,B){this._$AK(A,B)}_$EO(A,Q,B=EI){var C;const I=this.constructor._$Ep(A,B);if(I!==void 0&&B.reflect===!0){const E=(((C=B.converter)===null||C===void 0?void 0:C.toAttribute)!==void 0?B.converter:KI).toAttribute(Q,B.type);this._$El=A,E==null?this.removeAttribute(I):this.setAttribute(I,E),this._$El=null}}_$AK(A,Q){var B;const C=this.constructor,I=C._$Ev.get(A);if(I!==void 0&&this._$El!==I){const E=C.getPropertyOptions(I),K=typeof E.converter=="function"?{fromAttribute:E.converter}:((B=E.converter)===null||B===void 0?void 0:B.fromAttribute)!==void 0?E.converter:KI;this._$El=I,this[I]=K.fromAttribute(Q,E.type),this._$El=null}}requestUpdate(A,Q,B){let C=!0;A!==void 0&&(((B=B||this.constructor.getPropertyOptions(A)).hasChanged||CH)(this[A],Q)?(this._$AL.has(A)||this._$AL.set(A,Q),B.reflect===!0&&this._$El!==A&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(A,B))):C=!1),!this.isUpdatePending&&C&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(Q){Promise.reject(Q)}const A=this.scheduleUpdate();return A!=null&&await A,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var A;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((C,I)=>this[I]=C),this._$Ei=void 0);let Q=!1;const B=this._$AL;try{Q=this.shouldUpdate(B),Q?(this.willUpdate(B),(A=this._$ES)===null||A===void 0||A.forEach((C)=>{var I;return(I=C.hostUpdate)===null||I===void 0?void 0:I.call(C)}),this.update(B)):this._$Ek()}catch(C){throw Q=!1,this._$Ek(),C}Q&&this._$AE(B)}willUpdate(A){}_$AE(A){var Q;(Q=this._$ES)===null||Q===void 0||Q.forEach((B)=>{var C;return(C=B.hostUpdated)===null||C===void 0?void 0:C.call(B)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(A)),this.updated(A)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(A){return!0}update(A){this._$EC!==void 0&&(this._$EC.forEach((Q,B)=>this._$EO(B,this[B],Q)),this._$EC=void 0),this._$Ek()}updated(A){}firstUpdated(A){}}d2[JI]=!0,d2.elementProperties=new Map,d2.elementStyles=[],d2.shadowRootOptions={mode:"open"},BH==null||BH({ReactiveElement:d2}),((II=KQ.reactiveElementVersions)!==null&&II!==void 0?II:KQ.reactiveElementVersions=[]).push("1.6.3");var WH=function(A,Q){if(!Array.isArray(A)||!A.hasOwnProperty("raw"))throw Error("invalid template strings array");return IH!==void 0?IH.createHTML(Q):Q},f8=function(A,Q,B=A,C){var I,E,K,J;if(Q===g6)return Q;let q=C!==void 0?(I=B._$Co)===null||I===void 0?void 0:I[C]:B._$Cl;const G=z3(Q)?void 0:Q._$litDirective$;return(q==null?void 0:q.constructor)!==G&&((E=q==null?void 0:q._$AO)===null||E===void 0||E.call(q,!1),G===void 0?q=void 0:(q=new G(A),q._$AT(A,B,C)),C!==void 0?((K=(J=B)._$Co)!==null&&K!==void 0?K:J._$Co=[])[C]=q:B._$Cl=q),q!==void 0&&(Q=f8(A,q._$AS(A,Q.values),q,C)),Q},qI,JQ=window,v8=JQ.trustedTypes,IH=v8?v8.createPolicy("lit-html",{createHTML:(A)=>A}):void 0;var u4=`lit\$${(Math.random()+"").slice(9)}\$`,HH="?"+u4,RL=`<${HH}>`,j6=document,L3=()=>j6.createComment(""),z3=(A)=>A===null||typeof A!="object"&&typeof A!="function",ZH=Array.isArray,VL=(A)=>ZH(A)||typeof(A==null?void 0:A[Symbol.iterator])=="function";var O3=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,EH=/-->/g,KH=/>/g,S6=RegExp(`>|[ \t\n\f\r](?:([^\\s"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|\$)`,"g"),JH=/'/g,qH=/"/g,XH=/^(?:script|style|textarea|title)$/i,FH=(A)=>(Q,...B)=>({_$litType$:A,strings:Q,values:B}),m4=FH(1),xy=FH(2),g6=Symbol.for("lit-noChange"),G1=Symbol.for("lit-nothing"),GH=new WeakMap,T6=j6.createTreeWalker(j6,129,null,!1),NL=(A,Q)=>{const B=A.length-1,C=[];let I,E=Q===2?"<svg>":"",K=O3;for(let J=0;J<B;J++){const q=A[J];let G,Y,H=-1,Z=0;for(;Z<q.length&&(K.lastIndex=Z,Y=K.exec(q),Y!==null);)Z=K.lastIndex,K===O3?Y[1]==="!--"?K=EH:Y[1]!==void 0?K=KH:Y[2]!==void 0?(XH.test(Y[2])&&(I=RegExp("</"+Y[2],"g")),K=S6):Y[3]!==void 0&&(K=S6):K===S6?Y[0]===">"?(K=I!=null?I:O3,H=-1):Y[1]===void 0?H=-2:(H=K.lastIndex-Y[2].length,G=Y[1],K=Y[3]===void 0?S6:Y[3]==='"'?qH:JH):K===qH||K===JH?K=S6:K===EH||K===KH?K=O3:(K=S6,I=void 0);const X=K===S6&&A[J+1].startsWith("/>")?" ":"";E+=K===O3?q+RL:H>=0?(C.push(G),q.slice(0,H)+"$lit$"+q.slice(H)+u4+X):q+u4+(H===-2?(C.push(void 0),J):X)}return[WH(A,E+(A[B]||"<?>")+(Q===2?"</svg>":"")),C]};class k3{constructor({strings:A,_$litType$:Q},B){let C;this.parts=[];let I=0,E=0;const K=A.length-1,J=this.parts,[q,G]=NL(A,Q);if(this.el=k3.createElement(q,B),T6.currentNode=this.el.content,Q===2){const Y=this.el.content,H=Y.firstChild;H.remove(),Y.append(...H.childNodes)}for(;(C=T6.nextNode())!==null&&J.length<K;){if(C.nodeType===1){if(C.hasAttributes()){const Y=[];for(let H of C.getAttributeNames())if(H.endsWith("$lit$")||H.startsWith(u4)){const Z=G[E++];if(Y.push(H),Z!==void 0){const X=C.getAttribute(Z.toLowerCase()+"$lit$").split(u4),U=/([.?@])?(.*)/.exec(Z);J.push({type:1,index:I,name:U[2],strings:X,ctor:U[1]==="."?DH:U[1]==="?"?RH:U[1]==="@"?VH:$3})}else J.push({type:6,index:I})}for(let H of Y)C.removeAttribute(H)}if(XH.test(C.tagName)){const Y=C.textContent.split(u4),H=Y.length-1;if(H>0){C.textContent=v8?v8.emptyScript:"";for(let Z=0;Z<H;Z++)C.append(Y[Z],L3()),T6.nextNode(),J.push({type:2,index:++I});C.append(Y[H],L3())}}}else if(C.nodeType===8)if(C.data===HH)J.push({type:2,index:I});else{let Y=-1;for(;(Y=C.data.indexOf(u4,Y+1))!==-1;)J.push({type:7,index:I}),Y+=u4.length-1}I++}}static createElement(A,Q){const B=j6.createElement("template");return B.innerHTML=A,B}}class UH{constructor(A,Q){this._$AV=[],this._$AN=void 0,this._$AD=A,this._$AM=Q}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(A){var Q;const{el:{content:B},parts:C}=this._$AD,I=((Q=A==null?void 0:A.creationScope)!==null&&Q!==void 0?Q:j6).importNode(B,!0);T6.currentNode=I;let E=T6.nextNode(),K=0,J=0,q=C[0];for(;q!==void 0;){if(K===q.index){let G;q.type===2?G=new M3(E,E.nextSibling,this,A):q.type===1?G=new q.ctor(E,q.name,q.strings,this,A):q.type===6&&(G=new NH(E,this,A)),this._$AV.push(G),q=C[++J]}K!==(q==null?void 0:q.index)&&(E=T6.nextNode(),K++)}return T6.currentNode=j6,I}v(A){let Q=0;for(let B of this._$AV)B!==void 0&&(B.strings!==void 0?(B._$AI(A,B,Q),Q+=B.strings.length-2):B._$AI(A[Q])),Q++}}class M3{constructor(A,Q,B,C){var I;this.type=2,this._$AH=G1,this._$AN=void 0,this._$AA=A,this._$AB=Q,this._$AM=B,this.options=C,this._$Cp=(I=C==null?void 0:C.isConnected)===null||I===void 0||I}get _$AU(){var A,Q;return(Q=(A=this._$AM)===null||A===void 0?void 0:A._$AU)!==null&&Q!==void 0?Q:this._$Cp}get parentNode(){let A=this._$AA.parentNode;const Q=this._$AM;return Q!==void 0&&(A==null?void 0:A.nodeType)===11&&(A=Q.parentNode),A}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(A,Q=this){A=f8(this,A,Q),z3(A)?A===G1||A==null||A===""?(this._$AH!==G1&&this._$AR(),this._$AH=G1):A!==this._$AH&&A!==g6&&this._(A):A._$litType$!==void 0?this.g(A):A.nodeType!==void 0?this.$(A):VL(A)?this.T(A):this._(A)}k(A){return this._$AA.parentNode.insertBefore(A,this._$AB)}$(A){this._$AH!==A&&(this._$AR(),this._$AH=this.k(A))}_(A){this._$AH!==G1&&z3(this._$AH)?this._$AA.nextSibling.data=A:this.$(j6.createTextNode(A)),this._$AH=A}g(A){var Q;const{values:B,_$litType$:C}=A,I=typeof C=="number"?this._$AC(A):(C.el===void 0&&(C.el=k3.createElement(WH(C.h,C.h[0]),this.options)),C);if(((Q=this._$AH)===null||Q===void 0?void 0:Q._$AD)===I)this._$AH.v(B);else{const E=new UH(I,this),K=E.u(this.options);E.v(B),this.$(K),this._$AH=E}}_$AC(A){let Q=GH.get(A.strings);return Q===void 0&&GH.set(A.strings,Q=new k3(A)),Q}T(A){ZH(this._$AH)||(this._$AH=[],this._$AR());const Q=this._$AH;let B,C=0;for(let I of A)C===Q.length?Q.push(B=new M3(this.k(L3()),this.k(L3()),this,this.options)):B=Q[C],B._$AI(I),C++;C<Q.length&&(this._$AR(B&&B._$AB.nextSibling,C),Q.length=C)}_$AR(A=this._$AA.nextSibling,Q){var B;for((B=this._$AP)===null||B===void 0||B.call(this,!1,!0,Q);A&&A!==this._$AB;){const C=A.nextSibling;A.remove(),A=C}}setConnected(A){var Q;this._$AM===void 0&&(this._$Cp=A,(Q=this._$AP)===null||Q===void 0||Q.call(this,A))}}class $3{constructor(A,Q,B,C,I){this.type=1,this._$AH=G1,this._$AN=void 0,this.element=A,this.name=Q,this._$AM=C,this.options=I,B.length>2||B[0]!==""||B[1]!==""?(this._$AH=Array(B.length-1).fill(new String),this.strings=B):this._$AH=G1}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(A,Q=this,B,C){const I=this.strings;let E=!1;if(I===void 0)A=f8(this,A,Q,0),E=!z3(A)||A!==this._$AH&&A!==g6,E&&(this._$AH=A);else{const K=A;let J,q;for(A=I[0],J=0;J<I.length-1;J++)q=f8(this,K[B+J],Q,J),q===g6&&(q=this._$AH[J]),E||(E=!z3(q)||q!==this._$AH[J]),q===G1?A=G1:A!==G1&&(A+=(q!=null?q:"")+I[J+1]),this._$AH[J]=q}E&&!C&&this.j(A)}j(A){A===G1?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,A!=null?A:"")}}class DH extends $3{constructor(){super(...arguments),this.type=3}j(A){this.element[this.name]=A===G1?void 0:A}}var wL=v8?v8.emptyScript:"";class RH extends $3{constructor(){super(...arguments),this.type=4}j(A){A&&A!==G1?this.element.setAttribute(this.name,wL):this.element.removeAttribute(this.name)}}class VH extends $3{constructor(A,Q,B,C,I){super(A,Q,B,C,I),this.type=5}_$AI(A,Q=this){var B;if((A=(B=f8(this,A,Q,0))!==null&&B!==void 0?B:G1)===g6)return;const C=this._$AH,I=A===G1&&C!==G1||A.capture!==C.capture||A.once!==C.once||A.passive!==C.passive,E=A!==G1&&(C===G1||I);I&&this.element.removeEventListener(this.name,this,C),E&&this.element.addEventListener(this.name,this,A),this._$AH=A}handleEvent(A){var Q,B;typeof this._$AH=="function"?this._$AH.call((B=(Q=this.options)===null||Q===void 0?void 0:Q.host)!==null&&B!==void 0?B:this.element,A):this._$AH.handleEvent(A)}}class NH{constructor(A,Q,B){this.element=A,this.type=6,this._$AN=void 0,this._$AM=Q,this.options=B}get _$AU(){return this._$AM._$AU}_$AI(A){f8(this,A)}}var YH=JQ.litHtmlPolyfillSupport;YH==null||YH(k3,M3),((qI=JQ.litHtmlVersions)!==null&&qI!==void 0?qI:JQ.litHtmlVersions=[]).push("2.8.0");var qQ=(A,Q,B)=>{var C,I;const E=(C=B==null?void 0:B.renderBefore)!==null&&C!==void 0?C:Q;let K=E._$litPart$;if(K===void 0){const J=(I=B==null?void 0:B.renderBefore)!==null&&I!==void 0?I:null;E._$litPart$=K=new M3(Q.insertBefore(L3(),J),J,void 0,B!=null?B:{})}return K._$AI(A),K};var GI,YI;class _3 extends d2{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var A,Q;const B=super.createRenderRoot();return(A=(Q=this.renderOptions).renderBefore)!==null&&A!==void 0||(Q.renderBefore=B.firstChild),B}update(A){const Q=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(A),this._$Do=qQ(Q,this.renderRoot,this.renderOptions)}connectedCallback(){var A;super.connectedCallback(),(A=this._$Do)===null||A===void 0||A.setConnected(!0)}disconnectedCallback(){var A;super.disconnectedCallback(),(A=this._$Do)===null||A===void 0||A.setConnected(!1)}render(){return g6}}_3.finalized=!0,_3._$litElement$=!0,(GI=globalThis.litElementHydrateSupport)===null||GI===void 0||GI.call(globalThis,{LitElement:_3});var wH=globalThis.litElementPolyfillSupport;wH==null||wH({LitElement:_3});((YI=globalThis.litElementVersions)!==null&&YI!==void 0?YI:globalThis.litElementVersions=[]).push("3.3.3");var HI=navigator.xr!=null&&self.XRSession!=null&&navigator.xr.isSessionSupported!=null,ZI=HI&&self.XRSession.prototype.requestHitTestSource!=null,GQ=self.ResizeObserver!=null,YQ=self.IntersectionObserver!=null,HQ=ZI,oy=(()=>{const A=navigator.userAgent||navigator.vendor||self.opera;let Q=!1;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(A)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(A.substr(0,4)))Q=!0;return Q})(),iy=/\bCrOS\b/.test(navigator.userAgent),OL=/android/i.test(navigator.userAgent),OH=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,ay=/Safari\//.test(navigator.userAgent),LL=/firefox/i.test(navigator.userAgent),zL=/OculusBrowser/.test(navigator.userAgent),ry=OH&&/CriOS\//.test(navigator.userAgent);var LH=OL&&!LL&&!zL,kL=Boolean(window.webkit&&window.webkit.messageHandlers),XI=(()=>{if(OH)if(!kL){const A=document.createElement("a");return Boolean(A.relList&&A.relList.supports&&A.relList.supports("ar"))}else return Boolean(/CriOS\/|EdgiOS\/|FxiOS\/|GSA\/|DuckDuckGo\//.test(navigator.userAgent));else return!1})();var ZQ=(A)=>!!A&&A!=="null"?ML(A):null,FI=()=>{if(HQ)return;const A=[];if(!HI)A.push("WebXR Device API");if(!ZI)A.push("WebXR Hit Test API");throw new Error(`The following APIs are required for AR, but are missing in this browser: ${A.join(", ")}`)},ML=(A)=>{return new URL(A,window.location.toString()).toString()},zH=(A,Q)=>{let B=null;const C=(...I)=>{if(B!=null)return;A(...I),B=self.setTimeout(()=>B=null,Q)};return C.flush=()=>{if(B!=null)self.clearTimeout(B),B=null},C},WI=(A,Q)=>{let B=null;return(...C)=>{if(B!=null)self.clearTimeout(B);B=self.setTimeout(()=>{B=null,A(...C)},Q)}};var L1=(A,Q,B)=>Math.max(Q,Math.min(B,A)),$L=1,P3=(()=>{const A=(()=>{var Q;if((Q=document.documentElement.getAttribute("itemtype"))===null||Q===void 0?void 0:Q.includes("schema.org/SearchResultsPage"))return!0;const B=document.head!=null?Array.from(document.head.querySelectorAll("meta")):[];for(let C of B)if(C.name==="viewport")return!0;return!1})();if(!A)console.warn('No <meta name="viewport"> detected; <model-viewer> will cap pixel density at 1.');return()=>A?window.devicePixelRatio:$L})(),UI=(()=>{const Q=new RegExp("[?&]model-viewer-debug-mode(&|$)");return()=>self.ModelViewerElement&&self.ModelViewerElement.debugMode||self.location&&self.location.search&&self.location.search.match(Q)})(),kH=(A=0)=>new Promise((Q)=>setTimeout(Q,A)),MH=(A,Q,B=null)=>new Promise((C)=>{function I(E){if(!B||B(E))C(E),A.removeEventListener(Q,I)}A.addEventListener(Q,I)});var y6=function(A,Q,B,C){var I=arguments.length,E=I<3?Q:C===null?C=Object.getOwnPropertyDescriptor(Q,B):C,K;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")E=Reflect.decorate(A,Q,B,C);else for(var J=A.length-1;J>=0;J--)if(K=A[J])E=(I<3?K(E):I>3?K(Q,B,E):K(Q,B))||E;return I>3&&E&&Object.defineProperty(Q,B,E),E},_L=0.5,PL=0,SL=1,TL=1,b8=Symbol("currentEnvironmentMap"),p8=Symbol("currentBackground"),u8=Symbol("updateEnvironment"),XQ=Symbol("cancelEnvironmentUpdate"),$H=(A)=>{var Q,B,C;class I extends A{constructor(){super(...arguments);this.environmentImage=null,this.skyboxImage=null,this.shadowIntensity=PL,this.shadowSoftness=SL,this.exposure=TL,this.toneMapping="auto",this.skyboxHeight="0",this[Q]=null,this[B]=null,this[C]=null}updated(E){if(super.updated(E),E.has("shadowIntensity"))this[EA].setShadowIntensity(this.shadowIntensity*_L),this[p0]();if(E.has("shadowSoftness"))this[EA].setShadowSoftness(this.shadowSoftness),this[p0]();if(E.has("exposure"))this[EA].exposure=this.exposure,this[p0]();if(E.has("toneMapping"))this[EA].toneMapping=this.toneMapping==="commerce"?v9:this.toneMapping==="agx"?eG:S8,this[p0]();if((E.has("environmentImage")||E.has("skyboxImage"))&&this[H4]())this[u8]();if(E.has("skyboxHeight"))this[EA].setGroundedSkybox(),this[p0]()}hasBakedShadow(){return this[EA].bakedShadows.size>0}async[(Q=b8,B=p8,C=XQ,u8)](){const{skyboxImage:E,environmentImage:K}=this;if(this[XQ]!=null)this[XQ](),this[XQ]=null;const{textureUtils:J}=this[I0];if(J==null)return;const q=this[O2].beginActivity("environment-update");try{const{environmentMap:G,skybox:Y}=await J.generateEnvironmentMapAndSkybox(ZQ(E),K,(H)=>q(L1(H,0,1)));if(this[b8]!==G)this[b8]=G,this.dispatchEvent(new CustomEvent("environment-change"));if(Y!=null)this[p8]=Y.name===G.name?G:Y;else this[p8]=null;this[EA].setEnvironmentAndSkybox(this[b8],this[p8])}catch(G){if(G instanceof Error)throw this[EA].setEnvironmentAndSkybox(null,null),G}finally{q(1)}}}return y6([LA({type:String,attribute:"environment-image"})],I.prototype,"environmentImage",void 0),y6([LA({type:String,attribute:"skybox-image"})],I.prototype,"skyboxImage",void 0),y6([LA({type:Number,attribute:"shadow-intensity"})],I.prototype,"shadowIntensity",void 0),y6([LA({type:Number,attribute:"shadow-softness"})],I.prototype,"shadowSoftness",void 0),y6([LA({type:Number})],I.prototype,"exposure",void 0),y6([LA({type:String,attribute:"tone-mapping"})],I.prototype,"toneMapping",void 0),y6([LA({type:String,attribute:"skybox-height"})],I.prototype,"skyboxHeight",void 0),I};var _H=m4`
<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000">
    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement
         support for dynamic re-coloring of UI components -->
    <defs>
      <filter id="drop-shadow" x="-100%" y="-100%" width="300%" height="300%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
        <feOffset dx="0" dy="0" result="offsetblur"/>
        <feFlood flood-color="#000000"/>
        <feComposite in2="offsetblur" operator="in"/>
        <feMerge>
          <feMergeNode/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>
    <path filter="url(#drop-shadow)" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`;var PH=m4`
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="36">
    <defs>
        <path id="A" d="M.001.232h24.997V36H.001z" />
    </defs>
    <g transform="translate(-11 -4)" fill="none" fill-rule="evenodd">
        <path fill-opacity="0" fill="#fff" d="M0 0h44v44H0z" />
        <g transform="translate(11 3)">
            <path d="M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z" fill-opacity=".5" fill="#e4e4e4" />
            <path d="M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91" fill-opacity=".6" fill="#000" />
            <path d="M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z" fill="#fff" />
            <g transform="translate(0 .769)">
                <mask id="B" fill="#fff">
                    <use xlink:href="#A" />
                </mask>
                <path d="M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325" fill-opacity=".05" fill="#000" mask="url(#B)" />
            </g>
        </g>
    </g>
</svg>`;var SH=m4`
<svg version="1.1" id="view_x5F_in_x5F_AR_x5F_icon"
	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px"
	 viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
<rect id="Bounding_Box" x="0" y="0" fill="none" width="24" height="24"/>
<g id="Art_layer">
	<path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z"/>
	<path d="M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z"/>
	<path d="M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z"/>
	<path d="M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z"/>
	<g>
		<path d="M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3
			l5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62
			l4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z"/>
	</g>
</g>
</svg>`;var jL=m4`
<style>
:host {
  display: block;
  position: relative;
  contain: strict;
  width: 300px;
  height: 150px;
}

.container {
  position: relative;
  overflow: hidden;
}

.userInput {
  width: 100%;
  height: 100%;
  display: none;
  position: relative;
  outline-offset: -1px;
  outline-width: 1px;
}

canvas {
  position: absolute;
  display: none;
  pointer-events: none;
  /* NOTE(cdata): Chrome 76 and below apparently have a bug
   * that causes our canvas not to display pixels unless it is
   * on its own render layer
   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893
   */
  transform: translateZ(0);
}

.show {
  display: block;
}

/* Adapted from HTML5 Boilerplate
 *
 * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */
.screen-reader-only {
  border: 0;
  left: 0;
  top: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
  pointer-events: none;
}

.slot {
  position: absolute;
  pointer-events: none;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.slot > * {
  pointer-events: initial;
}

.annotation-wrapper ::slotted(*) {
  opacity: var(--max-hotspot-opacity, 1);
  transition: opacity 0.3s;
}

.pointer-tumbling .annotation-wrapper ::slotted(*) {
  pointer-events: none;
}

.annotation-wrapper ::slotted(*) {
  pointer-events: initial;
}

.annotation-wrapper.hide ::slotted(*) {
  opacity: var(--min-hotspot-opacity, 0.25);
}

.slot.poster {
  display: none;
  background-color: inherit;
}

.slot.poster.show {
  display: inherit;
}

.slot.poster > * {
  pointer-events: initial;
}

.slot.poster:not(.show) > * {
  pointer-events: none;
}

#default-poster {
  width: 100%;
  height: 100%;
  /* The default poster is a <button> so we need to set display
   * to prevent it from being affected by text-align: */
  display: block;
  position: absolute;
  border: none;
  padding: 0;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-color: #fff0;
}

#default-progress-bar {
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
}

#default-progress-bar > .bar {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--progress-bar-height, 5px);
  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));
  transition: transform 0.09s;
  transform-origin: top left;
  transform: scaleX(0);
  overflow: hidden;
}

#default-progress-bar > .bar.hide {
  transition: opacity 0.3s 1s;
  opacity: 0;
}

.centered {
  align-items: center;
  justify-content: center;
}

.cover {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.slot.interaction-prompt {
  display: var(--interaction-prompt-display, flex);
  overflow: hidden;
  opacity: 0;
  will-change: opacity;
  transition: opacity 0.3s;
}

.slot.interaction-prompt.visible {
  opacity: 1;
}

.animated-container {
  will-change: transform, opacity;
  opacity: 0;
  transition: opacity 0.3s;
}

.slot.interaction-prompt > * {
  pointer-events: none;
}

.slot.ar-button {
  -moz-user-select: none;
  -webkit-tap-highlight-color: transparent;
  user-select: none;

  display: var(--ar-button-display, block);
}

.slot.ar-button:not(.enabled) {
  display: none;
}

.fab {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: 40px;
  height: 40px;
  cursor: pointer;
  background-color: #fff;
  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);
  border-radius: 100px;
}

.fab > * {
  opacity: 0.87;
}

#default-ar-button {
  position: absolute;
  bottom: 16px;
  right: 16px;
  transform: scale(var(--ar-button-scale, 1));
  transform-origin: bottom right;
}

.slot.pan-target {
  display: block;
  position: absolute;
  width: 0;
  height: 0;
  left: 50%;
  top: 50%;
  transform: translate3d(-50%, -50%, 0);
  background-color: transparent;
  opacity: 0;
  transition: opacity 0.3s;
}

#default-pan-target {
  width: 6px;
  height: 6px;
  border-radius: 6px;
  border: 1px solid white;
  box-shadow: 0px 0px 2px 1px rgba(0, 0, 0, 0.8);
}

.slot.default {
  pointer-events: none;
}

.slot.progress-bar {
  pointer-events: none;
}

.slot.exit-webxr-ar-button {
  pointer-events: none;
}

.slot.exit-webxr-ar-button:not(.enabled) {
  display: none;
}

#default-exit-webxr-ar-button {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: env(safe-area-inset-top, 16px);
  right: 16px;
  width: 40px;
  height: 40px;
  box-sizing: border-box;
}

#default-exit-webxr-ar-button > svg {
  fill: #fff;
}
</style>
<div class="container">
  <div class="userInput" tabindex="0" role="img"
      aria-label="3D model">
      <div class="slot canvas">
        <slot name="canvas">
          <canvas></canvas>
        </slot>
      </div>

  </div>

  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM
        will have their <slot> elements removed by ShadyCSS -->
  <div class="slot poster">
    <slot name="poster">
      <button type="button" id="default-poster" aria-hidden="true" aria-label="Loading 3D model"></button>
    </slot>
  </div>

  <div class="slot ar-button">
    <slot name="ar-button">
      <a id="default-ar-button" part="default-ar-button" class="fab"
          tabindex="2"
          role="button"
          href="javascript:void(0);"
          aria-label="View in your space">
        ${SH}
      </a>
    </slot>
  </div>

  <div class="slot pan-target">
    <slot name="pan-target">
      <div id="default-pan-target">
      </div>
    </slot>
  </div>

  <div class="slot interaction-prompt cover centered">
    <div id="prompt" class="animated-container">
      <slot name="interaction-prompt" aria-hidden="true">
        ${PH}
      </slot>
    </div>
  </div>

  <div id="finger0" class="animated-container cover">
    <slot name="finger0" aria-hidden="true">
    </slot>
  </div>
  <div id="finger1" class="animated-container cover">
    <slot name="finger1" aria-hidden="true">
    </slot>
  </div>

  <div class="slot default">
    <slot></slot>

    <div class="slot progress-bar">
      <slot name="progress-bar">
        <div id="default-progress-bar" aria-hidden="true">
          <div class="bar" part="default-progress-bar"></div>
        </div>
      </slot>
    </div>

    <div class="slot exit-webxr-ar-button">
      <slot name="exit-webxr-ar-button">
        <a id="default-exit-webxr-ar-button" part="default-exit-webxr-ar-button"
            tabindex="3"
            aria-label="Exit AR"
            aria-hidden="true">
          ${_H}
        </a>
      </slot>
    </div>
  </div>
</div>
<div class="screen-reader-only" role="region" aria-label="Live announcements">
  <span id="status" role="status"></span>
</div>`,TH=(A)=>{qQ(jL,A)};var gL=function(){let A,Q;onmessage=function(K){const J=K.data;switch(J.type){case"init":A=J.decoderConfig,Q=new Promise(function(Y){A.onModuleLoaded=function(H){Y({draco:H})},DracoDecoderModule(A)});break;case"decode":const{buffer:q,taskConfig:G}=J;Q.then((Y)=>{const H=Y.draco,Z=new H.Decoder;try{const X=B(H,Z,new Int8Array(q),G),U=X.attributes.map((F)=>F.array.buffer);if(X.index)U.push(X.index.array.buffer);self.postMessage({type:"decode",id:J.id,geometry:X},U)}catch(X){console.error(X),self.postMessage({type:"error",id:J.id,error:X.message})}finally{H.destroy(Z)}});break}};function B(K,J,q,G){const{attributeIDs:Y,attributeTypes:H}=G;let Z,X;const U=J.GetEncodedGeometryType(q);if(U===K.TRIANGULAR_MESH)Z=new K.Mesh,X=J.DecodeArrayToMesh(q,q.byteLength,Z);else if(U===K.POINT_CLOUD)Z=new K.PointCloud,X=J.DecodeArrayToPointCloud(q,q.byteLength,Z);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!X.ok()||Z.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+X.error_msg());const F={index:null,attributes:[]};for(let W in Y){const D=self[H[W]];let V,R;if(G.useUniqueIDs)R=Y[W],V=J.GetAttributeByUniqueId(Z,R);else{if(R=J.GetAttributeId(Z,K[Y[W]]),R===-1)continue;V=J.GetAttribute(Z,R)}const O=I(K,J,Z,W,D,V);if(W==="color")O.vertexColorSpace=G.vertexColorSpace;F.attributes.push(O)}if(U===K.TRIANGULAR_MESH)F.index=C(K,J,Z);return K.destroy(Z),F}function C(K,J,q){const Y=q.num_faces()*3,H=Y*4,Z=K._malloc(H);J.GetTrianglesUInt32Array(q,H,Z);const X=new Uint32Array(K.HEAPF32.buffer,Z,Y).slice();return K._free(Z),{array:X,itemSize:1}}function I(K,J,q,G,Y,H){const Z=H.num_components(),U=q.num_points()*Z,F=U*Y.BYTES_PER_ELEMENT,W=E(K,Y),D=K._malloc(F);J.GetAttributeDataArrayForAllPoints(q,H,W,F,D);const V=new Y(K.HEAPF32.buffer,D,U).slice();return K._free(D),{name:G,array:V,itemSize:Z}}function E(K,J){switch(J){case Float32Array:return K.DT_FLOAT32;case Int8Array:return K.DT_INT8;case Int16Array:return K.DT_INT16;case Int32Array:return K.DT_INT32;case Uint8Array:return K.DT_UINT8;case Uint16Array:return K.DT_UINT16;case Uint32Array:return K.DT_UINT32}}},DI=new WeakMap;class RI extends O1{constructor(A){super(A);this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(A){return this.decoderPath=A,this}setDecoderConfig(A){return this.decoderConfig=A,this}setWorkerLimit(A){return this.workerLimit=A,this}load(A,Q,B,C){const I=new j1(this.manager);I.setPath(this.path),I.setResponseType("arraybuffer"),I.setRequestHeader(this.requestHeader),I.setWithCredentials(this.withCredentials),I.load(A,(E)=>{this.parse(E,Q,C)},B,C)}parse(A,Q,B=()=>{}){this.decodeDracoFile(A,Q,null,null,$0).catch(B)}decodeDracoFile(A,Q,B,C,I=z0,E=()=>{}){const K={attributeIDs:B||this.defaultAttributeIDs,attributeTypes:C||this.defaultAttributeTypes,useUniqueIDs:!!B,vertexColorSpace:I};return this.decodeGeometry(A,K).then(Q).catch(E)}decodeGeometry(A,Q){const B=JSON.stringify(Q);if(DI.has(A)){const J=DI.get(A);if(J.key===B)return J.promise;else if(A.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let C;const I=this.workerNextTaskID++,E=A.byteLength,K=this._getWorker(I,E).then((J)=>{return C=J,new Promise((q,G)=>{C._callbacks[I]={resolve:q,reject:G},C.postMessage({type:"decode",id:I,taskConfig:Q,buffer:A},[A])})}).then((J)=>this._createGeometry(J.geometry));return K.catch(()=>!0).then(()=>{if(C&&I)this._releaseTask(C,I)}),DI.set(A,{key:B,promise:K}),K}_createGeometry(A){const Q=new J1;if(A.index)Q.setIndex(new V0(A.index.array,1));for(let B=0;B<A.attributes.length;B++){const C=A.attributes[B],I=C.name,E=C.array,K=C.itemSize,J=new V0(E,K);if(I==="color")this._assignVertexColorSpace(J,C.vertexColorSpace),J.normalized=E instanceof Float32Array===!1;Q.setAttribute(I,J)}return Q}_assignVertexColorSpace(A,Q){if(Q!==$0)return;const B=new PA;for(let C=0,I=A.count;C<I;C++)B.fromBufferAttribute(A,C).convertSRGBToLinear(),A.setXYZ(C,B.r,B.g,B.b)}_loadLibrary(A,Q){const B=new j1(this.manager);return B.setPath(this.decoderPath),B.setResponseType(Q),B.setWithCredentials(this.withCredentials),new Promise((C,I)=>{B.load(A,C,void 0,I)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const A=typeof WebAssembly!=="object"||this.decoderConfig.type==="js",Q=[];if(A)Q.push(this._loadLibrary("draco_decoder.js","text"));else Q.push(this._loadLibrary("draco_wasm_wrapper.js","text")),Q.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"));return this.decoderPending=Promise.all(Q).then((B)=>{const C=B[0];if(!A)this.decoderConfig.wasmBinary=B[1];const I=gL.toString(),E=["/* draco decoder */",C,"","/* worker */",I.substring(I.indexOf("{")+1,I.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([E]))}),this.decoderPending}_getWorker(A,Q){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const C=new Worker(this.workerSourceURL);C._callbacks={},C._taskCosts={},C._taskLoad=0,C.postMessage({type:"init",decoderConfig:this.decoderConfig}),C.onmessage=function(I){const E=I.data;switch(E.type){case"decode":C._callbacks[E.id].resolve(E);break;case"error":C._callbacks[E.id].reject(E);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+E.type+'"')}},this.workerPool.push(C)}else this.workerPool.sort(function(C,I){return C._taskLoad>I._taskLoad?-1:1});const B=this.workerPool[this.workerPool.length-1];return B._taskCosts[A]=Q,B._taskLoad+=Q,B})}_releaseTask(A,Q){A._taskLoad-=A._taskCosts[Q],delete A._callbacks[Q],delete A._taskCosts[Q]}debug(){console.log("Task load: ",this.workerPool.map((A)=>A._taskLoad))}dispose(){for(let A=0;A<this.workerPool.length;++A)this.workerPool[A].terminate();if(this.workerPool.length=0,this.workerSourceURL!=="")URL.revokeObjectURL(this.workerSourceURL);return this}}var VI=function(A,Q){if(Q===WY)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),A;if(Q===Z3||Q===u9){let B=A.getIndex();if(B===null){const K=[],J=A.getAttribute("position");if(J!==void 0){for(let q=0;q<J.count;q++)K.push(q);A.setIndex(K),B=A.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),A}const C=B.count-2,I=[];if(Q===Z3)for(let K=1;K<=C;K++)I.push(B.getX(0)),I.push(B.getX(K)),I.push(B.getX(K+1));else for(let K=0;K<C;K++)if(K%2===0)I.push(B.getX(K)),I.push(B.getX(K+1)),I.push(B.getX(K+2));else I.push(B.getX(K+2)),I.push(B.getX(K+1)),I.push(B.getX(K));if(I.length/3!==C)console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const E=A.clone();return E.setIndex(I),E.clearGroups(),E}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",Q),A};var yL=function(){let A={};return{get:function(Q){return A[Q]},add:function(Q,B){A[Q]=B},remove:function(Q){delete A[Q]},removeAll:function(){A={}}}},vL=function(A){if(A.DefaultMaterial===void 0)A.DefaultMaterial=new p4({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:_8});return A.DefaultMaterial},x6=function(A,Q,B){for(let C in B.extensions)if(A[C]===void 0)Q.userData.gltfExtensions=Q.userData.gltfExtensions||{},Q.userData.gltfExtensions[C]=B.extensions[C]},c4=function(A,Q){if(Q.extras!==void 0)if(typeof Q.extras==="object")Object.assign(A.userData,Q.extras);else console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+Q.extras)},fL=function(A,Q,B){let C=!1,I=!1,E=!1;for(let G=0,Y=Q.length;G<Y;G++){const H=Q[G];if(H.POSITION!==void 0)C=!0;if(H.NORMAL!==void 0)I=!0;if(H.COLOR_0!==void 0)E=!0;if(C&&I&&E)break}if(!C&&!I&&!E)return Promise.resolve(A);const K=[],J=[],q=[];for(let G=0,Y=Q.length;G<Y;G++){const H=Q[G];if(C){const Z=H.POSITION!==void 0?B.getDependency("accessor",H.POSITION):A.attributes.position;K.push(Z)}if(I){const Z=H.NORMAL!==void 0?B.getDependency("accessor",H.NORMAL):A.attributes.normal;J.push(Z)}if(E){const Z=H.COLOR_0!==void 0?B.getDependency("accessor",H.COLOR_0):A.attributes.color;q.push(Z)}}return Promise.all([Promise.all(K),Promise.all(J),Promise.all(q)]).then(function(G){const Y=G[0],H=G[1],Z=G[2];if(C)A.morphAttributes.position=Y;if(I)A.morphAttributes.normal=H;if(E)A.morphAttributes.color=Z;return A.morphTargetsRelative=!0,A})},bL=function(A,Q){if(A.updateMorphTargets(),Q.weights!==void 0)for(let B=0,C=Q.weights.length;B<C;B++)A.morphTargetInfluences[B]=Q.weights[B];if(Q.extras&&Array.isArray(Q.extras.targetNames)){const B=Q.extras.targetNames;if(A.morphTargetInfluences.length===B.length){A.morphTargetDictionary={};for(let C=0,I=B.length;C<I;C++)A.morphTargetDictionary[B[C]]=C}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}},pL=function(A){let Q;const B=A.extensions&&A.extensions[J0.KHR_DRACO_MESH_COMPRESSION];if(B)Q="draco:"+B.bufferView+":"+B.indices+":"+OI(B.attributes);else Q=A.indices+":"+OI(A.attributes)+":"+A.mode;if(A.targets!==void 0)for(let C=0,I=A.targets.length;C<I;C++)Q+=":"+OI(A.targets[C]);return Q},OI=function(A){let Q="";const B=Object.keys(A).sort();for(let C=0,I=B.length;C<I;C++)Q+=B[C]+":"+A[B[C]]+";";return Q},zI=function(A){switch(A){case Int8Array:return 0.007874015748031496;case Uint8Array:return 0.00392156862745098;case Int16Array:return 0.00003051850947599719;case Uint16Array:return 0.000015259021896696422;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}},uL=function(A){if(A.search(/\.jpe?g($|\?)/i)>0||A.search(/^data\:image\/jpeg/)===0)return"image/jpeg";if(A.search(/\.webp($|\?)/i)>0||A.search(/^data\:image\/webp/)===0)return"image/webp";return"image/png"},dL=function(A,Q,B){const C=Q.attributes,I=new i0;if(C.POSITION!==void 0){const J=B.json.accessors[C.POSITION],q=J.min,G=J.max;if(q!==void 0&&G!==void 0){if(I.set(new P(q[0],q[1],q[2]),new P(G[0],G[1],G[2])),J.normalized){const Y=zI(m8[J.componentType]);I.min.multiplyScalar(Y),I.max.multiplyScalar(Y)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const E=Q.targets;if(E!==void 0){const J=new P,q=new P;for(let G=0,Y=E.length;G<Y;G++){const H=E[G];if(H.POSITION!==void 0){const Z=B.json.accessors[H.POSITION],X=Z.min,U=Z.max;if(X!==void 0&&U!==void 0){if(q.setX(Math.max(Math.abs(X[0]),Math.abs(U[0]))),q.setY(Math.max(Math.abs(X[1]),Math.abs(U[1]))),q.setZ(Math.max(Math.abs(X[2]),Math.abs(U[2]))),Z.normalized){const F=zI(m8[Z.componentType]);q.multiplyScalar(F)}J.max(q)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}I.expandByVector(J)}A.boundingBox=I;const K=new w1;I.getCenter(K.center),K.radius=I.min.distanceTo(I.max)/2,A.boundingSphere=K},xH=function(A,Q,B){const C=Q.attributes,I=[];function E(K,J){return B.getDependency("accessor",K).then(function(q){A.setAttribute(J,q)})}for(let K in C){const J=LI[K]||K.toLowerCase();if(J in A.attributes)continue;I.push(E(C[K],J))}if(Q.indices!==void 0&&!A.index){const K=B.getDependency("accessor",Q.indices).then(function(J){A.setIndex(J)});I.push(K)}if(W0.workingColorSpace!==z0&&"COLOR_0"in C)console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${W0.workingColorSpace}" not supported.`);return c4(A,Q),dL(A,Q,B),Promise.all(I).then(function(){return Q.targets!==void 0?fL(A,Q.targets,B):A})};class kI extends O1{constructor(A){super(A);this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(Q){return new bH(Q)}),this.register(function(Q){return new oH(Q)}),this.register(function(Q){return new iH(Q)}),this.register(function(Q){return new aH(Q)}),this.register(function(Q){return new uH(Q)}),this.register(function(Q){return new mH(Q)}),this.register(function(Q){return new dH(Q)}),this.register(function(Q){return new cH(Q)}),this.register(function(Q){return new fH(Q)}),this.register(function(Q){return new lH(Q)}),this.register(function(Q){return new pH(Q)}),this.register(function(Q){return new nH(Q)}),this.register(function(Q){return new sH(Q)}),this.register(function(Q){return new hH(Q)}),this.register(function(Q){return new rH(Q)}),this.register(function(Q){return new tH(Q)})}load(A,Q,B,C){const I=this;let E;if(this.resourcePath!=="")E=this.resourcePath;else if(this.path!==""){const q=P6.extractUrlBase(A);E=P6.resolveURL(q,this.path)}else E=P6.extractUrlBase(A);this.manager.itemStart(A);const K=function(q){if(C)C(q);else console.error(q);I.manager.itemError(A),I.manager.itemEnd(A)},J=new j1(this.manager);J.setPath(this.path),J.setResponseType("arraybuffer"),J.setRequestHeader(this.requestHeader),J.setWithCredentials(this.withCredentials),J.load(A,function(q){try{I.parse(q,E,function(G){Q(G),I.manager.itemEnd(A)},K)}catch(G){K(G)}},B,K)}setDRACOLoader(A){return this.dracoLoader=A,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(A){return this.ktx2Loader=A,this}setMeshoptDecoder(A){return this.meshoptDecoder=A,this}register(A){if(this.pluginCallbacks.indexOf(A)===-1)this.pluginCallbacks.push(A);return this}unregister(A){if(this.pluginCallbacks.indexOf(A)!==-1)this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(A),1);return this}parse(A,Q,B,C){let I;const E={},K={},J=new TextDecoder;if(typeof A==="string")I=JSON.parse(A);else if(A instanceof ArrayBuffer)if(J.decode(new Uint8Array(A,0,4))===eH){try{E[J0.KHR_BINARY_GLTF]=new AZ(A)}catch(Y){if(C)C(Y);return}I=JSON.parse(E[J0.KHR_BINARY_GLTF].content)}else I=JSON.parse(J.decode(A));else I=A;if(I.asset===void 0||I.asset.version[0]<2){if(C)C(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const q=new EZ(I,{path:Q||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});q.fileLoader.setRequestHeader(this.requestHeader);for(let G=0;G<this.pluginCallbacks.length;G++){const Y=this.pluginCallbacks[G](q);if(!Y.name)console.error("THREE.GLTFLoader: Invalid plugin found: missing name");K[Y.name]=Y,E[Y.name]=!0}if(I.extensionsUsed)for(let G=0;G<I.extensionsUsed.length;++G){const Y=I.extensionsUsed[G],H=I.extensionsRequired||[];switch(Y){case J0.KHR_MATERIALS_UNLIT:E[Y]=new vH;break;case J0.KHR_DRACO_MESH_COMPRESSION:E[Y]=new QZ(I,this.dracoLoader);break;case J0.KHR_TEXTURE_TRANSFORM:E[Y]=new BZ;break;case J0.KHR_MESH_QUANTIZATION:E[Y]=new CZ;break;default:if(H.indexOf(Y)>=0&&K[Y]===void 0)console.warn('THREE.GLTFLoader: Unknown extension "'+Y+'".')}}q.setExtensions(E),q.setPlugins(K),q.parse(B,C)}parseAsync(A,Q){const B=this;return new Promise(function(C,I){B.parse(A,Q,C,I)})}}var J0={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class hH{constructor(A){this.parser=A,this.name=J0.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const A=this.parser,Q=this.parser.json.nodes||[];for(let B=0,C=Q.length;B<C;B++){const I=Q[B];if(I.extensions&&I.extensions[this.name]&&I.extensions[this.name].light!==void 0)A._addNodeRef(this.cache,I.extensions[this.name].light)}}_loadLight(A){const Q=this.parser,B="light:"+A;let C=Q.cache.get(B);if(C)return C;const I=Q.json,J=((I.extensions&&I.extensions[this.name]||{}).lights||[])[A];let q;const G=new PA(16777215);if(J.color!==void 0)G.setRGB(J.color[0],J.color[1],J.color[2],z0);const Y=J.range!==void 0?J.range:0;switch(J.type){case"directional":q=new w3(G),q.target.position.set(0,0,-1),q.add(q.target);break;case"point":q=new N3(G),q.distance=Y;break;case"spot":q=new aC(G),q.distance=Y,J.spot=J.spot||{},J.spot.innerConeAngle=J.spot.innerConeAngle!==void 0?J.spot.innerConeAngle:0,J.spot.outerConeAngle=J.spot.outerConeAngle!==void 0?J.spot.outerConeAngle:Math.PI/4,q.angle=J.spot.outerConeAngle,q.penumbra=1-J.spot.innerConeAngle/J.spot.outerConeAngle,q.target.position.set(0,0,-1),q.add(q.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+J.type)}if(q.position.set(0,0,0),q.decay=2,c4(q,J),J.intensity!==void 0)q.intensity=J.intensity;return q.name=Q.createUniqueName(J.name||"light_"+A),C=Promise.resolve(q),Q.cache.add(B,C),C}getDependency(A,Q){if(A!=="light")return;return this._loadLight(Q)}createNodeAttachment(A){const Q=this,B=this.parser,I=B.json.nodes[A],K=(I.extensions&&I.extensions[this.name]||{}).light;if(K===void 0)return null;return this._loadLight(K).then(function(J){return B._getNodeRef(Q.cache,K,J)})}}class vH{constructor(){this.name=J0.KHR_MATERIALS_UNLIT}getMaterialType(){return b0}extendParams(A,Q,B){const C=[];A.color=new PA(1,1,1),A.opacity=1;const I=Q.pbrMetallicRoughness;if(I){if(Array.isArray(I.baseColorFactor)){const E=I.baseColorFactor;A.color.setRGB(E[0],E[1],E[2],z0),A.opacity=E[3]}if(I.baseColorTexture!==void 0)C.push(B.assignTexture(A,"map",I.baseColorTexture,$0))}return Promise.all(C)}}class fH{constructor(A){this.parser=A,this.name=J0.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(A,Q){const C=this.parser.json.materials[A];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();const I=C.extensions[this.name].emissiveStrength;if(I!==void 0)Q.emissiveIntensity=I;return Promise.resolve()}}class bH{constructor(A){this.parser=A,this.name=J0.KHR_MATERIALS_CLEARCOAT}getMaterialType(A){const B=this.parser.json.materials[A];if(!B.extensions||!B.extensions[this.name])return null;return N2}extendMaterialParams(A,Q){const B=this.parser,C=B.json.materials[A];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();const I=[],E=C.extensions[this.name];if(E.clearcoatFactor!==void 0)Q.clearcoat=E.clearcoatFactor;if(E.clearcoatTexture!==void 0)I.push(B.assignTexture(Q,"clearcoatMap",E.clearcoatTexture));if(E.clearcoatRoughnessFactor!==void 0)Q.clearcoatRoughness=E.clearcoatRoughnessFactor;if(E.clearcoatRoughnessTexture!==void 0)I.push(B.assignTexture(Q,"clearcoatRoughnessMap",E.clearcoatRoughnessTexture));if(E.clearcoatNormalTexture!==void 0){if(I.push(B.assignTexture(Q,"clearcoatNormalMap",E.clearcoatNormalTexture)),E.clearcoatNormalTexture.scale!==void 0){const K=E.clearcoatNormalTexture.scale;Q.clearcoatNormalScale=new DA(K,K)}}return Promise.all(I)}}class pH{constructor(A){this.parser=A,this.name=J0.KHR_MATERIALS_IRIDESCENCE}getMaterialType(A){const B=this.parser.json.materials[A];if(!B.extensions||!B.extensions[this.name])return null;return N2}extendMaterialParams(A,Q){const B=this.parser,C=B.json.materials[A];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();const I=[],E=C.extensions[this.name];if(E.iridescenceFactor!==void 0)Q.iridescence=E.iridescenceFactor;if(E.iridescenceTexture!==void 0)I.push(B.assignTexture(Q,"iridescenceMap",E.iridescenceTexture));if(E.iridescenceIor!==void 0)Q.iridescenceIOR=E.iridescenceIor;if(Q.iridescenceThicknessRange===void 0)Q.iridescenceThicknessRange=[100,400];if(E.iridescenceThicknessMinimum!==void 0)Q.iridescenceThicknessRange[0]=E.iridescenceThicknessMinimum;if(E.iridescenceThicknessMaximum!==void 0)Q.iridescenceThicknessRange[1]=E.iridescenceThicknessMaximum;if(E.iridescenceThicknessTexture!==void 0)I.push(B.assignTexture(Q,"iridescenceThicknessMap",E.iridescenceThicknessTexture));return Promise.all(I)}}class uH{constructor(A){this.parser=A,this.name=J0.KHR_MATERIALS_SHEEN}getMaterialType(A){const B=this.parser.json.materials[A];if(!B.extensions||!B.extensions[this.name])return null;return N2}extendMaterialParams(A,Q){const B=this.parser,C=B.json.materials[A];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();const I=[];Q.sheenColor=new PA(0,0,0),Q.sheenRoughness=0,Q.sheen=1;const E=C.extensions[this.name];if(E.sheenColorFactor!==void 0){const K=E.sheenColorFactor;Q.sheenColor.setRGB(K[0],K[1],K[2],z0)}if(E.sheenRoughnessFactor!==void 0)Q.sheenRoughness=E.sheenRoughnessFactor;if(E.sheenColorTexture!==void 0)I.push(B.assignTexture(Q,"sheenColorMap",E.sheenColorTexture,$0));if(E.sheenRoughnessTexture!==void 0)I.push(B.assignTexture(Q,"sheenRoughnessMap",E.sheenRoughnessTexture));return Promise.all(I)}}class mH{constructor(A){this.parser=A,this.name=J0.KHR_MATERIALS_TRANSMISSION}getMaterialType(A){const B=this.parser.json.materials[A];if(!B.extensions||!B.extensions[this.name])return null;return N2}extendMaterialParams(A,Q){const B=this.parser,C=B.json.materials[A];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();const I=[],E=C.extensions[this.name];if(E.transmissionFactor!==void 0)Q.transmission=E.transmissionFactor;if(E.transmissionTexture!==void 0)I.push(B.assignTexture(Q,"transmissionMap",E.transmissionTexture));return Promise.all(I)}}class dH{constructor(A){this.parser=A,this.name=J0.KHR_MATERIALS_VOLUME}getMaterialType(A){const B=this.parser.json.materials[A];if(!B.extensions||!B.extensions[this.name])return null;return N2}extendMaterialParams(A,Q){const B=this.parser,C=B.json.materials[A];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();const I=[],E=C.extensions[this.name];if(Q.thickness=E.thicknessFactor!==void 0?E.thicknessFactor:0,E.thicknessTexture!==void 0)I.push(B.assignTexture(Q,"thicknessMap",E.thicknessTexture));Q.attenuationDistance=E.attenuationDistance||Infinity;const K=E.attenuationColor||[1,1,1];return Q.attenuationColor=new PA().setRGB(K[0],K[1],K[2],z0),Promise.all(I)}}class cH{constructor(A){this.parser=A,this.name=J0.KHR_MATERIALS_IOR}getMaterialType(A){const B=this.parser.json.materials[A];if(!B.extensions||!B.extensions[this.name])return null;return N2}extendMaterialParams(A,Q){const C=this.parser.json.materials[A];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();const I=C.extensions[this.name];return Q.ior=I.ior!==void 0?I.ior:1.5,Promise.resolve()}}class lH{constructor(A){this.parser=A,this.name=J0.KHR_MATERIALS_SPECULAR}getMaterialType(A){const B=this.parser.json.materials[A];if(!B.extensions||!B.extensions[this.name])return null;return N2}extendMaterialParams(A,Q){const B=this.parser,C=B.json.materials[A];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();const I=[],E=C.extensions[this.name];if(Q.specularIntensity=E.specularFactor!==void 0?E.specularFactor:1,E.specularTexture!==void 0)I.push(B.assignTexture(Q,"specularIntensityMap",E.specularTexture));const K=E.specularColorFactor||[1,1,1];if(Q.specularColor=new PA().setRGB(K[0],K[1],K[2],z0),E.specularColorTexture!==void 0)I.push(B.assignTexture(Q,"specularColorMap",E.specularColorTexture,$0));return Promise.all(I)}}class sH{constructor(A){this.parser=A,this.name=J0.EXT_MATERIALS_BUMP}getMaterialType(A){const B=this.parser.json.materials[A];if(!B.extensions||!B.extensions[this.name])return null;return N2}extendMaterialParams(A,Q){const B=this.parser,C=B.json.materials[A];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();const I=[],E=C.extensions[this.name];if(Q.bumpScale=E.bumpFactor!==void 0?E.bumpFactor:1,E.bumpTexture!==void 0)I.push(B.assignTexture(Q,"bumpMap",E.bumpTexture));return Promise.all(I)}}class nH{constructor(A){this.parser=A,this.name=J0.KHR_MATERIALS_ANISOTROPY}getMaterialType(A){const B=this.parser.json.materials[A];if(!B.extensions||!B.extensions[this.name])return null;return N2}extendMaterialParams(A,Q){const B=this.parser,C=B.json.materials[A];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();const I=[],E=C.extensions[this.name];if(E.anisotropyStrength!==void 0)Q.anisotropy=E.anisotropyStrength;if(E.anisotropyRotation!==void 0)Q.anisotropyRotation=E.anisotropyRotation;if(E.anisotropyTexture!==void 0)I.push(B.assignTexture(Q,"anisotropyMap",E.anisotropyTexture));return Promise.all(I)}}class oH{constructor(A){this.parser=A,this.name=J0.KHR_TEXTURE_BASISU}loadTexture(A){const Q=this.parser,B=Q.json,C=B.textures[A];if(!C.extensions||!C.extensions[this.name])return null;const I=C.extensions[this.name],E=Q.options.ktx2Loader;if(!E)if(B.extensionsRequired&&B.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");else return null;return Q.loadTextureImage(A,I.source,E)}}class iH{constructor(A){this.parser=A,this.name=J0.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(A){const Q=this.name,B=this.parser,C=B.json,I=C.textures[A];if(!I.extensions||!I.extensions[Q])return null;const E=I.extensions[Q],K=C.images[E.source];let J=B.textureLoader;if(K.uri){const q=B.options.manager.getHandler(K.uri);if(q!==null)J=q}return this.detectSupport().then(function(q){if(q)return B.loadTextureImage(A,E.source,J);if(C.extensionsRequired&&C.extensionsRequired.indexOf(Q)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return B.loadTexture(A)})}detectSupport(){if(!this.isSupported)this.isSupported=new Promise(function(A){const Q=new Image;Q.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",Q.onload=Q.onerror=function(){A(Q.height===1)}});return this.isSupported}}class aH{constructor(A){this.parser=A,this.name=J0.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(A){const Q=this.name,B=this.parser,C=B.json,I=C.textures[A];if(!I.extensions||!I.extensions[Q])return null;const E=I.extensions[Q],K=C.images[E.source];let J=B.textureLoader;if(K.uri){const q=B.options.manager.getHandler(K.uri);if(q!==null)J=q}return this.detectSupport().then(function(q){if(q)return B.loadTextureImage(A,E.source,J);if(C.extensionsRequired&&C.extensionsRequired.indexOf(Q)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return B.loadTexture(A)})}detectSupport(){if(!this.isSupported)this.isSupported=new Promise(function(A){const Q=new Image;Q.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",Q.onload=Q.onerror=function(){A(Q.height===1)}});return this.isSupported}}class rH{constructor(A){this.name=J0.EXT_MESHOPT_COMPRESSION,this.parser=A}loadBufferView(A){const Q=this.parser.json,B=Q.bufferViews[A];if(B.extensions&&B.extensions[this.name]){const C=B.extensions[this.name],I=this.parser.getDependency("buffer",C.buffer),E=this.parser.options.meshoptDecoder;if(!E||!E.supported)if(Q.extensionsRequired&&Q.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");else return null;return I.then(function(K){const J=C.byteOffset||0,q=C.byteLength||0,G=C.count,Y=C.byteStride,H=new Uint8Array(K,J,q);if(E.decodeGltfBufferAsync)return E.decodeGltfBufferAsync(G,Y,H,C.mode,C.filter).then(function(Z){return Z.buffer});else return E.ready.then(function(){const Z=new ArrayBuffer(G*Y);return E.decodeGltfBuffer(new Uint8Array(Z),G,Y,H,C.mode,C.filter),Z})})}else return null}}class tH{constructor(A){this.name=J0.EXT_MESH_GPU_INSTANCING,this.parser=A}createNodeMesh(A){const Q=this.parser.json,B=Q.nodes[A];if(!B.extensions||!B.extensions[this.name]||B.mesh===void 0)return null;const C=Q.meshes[B.mesh];for(let q of C.primitives)if(q.mode!==K2.TRIANGLES&&q.mode!==K2.TRIANGLE_STRIP&&q.mode!==K2.TRIANGLE_FAN&&q.mode!==void 0)return null;const E=B.extensions[this.name].attributes,K=[],J={};for(let q in E)K.push(this.parser.getDependency("accessor",E[q]).then((G)=>{return J[q]=G,J[q]}));if(K.length<1)return null;return K.push(this.parser.createNodeMesh(A)),Promise.all(K).then((q)=>{const G=q.pop(),Y=G.isGroup?G.children:[G],H=q[0].count,Z=[];for(let X of Y){const U=new zA,F=new P,W=new v0,D=new P(1,1,1),V=new pC(X.geometry,X.material,H);for(let R=0;R<H;R++){if(J.TRANSLATION)F.fromBufferAttribute(J.TRANSLATION,R);if(J.ROTATION)W.fromBufferAttribute(J.ROTATION,R);if(J.SCALE)D.fromBufferAttribute(J.SCALE,R);V.setMatrixAt(R,U.compose(F,W,D))}for(let R in J)if(R==="_COLOR_0"){const O=J[R];V.instanceColor=new M8(O.array,O.itemSize,O.normalized)}else if(R!=="TRANSLATION"&&R!=="ROTATION"&&R!=="SCALE")X.geometry.setAttribute(R,J[R]);F0.prototype.copy.call(V,X),this.parser.assignFinalMaterial(V),Z.push(V)}if(G.isGroup)return G.clear(),G.add(...Z),G;return Z[0]})}}var eH="glTF",S3=12,jH={JSON:1313821514,BIN:5130562};class AZ{constructor(A){this.name=J0.KHR_BINARY_GLTF,this.content=null,this.body=null;const Q=new DataView(A,0,S3),B=new TextDecoder;if(this.header={magic:B.decode(new Uint8Array(A.slice(0,4))),version:Q.getUint32(4,!0),length:Q.getUint32(8,!0)},this.header.magic!==eH)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");else if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const C=this.header.length-S3,I=new DataView(A,S3);let E=0;while(E<C){const K=I.getUint32(E,!0);E+=4;const J=I.getUint32(E,!0);if(E+=4,J===jH.JSON){const q=new Uint8Array(A,S3+E,K);this.content=B.decode(q)}else if(J===jH.BIN){const q=S3+E;this.body=A.slice(q,q+K)}E+=K}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class QZ{constructor(A,Q){if(!Q)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=J0.KHR_DRACO_MESH_COMPRESSION,this.json=A,this.dracoLoader=Q,this.dracoLoader.preload()}decodePrimitive(A,Q){const B=this.json,C=this.dracoLoader,I=A.extensions[this.name].bufferView,E=A.extensions[this.name].attributes,K={},J={},q={};for(let G in E){const Y=LI[G]||G.toLowerCase();K[Y]=E[G]}for(let G in A.attributes){const Y=LI[G]||G.toLowerCase();if(E[G]!==void 0){const H=B.accessors[A.attributes[G]],Z=m8[H.componentType];q[Y]=Z.name,J[Y]=H.normalized===!0}}return Q.getDependency("bufferView",I).then(function(G){return new Promise(function(Y,H){C.decodeDracoFile(G,function(Z){for(let X in Z.attributes){const U=Z.attributes[X],F=J[X];if(F!==void 0)U.normalized=F}Y(Z)},K,q,z0,H)})})}}class BZ{constructor(){this.name=J0.KHR_TEXTURE_TRANSFORM}extendTexture(A,Q){if((Q.texCoord===void 0||Q.texCoord===A.channel)&&Q.offset===void 0&&Q.rotation===void 0&&Q.scale===void 0)return A;if(A=A.clone(),Q.texCoord!==void 0)A.channel=Q.texCoord;if(Q.offset!==void 0)A.offset.fromArray(Q.offset);if(Q.rotation!==void 0)A.rotation=Q.rotation;if(Q.scale!==void 0)A.repeat.fromArray(Q.scale);return A.needsUpdate=!0,A}}class CZ{constructor(){this.name=J0.KHR_MESH_QUANTIZATION}}class MI extends k6{constructor(A,Q,B,C){super(A,Q,B,C)}copySampleValue_(A){const Q=this.resultBuffer,B=this.sampleValues,C=this.valueSize,I=A*C*3+C;for(let E=0;E!==C;E++)Q[E]=B[I+E];return Q}interpolate_(A,Q,B,C){const I=this.resultBuffer,E=this.sampleValues,K=this.valueSize,J=K*2,q=K*3,G=C-Q,Y=(B-Q)/G,H=Y*Y,Z=H*Y,X=A*q,U=X-q,F=-2*Z+3*H,W=Z-H,D=1-F,V=W-H+Y;for(let R=0;R!==K;R++){const O=E[U+R+K],z=E[U+R+J]*G,w=E[X+R+K],k=E[X+R]*G;I[R]=D*O+V*z+F*w+W*k}return I}}var xL=new v0;class IZ extends MI{interpolate_(A,Q,B,C){const I=super.interpolate_(A,Q,B,C);return xL.fromArray(I).normalize().toArray(I),I}}var K2={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},m8={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},gH={9728:v2,9729:g0,9984:w6,9985:L6,9986:O6,9987:f2},yH={33071:H1,33648:N6,10497:E2},NI={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},LI={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},d4={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},hL={CUBICSPLINE:void 0,LINEAR:H3,STEP:p9},wI={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"},mL=new zA;class EZ{constructor(A={},Q={}){this.json=A,this.extensions={},this.plugins={},this.options=Q,this.cache=new yL,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let B=!1,C=!1,I=-1;if(typeof navigator!=="undefined")B=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,C=navigator.userAgent.indexOf("Firefox")>-1,I=C?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;if(typeof createImageBitmap==="undefined"||B||C&&I<98)this.textureLoader=new _6(this.options.manager);else this.textureLoader=new tC(this.options.manager);if(this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new j1(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials")this.fileLoader.setWithCredentials(!0)}setExtensions(A){this.extensions=A}setPlugins(A){this.plugins=A}parse(A,Q){const B=this,C=this.json,I=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(E){return E._markDefs&&E._markDefs()}),Promise.all(this._invokeAll(function(E){return E.beforeRoot&&E.beforeRoot()})).then(function(){return Promise.all([B.getDependencies("scene"),B.getDependencies("animation"),B.getDependencies("camera")])}).then(function(E){const K={scene:E[0][C.scene||0],scenes:E[0],animations:E[1],cameras:E[2],asset:C.asset,parser:B,userData:{}};return x6(I,K,C),c4(K,C),Promise.all(B._invokeAll(function(J){return J.afterRoot&&J.afterRoot(K)})).then(function(){A(K)})}).catch(Q)}_markDefs(){const A=this.json.nodes||[],Q=this.json.skins||[],B=this.json.meshes||[];for(let C=0,I=Q.length;C<I;C++){const E=Q[C].joints;for(let K=0,J=E.length;K<J;K++)A[E[K]].isBone=!0}for(let C=0,I=A.length;C<I;C++){const E=A[C];if(E.mesh!==void 0){if(this._addNodeRef(this.meshCache,E.mesh),E.skin!==void 0)B[E.mesh].isSkinnedMesh=!0}if(E.camera!==void 0)this._addNodeRef(this.cameraCache,E.camera)}}_addNodeRef(A,Q){if(Q===void 0)return;if(A.refs[Q]===void 0)A.refs[Q]=A.uses[Q]=0;A.refs[Q]++}_getNodeRef(A,Q,B){if(A.refs[Q]<=1)return B;const C=B.clone(),I=(E,K)=>{const J=this.associations.get(E);if(J!=null)this.associations.set(K,J);for(let[q,G]of E.children.entries())I(G,K.children[q])};return I(B,C),C.name+="_instance_"+A.uses[Q]++,C}_invokeOne(A){const Q=Object.values(this.plugins);Q.push(this);for(let B=0;B<Q.length;B++){const C=A(Q[B]);if(C)return C}return null}_invokeAll(A){const Q=Object.values(this.plugins);Q.unshift(this);const B=[];for(let C=0;C<Q.length;C++){const I=A(Q[C]);if(I)B.push(I)}return B}getDependency(A,Q){const B=A+":"+Q;let C=this.cache.get(B);if(!C){switch(A){case"scene":C=this.loadScene(Q);break;case"node":C=this._invokeOne(function(I){return I.loadNode&&I.loadNode(Q)});break;case"mesh":C=this._invokeOne(function(I){return I.loadMesh&&I.loadMesh(Q)});break;case"accessor":C=this.loadAccessor(Q);break;case"bufferView":C=this._invokeOne(function(I){return I.loadBufferView&&I.loadBufferView(Q)});break;case"buffer":C=this.loadBuffer(Q);break;case"material":C=this._invokeOne(function(I){return I.loadMaterial&&I.loadMaterial(Q)});break;case"texture":C=this._invokeOne(function(I){return I.loadTexture&&I.loadTexture(Q)});break;case"skin":C=this.loadSkin(Q);break;case"animation":C=this._invokeOne(function(I){return I.loadAnimation&&I.loadAnimation(Q)});break;case"camera":C=this.loadCamera(Q);break;default:if(C=this._invokeOne(function(I){return I!=this&&I.getDependency&&I.getDependency(A,Q)}),!C)throw new Error("Unknown type: "+A);break}this.cache.add(B,C)}return C}getDependencies(A){let Q=this.cache.get(A);if(!Q){const B=this,C=this.json[A+(A==="mesh"?"es":"s")]||[];Q=Promise.all(C.map(function(I,E){return B.getDependency(A,E)})),this.cache.add(A,Q)}return Q}loadBuffer(A){const Q=this.json.buffers[A],B=this.fileLoader;if(Q.type&&Q.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+Q.type+" buffer type is not supported.");if(Q.uri===void 0&&A===0)return Promise.resolve(this.extensions[J0.KHR_BINARY_GLTF].body);const C=this.options;return new Promise(function(I,E){B.load(P6.resolveURL(Q.uri,C.path),I,void 0,function(){E(new Error('THREE.GLTFLoader: Failed to load buffer "'+Q.uri+'".'))})})}loadBufferView(A){const Q=this.json.bufferViews[A];return this.getDependency("buffer",Q.buffer).then(function(B){const C=Q.byteLength||0,I=Q.byteOffset||0;return B.slice(I,I+C)})}loadAccessor(A){const Q=this,B=this.json,C=this.json.accessors[A];if(C.bufferView===void 0&&C.sparse===void 0){const E=NI[C.type],K=m8[C.componentType],J=C.normalized===!0,q=new K(C.count*E);return Promise.resolve(new V0(q,E,J))}const I=[];if(C.bufferView!==void 0)I.push(this.getDependency("bufferView",C.bufferView));else I.push(null);if(C.sparse!==void 0)I.push(this.getDependency("bufferView",C.sparse.indices.bufferView)),I.push(this.getDependency("bufferView",C.sparse.values.bufferView));return Promise.all(I).then(function(E){const K=E[0],J=NI[C.type],q=m8[C.componentType],G=q.BYTES_PER_ELEMENT,Y=G*J,H=C.byteOffset||0,Z=C.bufferView!==void 0?B.bufferViews[C.bufferView].byteStride:void 0,X=C.normalized===!0;let U,F;if(Z&&Z!==Y){const W=Math.floor(H/Z),D="InterleavedBuffer:"+C.bufferView+":"+C.componentType+":"+W+":"+C.count;let V=Q.cache.get(D);if(!V)U=new q(K,W*Z,C.count*Z/G),V=new n9(U,Z/G),Q.cache.add(D,V);F=new D3(V,J,H%Z/G,X)}else{if(K===null)U=new q(C.count*J);else U=new q(K,H,C.count*J);F=new V0(U,J,X)}if(C.sparse!==void 0){const W=NI.SCALAR,D=m8[C.sparse.indices.componentType],V=C.sparse.indices.byteOffset||0,R=C.sparse.values.byteOffset||0,O=new D(E[1],V,C.sparse.count*W),z=new q(E[2],R,C.sparse.count*J);if(K!==null)F=new V0(F.array.slice(),F.itemSize,F.normalized);for(let w=0,k=O.length;w<k;w++){const j=O[w];if(F.setX(j,z[w*J]),J>=2)F.setY(j,z[w*J+1]);if(J>=3)F.setZ(j,z[w*J+2]);if(J>=4)F.setW(j,z[w*J+3]);if(J>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return F})}loadTexture(A){const Q=this.json,B=this.options,I=Q.textures[A].source,E=Q.images[I];let K=this.textureLoader;if(E.uri){const J=B.manager.getHandler(E.uri);if(J!==null)K=J}return this.loadTextureImage(A,I,K)}loadTextureImage(A,Q,B){const C=this,I=this.json,E=I.textures[A],K=I.images[Q],J=(K.uri||K.bufferView)+":"+E.sampler;if(this.textureCache[J])return this.textureCache[J];const q=this.loadImageSource(Q,B).then(function(G){if(G.flipY=!1,G.name=E.name||K.name||"",G.name===""&&typeof K.uri==="string"&&K.uri.startsWith("data:image/")===!1)G.name=K.uri;const H=(I.samplers||{})[E.sampler]||{};return G.magFilter=gH[H.magFilter]||g0,G.minFilter=gH[H.minFilter]||f2,G.wrapS=yH[H.wrapS]||E2,G.wrapT=yH[H.wrapT]||E2,C.associations.set(G,{textures:A}),G}).catch(function(){return null});return this.textureCache[J]=q,q}loadImageSource(A,Q){const B=this,C=this.json,I=this.options;if(this.sourceCache[A]!==void 0)return this.sourceCache[A].then((Y)=>Y.clone());const E=C.images[A],K=self.URL||self.webkitURL;let J=E.uri||"",q=!1;if(E.bufferView!==void 0)J=B.getDependency("bufferView",E.bufferView).then(function(Y){q=!0;const H=new Blob([Y],{type:E.mimeType});return J=K.createObjectURL(H),J});else if(E.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+A+" is missing URI and bufferView");const G=Promise.resolve(J).then(function(Y){return new Promise(function(H,Z){let X=H;if(Q.isImageBitmapLoader===!0)X=function(U){const F=new Z0(U);F.needsUpdate=!0,H(F)};Q.load(P6.resolveURL(Y,I.path),X,void 0,Z)})}).then(function(Y){if(q===!0)K.revokeObjectURL(J);return Y.userData.mimeType=E.mimeType||uL(E.uri),Y}).catch(function(Y){throw console.error("THREE.GLTFLoader: Couldn\'t load texture",J),Y});return this.sourceCache[A]=G,G}assignTexture(A,Q,B,C){const I=this;return this.getDependency("texture",B.index).then(function(E){if(!E)return null;if(B.texCoord!==void 0&&B.texCoord>0)E=E.clone(),E.channel=B.texCoord;if(I.extensions[J0.KHR_TEXTURE_TRANSFORM]){const K=B.extensions!==void 0?B.extensions[J0.KHR_TEXTURE_TRANSFORM]:void 0;if(K){const J=I.associations.get(E);E=I.extensions[J0.KHR_TEXTURE_TRANSFORM].extendTexture(E,K),I.associations.set(E,J)}}if(C!==void 0)E.colorSpace=C;return A[Q]=E,E})}assignFinalMaterial(A){const Q=A.geometry;let B=A.material;const C=Q.attributes.tangent===void 0,I=Q.attributes.color!==void 0,E=Q.attributes.normal===void 0;if(A.isPoints){const K="PointsMaterial:"+B.uuid;let J=this.cache.get(K);if(!J)J=new r9,m1.prototype.copy.call(J,B),J.color.copy(B.color),J.map=B.map,J.sizeAttenuation=!1,this.cache.add(K,J);B=J}else if(A.isLine){const K="LineBasicMaterial:"+B.uuid;let J=this.cache.get(K);if(!J)J=new a9,m1.prototype.copy.call(J,B),J.color.copy(B.color),J.map=B.map,this.cache.add(K,J);B=J}if(C||I||E){let K="ClonedMaterial:"+B.uuid+":";if(C)K+="derivative-tangents:";if(I)K+="vertex-colors:";if(E)K+="flat-shading:";let J=this.cache.get(K);if(!J){if(J=B.clone(),I)J.vertexColors=!0;if(E)J.flatShading=!0;if(C){if(J.normalScale)J.normalScale.y*=-1;if(J.clearcoatNormalScale)J.clearcoatNormalScale.y*=-1}this.cache.add(K,J),this.associations.set(J,this.associations.get(B))}B=J}A.material=B}getMaterialType(){return p4}loadMaterial(A){const Q=this,B=this.json,C=this.extensions,I=B.materials[A];let E;const K={},J=I.extensions||{},q=[];if(J[J0.KHR_MATERIALS_UNLIT]){const Y=C[J0.KHR_MATERIALS_UNLIT];E=Y.getMaterialType(),q.push(Y.extendParams(K,I,Q))}else{const Y=I.pbrMetallicRoughness||{};if(K.color=new PA(1,1,1),K.opacity=1,Array.isArray(Y.baseColorFactor)){const H=Y.baseColorFactor;K.color.setRGB(H[0],H[1],H[2],z0),K.opacity=H[3]}if(Y.baseColorTexture!==void 0)q.push(Q.assignTexture(K,"map",Y.baseColorTexture,$0));if(K.metalness=Y.metallicFactor!==void 0?Y.metallicFactor:1,K.roughness=Y.roughnessFactor!==void 0?Y.roughnessFactor:1,Y.metallicRoughnessTexture!==void 0)q.push(Q.assignTexture(K,"metalnessMap",Y.metallicRoughnessTexture)),q.push(Q.assignTexture(K,"roughnessMap",Y.metallicRoughnessTexture));E=this._invokeOne(function(H){return H.getMaterialType&&H.getMaterialType(A)}),q.push(Promise.all(this._invokeAll(function(H){return H.extendMaterialParams&&H.extendMaterialParams(A,K)})))}if(I.doubleSided===!0)K.side=I2;const G=I.alphaMode||wI.OPAQUE;if(G===wI.BLEND)K.transparent=!0,K.depthWrite=!1;else if(K.transparent=!1,G===wI.MASK)K.alphaTest=I.alphaCutoff!==void 0?I.alphaCutoff:0.5;if(I.normalTexture!==void 0&&E!==b0){if(q.push(Q.assignTexture(K,"normalMap",I.normalTexture)),K.normalScale=new DA(1,1),I.normalTexture.scale!==void 0){const Y=I.normalTexture.scale;K.normalScale.set(Y,Y)}}if(I.occlusionTexture!==void 0&&E!==b0){if(q.push(Q.assignTexture(K,"aoMap",I.occlusionTexture)),I.occlusionTexture.strength!==void 0)K.aoMapIntensity=I.occlusionTexture.strength}if(I.emissiveFactor!==void 0&&E!==b0){const Y=I.emissiveFactor;K.emissive=new PA().setRGB(Y[0],Y[1],Y[2],z0)}if(I.emissiveTexture!==void 0&&E!==b0)q.push(Q.assignTexture(K,"emissiveMap",I.emissiveTexture,$0));return Promise.all(q).then(function(){const Y=new E(K);if(I.name)Y.name=I.name;if(c4(Y,I),Q.associations.set(Y,{materials:A}),I.extensions)x6(C,Y,I);return Y})}createUniqueName(A){const Q=K0.sanitizeNodeName(A||"");if(Q in this.nodeNamesUsed)return Q+"_"+ ++this.nodeNamesUsed[Q];else return this.nodeNamesUsed[Q]=0,Q}loadGeometries(A){const Q=this,B=this.extensions,C=this.primitiveCache;function I(K){return B[J0.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(K,Q).then(function(J){return xH(J,K,Q)})}const E=[];for(let K=0,J=A.length;K<J;K++){const q=A[K],G=pL(q),Y=C[G];if(Y)E.push(Y.promise);else{let H;if(q.extensions&&q.extensions[J0.KHR_DRACO_MESH_COMPRESSION])H=I(q);else H=xH(new J1,q,Q);C[G]={primitive:q,promise:H},E.push(H)}}return Promise.all(E)}loadMesh(A){const Q=this,B=this.json,C=this.extensions,I=B.meshes[A],E=I.primitives,K=[];for(let J=0,q=E.length;J<q;J++){const G=E[J].material===void 0?vL(this.cache):this.getDependency("material",E[J].material);K.push(G)}return K.push(Q.loadGeometries(E)),Promise.all(K).then(function(J){const q=J.slice(0,J.length-1),G=J[J.length-1],Y=[];for(let Z=0,X=G.length;Z<X;Z++){const U=G[Z],F=E[Z];let W;const D=q[Z];if(F.mode===K2.TRIANGLES||F.mode===K2.TRIANGLE_STRIP||F.mode===K2.TRIANGLE_FAN||F.mode===void 0){if(W=I.isSkinnedMesh===!0?new bC(U,D):new nA(U,D),W.isSkinnedMesh===!0)W.normalizeSkinWeights();if(F.mode===K2.TRIANGLE_STRIP)W.geometry=VI(W.geometry,u9);else if(F.mode===K2.TRIANGLE_FAN)W.geometry=VI(W.geometry,Z3)}else if(F.mode===K2.LINES)W=new uC(U,D);else if(F.mode===K2.LINE_STRIP)W=new R3(U,D);else if(F.mode===K2.LINE_LOOP)W=new mC(U,D);else if(F.mode===K2.POINTS)W=new dC(U,D);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+F.mode);if(Object.keys(W.geometry.morphAttributes).length>0)bL(W,I);if(W.name=Q.createUniqueName(I.name||"mesh_"+A),c4(W,I),F.extensions)x6(C,W,F);Q.assignFinalMaterial(W),Y.push(W)}for(let Z=0,X=Y.length;Z<X;Z++)Q.associations.set(Y[Z],{meshes:A,primitives:Z});if(Y.length===1){if(I.extensions)x6(C,Y[0],I);return Y[0]}const H=new C2;if(I.extensions)x6(C,H,I);Q.associations.set(H,{meshes:A});for(let Z=0,X=Y.length;Z<X;Z++)H.add(Y[Z]);return H})}loadCamera(A){let Q;const B=this.json.cameras[A],C=B[B.type];if(!C){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}if(B.type==="perspective")Q=new P0(v4.radToDeg(C.yfov),C.aspectRatio||1,C.znear||1,C.zfar||2000000);else if(B.type==="orthographic")Q=new V2(-C.xmag,C.xmag,C.ymag,-C.ymag,C.znear,C.zfar);if(B.name)Q.name=this.createUniqueName(B.name);return c4(Q,B),Promise.resolve(Q)}loadSkin(A){const Q=this.json.skins[A],B=[];for(let C=0,I=Q.joints.length;C<I;C++)B.push(this._loadNodeShallow(Q.joints[C]));if(Q.inverseBindMatrices!==void 0)B.push(this.getDependency("accessor",Q.inverseBindMatrices));else B.push(null);return Promise.all(B).then(function(C){const I=C.pop(),E=C,K=[],J=[];for(let q=0,G=E.length;q<G;q++){const Y=E[q];if(Y){K.push(Y);const H=new zA;if(I!==null)H.fromArray(I.array,q*16);J.push(H)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',Q.joints[q])}return new i9(K,J)})}loadAnimation(A){const Q=this.json,B=this,C=Q.animations[A],I=C.name?C.name:"animation_"+A,E=[],K=[],J=[],q=[],G=[];for(let Y=0,H=C.channels.length;Y<H;Y++){const Z=C.channels[Y],X=C.samplers[Z.sampler],U=Z.target,F=U.node,W=C.parameters!==void 0?C.parameters[X.input]:X.input,D=C.parameters!==void 0?C.parameters[X.output]:X.output;if(U.node===void 0)continue;E.push(this.getDependency("node",F)),K.push(this.getDependency("accessor",W)),J.push(this.getDependency("accessor",D)),q.push(X),G.push(U)}return Promise.all([Promise.all(E),Promise.all(K),Promise.all(J),Promise.all(q),Promise.all(G)]).then(function(Y){const H=Y[0],Z=Y[1],X=Y[2],U=Y[3],F=Y[4],W=[];for(let D=0,V=H.length;D<V;D++){const R=H[D],O=Z[D],z=X[D],w=U[D],k=F[D];if(R===void 0)continue;if(R.updateMatrix)R.updateMatrix();const j=B._createAnimationTracks(R,O,z,w,k);if(j)for(let h=0;h<j.length;h++)W.push(j[h])}return new $8(I,void 0,W)})}createNodeMesh(A){const Q=this.json,B=this,C=Q.nodes[A];if(C.mesh===void 0)return null;return B.getDependency("mesh",C.mesh).then(function(I){const E=B._getNodeRef(B.meshCache,C.mesh,I);if(C.weights!==void 0)E.traverse(function(K){if(!K.isMesh)return;for(let J=0,q=C.weights.length;J<q;J++)K.morphTargetInfluences[J]=C.weights[J]});return E})}loadNode(A){const Q=this.json,B=this,C=Q.nodes[A],I=B._loadNodeShallow(A),E=[],K=C.children||[];for(let q=0,G=K.length;q<G;q++)E.push(B.getDependency("node",K[q]));const J=C.skin===void 0?Promise.resolve(null):B.getDependency("skin",C.skin);return Promise.all([I,Promise.all(E),J]).then(function(q){const G=q[0],Y=q[1],H=q[2];if(H!==null)G.traverse(function(Z){if(!Z.isSkinnedMesh)return;Z.bind(H,mL)});for(let Z=0,X=Y.length;Z<X;Z++)G.add(Y[Z]);return G})}_loadNodeShallow(A){const Q=this.json,B=this.extensions,C=this;if(this.nodeCache[A]!==void 0)return this.nodeCache[A];const I=Q.nodes[A],E=I.name?C.createUniqueName(I.name):"",K=[],J=C._invokeOne(function(q){return q.createNodeMesh&&q.createNodeMesh(A)});if(J)K.push(J);if(I.camera!==void 0)K.push(C.getDependency("camera",I.camera).then(function(q){return C._getNodeRef(C.cameraCache,I.camera,q)}));return C._invokeAll(function(q){return q.createNodeAttachment&&q.createNodeAttachment(A)}).forEach(function(q){K.push(q)}),this.nodeCache[A]=Promise.all(K).then(function(q){let G;if(I.isBone===!0)G=new o9;else if(q.length>1)G=new C2;else if(q.length===1)G=q[0];else G=new F0;if(G!==q[0])for(let Y=0,H=q.length;Y<H;Y++)G.add(q[Y]);if(I.name)G.userData.name=I.name,G.name=E;if(c4(G,I),I.extensions)x6(B,G,I);if(I.matrix!==void 0){const Y=new zA;Y.fromArray(I.matrix),G.applyMatrix4(Y)}else{if(I.translation!==void 0)G.position.fromArray(I.translation);if(I.rotation!==void 0)G.quaternion.fromArray(I.rotation);if(I.scale!==void 0)G.scale.fromArray(I.scale)}if(!C.associations.has(G))C.associations.set(G,{});return C.associations.get(G).nodes=A,G}),this.nodeCache[A]}loadScene(A){const Q=this.extensions,B=this.json.scenes[A],C=this,I=new C2;if(B.name)I.name=C.createUniqueName(B.name);if(c4(I,B),B.extensions)x6(Q,I,B);const E=B.nodes||[],K=[];for(let J=0,q=E.length;J<q;J++)K.push(C.getDependency("node",E[J]));return Promise.all(K).then(function(J){for(let G=0,Y=J.length;G<Y;G++)I.add(J[G]);const q=(G)=>{const Y=new Map;for(let[H,Z]of C.associations)if(H instanceof m1||H instanceof Z0)Y.set(H,Z);return G.traverse((H)=>{const Z=C.associations.get(H);if(Z!=null)Y.set(H,Z)}),Y};return C.associations=q(I),I})}_createAnimationTracks(A,Q,B,C,I){const E=[],K=A.name?A.name:A.uuid,J=[];if(d4[I.path]===d4.weights)A.traverse(function(H){if(H.morphTargetInfluences)J.push(H.name?H.name:H.uuid)});else J.push(K);let q;switch(d4[I.path]){case d4.weights:q=h4;break;case d4.rotation:q=u2;break;case d4.position:case d4.scale:q=G4;break;default:switch(B.itemSize){case 1:q=h4;break;case 2:case 3:default:q=G4;break}break}const G=C.interpolation!==void 0?hL[C.interpolation]:H3,Y=this._getArrayFromAccessor(B);for(let H=0,Z=J.length;H<Z;H++){const X=new q(J[H]+"."+d4[I.path],Q.array,Y,G);if(C.interpolation==="CUBICSPLINE")this._createCubicSplineTrackInterpolant(X);E.push(X)}return E}_getArrayFromAccessor(A){let Q=A.array;if(A.normalized){const B=zI(Q.constructor),C=new Float32Array(Q.length);for(let I=0,E=Q.length;I<E;I++)C[I]=Q[I]*B;Q=C}return Q}_createCubicSplineTrackInterpolant(A){A.createInterpolant=function Q(B){return new(this instanceof u2?IZ:MI)(this.times,this.values,this.getValueSize()/3,B)},A.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}class $I{constructor(A=4){this.pool=A,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(A){if(!this.workers[A]){const Q=this.workerCreator();Q.addEventListener("message",this._onMessage.bind(this,A)),this.workers[A]=Q}}_getIdleWorker(){for(let A=0;A<this.pool;A++)if(!(this.workerStatus&1<<A))return A;return-1}_onMessage(A,Q){const B=this.workersResolve[A];if(B&&B(Q),this.queue.length){const{resolve:C,msg:I,transfer:E}=this.queue.shift();this.workersResolve[A]=C,this.workers[A].postMessage(I,E)}else this.workerStatus^=1<<A}setWorkerCreator(A){this.workerCreator=A}setWorkerLimit(A){this.pool=A}postMessage(A,Q){return new Promise((B)=>{const C=this._getIdleWorker();if(C!==-1)this._initWorker(C),this.workerStatus|=1<<C,this.workersResolve[C]=B,this.workers[C].postMessage(A,Q);else this.queue.push({resolve:B,msg:A,transfer:Q})})}dispose(){this.workers.forEach((A)=>A.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}var KZ=function(A){return typeof TextDecoder!="undefined"?(new TextDecoder()).decode(A):Buffer.from(A).toString("utf8")};var FZ=function(A){const Q=new Uint8Array(A.buffer,A.byteOffset,g1.length);if(Q[0]!==g1[0]||Q[1]!==g1[1]||Q[2]!==g1[2]||Q[3]!==g1[3]||Q[4]!==g1[4]||Q[5]!==g1[5]||Q[6]!==g1[6]||Q[7]!==g1[7]||Q[8]!==g1[8]||Q[9]!==g1[9]||Q[10]!==g1[10]||Q[11]!==g1[11])throw new Error("Missing KTX 2.0 identifier.");const B=new XZ,C=17*Uint32Array.BYTES_PER_ELEMENT,I=new d8(A,g1.length,C,!0);B.vkFormat=I._nextUint32(),B.typeSize=I._nextUint32(),B.pixelWidth=I._nextUint32(),B.pixelHeight=I._nextUint32(),B.pixelDepth=I._nextUint32(),B.layerCount=I._nextUint32(),B.faceCount=I._nextUint32();const E=I._nextUint32();B.supercompressionScheme=I._nextUint32();const K=I._nextUint32(),J=I._nextUint32(),q=I._nextUint32(),G=I._nextUint32(),Y=I._nextUint64(),H=I._nextUint64(),Z=new d8(A,g1.length+C,3*E*8,!0);for(let m=0;m<E;m++)B.levels.push({levelData:new Uint8Array(A.buffer,A.byteOffset+Z._nextUint64(),Z._nextUint64()),uncompressedByteLength:Z._nextUint64()});const X=new d8(A,K,J,!0),U={vendorId:X._skip(4)._nextUint16(),descriptorType:X._nextUint16(),versionNumber:X._nextUint16(),descriptorBlockSize:X._nextUint16(),colorModel:X._nextUint8(),colorPrimaries:X._nextUint8(),transferFunction:X._nextUint8(),flags:X._nextUint8(),texelBlockDimension:[X._nextUint8(),X._nextUint8(),X._nextUint8(),X._nextUint8()],bytesPlane:[X._nextUint8(),X._nextUint8(),X._nextUint8(),X._nextUint8(),X._nextUint8(),X._nextUint8(),X._nextUint8(),X._nextUint8()],samples:[]},F=(U.descriptorBlockSize/4-6)/4;for(let m=0;m<F;m++){const b={bitOffset:X._nextUint16(),bitLength:X._nextUint8(),channelType:X._nextUint8(),samplePosition:[X._nextUint8(),X._nextUint8(),X._nextUint8(),X._nextUint8()],sampleLower:(-Infinity),sampleUpper:Infinity};64&b.channelType?(b.sampleLower=X._nextInt32(),b.sampleUpper=X._nextInt32()):(b.sampleLower=X._nextUint32(),b.sampleUpper=X._nextUint32()),U.samples[m]=b}B.dataFormatDescriptor.length=0,B.dataFormatDescriptor.push(U);const W=new d8(A,q,G,!0);for(;W._offset<G;){const m=W._nextUint32(),b=W._scan(m),l=KZ(b),QA=W._scan(m-b.byteLength);B.keyValue[l]=l.match(/^ktx/i)?KZ(QA):QA,W._offset%4&&W._skip(4-W._offset%4)}if(H<=0)return B;const D=new d8(A,Y,H,!0),V=D._nextUint16(),R=D._nextUint16(),O=D._nextUint32(),z=D._nextUint32(),w=D._nextUint32(),k=D._nextUint32(),j=[];for(let m=0;m<E;m++)j.push({imageFlags:D._nextUint32(),rgbSliceByteOffset:D._nextUint32(),rgbSliceByteLength:D._nextUint32(),alphaSliceByteOffset:D._nextUint32(),alphaSliceByteLength:D._nextUint32()});const h=Y+D._offset,N=h+O,$=N+z,p=$+w,n=new Uint8Array(A.buffer,A.byteOffset+h,O),S=new Uint8Array(A.buffer,A.byteOffset+N,z),v=new Uint8Array(A.buffer,A.byteOffset+$,w),f=new Uint8Array(A.buffer,A.byteOffset+p,k);return B.globalData={endpointCount:V,selectorCount:R,imageDescs:j,endpointsData:n,selectorsData:S,tablesData:v,extendedData:f},B};var JZ=0;var _I=2;var qZ=1;var PI=2;var GZ=0,YZ=1;var HZ=10;var ZZ=0;var SI=9;var TI=15,jI=16;var gI=22;var yI=37;var xI=43;var hI=76;var vI=83;var fI=97;var bI=100;var pI=103;var uI=109;var mI=165,dI=166;class XZ{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class d8{constructor(A,Q,B,C){this._dataView=new DataView(A.buffer,A.byteOffset+Q,B),this._littleEndian=C,this._offset=0}_nextUint8(){const A=this._dataView.getUint8(this._offset);return this._offset+=1,A}_nextUint16(){const A=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,A}_nextUint32(){const A=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,A}_nextUint64(){const A=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,A}_nextInt32(){const A=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,A}_skip(A){return this._offset+=A,this}_scan(A,Q=0){const B=this._offset;let C=0;for(;this._dataView.getUint8(this._offset)!==Q&&C<A;)C++,this._offset++;return C<A&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+B,C)}}var kx=new Uint8Array([0]),g1=[171,75,84,88,32,50,48,187,13,10,26,10];var cI,Z4,sI,lI={env:{emscripten_notify_memory_growth:function(A){sI=new Uint8Array(Z4.exports.memory.buffer)}}};class nI{init(){return cI||(cI=typeof fetch!="undefined"?fetch("data:application/wasm;base64,"+WZ).then((A)=>A.arrayBuffer()).then((A)=>WebAssembly.instantiate(A,lI)).then(this._init):WebAssembly.instantiate(Buffer.from(WZ,"base64"),lI).then(this._init),cI)}_init(A){Z4=A.instance,lI.env.emscripten_notify_memory_growth(0)}decode(A,Q=0){if(!Z4)throw new Error("ZSTDDecoder: Await .init() before decoding.");const B=A.byteLength,C=Z4.exports.malloc(B);sI.set(A,C),Q=Q||Number(Z4.exports.ZSTD_findDecompressedSize(C,B));const I=Z4.exports.malloc(Q),E=Z4.exports.ZSTD_decompress(I,Q,C,B),K=sI.slice(I,I+E);return Z4.exports.free(C),Z4.exports.free(I),K}}var WZ="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ";async function lL(A){const{vkFormat:Q}=A;if(rI[Q]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let B;if(A.supercompressionScheme===_I){if(!aI)aI=new Promise(async(E)=>{const K=new nI;await K.init(),E(K)});B=await aI}const C=[];for(let E=0;E<A.levels.length;E++){const K=Math.max(1,A.pixelWidth>>E),J=Math.max(1,A.pixelHeight>>E),q=A.pixelDepth?Math.max(1,A.pixelDepth>>E):0,G=A.levels[E];let Y;if(A.supercompressionScheme===JZ)Y=G.levelData;else if(A.supercompressionScheme===_I)Y=B.decode(G.levelData,G.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");let H;if(tI[Q]===a1)H=new Float32Array(Y.buffer,Y.byteOffset,Y.byteLength/Float32Array.BYTES_PER_ELEMENT);else if(tI[Q]===E1)H=new Uint16Array(Y.buffer,Y.byteOffset,Y.byteLength/Uint16Array.BYTES_PER_ELEMENT);else H=Y;C.push({data:H,width:K,height:J,depth:q})}let I;if(cL.has(rI[Q]))I=A.pixelDepth===0?new b4(C[0].data,A.pixelWidth,A.pixelHeight):new m9(C[0].data,A.pixelWidth,A.pixelHeight,A.pixelDepth);else{if(A.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");I=new p2(C,A.pixelWidth,A.pixelHeight)}return I.mipmaps=C,I.type=tI[Q],I.format=rI[Q],I.colorSpace=UZ(A),I.needsUpdate=!0,Promise.resolve(I)}var UZ=function(A){const Q=A.dataFormatDescriptor[0];if(Q.colorPrimaries===YZ)return Q.transferFunction===PI?$0:z0;else if(Q.colorPrimaries===HZ)return Q.transferFunction===PI?UY:DY;else if(Q.colorPrimaries===GZ)return z6;else return console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${Q.colorPrimaries}"`),z6},oI=new WeakMap,iI=0,aI;class L2 extends O1{constructor(A){super(A);if(this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new $I,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER!=="undefined")console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(A){return this.transcoderPath=A,this}setWorkerLimit(A){return this.workerPool.setWorkerLimit(A),this}async detectSupportAsync(A){return this.workerConfig={astcSupported:await A.hasFeatureAsync("texture-compression-astc"),etc1Supported:await A.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await A.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await A.hasFeatureAsync("texture-compression-bc"),bptcSupported:await A.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await A.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(A){if(A.isWebGPURenderer===!0)this.workerConfig={astcSupported:A.hasFeature("texture-compression-astc"),etc1Supported:A.hasFeature("texture-compression-etc1"),etc2Supported:A.hasFeature("texture-compression-etc2"),dxtSupported:A.hasFeature("texture-compression-bc"),bptcSupported:A.hasFeature("texture-compression-bptc"),pvrtcSupported:A.hasFeature("texture-compression-pvrtc")};else if(this.workerConfig={astcSupported:A.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:A.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:A.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:A.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:A.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:A.extensions.has("WEBGL_compressed_texture_pvrtc")||A.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},A.capabilities.isWebGL2)this.workerConfig.etc1Supported=!1;return this}init(){if(!this.transcoderPending){const A=new j1(this.manager);A.setPath(this.transcoderPath),A.setWithCredentials(this.withCredentials);const Q=A.loadAsync("basis_transcoder.js"),B=new j1(this.manager);B.setPath(this.transcoderPath),B.setResponseType("arraybuffer"),B.setWithCredentials(this.withCredentials);const C=B.loadAsync("basis_transcoder.wasm");if(this.transcoderPending=Promise.all([Q,C]).then(([I,E])=>{const K=L2.BasisWorker.toString(),J=["/* constants */","let _EngineFormat = "+JSON.stringify(L2.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(L2.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(L2.BasisFormat),"/* basis_transcoder.js */",I,"/* worker */",K.substring(K.indexOf("{")+1,K.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([J])),this.transcoderBinary=E,this.workerPool.setWorkerCreator(()=>{const q=new Worker(this.workerSourceURL),G=this.transcoderBinary.slice(0);return q.postMessage({type:"init",config:this.workerConfig,transcoderBinary:G},[G]),q})}),iI>0)console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances.");iI++}return this.transcoderPending}load(A,Q,B,C){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const I=new j1(this.manager);I.setResponseType("arraybuffer"),I.setWithCredentials(this.withCredentials),I.load(A,(E)=>{if(oI.has(E))return oI.get(E).promise.then(Q).catch(C);this._createTexture(E).then((K)=>Q?Q(K):null).catch(C)},B,C)}_createTextureFrom(A,Q){const{faces:B,width:C,height:I,format:E,type:K,error:J,dfdFlags:q}=A;if(K==="error")return Promise.reject(J);let G;if(Q.faceCount===6)G=new sC(B,E,Z1);else{const Y=B[0].mipmaps;G=Q.layerCount>1?new lC(Y,C,I,Q.layerCount,E,Z1):new p2(Y,C,I,E,Z1)}return G.minFilter=B[0].mipmaps.length===1?g0:f2,G.magFilter=g0,G.generateMipmaps=!1,G.needsUpdate=!0,G.colorSpace=UZ(Q),G.premultiplyAlpha=!!(q&qZ),G}async _createTexture(A,Q={}){const B=FZ(new Uint8Array(A));if(B.vkFormat!==ZZ)return lL(B);const C=Q,I=this.init().then(()=>{return this.workerPool.postMessage({type:"transcode",buffer:A,taskConfig:C},[A])}).then((E)=>this._createTextureFrom(E.data,B));return oI.set(A,{promise:I}),I}dispose(){if(this.workerPool.dispose(),this.workerSourceURL)URL.revokeObjectURL(this.workerSourceURL);return iI--,this}}L2.BasisFormat={ETC1S:0,UASTC_4x4:1};L2.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16};L2.EngineFormat={RGBAFormat:o0,RGBA_ASTC_4x4_Format:ZY,RGBA_BPTC_Format:XY,RGBA_ETC2_EAC_Format:HY,RGBA_PVRTC_4BPPV1_Format:qY,RGBA_S3TC_DXT5_Format:KY,RGB_ETC1_Format:GY,RGB_ETC2_Format:YY,RGB_PVRTC_4BPPV1_Format:JY,RGB_S3TC_DXT1_Format:EY};L2.BasisWorker=function(){let A,Q,B;const C=_EngineFormat,I=_TranscoderFormat,E=_BasisFormat;self.addEventListener("message",function(U){const F=U.data;switch(F.type){case"init":A=F.config,K(F.transcoderBinary);break;case"transcode":Q.then(()=>{try{const{faces:W,buffers:D,width:V,height:R,hasAlpha:O,format:z,dfdFlags:w}=J(F.buffer);self.postMessage({type:"transcode",id:F.id,faces:W,width:V,height:R,hasAlpha:O,format:z,dfdFlags:w},D)}catch(W){console.error(W),self.postMessage({type:"error",id:F.id,error:W.message})}});break}});function K(U){Q=new Promise((F)=>{B={wasmBinary:U,onRuntimeInitialized:F},BASIS(B)}).then(()=>{if(B.initializeBasis(),B.KTX2File===void 0)console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function J(U){const F=new B.KTX2File(new Uint8Array(U));function W(){F.close(),F.delete()}if(!F.isValid())throw W(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const D=F.isUASTC()?E.UASTC_4x4:E.ETC1S,V=F.getWidth(),R=F.getHeight(),O=F.getLayers()||1,z=F.getLevels(),w=F.getFaces(),k=F.getHasAlpha(),j=F.getDFDFlags(),{transcoderFormat:h,engineFormat:N}=H(D,V,R,k);if(!V||!R||!z)throw W(),new Error("THREE.KTX2Loader:	Invalid texture");if(!F.startTranscoding())throw W(),new Error("THREE.KTX2Loader: .startTranscoding failed");const $=[],p=[];for(let n=0;n<w;n++){const S=[];for(let v=0;v<z;v++){const f=[];let m,b;for(let QA=0;QA<O;QA++){const BA=F.getImageLevelInfo(v,QA,n);if(n===0&&v===0&&QA===0&&(BA.origWidth%4!==0||BA.origHeight%4!==0))console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions.");if(z>1)m=BA.origWidth,b=BA.origHeight;else m=BA.width,b=BA.height;const qA=new Uint8Array(F.getImageTranscodedSizeInBytes(v,QA,0,h));if(!F.transcodeImage(qA,v,QA,n,h,0,-1,-1))throw W(),new Error("THREE.KTX2Loader: .transcodeImage failed.");f.push(qA)}const l=X(f);S.push({data:l,width:m,height:b}),p.push(l.buffer)}$.push({mipmaps:S,width:V,height:R,format:N})}return W(),{faces:$,buffers:p,width:V,height:R,hasAlpha:k,format:N,dfdFlags:j}}const q=[{if:"astcSupported",basisFormat:[E.UASTC_4x4],transcoderFormat:[I.ASTC_4x4,I.ASTC_4x4],engineFormat:[C.RGBA_ASTC_4x4_Format,C.RGBA_ASTC_4x4_Format],priorityETC1S:Infinity,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[E.ETC1S,E.UASTC_4x4],transcoderFormat:[I.BC7_M5,I.BC7_M5],engineFormat:[C.RGBA_BPTC_Format,C.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[E.ETC1S,E.UASTC_4x4],transcoderFormat:[I.BC1,I.BC3],engineFormat:[C.RGB_S3TC_DXT1_Format,C.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[E.ETC1S,E.UASTC_4x4],transcoderFormat:[I.ETC1,I.ETC2],engineFormat:[C.RGB_ETC2_Format,C.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[E.ETC1S,E.UASTC_4x4],transcoderFormat:[I.ETC1],engineFormat:[C.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[E.ETC1S,E.UASTC_4x4],transcoderFormat:[I.PVRTC1_4_RGB,I.PVRTC1_4_RGBA],engineFormat:[C.RGB_PVRTC_4BPPV1_Format,C.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],G=q.sort(function(U,F){return U.priorityETC1S-F.priorityETC1S}),Y=q.sort(function(U,F){return U.priorityUASTC-F.priorityUASTC});function H(U,F,W,D){let V,R;const O=U===E.ETC1S?G:Y;for(let z=0;z<O.length;z++){const w=O[z];if(!A[w.if])continue;if(!w.basisFormat.includes(U))continue;if(D&&w.transcoderFormat.length<2)continue;if(w.needsPowerOfTwo&&!(Z(F)&&Z(W)))continue;return V=w.transcoderFormat[D?1:0],R=w.engineFormat[D?1:0],{transcoderFormat:V,engineFormat:R}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),V=I.RGBA32,R=C.RGBAFormat,{transcoderFormat:V,engineFormat:R}}function Z(U){if(U<=2)return!0;return(U&U-1)===0&&U!==0}function X(U){if(U.length===1)return U[0];let F=0;for(let V=0;V<U.length;V++){const R=U[V];F+=R.byteLength}const W=new Uint8Array(F);let D=0;for(let V=0;V<U.length;V++){const R=U[V];W.set(R,D),D+=R.byteLength}return W}};var cL=new Set([o0,g8,j8]),rI={[uI]:o0,[fI]:o0,[yI]:o0,[xI]:o0,[pI]:g8,[vI]:g8,[jI]:g8,[gI]:g8,[bI]:j8,[hI]:j8,[TI]:j8,[SI]:j8,[dI]:SC,[mI]:SC},tI={[uI]:a1,[fI]:E1,[yI]:Z1,[xI]:Z1,[pI]:a1,[vI]:E1,[jI]:Z1,[gI]:Z1,[bI]:a1,[hI]:E1,[TI]:Z1,[SI]:Z1,[dI]:Z1,[mI]:Z1};var DZ,RZ,z2=Symbol("retainerCount"),X4=Symbol("recentlyUsed"),FQ=Symbol("evict"),T3=Symbol("evictionThreshold"),eI=Symbol("cache");class AE{constructor(A,Q=5){this[DZ]=new Map,this[RZ]=[],this[eI]=A,this[T3]=Q}set evictionThreshold(A){this[T3]=A,this[FQ]()}get evictionThreshold(){return this[T3]}get cache(){return this[eI]}retainerCount(A){return this[z2].get(A)||0}reset(){this[z2].clear(),this[X4]=[]}retain(A){if(!this[z2].has(A))this[z2].set(A,0);this[z2].set(A,this[z2].get(A)+1);const Q=this[X4].indexOf(A);if(Q!==-1)this[X4].splice(Q,1);this[X4].unshift(A),this[FQ]()}release(A){if(this[z2].has(A))this[z2].set(A,Math.max(this[z2].get(A)-1,0));this[FQ]()}[(DZ=z2,RZ=X4,FQ)](){if(this[X4].length<this[T3])return;for(let A=this[X4].length-1;A>=this[T3];--A){const Q=this[X4][A];if(this[z2].get(Q)===0)this[eI].delete(Q),this[X4].splice(A,1)}}}var sL=(A)=>{const Q=[],B=new Set;for(let C of A){let I=C,E=0;while(B.has(I))I=C+"."+ ++E;B.add(I),Q.push(I)}return Q},nL=(A)=>{const Q=new Map;for(let B of A.mappings)for(let C of B.variants)Q.set(C,{material:null,gltfMaterialIndex:B.material});return Q};class WQ{constructor(A){this.parser=A,this.name="KHR_materials_variants"}afterRoot(A){const Q=this.parser,B=Q.json;if(B.extensions===void 0||B.extensions[this.name]===void 0)return null;const I=B.extensions[this.name].variants||[],E=sL(I.map((K)=>K.name));for(let K of A.scenes)K.traverse((J)=>{const q=J;if(!q.material)return;const G=Q.associations.get(q);if(G==null||G.meshes==null||G.primitives==null)return;const X=B.meshes[G.meshes].primitives[G.primitives].extensions;if(!X||!X[this.name])return;q.userData.variantMaterials=nL(X[this.name])});return A.userData.variants=E,Promise.resolve()}}var zZ,VZ;Z0.DEFAULT_ANISOTROPY=4;var oL=(A,Q,B=()=>{})=>{const C=(I)=>{const E=I.loaded/I.total;B(Math.max(0,Math.min(1,isFinite(E)?E:1)))};return new Promise((I,E)=>{Q.load(A,I,C,E)})},iL=(A)=>{return new Promise((Q,B)=>{const C=document.createElement("script");document.body.appendChild(C),C.onload=Q,C.onerror=B,C.async=!0,C.src=A})},F4=new Map,QE=new Map,NZ,wZ=new RI,OZ,BE=new L2,CE,IE,l4=Symbol("loader"),W4=Symbol("evictionPolicy"),LZ=Symbol("GLTFInstance");class d0 extends K1{constructor(A){super();this[VZ]=new kI().register((Q)=>new WQ(Q)),this[LZ]=A,this[l4].setDRACOLoader(wZ),this[l4].setKTX2Loader(BE)}static setDRACODecoderLocation(A){NZ=A,wZ.setDecoderPath(A)}static getDRACODecoderLocation(){return NZ}static setKTX2TranscoderLocation(A){OZ=A,BE.setTranscoderPath(A)}static getKTX2TranscoderLocation(){return OZ}static setMeshoptDecoderLocation(A){if(CE!==A)CE=A,IE=iL(A).then(()=>MeshoptDecoder.ready).then(()=>MeshoptDecoder)}static getMeshoptDecoderLocation(){return CE}static initializeKTX2Loader(A){BE.detectSupport(A)}static get cache(){return F4}static clearCache(){F4.forEach((A,Q)=>{this.delete(Q)}),this[W4].reset()}static has(A){return F4.has(A)}static async delete(A){if(!this.has(A))return;const Q=F4.get(A);QE.delete(A),F4.delete(A),(await Q).dispose()}static hasFinishedLoading(A){return!!QE.get(A)}get[(zZ=W4,VZ=l4,W4)](){return this.constructor[W4]}async preload(A,Q,B=()=>{}){if(this[l4].setWithCredentials(d0.withCredentials),this.dispatchEvent({type:"preload",element:Q,src:A}),!F4.has(A)){if(IE!=null)this[l4].setMeshoptDecoder(await IE);const C=oL(A,this[l4],(K)=>{B(K*0.8)}),I=this[LZ],E=C.then((K)=>{return I.prepare(K)}).then((K)=>{return B(0.9),new I(K)}).catch((K)=>{return console.error(K),new I});F4.set(A,E)}if(await F4.get(A),QE.set(A,!0),B)B(1)}async load(A,Q,B=()=>{}){await this.preload(A,Q,B);const I=await(await F4.get(A)).clone();return this[W4].retain(A),I.dispose=()=>{this[W4].release(A)},I}}d0[zZ]=new AE(d0);class EE extends F0{constructor(A=document.createElement("div")){super();this.isCSS2DObject=!0,this.element=A,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new DA(0.5,0.5),this.addEventListener("removed",function(){this.traverse(function(Q){if(Q.element instanceof Element&&Q.element.parentNode!==null)Q.element.parentNode.removeChild(Q.element)})})}copy(A,Q){return super.copy(A,Q),this.element=A.element.cloneNode(!0),this.center=A.center,this}}var c8=new P,kZ=new zA,MZ=new zA,$Z=new P,_Z=new P;class KE{constructor(A={}){const Q=this;let B,C,I,E;const K={objects:new WeakMap},J=A.element!==void 0?A.element:document.createElement("div");J.style.overflow="hidden",this.domElement=J,this.getSize=function(){return{width:B,height:C}},this.render=function(Z,X){if(Z.matrixWorldAutoUpdate===!0)Z.updateMatrixWorld();if(X.parent===null&&X.matrixWorldAutoUpdate===!0)X.updateMatrixWorld();kZ.copy(X.matrixWorldInverse),MZ.multiplyMatrices(X.projectionMatrix,kZ),q(Z,Z,X),H(Z)},this.setSize=function(Z,X){B=Z,C=X,I=B/2,E=C/2,J.style.width=Z+"px",J.style.height=X+"px"};function q(Z,X,U){if(Z.isCSS2DObject){c8.setFromMatrixPosition(Z.matrixWorld),c8.applyMatrix4(MZ);const F=Z.visible===!0&&(c8.z>=-1&&c8.z<=1)&&Z.layers.test(U.layers)===!0;if(Z.element.style.display=F===!0?"":"none",F===!0){Z.onBeforeRender(Q,X,U);const D=Z.element;if(D.style.transform="translate("+-100*Z.center.x+"%,"+-100*Z.center.y+"%)translate("+(c8.x*I+I)+"px,"+(-c8.y*E+E)+"px)",D.parentNode!==J)J.appendChild(D);Z.onAfterRender(Q,X,U)}const W={distanceToCameraSquared:G(U,Z)};K.objects.set(Z,W)}for(let F=0,W=Z.children.length;F<W;F++)q(Z.children[F],X,U)}function G(Z,X){return $Z.setFromMatrixPosition(Z.matrixWorld),_Z.setFromMatrixPosition(X.matrixWorld),$Z.distanceToSquared(_Z)}function Y(Z){const X=[];return Z.traverse(function(U){if(U.isCSS2DObject)X.push(U)}),X}function H(Z){const X=Y(Z).sort(function(F,W){if(F.renderOrder!==W.renderOrder)return W.renderOrder-F.renderOrder;const D=K.objects.get(F).distanceToCameraSquared,V=K.objects.get(W).distanceToCameraSquared;return D-V}),U=X.length;for(let F=0,W=X.length;F<W;F++)X[F].element.style.zIndex=U-F}}}var j3=function(A,Q,B){let C=B;const I=new P;return A.updateWorldMatrix(!0,!0),A.traverseVisible((E)=>{const{geometry:K}=E;if(K!==void 0){const{position:J}=K.attributes;if(J!==void 0)for(let q=0,G=J.count;q<G;q++){if(E.isMesh)E.getVertexPosition(q,I);else I.fromBufferAttribute(J,q);if(!E.isSkinnedMesh)I.applyMatrix4(E.matrixWorld);C=Q(C,I)}}}),C};function s8(A,Q=Infinity,B=null){if(!JE)JE=new q1(2,2,1,1);if(!l8)l8=new l0({uniforms:{blitTexture:new BQ(A)},vertexShader:`
			varying vec2 vUv;
			void main(){
				vUv = uv;
				gl_Position = vec4(position.xy * 1.0,0.,.999999);
			}`,fragmentShader:`
			uniform sampler2D blitTexture; 
			varying vec2 vUv;

			void main(){ 
				gl_FragColor = vec4(vUv.xy, 0, 1);
				
				#ifdef IS_SRGB
				gl_FragColor = LinearTosRGB( texture2D( blitTexture, vUv) );
				#else
				gl_FragColor = texture2D( blitTexture, vUv);
				#endif
			}`});if(l8.uniforms.blitTexture.value=A,l8.defines.IS_SRGB=A.colorSpace==$0,l8.needsUpdate=!0,!UQ)UQ=new nA(JE,l8),UQ.frustrumCulled=!1;const C=new P0,I=new a0;if(I.add(UQ),B===null)B=g3=new b2({antialias:!1});const E=Math.min(A.image.width,Q),K=Math.min(A.image.height,Q);B.setSize(E,K),B.clear(),B.render(I,C);const J=document.createElement("canvas"),q=J.getContext("2d");J.width=E,J.height=K,q.drawImage(B.domElement,0,0,E,K);const G=new h8(J);if(G.minFilter=A.minFilter,G.magFilter=A.magFilter,G.wrapS=A.wrapS,G.wrapT=A.wrapT,G.name=A.name,g3)g3.forceContextLoss(),g3.dispose(),g3=null;return G}var g3,JE,l8,UQ;var y3=function(A,Q){return A.length===Q.length&&A.every(function(B,C){return B===Q[C]})},Qz=function(A){return(new TextEncoder()).encode(A).buffer},Bz=function(A){return y3(A.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},Cz=function(A,Q,B){const C={min:new Array(A.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(A.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let I=Q;I<Q+B;I++)for(let E=0;E<A.itemSize;E++){let K;if(A.itemSize>4)K=A.array[I*A.itemSize+E];else{if(E===0)K=A.getX(I);else if(E===1)K=A.getY(I);else if(E===2)K=A.getZ(I);else if(E===3)K=A.getW(I);if(A.normalized===!0)K=v4.normalize(K,A.array)}C.min[E]=Math.min(C.min[E],K),C.max[E]=Math.max(C.max[E],K)}return C},xZ=function(A){return Math.ceil(A/4)*4},GE=function(A,Q=0){const B=xZ(A.byteLength);if(B!==A.byteLength){const C=new Uint8Array(B);if(C.set(new Uint8Array(A)),Q!==0)for(let I=A.byteLength;I<B;I++)C[I]=Q;return C.buffer}return A},gZ=function(){if(typeof document==="undefined"&&typeof OffscreenCanvas!=="undefined")return new OffscreenCanvas(1,1);return document.createElement("canvas")},yZ=function(A,Q){if(A.toBlob!==void 0)return new Promise((C)=>A.toBlob(C,Q));let B;if(Q==="image/jpeg")B=0.92;else if(Q==="image/webp")B=0.8;return A.convertToBlob({type:Q,quality:B})},PZ={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class x3{constructor(){this.pluginCallbacks=[],this.register(function(A){return new vZ(A)}),this.register(function(A){return new fZ(A)}),this.register(function(A){return new uZ(A)}),this.register(function(A){return new mZ(A)}),this.register(function(A){return new dZ(A)}),this.register(function(A){return new cZ(A)}),this.register(function(A){return new bZ(A)}),this.register(function(A){return new pZ(A)}),this.register(function(A){return new lZ(A)}),this.register(function(A){return new sZ(A)}),this.register(function(A){return new nZ(A)}),this.register(function(A){return new oZ(A)}),this.register(function(A){return new iZ(A)})}register(A){if(this.pluginCallbacks.indexOf(A)===-1)this.pluginCallbacks.push(A);return this}unregister(A){if(this.pluginCallbacks.indexOf(A)!==-1)this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(A),1);return this}parse(A,Q,B,C){const I=new hZ,E=[];for(let K=0,J=this.pluginCallbacks.length;K<J;K++)E.push(this.pluginCallbacks[K](I));I.setPlugins(E),I.write(A,Q,C).catch(B)}parseAsync(A,Q){const B=this;return new Promise(function(C,I){B.parse(A,C,I,Q)})}}var q0={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},qE="KHR_mesh_quantization",r1={};r1[v2]=q0.NEAREST;r1[w6]=q0.NEAREST_MIPMAP_NEAREST;r1[O6]=q0.NEAREST_MIPMAP_LINEAR;r1[g0]=q0.LINEAR;r1[L6]=q0.LINEAR_MIPMAP_NEAREST;r1[f2]=q0.LINEAR_MIPMAP_LINEAR;r1[H1]=q0.CLAMP_TO_EDGE;r1[E2]=q0.REPEAT;r1[N6]=q0.MIRRORED_REPEAT;var SZ={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},aL=new PA,TZ=12,rL=1179937895,tL=2,jZ=8,eL=1313821514,Az=5130562;class hZ{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(A){this.plugins=A}async write(A,Q,B={}){if(this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:Infinity,animations:[],includeCustomExtensions:!1},B),this.options.animations.length>0)this.options.trs=!0;this.processInput(A),await Promise.all(this.pending);const C=this,I=C.buffers,E=C.json;B=C.options;const{extensionsUsed:K,extensionsRequired:J}=C,q=new Blob(I,{type:"application/octet-stream"}),G=Object.keys(K),Y=Object.keys(J);if(G.length>0)E.extensionsUsed=G;if(Y.length>0)E.extensionsRequired=Y;if(E.buffers&&E.buffers.length>0)E.buffers[0].byteLength=q.size;if(B.binary===!0){const H=new FileReader;H.readAsArrayBuffer(q),H.onloadend=function(){const Z=GE(H.result),X=new DataView(new ArrayBuffer(jZ));X.setUint32(0,Z.byteLength,!0),X.setUint32(4,Az,!0);const U=GE(Qz(JSON.stringify(E)),32),F=new DataView(new ArrayBuffer(jZ));F.setUint32(0,U.byteLength,!0),F.setUint32(4,eL,!0);const W=new ArrayBuffer(TZ),D=new DataView(W);D.setUint32(0,rL,!0),D.setUint32(4,tL,!0);const V=TZ+F.byteLength+U.byteLength+X.byteLength+Z.byteLength;D.setUint32(8,V,!0);const R=new Blob([W,F,U,X,Z],{type:"application/octet-stream"}),O=new FileReader;O.readAsArrayBuffer(R),O.onloadend=function(){Q(O.result)}}}else if(E.buffers&&E.buffers.length>0){const H=new FileReader;H.readAsDataURL(q),H.onloadend=function(){const Z=H.result;E.buffers[0].uri=Z,Q(E)}}else Q(E)}serializeUserData(A,Q){if(Object.keys(A.userData).length===0)return;const B=this.options,C=this.extensionsUsed;try{const I=JSON.parse(JSON.stringify(A.userData));if(B.includeCustomExtensions&&I.gltfExtensions){if(Q.extensions===void 0)Q.extensions={};for(let E in I.gltfExtensions)Q.extensions[E]=I.gltfExtensions[E],C[E]=!0;delete I.gltfExtensions}if(Object.keys(I).length>0)Q.extras=I}catch(I){console.warn("THREE.GLTFExporter: userData of \'"+A.name+"\' won\'t be serialized because of JSON.stringify error - "+I.message)}}getUID(A,Q=!1){if(this.uids.has(A)===!1){const C=new Map;C.set(!0,this.uid++),C.set(!1,this.uid++),this.uids.set(A,C)}return this.uids.get(A).get(Q)}isNormalizedNormalAttribute(A){if(this.cache.attributesNormalized.has(A))return!1;const B=new P;for(let C=0,I=A.count;C<I;C++)if(Math.abs(B.fromBufferAttribute(A,C).length()-1)>0.0005)return!1;return!0}createNormalizedNormalAttribute(A){const Q=this.cache;if(Q.attributesNormalized.has(A))return Q.attributesNormalized.get(A);const B=A.clone(),C=new P;for(let I=0,E=B.count;I<E;I++){if(C.fromBufferAttribute(B,I),C.x===0&&C.y===0&&C.z===0)C.setX(1);else C.normalize();B.setXYZ(I,C.x,C.y,C.z)}return Q.attributesNormalized.set(A,B),B}applyTextureTransform(A,Q){let B=!1;const C={};if(Q.offset.x!==0||Q.offset.y!==0)C.offset=Q.offset.toArray(),B=!0;if(Q.rotation!==0)C.rotation=Q.rotation,B=!0;if(Q.repeat.x!==1||Q.repeat.y!==1)C.scale=Q.repeat.toArray(),B=!0;if(B)A.extensions=A.extensions||{},A.extensions.KHR_texture_transform=C,this.extensionsUsed.KHR_texture_transform=!0}buildMetalRoughTexture(A,Q){if(A===Q)return A;function B(Z){if(Z.colorSpace===$0)return function X(U){return U<0.04045?U*0.0773993808:Math.pow(U*0.9478672986+0.0521327014,2.4)};return function X(U){return U}}if(console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),A instanceof p2)A=s8(A);if(Q instanceof p2)Q=s8(Q);const C=A?A.image:null,I=Q?Q.image:null,E=Math.max(C?C.width:0,I?I.width:0),K=Math.max(C?C.height:0,I?I.height:0),J=gZ();J.width=E,J.height=K;const q=J.getContext("2d");q.fillStyle="#00ffff",q.fillRect(0,0,E,K);const G=q.getImageData(0,0,E,K);if(C){q.drawImage(C,0,0,E,K);const Z=B(A),X=q.getImageData(0,0,E,K).data;for(let U=2;U<X.length;U+=4)G.data[U]=Z(X[U]/256)*256}if(I){q.drawImage(I,0,0,E,K);const Z=B(Q),X=q.getImageData(0,0,E,K).data;for(let U=1;U<X.length;U+=4)G.data[U]=Z(X[U]/256)*256}q.putImageData(G,0,0);const H=(A||Q).clone();if(H.source=new X3(J),H.colorSpace=z6,H.channel=(A||Q).channel,A&&Q&&A.channel!==Q.channel)console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match.");return H}processBuffer(A){const Q=this.json,B=this.buffers;if(!Q.buffers)Q.buffers=[{byteLength:0}];return B.push(A),0}processBufferView(A,Q,B,C,I){const E=this.json;if(!E.bufferViews)E.bufferViews=[];let K;switch(Q){case q0.BYTE:case q0.UNSIGNED_BYTE:K=1;break;case q0.SHORT:case q0.UNSIGNED_SHORT:K=2;break;default:K=4}const J=xZ(C*A.itemSize*K),q=new DataView(new ArrayBuffer(J));let G=0;for(let Z=B;Z<B+C;Z++)for(let X=0;X<A.itemSize;X++){let U;if(A.itemSize>4)U=A.array[Z*A.itemSize+X];else{if(X===0)U=A.getX(Z);else if(X===1)U=A.getY(Z);else if(X===2)U=A.getZ(Z);else if(X===3)U=A.getW(Z);if(A.normalized===!0)U=v4.normalize(U,A.array)}if(Q===q0.FLOAT)q.setFloat32(G,U,!0);else if(Q===q0.INT)q.setInt32(G,U,!0);else if(Q===q0.UNSIGNED_INT)q.setUint32(G,U,!0);else if(Q===q0.SHORT)q.setInt16(G,U,!0);else if(Q===q0.UNSIGNED_SHORT)q.setUint16(G,U,!0);else if(Q===q0.BYTE)q.setInt8(G,U);else if(Q===q0.UNSIGNED_BYTE)q.setUint8(G,U);G+=K}const Y={buffer:this.processBuffer(q.buffer),byteOffset:this.byteOffset,byteLength:J};if(I!==void 0)Y.target=I;if(I===q0.ARRAY_BUFFER)Y.byteStride=A.itemSize*K;return this.byteOffset+=J,E.bufferViews.push(Y),{id:E.bufferViews.length-1,byteLength:0}}processBufferViewImage(A){const Q=this,B=Q.json;if(!B.bufferViews)B.bufferViews=[];return new Promise(function(C){const I=new FileReader;I.readAsArrayBuffer(A),I.onloadend=function(){const E=GE(I.result),K={buffer:Q.processBuffer(E),byteOffset:Q.byteOffset,byteLength:E.byteLength};Q.byteOffset+=E.byteLength,C(B.bufferViews.push(K)-1)}})}processAccessor(A,Q,B,C){const I=this.json,E={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"};let K;if(A.array.constructor===Float32Array)K=q0.FLOAT;else if(A.array.constructor===Int32Array)K=q0.INT;else if(A.array.constructor===Uint32Array)K=q0.UNSIGNED_INT;else if(A.array.constructor===Int16Array)K=q0.SHORT;else if(A.array.constructor===Uint16Array)K=q0.UNSIGNED_SHORT;else if(A.array.constructor===Int8Array)K=q0.BYTE;else if(A.array.constructor===Uint8Array)K=q0.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+A.array.constructor.name);if(B===void 0)B=0;if(C===void 0||C===Infinity)C=A.count;if(C===0)return null;const J=Cz(A,B,C);let q;if(Q!==void 0)q=A===Q.index?q0.ELEMENT_ARRAY_BUFFER:q0.ARRAY_BUFFER;const G=this.processBufferView(A,K,B,C,q),Y={bufferView:G.id,byteOffset:G.byteOffset,componentType:K,count:C,max:J.max,min:J.min,type:E[A.itemSize]};if(A.normalized===!0)Y.normalized=!0;if(!I.accessors)I.accessors=[];return I.accessors.push(Y)-1}processImage(A,Q,B,C="image/png"){if(A!==null){const I=this,E=I.cache,K=I.json,J=I.options,q=I.pending;if(!E.images.has(A))E.images.set(A,{});const G=E.images.get(A),Y=C+":flipY/"+B.toString();if(G[Y]!==void 0)return G[Y];if(!K.images)K.images=[];const H={mimeType:C},Z=gZ();Z.width=Math.min(A.width,J.maxTextureSize),Z.height=Math.min(A.height,J.maxTextureSize);const X=Z.getContext("2d");if(B===!0)X.translate(0,Z.height),X.scale(1,-1);if(A.data!==void 0){if(Q!==o0)console.error("GLTFExporter: Only RGBAFormat is supported.",Q);if(A.width>J.maxTextureSize||A.height>J.maxTextureSize)console.warn("GLTFExporter: Image size is bigger than maxTextureSize",A);const F=new Uint8ClampedArray(A.height*A.width*4);for(let W=0;W<F.length;W+=4)F[W+0]=A.data[W+0],F[W+1]=A.data[W+1],F[W+2]=A.data[W+2],F[W+3]=A.data[W+3];X.putImageData(new ImageData(F,A.width,A.height),0,0)}else if(typeof HTMLImageElement!=="undefined"&&A instanceof HTMLImageElement||typeof HTMLCanvasElement!=="undefined"&&A instanceof HTMLCanvasElement||typeof ImageBitmap!=="undefined"&&A instanceof ImageBitmap)X.drawImage(A,0,0,Z.width,Z.height);else throw new Error("THREE.GLTFExporter: Invalid image type. Use HTMLImageElement, HTMLCanvasElement or ImageBitmap.");if(J.binary===!0)q.push(yZ(Z,C).then((F)=>I.processBufferViewImage(F)).then((F)=>{H.bufferView=F}));else if(Z.toDataURL!==void 0)H.uri=Z.toDataURL(C);else q.push(yZ(Z,C).then((F)=>new FileReader().readAsDataURL(F)).then((F)=>{H.uri=F}));const U=K.images.push(H)-1;return G[Y]=U,U}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(A){const Q=this.json;if(!Q.samplers)Q.samplers=[];const B={magFilter:r1[A.magFilter],minFilter:r1[A.minFilter],wrapS:r1[A.wrapS],wrapT:r1[A.wrapT]};return Q.samplers.push(B)-1}processTexture(A){const B=this.options,C=this.cache,I=this.json;if(C.textures.has(A))return C.textures.get(A);if(!I.textures)I.textures=[];if(A instanceof p2)A=s8(A,B.maxTextureSize);let E=A.userData.mimeType;if(E==="image/webp")E="image/png";const K={sampler:this.processSampler(A),source:this.processImage(A.image,A.format,A.flipY,E)};if(A.name)K.name=A.name;this._invokeAll(function(q){q.writeTexture&&q.writeTexture(A,K)});const J=I.textures.push(K)-1;return C.textures.set(A,J),J}processMaterial(A){const Q=this.cache,B=this.json;if(Q.materials.has(A))return Q.materials.get(A);if(A.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;if(!B.materials)B.materials=[];const C={pbrMetallicRoughness:{}};if(A.isMeshStandardMaterial!==!0&&A.isMeshBasicMaterial!==!0)console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const I=A.color.toArray().concat([A.opacity]);if(!y3(I,[1,1,1,1]))C.pbrMetallicRoughness.baseColorFactor=I;if(A.isMeshStandardMaterial)C.pbrMetallicRoughness.metallicFactor=A.metalness,C.pbrMetallicRoughness.roughnessFactor=A.roughness;else C.pbrMetallicRoughness.metallicFactor=0.5,C.pbrMetallicRoughness.roughnessFactor=0.5;if(A.metalnessMap||A.roughnessMap){const K=this.buildMetalRoughTexture(A.metalnessMap,A.roughnessMap),J={index:this.processTexture(K),channel:K.channel};this.applyTextureTransform(J,K),C.pbrMetallicRoughness.metallicRoughnessTexture=J}if(A.map){const K={index:this.processTexture(A.map),texCoord:A.map.channel};this.applyTextureTransform(K,A.map),C.pbrMetallicRoughness.baseColorTexture=K}if(A.emissive){const K=A.emissive;if(Math.max(K.r,K.g,K.b)>0)C.emissiveFactor=A.emissive.toArray();if(A.emissiveMap){const q={index:this.processTexture(A.emissiveMap),texCoord:A.emissiveMap.channel};this.applyTextureTransform(q,A.emissiveMap),C.emissiveTexture=q}}if(A.normalMap){const K={index:this.processTexture(A.normalMap),texCoord:A.normalMap.channel};if(A.normalScale&&A.normalScale.x!==1)K.scale=A.normalScale.x;this.applyTextureTransform(K,A.normalMap),C.normalTexture=K}if(A.aoMap){const K={index:this.processTexture(A.aoMap),texCoord:A.aoMap.channel};if(A.aoMapIntensity!==1)K.strength=A.aoMapIntensity;this.applyTextureTransform(K,A.aoMap),C.occlusionTexture=K}if(A.transparent)C.alphaMode="BLEND";else if(A.alphaTest>0)C.alphaMode="MASK",C.alphaCutoff=A.alphaTest;if(A.side===I2)C.doubleSided=!0;if(A.name!=="")C.name=A.name;this.serializeUserData(A,C),this._invokeAll(function(K){K.writeMaterial&&K.writeMaterial(A,C)});const E=B.materials.push(C)-1;return Q.materials.set(A,E),E}processMesh(A){const Q=this.cache,B=this.json,C=[A.geometry.uuid];if(Array.isArray(A.material))for(let R=0,O=A.material.length;R<O;R++)C.push(A.material[R].uuid);else C.push(A.material.uuid);const I=C.join(":");if(Q.meshes.has(I))return Q.meshes.get(I);const E=A.geometry;let K;if(A.isLineSegments)K=q0.LINES;else if(A.isLineLoop)K=q0.LINE_LOOP;else if(A.isLine)K=q0.LINE_STRIP;else if(A.isPoints)K=q0.POINTS;else K=A.material.wireframe?q0.LINES:q0.TRIANGLES;const J={},q={},G=[],Y=[],H={uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},Z=E.getAttribute("normal");if(Z!==void 0&&!this.isNormalizedNormalAttribute(Z))console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),E.setAttribute("normal",this.createNormalizedNormalAttribute(Z));let X=null;for(let R in E.attributes){if(R.slice(0,5)==="morph")continue;const O=E.attributes[R];if(R=H[R]||R.toUpperCase(),!/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(R))R="_"+R;if(Q.attributes.has(this.getUID(O))){q[R]=Q.attributes.get(this.getUID(O));continue}X=null;const w=O.array;if(R==="JOINTS_0"&&!(w instanceof Uint16Array)&&!(w instanceof Uint8Array))console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),X=new V0(new Uint16Array(w),O.itemSize,O.normalized);const k=this.processAccessor(X||O,E);if(k!==null){if(!R.startsWith("_"))this.detectMeshQuantization(R,O);q[R]=k,Q.attributes.set(this.getUID(O),k)}}if(Z!==void 0)E.setAttribute("normal",Z);if(Object.keys(q).length===0)return null;if(A.morphTargetInfluences!==void 0&&A.morphTargetInfluences.length>0){const R=[],O=[],z={};if(A.morphTargetDictionary!==void 0)for(let w in A.morphTargetDictionary)z[A.morphTargetDictionary[w]]=w;for(let w=0;w<A.morphTargetInfluences.length;++w){const k={};let j=!1;for(let h in E.morphAttributes){if(h!=="position"&&h!=="normal"){if(!j)console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),j=!0;continue}const N=E.morphAttributes[h][w],$=h.toUpperCase(),p=E.attributes[h];if(Q.attributes.has(this.getUID(N,!0))){k[$]=Q.attributes.get(this.getUID(N,!0));continue}const n=N.clone();if(!E.morphTargetsRelative)for(let S=0,v=N.count;S<v;S++)for(let f=0;f<N.itemSize;f++){if(f===0)n.setX(S,N.getX(S)-p.getX(S));if(f===1)n.setY(S,N.getY(S)-p.getY(S));if(f===2)n.setZ(S,N.getZ(S)-p.getZ(S));if(f===3)n.setW(S,N.getW(S)-p.getW(S))}k[$]=this.processAccessor(n,E),Q.attributes.set(this.getUID(p,!0),k[$])}if(Y.push(k),R.push(A.morphTargetInfluences[w]),A.morphTargetDictionary!==void 0)O.push(z[w])}if(J.weights=R,O.length>0)J.extras={},J.extras.targetNames=O}const U=Array.isArray(A.material);if(U&&E.groups.length===0)return null;let F=!1;if(U&&E.index===null){const R=[];for(let O=0,z=E.attributes.position.count;O<z;O++)R[O]=O;E.setIndex(R),F=!0}const W=U?A.material:[A.material],D=U?E.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let R=0,O=D.length;R<O;R++){const z={mode:K,attributes:q};if(this.serializeUserData(E,z),Y.length>0)z.targets=Y;if(E.index!==null){let k=this.getUID(E.index);if(D[R].start!==void 0||D[R].count!==void 0)k+=":"+D[R].start+":"+D[R].count;if(Q.attributes.has(k))z.indices=Q.attributes.get(k);else z.indices=this.processAccessor(E.index,E,D[R].start,D[R].count),Q.attributes.set(k,z.indices);if(z.indices===null)delete z.indices}const w=this.processMaterial(W[D[R].materialIndex]);if(w!==null)z.material=w;G.push(z)}if(F===!0)E.setIndex(null);if(J.primitives=G,!B.meshes)B.meshes=[];this._invokeAll(function(R){R.writeMesh&&R.writeMesh(A,J)});const V=B.meshes.push(J)-1;return Q.meshes.set(I,V),V}detectMeshQuantization(A,Q){if(this.extensionsUsed[qE])return;let B=void 0;switch(Q.array.constructor){case Int8Array:B="byte";break;case Uint8Array:B="unsigned byte";break;case Int16Array:B="short";break;case Uint16Array:B="unsigned short";break;default:return}if(Q.normalized)B+=" normalized";const C=A.split("_",1)[0];if(PZ[C]&&PZ[C].includes(B))this.extensionsUsed[qE]=!0,this.extensionsRequired[qE]=!0}processCamera(A){const Q=this.json;if(!Q.cameras)Q.cameras=[];const B=A.isOrthographicCamera,C={type:B?"orthographic":"perspective"};if(B)C.orthographic={xmag:A.right*2,ymag:A.top*2,zfar:A.far<=0?0.001:A.far,znear:A.near<0?0:A.near};else C.perspective={aspectRatio:A.aspect,yfov:v4.degToRad(A.fov),zfar:A.far<=0?0.001:A.far,znear:A.near<0?0:A.near};if(A.name!=="")C.name=A.type;return Q.cameras.push(C)-1}processAnimation(A,Q){const B=this.json,C=this.nodeMap;if(!B.animations)B.animations=[];A=x3.Utils.mergeMorphTargetTracks(A.clone(),Q);const I=A.tracks,E=[],K=[];for(let J=0;J<I.length;++J){const q=I[J],G=K0.parseTrackName(q.name);let Y=K0.findNode(Q,G.nodeName);const H=SZ[G.propertyName];if(G.objectName==="bones")if(Y.isSkinnedMesh===!0)Y=Y.skeleton.getBoneByName(G.objectIndex);else Y=void 0;if(!Y||!H)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',q.name),null;const Z=1;let X=q.values.length/q.times.length;if(H===SZ.morphTargetInfluences)X/=Y.morphTargetInfluences.length;let U;if(q.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0)U="CUBICSPLINE",X/=3;else if(q.getInterpolation()===p9)U="STEP";else U="LINEAR";K.push({input:this.processAccessor(new V0(q.times,Z)),output:this.processAccessor(new V0(q.values,X)),interpolation:U}),E.push({sampler:K.length-1,target:{node:C.get(Y),path:H}})}return B.animations.push({name:A.name||"clip_"+B.animations.length,samplers:K,channels:E}),B.animations.length-1}processSkin(A){const Q=this.json,B=this.nodeMap,C=Q.nodes[B.get(A)],I=A.skeleton;if(I===void 0)return null;const E=A.skeleton.bones[0];if(E===void 0)return null;const K=[],J=new Float32Array(I.bones.length*16),q=new zA;for(let Y=0;Y<I.bones.length;++Y)K.push(B.get(I.bones[Y])),q.copy(I.boneInverses[Y]),q.multiply(A.bindMatrix).toArray(J,Y*16);if(Q.skins===void 0)Q.skins=[];return Q.skins.push({inverseBindMatrices:this.processAccessor(new V0(J,16)),joints:K,skeleton:B.get(E)}),C.skin=Q.skins.length-1}processNode(A){const Q=this.json,B=this.options,C=this.nodeMap;if(!Q.nodes)Q.nodes=[];const I={};if(B.trs){const K=A.quaternion.toArray(),J=A.position.toArray(),q=A.scale.toArray();if(!y3(K,[0,0,0,1]))I.rotation=K;if(!y3(J,[0,0,0]))I.translation=J;if(!y3(q,[1,1,1]))I.scale=q}else{if(A.matrixAutoUpdate)A.updateMatrix();if(Bz(A.matrix)===!1)I.matrix=A.matrix.elements}if(A.name!=="")I.name=String(A.name);if(this.serializeUserData(A,I),A.isMesh||A.isLine||A.isPoints){const K=this.processMesh(A);if(K!==null)I.mesh=K}else if(A.isCamera)I.camera=this.processCamera(A);if(A.isSkinnedMesh)this.skins.push(A);if(A.children.length>0){const K=[];for(let J=0,q=A.children.length;J<q;J++){const G=A.children[J];if(G.visible||B.onlyVisible===!1){const Y=this.processNode(G);if(Y!==null)K.push(Y)}}if(K.length>0)I.children=K}this._invokeAll(function(K){K.writeNode&&K.writeNode(A,I)});const E=Q.nodes.push(I)-1;return C.set(A,E),E}processScene(A){const Q=this.json,B=this.options;if(!Q.scenes)Q.scenes=[],Q.scene=0;const C={};if(A.name!=="")C.name=A.name;Q.scenes.push(C);const I=[];for(let E=0,K=A.children.length;E<K;E++){const J=A.children[E];if(J.visible||B.onlyVisible===!1){const q=this.processNode(J);if(q!==null)I.push(q)}}if(I.length>0)C.nodes=I;this.serializeUserData(A,C)}processObjects(A){const Q=new a0;Q.name="AuxScene";for(let B=0;B<A.length;B++)Q.children.push(A[B]);this.processScene(Q)}processInput(A){const Q=this.options;A=A instanceof Array?A:[A],this._invokeAll(function(C){C.beforeParse&&C.beforeParse(A)});const B=[];for(let C=0;C<A.length;C++)if(A[C]instanceof a0)this.processScene(A[C]);else B.push(A[C]);if(B.length>0)this.processObjects(B);for(let C=0;C<this.skins.length;++C)this.processSkin(this.skins[C]);for(let C=0;C<Q.animations.length;++C)this.processAnimation(Q.animations[C],A[0]);this._invokeAll(function(C){C.afterParse&&C.afterParse(A)})}_invokeAll(A){for(let Q=0,B=this.plugins.length;Q<B;Q++)A(this.plugins[Q])}}class vZ{constructor(A){this.writer=A,this.name="KHR_lights_punctual"}writeNode(A,Q){if(!A.isLight)return;if(!A.isDirectionalLight&&!A.isPointLight&&!A.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",A);return}const B=this.writer,C=B.json,I=B.extensionsUsed,E={};if(A.name)E.name=A.name;if(E.color=A.color.toArray(),E.intensity=A.intensity,A.isDirectionalLight)E.type="directional";else if(A.isPointLight){if(E.type="point",A.distance>0)E.range=A.distance}else if(A.isSpotLight){if(E.type="spot",A.distance>0)E.range=A.distance;E.spot={},E.spot.innerConeAngle=(1-A.penumbra)*A.angle,E.spot.outerConeAngle=A.angle}if(A.decay!==void 0&&A.decay!==2)console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2.");if(A.target&&(A.target.parent!==A||A.target.position.x!==0||A.target.position.y!==0||A.target.position.z!==-1))console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1.");if(!I[this.name])C.extensions=C.extensions||{},C.extensions[this.name]={lights:[]},I[this.name]=!0;const K=C.extensions[this.name].lights;K.push(E),Q.extensions=Q.extensions||{},Q.extensions[this.name]={light:K.length-1}}}class fZ{constructor(A){this.writer=A,this.name="KHR_materials_unlit"}writeMaterial(A,Q){if(!A.isMeshBasicMaterial)return;const C=this.writer.extensionsUsed;Q.extensions=Q.extensions||{},Q.extensions[this.name]={},C[this.name]=!0,Q.pbrMetallicRoughness.metallicFactor=0,Q.pbrMetallicRoughness.roughnessFactor=0.9}}class bZ{constructor(A){this.writer=A,this.name="KHR_materials_clearcoat"}writeMaterial(A,Q){if(!A.isMeshPhysicalMaterial||A.clearcoat===0)return;const B=this.writer,C=B.extensionsUsed,I={};if(I.clearcoatFactor=A.clearcoat,A.clearcoatMap){const E={index:B.processTexture(A.clearcoatMap),texCoord:A.clearcoatMap.channel};B.applyTextureTransform(E,A.clearcoatMap),I.clearcoatTexture=E}if(I.clearcoatRoughnessFactor=A.clearcoatRoughness,A.clearcoatRoughnessMap){const E={index:B.processTexture(A.clearcoatRoughnessMap),texCoord:A.clearcoatRoughnessMap.channel};B.applyTextureTransform(E,A.clearcoatRoughnessMap),I.clearcoatRoughnessTexture=E}if(A.clearcoatNormalMap){const E={index:B.processTexture(A.clearcoatNormalMap),texCoord:A.clearcoatNormalMap.channel};B.applyTextureTransform(E,A.clearcoatNormalMap),I.clearcoatNormalTexture=E}Q.extensions=Q.extensions||{},Q.extensions[this.name]=I,C[this.name]=!0}}class pZ{constructor(A){this.writer=A,this.name="KHR_materials_iridescence"}writeMaterial(A,Q){if(!A.isMeshPhysicalMaterial||A.iridescence===0)return;const B=this.writer,C=B.extensionsUsed,I={};if(I.iridescenceFactor=A.iridescence,A.iridescenceMap){const E={index:B.processTexture(A.iridescenceMap),texCoord:A.iridescenceMap.channel};B.applyTextureTransform(E,A.iridescenceMap),I.iridescenceTexture=E}if(I.iridescenceIor=A.iridescenceIOR,I.iridescenceThicknessMinimum=A.iridescenceThicknessRange[0],I.iridescenceThicknessMaximum=A.iridescenceThicknessRange[1],A.iridescenceThicknessMap){const E={index:B.processTexture(A.iridescenceThicknessMap),texCoord:A.iridescenceThicknessMap.channel};B.applyTextureTransform(E,A.iridescenceThicknessMap),I.iridescenceThicknessTexture=E}Q.extensions=Q.extensions||{},Q.extensions[this.name]=I,C[this.name]=!0}}class uZ{constructor(A){this.writer=A,this.name="KHR_materials_transmission"}writeMaterial(A,Q){if(!A.isMeshPhysicalMaterial||A.transmission===0)return;const B=this.writer,C=B.extensionsUsed,I={};if(I.transmissionFactor=A.transmission,A.transmissionMap){const E={index:B.processTexture(A.transmissionMap),texCoord:A.transmissionMap.channel};B.applyTextureTransform(E,A.transmissionMap),I.transmissionTexture=E}Q.extensions=Q.extensions||{},Q.extensions[this.name]=I,C[this.name]=!0}}class mZ{constructor(A){this.writer=A,this.name="KHR_materials_volume"}writeMaterial(A,Q){if(!A.isMeshPhysicalMaterial||A.transmission===0)return;const B=this.writer,C=B.extensionsUsed,I={};if(I.thicknessFactor=A.thickness,A.thicknessMap){const E={index:B.processTexture(A.thicknessMap),texCoord:A.thicknessMap.channel};B.applyTextureTransform(E,A.thicknessMap),I.thicknessTexture=E}I.attenuationDistance=A.attenuationDistance,I.attenuationColor=A.attenuationColor.toArray(),Q.extensions=Q.extensions||{},Q.extensions[this.name]=I,C[this.name]=!0}}class dZ{constructor(A){this.writer=A,this.name="KHR_materials_ior"}writeMaterial(A,Q){if(!A.isMeshPhysicalMaterial||A.ior===1.5)return;const C=this.writer.extensionsUsed,I={};I.ior=A.ior,Q.extensions=Q.extensions||{},Q.extensions[this.name]=I,C[this.name]=!0}}class cZ{constructor(A){this.writer=A,this.name="KHR_materials_specular"}writeMaterial(A,Q){if(!A.isMeshPhysicalMaterial||A.specularIntensity===1&&A.specularColor.equals(aL)&&!A.specularIntensityMap&&!A.specularColorMap)return;const B=this.writer,C=B.extensionsUsed,I={};if(A.specularIntensityMap){const E={index:B.processTexture(A.specularIntensityMap),texCoord:A.specularIntensityMap.channel};B.applyTextureTransform(E,A.specularIntensityMap),I.specularTexture=E}if(A.specularColorMap){const E={index:B.processTexture(A.specularColorMap),texCoord:A.specularColorMap.channel};B.applyTextureTransform(E,A.specularColorMap),I.specularColorTexture=E}I.specularFactor=A.specularIntensity,I.specularColorFactor=A.specularColor.toArray(),Q.extensions=Q.extensions||{},Q.extensions[this.name]=I,C[this.name]=!0}}class lZ{constructor(A){this.writer=A,this.name="KHR_materials_sheen"}writeMaterial(A,Q){if(!A.isMeshPhysicalMaterial||A.sheen==0)return;const B=this.writer,C=B.extensionsUsed,I={};if(A.sheenRoughnessMap){const E={index:B.processTexture(A.sheenRoughnessMap),texCoord:A.sheenRoughnessMap.channel};B.applyTextureTransform(E,A.sheenRoughnessMap),I.sheenRoughnessTexture=E}if(A.sheenColorMap){const E={index:B.processTexture(A.sheenColorMap),texCoord:A.sheenColorMap.channel};B.applyTextureTransform(E,A.sheenColorMap),I.sheenColorTexture=E}I.sheenRoughnessFactor=A.sheenRoughness,I.sheenColorFactor=A.sheenColor.toArray(),Q.extensions=Q.extensions||{},Q.extensions[this.name]=I,C[this.name]=!0}}class sZ{constructor(A){this.writer=A,this.name="KHR_materials_anisotropy"}writeMaterial(A,Q){if(!A.isMeshPhysicalMaterial||A.anisotropy==0)return;const B=this.writer,C=B.extensionsUsed,I={};if(A.anisotropyMap){const E={index:B.processTexture(A.anisotropyMap)};B.applyTextureTransform(E,A.anisotropyMap),I.anisotropyTexture=E}I.anisotropyStrength=A.anisotropy,I.anisotropyRotation=A.anisotropyRotation,Q.extensions=Q.extensions||{},Q.extensions[this.name]=I,C[this.name]=!0}}class nZ{constructor(A){this.writer=A,this.name="KHR_materials_emissive_strength"}writeMaterial(A,Q){if(!A.isMeshStandardMaterial||A.emissiveIntensity===1)return;const C=this.writer.extensionsUsed,I={};I.emissiveStrength=A.emissiveIntensity,Q.extensions=Q.extensions||{},Q.extensions[this.name]=I,C[this.name]=!0}}class oZ{constructor(A){this.writer=A,this.name="EXT_materials_bump"}writeMaterial(A,Q){if(!A.isMeshStandardMaterial||A.bumpScale===1&&!A.bumpMap)return;const B=this.writer,C=B.extensionsUsed,I={};if(A.bumpMap){const E={index:B.processTexture(A.bumpMap),texCoord:A.bumpMap.channel};B.applyTextureTransform(E,A.bumpMap),I.bumpTexture=E}I.bumpFactor=A.bumpScale,Q.extensions=Q.extensions||{},Q.extensions[this.name]=I,C[this.name]=!0}}class iZ{constructor(A){this.writer=A,this.name="EXT_mesh_gpu_instancing"}writeNode(A,Q){if(!A.isInstancedMesh)return;const B=this.writer,C=A,I=new Float32Array(C.count*3),E=new Float32Array(C.count*4),K=new Float32Array(C.count*3),J=new zA,q=new P,G=new v0,Y=new P;for(let Z=0;Z<C.count;Z++)C.getMatrixAt(Z,J),J.decompose(q,G,Y),q.toArray(I,Z*3),G.toArray(E,Z*4),Y.toArray(K,Z*3);const H={TRANSLATION:B.processAccessor(new V0(I,3)),ROTATION:B.processAccessor(new V0(E,4)),SCALE:B.processAccessor(new V0(K,3))};if(C.instanceColor)H._COLOR_0=B.processAccessor(C.instanceColor);Q.extensions=Q.extensions||{},Q.extensions[this.name]={attributes:H},B.extensionsUsed[this.name]=!0,B.extensionsRequired[this.name]=!0}}x3.Utils={insertKeyframe:function(A,Q){const C=A.getValueSize(),I=new A.TimeBufferType(A.times.length+1),E=new A.ValueBufferType(A.values.length+C),K=A.createInterpolant(new A.ValueBufferType(C));let J;if(A.times.length===0){I[0]=Q;for(let q=0;q<C;q++)E[q]=0;J=0}else if(Q<A.times[0]){if(Math.abs(A.times[0]-Q)<0.001)return 0;I[0]=Q,I.set(A.times,1),E.set(K.evaluate(Q),0),E.set(A.values,C),J=0}else if(Q>A.times[A.times.length-1]){if(Math.abs(A.times[A.times.length-1]-Q)<0.001)return A.times.length-1;I[I.length-1]=Q,I.set(A.times,0),E.set(A.values,0),E.set(K.evaluate(Q),A.values.length),J=I.length-1}else for(let q=0;q<A.times.length;q++){if(Math.abs(A.times[q]-Q)<0.001)return q;if(A.times[q]<Q&&A.times[q+1]>Q){I.set(A.times.slice(0,q+1),0),I[q+1]=Q,I.set(A.times.slice(q+1),q+2),E.set(A.values.slice(0,(q+1)*C),0),E.set(K.evaluate(Q),(q+1)*C),E.set(A.values.slice((q+1)*C),(q+2)*C),J=q+1;break}}return A.times=I,A.values=E,J},mergeMorphTargetTracks:function(A,Q){const B=[],C={},I=A.tracks;for(let E=0;E<I.length;++E){let K=I[E];const J=K0.parseTrackName(K.name),q=K0.findNode(Q,J.nodeName);if(J.propertyName!=="morphTargetInfluences"||J.propertyIndex===void 0){B.push(K);continue}if(K.createInterpolant!==K.InterpolantFactoryMethodDiscrete&&K.createInterpolant!==K.InterpolantFactoryMethodLinear){if(K.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),K=K.clone(),K.setInterpolation(H3)}const G=q.morphTargetInfluences.length,Y=q.morphTargetDictionary[J.propertyIndex];if(Y===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+J.propertyIndex);let H;if(C[q.uuid]===void 0){H=K.clone();const X=new H.ValueBufferType(G*H.times.length);for(let U=0;U<H.times.length;U++)X[U*G+Y]=H.values[U];H.name=(J.nodeName||"")+".morphTargetInfluences",H.values=X,C[q.uuid]=H,B.push(H);continue}const Z=K.createInterpolant(new K.ValueBufferType(1));H=C[q.uuid];for(let X=0;X<H.times.length;X++)H.values[X*G+Y]=Z.evaluate(H.times[X]);for(let X=0;X<K.times.length;X++){const U=this.insertKeyframe(H,K.times[X]);H.values[U*G+Y]=K.values[X]}}return A.tracks=B,A}};var aZ=(A)=>{return A.material!==void 0&&A.userData&&A.userData.variantMaterials&&!!Array.from(A.userData.variantMaterials.values()).filter((Q)=>DQ(Q.material))},DQ=(A)=>{return A&&A.isMaterial&&!Array.isArray(A)};class RQ{constructor(A){this.writer=A,this.name="KHR_materials_variants",this.variantNames=[]}beforeParse(A){const Q=new Set;for(let B of A)B.traverse((C)=>{if(!aZ(C))return;const I=C.userData.variantMaterials,E=C.userData.variantData;for(let[K,J]of E){const q=I.get(J.index);if(q&&DQ(q.material))Q.add(K)}});Q.forEach((B)=>this.variantNames.push(B))}writeMesh(A,Q){if(!aZ(A))return;const B=A.userData,C=B.variantMaterials,I=B.variantData,E=new Map,K=new Map,J=Array.from(I.values()).sort((Y,H)=>{return Y.index-H.index});for(let[Y,H]of J.entries())K.set(H.index,Y);for(let Y of I.values()){const H=C.get(Y.index);if(!H||!DQ(H.material))continue;const Z=this.writer.processMaterial(H.material);if(!E.has(Z))E.set(Z,{material:Z,variants:[]});E.get(Z).variants.push(K.get(Y.index))}const q=Array.from(E.values()).map((Y)=>{return Y.variants.sort((H,Z)=>H-Z)&&Y}).sort((Y,H)=>Y.material-H.material);if(q.length===0)return;const G=DQ(B.originalMaterial)?this.writer.processMaterial(B.originalMaterial):-1;for(let Y of Q.primitives){if(G>=0)Y.material=G;Y.extensions=Y.extensions||{},Y.extensions[this.name]={mappings:q}}}afterParse(){if(this.variantNames.length===0)return;const A=this.writer.json;A.extensions=A.extensions||{};const Q=this.variantNames.map((B)=>{return{name:B}});A.extensions[this.name]={variants:Q},this.writer.extensionsUsed[this.name]=!0}}class rZ{constructor(A,Q,B,C,I){this.xrLight=A,this.renderer=Q,this.lightProbe=B,this.xrWebGLBinding=null,this.estimationStartCallback=I,this.frameCallback=this.onXRFrame.bind(this);const E=Q.xr.getSession();if(C&&"XRWebGLBinding"in window){const K=new y8(16);A.environment=K.texture;const J=Q.getContext();switch(E.preferredReflectionFormat){case"srgba8":J.getExtension("EXT_sRGB");break;case"rgba16f":J.getExtension("OES_texture_half_float");break}this.xrWebGLBinding=new XRWebGLBinding(E,J),this.lightProbe.addEventListener("reflectionchange",()=>{this.updateReflection()})}E.requestAnimationFrame(this.frameCallback)}updateReflection(){const A=this.renderer.properties.get(this.xrLight.environment);if(A){const Q=this.xrWebGLBinding.getReflectionCubeMap(this.lightProbe);if(Q)A.__webglTexture=Q,this.xrLight.environment.needsPMREMUpdate=!0}}onXRFrame(A,Q){if(!this.xrLight)return;Q.session.requestAnimationFrame(this.frameCallback);const C=Q.getLightEstimate(this.lightProbe);if(C){this.xrLight.lightProbe.sh.fromArray(C.sphericalHarmonicsCoefficients),this.xrLight.lightProbe.intensity=1;const I=Math.max(1,Math.max(C.primaryLightIntensity.x,Math.max(C.primaryLightIntensity.y,C.primaryLightIntensity.z)));if(this.xrLight.directionalLight.color.setRGB(C.primaryLightIntensity.x/I,C.primaryLightIntensity.y/I,C.primaryLightIntensity.z/I),this.xrLight.directionalLight.intensity=I,this.xrLight.directionalLight.position.copy(C.primaryLightDirection),this.estimationStartCallback)this.estimationStartCallback(),this.estimationStartCallback=null}}dispose(){this.xrLight=null,this.renderer=null,this.lightProbe=null,this.xrWebGLBinding=null}}class YE extends C2{constructor(A,Q=!0){super();this.lightProbe=new rC,this.lightProbe.intensity=0,this.add(this.lightProbe),this.directionalLight=new w3,this.directionalLight.intensity=0,this.add(this.directionalLight),this.environment=null;let B=null,C=!1;A.xr.addEventListener("sessionstart",()=>{const I=A.xr.getSession();if("requestLightProbe"in I)I.requestLightProbe({reflectionFormat:I.preferredReflectionFormat}).then((E)=>{B=new rZ(this,A,E,Q,()=>{C=!0,this.dispatchEvent({type:"estimationstart"})})})}),A.xr.addEventListener("sessionend",()=>{if(B)B.dispose(),B=null;if(C)this.dispatchEvent({type:"estimationend"})}),this.dispose=()=>{if(B)B.dispose(),B=null;this.remove(this.lightProbe),this.lightProbe=null,this.remove(this.directionalLight),this.directionalLight=null,this.environment=null}}}var VQ=1e4;var tZ=50;class Y1{constructor(A=50){this.velocity=0,this.naturalFrequency=0,this.setDecayTime(A)}setDecayTime(A){this.naturalFrequency=1/Math.max(0.001,A)}update(A,Q,B,C){const I=0.0002*this.naturalFrequency;if(A==null||C===0)return Q;if(A===Q&&this.velocity===0)return Q;if(B<0)return A;const E=A-Q,K=this.velocity+this.naturalFrequency*E,J=E+B*K,q=Math.exp(-this.naturalFrequency*B),G=(K-this.naturalFrequency*J)*q,Y=-this.naturalFrequency*(G+K*q);if(Math.abs(G)<I*Math.abs(C)&&Y*E>=0)return this.velocity=0,Q;else return this.velocity=G,Q+J*q}}var n8=0.2,eZ=0.03,Iz=0.75,QX=12,Ez=Math.PI/(2*QX),AX=new DA,NQ=(A,Q,B)=>{let C=Q>0?B>0?0:-Math.PI/2:B>0?Math.PI/2:Math.PI;for(let I=0;I<=QX;++I)A.push(Q+(n8-eZ)*Math.cos(C),B+(n8-eZ)*Math.sin(C),0,Q+n8*Math.cos(C),B+n8*Math.sin(C),0),C+=Ez};class wQ extends nA{constructor(A,Q){const B=new J1,C=[],I=[],{size:E,boundingBox:K}=A,J=E.x/2,q=(Q==="back"?E.y:E.z)/2;NQ(I,J,q),NQ(I,-J,q),NQ(I,-J,-q),NQ(I,J,-q);const G=I.length/3;for(let Z=0;Z<G-2;Z+=2)C.push(Z,Z+1,Z+3,Z,Z+3,Z+2);const Y=G-2;C.push(Y,Y+1,1,Y,1,0),B.setAttribute("position",new V1(I,3)),B.setIndex(C);super(B);this.side=Q;const H=this.material;switch(H.side=I2,H.transparent=!0,H.opacity=0,this.goalOpacity=0,this.opacityDamper=new Y1,this.hitPlane=new nA(new q1(2*(J+n8),2*(q+n8))),this.hitPlane.visible=!1,this.hitPlane.material.side=I2,this.add(this.hitPlane),K.getCenter(this.position),Q){case"bottom":this.rotateX(-Math.PI/2),this.shadowHeight=K.min.y,this.position.y=this.shadowHeight;break;case"back":this.shadowHeight=K.min.z,this.position.z=this.shadowHeight}A.target.add(this),this.offsetHeight=0}getHit(A,Q,B){AX.set(Q,-B),this.hitPlane.visible=!0;const C=A.positionAndNormalFromPoint(AX,this.hitPlane);return this.hitPlane.visible=!1,C==null?null:C.position}getExpandedHit(A,Q,B){this.hitPlane.scale.set(1000,1000,1000),this.hitPlane.updateMatrixWorld();const C=this.getHit(A,Q,B);return this.hitPlane.scale.set(1,1,1),C}set offsetHeight(A){if(A-=0.001,this.side==="back")this.position.z=this.shadowHeight+A;else this.position.y=this.shadowHeight+A}get offsetHeight(){if(this.side==="back")return this.position.z-this.shadowHeight;else return this.position.y-this.shadowHeight}set show(A){this.goalOpacity=A?Iz:0}updateOpacity(A){const Q=this.material;Q.opacity=this.opacityDamper.update(Q.opacity,this.goalOpacity,A,1),this.visible=Q.opacity>0}dispose(){var A;const{geometry:Q,material:B}=this.hitPlane;Q.dispose(),B.dispose(),this.geometry.dispose(),this.material.dispose(),(A=this.parent)===null||A===void 0||A.remove(this)}}var r0=(A,Q)=>({type:"number",number:A,unit:Q}),d1=(()=>{const A={};return(B)=>{const C=B;if(C in A)return A[C];const I=[];let E=0;while(B){if(++E>1000){B="";break}const K=IX(B),J=K.nodes[0];if(J==null||J.terms.length===0)break;I.push(J),B=K.remainingInput}return A[C]=I}})(),IX=(()=>{const A=/^(\-\-|[a-z\u0240-\uffff])/i,Q=/^([\*\+\/]|[\-]\s)/i,B=/^[\),]/;return(E)=>{const K=[];while(E.length)if(E=E.trim(),B.test(E))break;else if(E[0]==="("){const{nodes:J,remainingInput:q}=BX(E);E=q,K.push({type:"function",name:{type:"ident",value:"calc"},arguments:J})}else if(A.test(E)){const J=Kz(E),q=J.nodes[0];if(E=J.remainingInput,E[0]==="("){const{nodes:G,remainingInput:Y}=BX(E);K.push({type:"function",name:q,arguments:G}),E=Y}else K.push(q)}else if(Q.test(E))K.push({type:"operator",value:E[0]}),E=E.slice(1);else{const{nodes:J,remainingInput:q}=E[0]==="#"?qz(E):Jz(E);if(J.length===0)break;K.push(J[0]),E=q}return{nodes:[{type:"expression",terms:K}],remainingInput:E}}})(),Kz=(()=>{const A=/[^a-z0-9_\-\u0240-\uffff]/i;return(Q)=>{const B=Q.match(A),C=B==null?Q:Q.substr(0,B.index),I=B==null?"":Q.substr(B.index);return{nodes:[{type:"ident",value:C}],remainingInput:I}}})(),Jz=(()=>{const A=/[\+\-]?(\d+[\.]\d+|\d+|[\.]\d+)([eE][\+\-]?\d+)?/,Q=/^[a-z%]+/i,B=/^(m|mm|cm|rad|deg|[%])$/;return(C)=>{const I=C.match(A),E=I==null?"0":I[0];C=E==null?C:C.slice(E.length);const K=C.match(Q);let J=K!=null&&K[0]!==""?K[0]:null;const q=K==null?C:C.slice(J.length);if(J!=null&&!B.test(J))J=null;return{nodes:[{type:"number",number:parseFloat(E)||0,unit:J}],remainingInput:q}}})(),qz=(()=>{const A=/^[a-f0-9]*/i;return(Q)=>{Q=Q.slice(1).trim();const B=Q.match(A);return{nodes:B==null?[]:[{type:"hex",value:B[0]}],remainingInput:B==null?Q:Q.slice(B[0].length)}}})(),BX=(A)=>{const Q=[];A=A.slice(1).trim();while(A.length){const B=IX(A);if(Q.push(B.nodes[0]),A=B.remainingInput.trim(),A[0]===",")A=A.slice(1).trim();else if(A[0]===")"){A=A.slice(1);break}}return{nodes:Q,remainingInput:A}},CX=Symbol("visitedTypes");class HE{constructor(A){this[CX]=A}walk(A,Q){const B=A.slice();while(B.length){const C=B.shift();if(this[CX].indexOf(C.type)>-1)Q(C);switch(C.type){case"expression":B.unshift(...C.terms);break;case"function":B.unshift(C.name,...C.arguments);break}}}}var c2=Object.freeze({type:"number",number:0,unit:null});var o8=(A,Q=0)=>{let{number:B,unit:C}=A;if(!isFinite(B))B=Q,C="rad";else if(A.unit==="rad"||A.unit==null)return A;return{type:"number",number:(C==="deg"&&B!=null?B:0)*Math.PI/180,unit:"rad"}};var EX=(A,Q=0)=>{let{number:B,unit:C}=A;if(!isFinite(B))B=Q,C="m";else if(A.unit==="m")return A;let I;switch(C){default:I=1;break;case"cm":I=0.01;break;case"mm":I=0.001;break}return{type:"number",number:I*B,unit:"m"}},c1=(()=>{const A=(B)=>B,Q={rad:A,deg:o8,m:A,mm:EX,cm:EX};return(B,C=c2)=>{if(!isFinite(B.number))B.number=C.number,B.unit=C.unit;const{unit:I}=B;if(I==null)return B;const E=Q[I];if(E==null)return C;return E(B)}})();var HX,KX,JX,a8=Symbol("evaluate"),LQ=Symbol("lastValue");class y0{constructor(){this[HX]=null}static evaluatableFor(A,Q=c2){if(A instanceof y0)return A;if(A.type==="number"){if(A.unit==="%")return new ZX(A,Q);return A}switch(A.name.value){case"calc":return new FX(A,Q);case"env":return new XX(A)}return c2}static evaluate(A){if(A instanceof y0)return A.evaluate();return A}static isConstant(A){if(A instanceof y0)return A.isConstant;return!0}static applyIntrinsics(A,Q){const{basis:B,keywords:C}=Q,{auto:I}=C;return B.map((E,K)=>{const J=I[K]==null?E:I[K];let q=A[K]?A[K]:J;if(q.type==="ident"){const G=q.value;if(G in C)q=C[G][K]}if(q==null||q.type==="ident")q=J;if(q.unit==="%")return r0(q.number/100*E.number,E.unit);if(q=c1(q,E),q.unit!==E.unit)return E;return q})}get isConstant(){return!1}evaluate(){if(!this.isConstant||this[LQ]==null)this[LQ]=this[a8]();return this[LQ]}}HX=LQ;var qX=Symbol("percentage"),ZE=Symbol("basis");class ZX extends y0{constructor(A,Q){super();this[qX]=A,this[ZE]=Q}get isConstant(){return!0}[a8](){return r0(this[qX].number/100*this[ZE].number,this[ZE].unit)}}var OQ=Symbol("identNode");class XX extends y0{constructor(A){super();this[KX]=null;const Q=A.arguments.length?A.arguments[0].terms[0]:null;if(Q!=null&&Q.type==="ident")this[OQ]=Q}get isConstant(){return!1}[(KX=OQ,a8)](){if(this[OQ]!=null)switch(this[OQ].value){case"window-scroll-y":const A=window.pageYOffset,Q=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight);return{type:"number",number:A/(Q-window.innerHeight)||0,unit:null}}return c2}}var Gz=/[\*\/]/,i8=Symbol("evaluator");class FX extends y0{constructor(A,Q=c2){super();if(this[JX]=null,A.arguments.length!==1)return;const B=A.arguments[0].terms.slice(),C=[];while(B.length){const I=B.shift();if(C.length>0){const E=C[C.length-1];if(E.type==="operator"&&Gz.test(E.value)){const K=C.pop(),J=C.pop();if(J==null)return;C.push(new UE(K,y0.evaluatableFor(J,Q),y0.evaluatableFor(I,Q)));continue}}C.push(I.type==="operator"?I:y0.evaluatableFor(I,Q))}while(C.length>2){const[I,E,K]=C.splice(0,3);if(E.type!=="operator")return;C.unshift(new UE(E,y0.evaluatableFor(I,Q),y0.evaluatableFor(K,Q)))}if(C.length===1)this[i8]=C[0]}get isConstant(){return this[i8]==null||y0.isConstant(this[i8])}[(JX=i8,a8)](){return this[i8]!=null?y0.evaluate(this[i8]):c2}}var GX=Symbol("operator"),XE=Symbol("left"),FE=Symbol("right");class UE extends y0{constructor(A,Q,B){super();this[GX]=A,this[XE]=Q,this[FE]=B}get isConstant(){return y0.isConstant(this[XE])&&y0.isConstant(this[FE])}[a8](){const A=c1(y0.evaluate(this[XE])),Q=c1(y0.evaluate(this[FE])),{number:B,unit:C}=A,{number:I,unit:E}=Q;if(E!=null&&C!=null&&E!=C)return c2;const K=C||E;let J;switch(this[GX].value){case"+":J=B+I;break;case"-":J=B-I;break;case"/":J=B/I;break;case"*":J=B*I;break;default:return c2}return{type:"number",number:J,unit:K}}}var WE=Symbol("evaluatables"),YX=Symbol("intrinsics");class h3 extends y0{constructor(A,Q){super();this[YX]=Q;const B=A[0],C=B!=null?B.terms:[];this[WE]=Q.basis.map((I,E)=>{const K=C[E];if(K==null)return{type:"ident",value:"auto"};if(K.type==="ident")return K;return y0.evaluatableFor(K,I)})}get isConstant(){for(let A of this[WE])if(!y0.isConstant(A))return!1;return!0}[a8](){const A=this[WE].map((Q)=>y0.evaluate(Q));return y0.applyIntrinsics(A,this[YX]).map((Q)=>Q.number)}}var NX,wX,OX,LX,r8=Symbol("instances"),WX=Symbol("activateListener"),UX=Symbol("deactivateListener"),DE=Symbol("notifyInstances"),DX=Symbol("notify"),RX=Symbol("callback");class l2{constructor(A){this[RX]=A}static[DE](){for(let A of l2[r8])A[DX]()}static[(NX=r8,WX)](){window.addEventListener("scroll",this[DE],{passive:!0})}static[UX](){window.removeEventListener("scroll",this[DE])}observe(){if(l2[r8].size===0)l2[WX]();l2[r8].add(this)}disconnect(){if(l2[r8].delete(this),l2[r8].size===0)l2[UX]()}[DX](){this[RX]()}}l2[NX]=new Set;var VX=Symbol("computeStyleCallback"),zX=Symbol("astWalker"),v3=Symbol("dependencies"),kX=Symbol("onScroll");class RE{constructor(A){this[wX]={},this[OX]=new HE(["function"]),this[LX]=()=>{this[VX]({relatedState:"window-scroll"})},this[VX]=A}observeEffectsFor(A){const Q={},B=this[v3];this[zX].walk(A,(C)=>{const{name:I}=C,K=C.arguments[0].terms[0];if(I.value!=="env"||K==null||K.type!=="ident")return;switch(K.value){case"window-scroll-y":if(Q["window-scroll"]==null){const J="window-scroll"in B?B["window-scroll"]:new l2(this[kX]);J.observe(),delete B["window-scroll"],Q["window-scroll"]=J}break}});for(let C in B)B[C].disconnect();this[v3]=Q}dispose(){for(let A in this[v3])this[v3][A].disconnect()}}wX=v3,OX=zX,LX=kX;var s2=(A)=>{const Q=A.observeEffects||!1,B=A.intrinsics instanceof Function?A.intrinsics:()=>A.intrinsics;return(C,I)=>{const{updated:E,connectedCallback:K,disconnectedCallback:J}=C,q=Symbol(`${I}StyleEffector`),G=Symbol(`${I}StyleEvaluator`),Y=Symbol(`${I}UpdateEvaluator`),H=Symbol(`${I}EvaluateAndSync`);Object.defineProperties(C,{[q]:{value:null,writable:!0},[G]:{value:null,writable:!0},[Y]:{value:function(){const Z=d1(this[I]);if(this[G]=new h3(Z,B(this)),this[q]==null&&Q)this[q]=new RE(()=>this[H]());if(this[q]!=null)this[q].observeEffectsFor(Z)}},[H]:{value:function(){if(this[G]==null)return;const Z=this[G].evaluate();this[A.updateHandler](Z)}},updated:{value:function(Z){if(Z.has(I))this[Y](),this[H]();E.call(this,Z)}},connectedCallback:{value:function(){K.call(this),this.requestUpdate(I,this[I])}},disconnectedCallback:{value:function(){if(J.call(this),this[q]!=null)this[q].dispose(),this[q]=null}}})}};var MX=(A)=>A<0.5?2*A*A:-1+(4-2*A)*A,Yz=(A,Q,B=MX)=>(C)=>A+(Q-A)*B(C),Hz=(A,Q)=>{const B=(I)=>(E)=>I+=E,C=Q.map(B(0));return(I)=>{I=L1(I,0,1),I*=C[C.length-1];const E=C.findIndex((q)=>q>=I),K=E<1?0:C[E-1],J=C[E];return A[E]((I-K)/(J-K))}},h6=(A)=>{const Q=[],B=[];let C=A.initialValue;for(let I=0;I<A.keyframes.length;++I){const E=A.keyframes[I],{value:K,frames:J}=E,q=E.ease||MX,G=Yz(C,K,q);Q.push(G),B.push(J),C=K}return Hz(Q,B)};var t0=function(A,Q,B,C){var I=arguments.length,E=I<3?Q:C===null?C=Object.getOwnPropertyDescriptor(Q,B):C,K;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")E=Reflect.decorate(A,Q,B,C);else for(var J=A.length-1;J>=0;J--)if(K=A[J])E=(I<3?K(E):I>3?K(Q,B,E):K(Q,B))||E;return I>3&&E&&Object.defineProperty(Q,B,E),E},Zz=5000,Xz=h6({initialValue:0,keyframes:[{frames:5,value:-1},{frames:1,value:-1},{frames:8,value:1},{frames:1,value:1},{frames:5,value:0},{frames:18,value:0}]}),Fz=h6({initialValue:0,keyframes:[{frames:1,value:1},{frames:5,value:1},{frames:1,value:0},{frames:6,value:0}]}),Wz=30,Uz=12,vX="0deg 75deg 105%",Dz="auto auto auto",Rz="auto",Vz=2.2,Nz=["front","right","back","left"],wz=["upper-","","lower-"],Oz=3000,Lz=". Use mouse, touch or arrow keys to move.",zQ={AUTO:"auto",NONE:"none"},VE={BASIC:"basic",WIGGLE:"wiggle"},zz={PAN_Y:"pan-y",PAN_X:"pan-x",NONE:"none"},$X=()=>{return{basis:[o8(r0(Wz,"deg"))],keywords:{auto:[null]}}},kz=()=>{return{basis:[o8(r0(Uz,"deg"))],keywords:{auto:[null]}}},fX=(()=>{const A=d1(vX)[0].terms,Q=c1(A[0]),B=c1(A[1]);return(C)=>{const I=C[EA].idealCameraDistance();return{basis:[Q,B,r0(I,"m")],keywords:{auto:[null,null,r0(105,"%")]}}}})(),Mz=(A)=>{const Q=Vz*A[EA].boundingSphere.radius;return{basis:[r0((-Infinity),"rad"),r0(Math.PI/8,"rad"),r0(Q,"m")],keywords:{auto:[null,null,null]}}},$z=(A)=>{const Q=fX(A),C=new h3([],Q).evaluate()[2];return{basis:[r0(Infinity,"rad"),r0(Math.PI-Math.PI/8,"rad"),r0(C,"m")],keywords:{auto:[null,null,null]}}},_z=(A)=>{const Q=A[EA].boundingBox.getCenter(new P);return{basis:[r0(Q.x,"m"),r0(Q.y,"m"),r0(Q.z,"m")],keywords:{auto:[null,null,null]}}},bX=Math.PI/2,Pz=Math.PI/3,Sz=bX/2,Tz=2*Math.PI,w0=Symbol("controls"),m3=Symbol("panElement"),NE=Symbol("promptElement"),kQ=Symbol("promptAnimatedContainer"),wE=Symbol("fingerAnimatedContainers"),MQ=Symbol("deferInteractionPrompt"),_X=Symbol("updateAria"),PX=Symbol("updateCameraForRadius"),t8=Symbol("cancelPrompts"),OE=Symbol("onChange"),f3=Symbol("onPointerChange"),v6=Symbol("waitingToPromptUser"),$Q=Symbol("userHasInteracted"),e8=Symbol("promptElementVisibleTime"),b3=Symbol("lastPromptOffset"),_Q=Symbol("cancellationSource"),LE=Symbol("lastSpherical"),p3=Symbol("jumpCamera"),zE=Symbol("initialized"),u3=Symbol("maintainThetaPhi"),SX=Symbol("syncCameraOrbit"),TX=Symbol("syncFieldOfView"),jX=Symbol("syncCameraTarget"),gX=Symbol("syncMinCameraOrbit"),yX=Symbol("syncMaxCameraOrbit"),xX=Symbol("syncMinFieldOfView"),hX=Symbol("syncMaxFieldOfView"),pX=(A)=>{var Q,B,C,I,E,K,J,q,G,Y,H,Z,X,U,F,W,D;class V extends A{constructor(){super(...arguments);this.cameraControls=!1,this.cameraOrbit=vX,this.cameraTarget=Dz,this.fieldOfView=Rz,this.minCameraOrbit="auto",this.maxCameraOrbit="auto",this.minFieldOfView="auto",this.maxFieldOfView="auto",this.interactionPromptThreshold=Oz,this.interactionPrompt=zQ.AUTO,this.interactionPromptStyle=VE.WIGGLE,this.orbitSensitivity=1,this.zoomSensitivity=1,this.panSensitivity=1,this.touchAction=zz.NONE,this.disableZoom=!1,this.disablePan=!1,this.disableTap=!1,this.interpolationDecay=tZ,this[Q]=this.shadowRoot.querySelector(".interaction-prompt"),this[B]=this.shadowRoot.querySelector("#prompt"),this[C]=[this.shadowRoot.querySelector("#finger0"),this.shadowRoot.querySelector("#finger1")],this[I]=this.shadowRoot.querySelector(".pan-target"),this[E]=0,this[K]=Infinity,this[J]=!1,this[q]=!1,this[G]=S0.AUTOMATIC,this[Y]=new kE(this[EA].camera,this[J2],this[EA]),this[H]=new m2,this[Z]=!1,this[X]=!1,this[U]=!1,this[F]=()=>{const R=this[w0].changeSource;if(this[_Q]=R,R===S0.USER_INTERACTION)this[$Q]=!0,this[MQ]()},this[W]=()=>{this[_X](),this[p0]();const R=this[w0].changeSource;this.dispatchEvent(new CustomEvent("camera-change",{detail:{source:R}}))},this[D]=(R)=>{this[d3].classList.toggle("pointer-tumbling",R.type==="pointer-change-start")}}get inputSensitivity(){return this[w0].inputSensitivity}set inputSensitivity(R){this[w0].inputSensitivity=R}getCameraOrbit(){const{theta:R,phi:O,radius:z}=this[LE];return{theta:R,phi:O,radius:z,toString(){return`${this.theta}rad ${this.phi}rad ${this.radius}m`}}}getCameraTarget(){return $2(this[I0].isPresenting?this[I0].arRenderer.target:this[EA].getTarget())}getFieldOfView(){return this[w0].getFieldOfView()}getMinimumFieldOfView(){return this[w0].options.minimumFieldOfView}getMaximumFieldOfView(){return this[w0].options.maximumFieldOfView}getIdealAspect(){return this[EA].idealAspect}jumpCameraToGoal(){this[p3]=!0,this.requestUpdate(p3,!1)}resetInteractionPrompt(){this[b3]=0,this[e8]=Infinity,this[$Q]=!1,this[v6]=this.interactionPrompt===zQ.AUTO&&this.cameraControls}zoom(R){const O=new WheelEvent("wheel",{deltaY:-30*R});this[J2].dispatchEvent(O)}connectedCallback(){super.connectedCallback(),this[w0].addEventListener("user-interaction",this[t8]),this[w0].addEventListener("pointer-change-start",this[f3]),this[w0].addEventListener("pointer-change-end",this[f3])}disconnectedCallback(){super.disconnectedCallback(),this[w0].removeEventListener("user-interaction",this[t8]),this[w0].removeEventListener("pointer-change-start",this[f3]),this[w0].removeEventListener("pointer-change-end",this[f3])}updated(R){super.updated(R);const O=this[w0],z=this[EA];if(R.has("cameraControls")){if(this.cameraControls){if(O.enableInteraction(),this.interactionPrompt===zQ.AUTO)this[v6]=!0}else O.disableInteraction(),this[MQ]();this[J2].setAttribute("aria-label",this[A5])}if(R.has("disableZoom"))O.disableZoom=this.disableZoom;if(R.has("disablePan"))O.enablePan=!this.disablePan;if(R.has("disableTap"))O.enableTap=!this.disableTap;if(R.has("interactionPrompt")||R.has("cameraControls")||R.has("src"))if(this.interactionPrompt===zQ.AUTO&&this.cameraControls&&!this[$Q])this[v6]=!0;else this[MQ]();if(R.has("interactionPromptStyle"))this[kQ].style.opacity=this.interactionPromptStyle==VE.BASIC?"1":"0";if(R.has("touchAction")){const w=this.touchAction;O.applyOptions({touchAction:w}),O.updateTouchActionStyle()}if(R.has("orbitSensitivity"))O.orbitSensitivity=this.orbitSensitivity;if(R.has("zoomSensitivity"))O.zoomSensitivity=this.zoomSensitivity;if(R.has("panSensitivity"))O.panSensitivity=this.panSensitivity;if(R.has("interpolationDecay"))O.setDamperDecayTime(this.interpolationDecay),z.setTargetDamperDecayTime(this.interpolationDecay);if(this[p3]===!0)Promise.resolve().then(()=>{O.jumpToGoal(),z.jumpToGoal(),this[OE](),this[p3]=!1})}async updateFraming(){const R=this[EA],O=R.adjustedFoV(R.framedFoVDeg);await R.updateFraming();const z=R.adjustedFoV(R.framedFoVDeg),w=this[w0].getFieldOfView()/O;this[w0].setFieldOfView(z*w),this[u3]=!0,this.requestUpdate("maxFieldOfView"),this.requestUpdate("fieldOfView"),this.requestUpdate("minCameraOrbit"),this.requestUpdate("maxCameraOrbit"),this.requestUpdate("cameraOrbit"),await this.updateComplete}interact(R,O,z){const w=this[J2],k=this[wE];if(k[0].style.opacity==="1"){console.warn("interact() failed because an existing interaction is running.");return}const j=new Array;j.push({x:h6(O.x),y:h6(O.y)});const h=[{x:j[0].x(0),y:j[0].y(0)}];if(z!=null)j.push({x:h6(z.x),y:h6(z.y)}),h.push({x:j[1].x(0),y:j[1].y(0)});let N=performance.now();const{width:$,height:p}=this[EA],n=this.getBoundingClientRect(),S=(m)=>{for(let[b,l]of h.entries()){const{style:QA}=k[b];if(QA.transform=`translateX(${$*l.x}px) translateY(${p*l.y}px)`,m==="pointerdown")QA.opacity="1";else if(m==="pointerup")QA.opacity="0";const BA={pointerId:b-5678,pointerType:"touch",target:w,clientX:$*l.x+n.x,clientY:p*l.y+n.y,altKey:!0};w.dispatchEvent(new PointerEvent(m,BA))}},v=()=>{const m=this[_Q];if(m!==S0.AUTOMATIC||!w.isConnected){for(let l of this[wE])l.style.opacity="0";S("pointercancel"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:m}})),document.removeEventListener("visibilitychange",f);return}const b=Math.min(1,(performance.now()-N)/R);for(let[l,QA]of h.entries())QA.x=j[l].x(b),QA.y=j[l].y(b);if(S("pointermove"),b<1)requestAnimationFrame(v);else S("pointerup"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:S0.AUTOMATIC}})),document.removeEventListener("visibilitychange",f)},f=()=>{let m=0;if(document.visibilityState==="hidden")m=performance.now()-N;else N=performance.now()-m};document.addEventListener("visibilitychange",f),S("pointerdown"),this[_Q]=S0.AUTOMATIC,requestAnimationFrame(v)}[(Q=NE,B=kQ,C=wE,I=m3,E=b3,K=e8,J=$Q,q=v6,G=_Q,Y=w0,H=LE,Z=p3,X=zE,U=u3,TX)](R){const O=this[w0],z=this[EA];z.framedFoVDeg=R[0]*180/Math.PI,O.changeSource=S0.NONE,O.setFieldOfView(z.adjustedFoV(z.framedFoVDeg)),this[t8]()}[SX](R){const O=this[w0];if(this[u3]){const{theta:z,phi:w}=this.getCameraOrbit();R[0]=z,R[1]=w,this[u3]=!1}O.changeSource=S0.NONE,O.setOrbit(R[0],R[1],R[2]),this[t8]()}[gX](R){this[w0].applyOptions({minimumAzimuthalAngle:R[0],minimumPolarAngle:R[1],minimumRadius:R[2]}),this.jumpCameraToGoal()}[yX](R){this[w0].applyOptions({maximumAzimuthalAngle:R[0],maximumPolarAngle:R[1],maximumRadius:R[2]}),this[PX](R[2]),this.jumpCameraToGoal()}[xX](R){this[w0].applyOptions({minimumFieldOfView:R[0]*180/Math.PI}),this.jumpCameraToGoal()}[hX](R){const O=this[EA].adjustedFoV(R[0]*180/Math.PI);this[w0].applyOptions({maximumFieldOfView:O}),this.jumpCameraToGoal()}[jX](R){const[O,z,w]=R;if(!this[I0].arRenderer.isPresenting)this[EA].setTarget(O,z,w);this[w0].changeSource=S0.NONE,this[I0].arRenderer.updateTarget(),this[t8]()}[y1](R,O){if(super[y1](R,O),this[I0].isPresenting||!this[M2]())return;const z=this[w0],w=this[EA],k=performance.now();if(this[v6]){if(this.loaded&&k>this[Q5]+this.interactionPromptThreshold)this[v6]=!1,this[e8]=k,this[NE].classList.add("visible")}if(isFinite(this[e8])&&this.interactionPromptStyle===VE.WIGGLE){const N=(k-this[e8])/Zz%1,$=Xz(N),p=Fz(N);if(this[kQ].style.opacity=`${p}`,$!==this[b3]){const n=$*w.width*0.05,S=($-this[b3])*Math.PI/16;this[kQ].style.transform=`translateX(${n}px)`,z.changeSource=S0.AUTOMATIC,z.adjustOrbit(S,0,0),this[b3]=$}}const j=z.update(R,O),h=w.updateTarget(O);if(j||h)this[OE]()}[MQ](){this[v6]=!1,this[NE].classList.remove("visible"),this[e8]=Infinity}[PX](R){const O=Math.max(this[EA].farRadius(),R),w=Math.abs(2*O);this[w0].updateNearFar(0,w)}[_X](){const{theta:R,phi:O}=this[w0].getCameraSpherical(this[LE]),z=(4+Math.floor((R%Tz+Sz)/bX))%4,w=Math.floor(O/Pz),k=Nz[z],j=wz[w];this[PQ](`View from stage ${j}${k}`)}get[A5](){return super[A5].replace(/\.$/,"")+(this.cameraControls?Lz:"")}async[f6](R){const O=this[w0],z=this[EA],w=z.adjustedFoV(z.framedFoVDeg);super[f6](R);const k=z.adjustedFoV(z.framedFoVDeg)/w,j=O.getFieldOfView()*(isFinite(k)?k:1);O.updateAspect(this[EA].aspect),this.requestUpdate("maxFieldOfView",this.maxFieldOfView),await this.updateComplete,this[w0].setFieldOfView(j),this.jumpCameraToGoal()}[k2](){if(super[k2](),this[zE])this[u3]=!0;else this[zE]=!0;this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.requestUpdate("minCameraOrbit",this.minCameraOrbit),this.requestUpdate("maxCameraOrbit",this.maxCameraOrbit),this.requestUpdate("cameraOrbit",this.cameraOrbit),this.requestUpdate("cameraTarget",this.cameraTarget),this.jumpCameraToGoal()}}return F=t8,W=OE,D=f3,t0([LA({type:Boolean,attribute:"camera-controls"})],V.prototype,"cameraControls",void 0),t0([s2({intrinsics:fX,observeEffects:!0,updateHandler:SX}),LA({type:String,attribute:"camera-orbit",hasChanged:()=>!0})],V.prototype,"cameraOrbit",void 0),t0([s2({intrinsics:_z,observeEffects:!0,updateHandler:jX}),LA({type:String,attribute:"camera-target",hasChanged:()=>!0})],V.prototype,"cameraTarget",void 0),t0([s2({intrinsics:$X,observeEffects:!0,updateHandler:TX}),LA({type:String,attribute:"field-of-view",hasChanged:()=>!0})],V.prototype,"fieldOfView",void 0),t0([s2({intrinsics:Mz,updateHandler:gX}),LA({type:String,attribute:"min-camera-orbit",hasChanged:()=>!0})],V.prototype,"minCameraOrbit",void 0),t0([s2({intrinsics:$z,updateHandler:yX}),LA({type:String,attribute:"max-camera-orbit",hasChanged:()=>!0})],V.prototype,"maxCameraOrbit",void 0),t0([s2({intrinsics:kz,updateHandler:xX}),LA({type:String,attribute:"min-field-of-view",hasChanged:()=>!0})],V.prototype,"minFieldOfView",void 0),t0([s2({intrinsics:$X,updateHandler:hX}),LA({type:String,attribute:"max-field-of-view",hasChanged:()=>!0})],V.prototype,"maxFieldOfView",void 0),t0([LA({type:Number,attribute:"interaction-prompt-threshold"})],V.prototype,"interactionPromptThreshold",void 0),t0([LA({type:String,attribute:"interaction-prompt"})],V.prototype,"interactionPrompt",void 0),t0([LA({type:String,attribute:"interaction-prompt-style"})],V.prototype,"interactionPromptStyle",void 0),t0([LA({type:Number,attribute:"orbit-sensitivity"})],V.prototype,"orbitSensitivity",void 0),t0([LA({type:Number,attribute:"zoom-sensitivity"})],V.prototype,"zoomSensitivity",void 0),t0([LA({type:Number,attribute:"pan-sensitivity"})],V.prototype,"panSensitivity",void 0),t0([LA({type:String,attribute:"touch-action"})],V.prototype,"touchAction",void 0),t0([LA({type:Boolean,attribute:"disable-zoom"})],V.prototype,"disableZoom",void 0),t0([LA({type:Boolean,attribute:"disable-pan"})],V.prototype,"disablePan",void 0),t0([LA({type:Boolean,attribute:"disable-tap"})],V.prototype,"disableTap",void 0),t0([LA({type:Number,attribute:"interpolation-decay"})],V.prototype,"interpolationDecay",void 0),V};var jz=0.018,uX=2,gz=300,yz=new DA,mX=new P,dX=Object.freeze({minimumRadius:0,maximumRadius:Infinity,minimumPolarAngle:Math.PI/8,maximumPolarAngle:Math.PI-Math.PI/8,minimumAzimuthalAngle:(-Infinity),maximumAzimuthalAngle:Infinity,minimumFieldOfView:10,maximumFieldOfView:45,touchAction:"none"}),SQ=Math.PI/8,TQ=0.04,jQ=10;var S0={USER_INTERACTION:"user-interaction",NONE:"none",AUTOMATIC:"automatic"};class kE extends K1{constructor(A,Q,B){super();this.camera=A,this.element=Q,this.scene=B,this.orbitSensitivity=1,this.zoomSensitivity=1,this.panSensitivity=1,this.inputSensitivity=1,this.changeSource=S0.NONE,this._interactionEnabled=!1,this._disableZoom=!1,this.isUserPointing=!1,this.enablePan=!0,this.enableTap=!0,this.panProjection=new fA,this.panPerPixel=0,this.spherical=new m2,this.goalSpherical=new m2,this.thetaDamper=new Y1,this.phiDamper=new Y1,this.radiusDamper=new Y1,this.logFov=Math.log(dX.maximumFieldOfView),this.goalLogFov=this.logFov,this.fovDamper=new Y1,this.touchMode=null,this.pointers=[],this.startTime=0,this.startPointerPosition={clientX:0,clientY:0},this.lastSeparation=0,this.touchDecided=!1,this.onContext=(C)=>{if(this.enablePan)C.preventDefault();else for(let I of this.pointers)this.onPointerUp(new PointerEvent("pointercancel",Object.assign(Object.assign({},this.startPointerPosition),{pointerId:I.id})))},this.touchModeZoom=(C,I)=>{if(!this._disableZoom){const E=this.twoTouchDistance(this.pointers[0],this.pointers[1]),K=TQ*this.zoomSensitivity*(this.lastSeparation-E)*50/this.scene.height;this.lastSeparation=E,this.userAdjustOrbit(0,0,K)}if(this.panPerPixel>0)this.movePan(C,I)},this.disableScroll=(C)=>{C.preventDefault()},this.touchModeRotate=(C,I)=>{const{touchAction:E}=this._options;if(!this.touchDecided&&E!=="none"){this.touchDecided=!0;const K=Math.abs(C),J=Math.abs(I);if(this.changeSource===S0.USER_INTERACTION&&(E==="pan-y"&&J>K||E==="pan-x"&&K>J)){this.touchMode=null;return}else this.element.addEventListener("touchmove",this.disableScroll,{passive:!1})}this.handleSinglePointerMove(C,I)},this.onPointerDown=(C)=>{if(this.pointers.length>2)return;const{element:I}=this;if(this.pointers.length===0)I.addEventListener("pointermove",this.onPointerMove),I.addEventListener("pointerup",this.onPointerUp),this.touchMode=null,this.touchDecided=!1,this.startPointerPosition.clientX=C.clientX,this.startPointerPosition.clientY=C.clientY,this.startTime=performance.now();try{I.setPointerCapture(C.pointerId)}catch(E){}if(this.pointers.push({clientX:C.clientX,clientY:C.clientY,id:C.pointerId}),this.isUserPointing=!1,C.pointerType==="touch")this.changeSource=C.altKey?S0.AUTOMATIC:S0.USER_INTERACTION,this.onTouchChange(C);else this.changeSource=S0.USER_INTERACTION,this.onMouseDown(C);if(this.changeSource===S0.USER_INTERACTION)this.dispatchEvent({type:"user-interaction"})},this.onPointerMove=(C)=>{const I=this.pointers.find((q)=>q.id===C.pointerId);if(I==null)return;if(C.pointerType==="mouse"&&C.buttons===0){this.onPointerUp(C);return}const E=this.pointers.length,K=(C.clientX-I.clientX)/E,J=(C.clientY-I.clientY)/E;if(K===0&&J===0)return;if(I.clientX=C.clientX,I.clientY=C.clientY,C.pointerType==="touch"){if(this.changeSource=C.altKey?S0.AUTOMATIC:S0.USER_INTERACTION,this.touchMode!==null)this.touchMode(K,J)}else if(this.changeSource=S0.USER_INTERACTION,this.panPerPixel>0)this.movePan(K,J);else this.handleSinglePointerMove(K,J)},this.onPointerUp=(C)=>{const{element:I}=this,E=this.pointers.findIndex((K)=>K.id===C.pointerId);if(E!==-1)this.pointers.splice(E,1);if(this.panPerPixel>0&&!C.altKey)this.resetRadius();if(this.pointers.length===0){if(I.removeEventListener("pointermove",this.onPointerMove),I.removeEventListener("pointerup",this.onPointerUp),I.removeEventListener("touchmove",this.disableScroll),this.enablePan&&this.enableTap)this.recenter(C)}else if(this.touchMode!==null)this.onTouchChange(C);if(this.scene.element[m3].style.opacity=0,I.style.cursor="grab",this.panPerPixel=0,this.isUserPointing)this.dispatchEvent({type:"pointer-change-end"})},this.onWheel=(C)=>{this.changeSource=S0.USER_INTERACTION;const I=C.deltaY*(C.deltaMode==1?18:1)*TQ*this.zoomSensitivity/30;this.userAdjustOrbit(0,0,I),C.preventDefault(),this.dispatchEvent({type:"user-interaction"})},this.onKeyDown=(C)=>{const{changeSource:I}=this;if(this.changeSource=S0.USER_INTERACTION,C.shiftKey&&this.enablePan?this.panKeyCodeHandler(C):this.orbitZoomKeyCodeHandler(C))C.preventDefault(),this.dispatchEvent({type:"user-interaction"});else this.changeSource=I},this._options=Object.assign({},dX),this.setOrbit(0,Math.PI/2,1),this.setFieldOfView(100),this.jumpToGoal()}get interactionEnabled(){return this._interactionEnabled}enableInteraction(){if(this._interactionEnabled===!1){const{element:A}=this;if(A.addEventListener("pointerdown",this.onPointerDown),A.addEventListener("pointercancel",this.onPointerUp),!this._disableZoom)A.addEventListener("wheel",this.onWheel);A.addEventListener("keydown",this.onKeyDown),A.addEventListener("touchmove",()=>{},{passive:!1}),A.addEventListener("contextmenu",this.onContext),this.element.style.cursor="grab",this._interactionEnabled=!0,this.updateTouchActionStyle()}}disableInteraction(){if(this._interactionEnabled===!0){const{element:A}=this;A.removeEventListener("pointerdown",this.onPointerDown),A.removeEventListener("pointermove",this.onPointerMove),A.removeEventListener("pointerup",this.onPointerUp),A.removeEventListener("pointercancel",this.onPointerUp),A.removeEventListener("wheel",this.onWheel),A.removeEventListener("keydown",this.onKeyDown),A.removeEventListener("contextmenu",this.onContext),A.style.cursor="",this.touchMode=null,this._interactionEnabled=!1,this.updateTouchActionStyle()}}get options(){return this._options}set disableZoom(A){if(this._disableZoom!=A){if(this._disableZoom=A,A===!0)this.element.removeEventListener("wheel",this.onWheel);else this.element.addEventListener("wheel",this.onWheel);this.updateTouchActionStyle()}}getCameraSpherical(A=new m2){return A.copy(this.spherical)}getFieldOfView(){return this.camera.fov}applyOptions(A){Object.assign(this._options,A),this.setOrbit(),this.setFieldOfView(Math.exp(this.goalLogFov))}updateNearFar(A,Q){this.camera.far=Q===0?2:Q,this.camera.near=Math.max(A,this.camera.far/1000),this.camera.updateProjectionMatrix()}updateAspect(A){this.camera.aspect=A,this.camera.updateProjectionMatrix()}setOrbit(A=this.goalSpherical.theta,Q=this.goalSpherical.phi,B=this.goalSpherical.radius){const{minimumAzimuthalAngle:C,maximumAzimuthalAngle:I,minimumPolarAngle:E,maximumPolarAngle:K,minimumRadius:J,maximumRadius:q}=this._options,{theta:G,phi:Y,radius:H}=this.goalSpherical,Z=L1(A,C,I);if(!isFinite(C)&&!isFinite(I))this.spherical.theta=this.wrapAngle(this.spherical.theta-Z)+Z;const X=L1(Q,E,K),U=L1(B,J,q);if(Z===G&&X===Y&&U===H)return!1;if(!isFinite(Z)||!isFinite(X)||!isFinite(U))return!1;return this.goalSpherical.theta=Z,this.goalSpherical.phi=X,this.goalSpherical.radius=U,this.goalSpherical.makeSafe(),!0}setRadius(A){this.goalSpherical.radius=A,this.setOrbit()}setFieldOfView(A){const{minimumFieldOfView:Q,maximumFieldOfView:B}=this._options;A=L1(A,Q,B),this.goalLogFov=Math.log(A)}setDamperDecayTime(A){this.thetaDamper.setDecayTime(A),this.phiDamper.setDecayTime(A),this.radiusDamper.setDecayTime(A),this.fovDamper.setDecayTime(A)}adjustOrbit(A,Q,B){const{theta:C,phi:I,radius:E}=this.goalSpherical,{minimumRadius:K,maximumRadius:J,minimumFieldOfView:q,maximumFieldOfView:G}=this._options,Y=this.spherical.theta-C,H=Math.PI-0.001,Z=C-L1(A,-H-Y,H-Y),X=I-Q,U=B===0?0:((B>0?J:K)-E)/(Math.log(B>0?G:q)-this.goalLogFov),F=E+B*(isFinite(U)?U:(J-K)*2);if(this.setOrbit(Z,X,F),B!==0){const W=this.goalLogFov+B;this.setFieldOfView(Math.exp(W))}}jumpToGoal(){this.update(0,VQ)}update(A,Q){if(this.isStationary())return!1;const{maximumPolarAngle:B,maximumRadius:C}=this._options,I=this.spherical.theta-this.goalSpherical.theta;if(Math.abs(I)>Math.PI&&!isFinite(this._options.minimumAzimuthalAngle)&&!isFinite(this._options.maximumAzimuthalAngle))this.spherical.theta-=Math.sign(I)*2*Math.PI;return this.spherical.theta=this.thetaDamper.update(this.spherical.theta,this.goalSpherical.theta,Q,Math.PI),this.spherical.phi=this.phiDamper.update(this.spherical.phi,this.goalSpherical.phi,Q,B),this.spherical.radius=this.radiusDamper.update(this.spherical.radius,this.goalSpherical.radius,Q,C),this.logFov=this.fovDamper.update(this.logFov,this.goalLogFov,Q,1),this.moveCamera(),!0}updateTouchActionStyle(){const{style:A}=this.element;if(this._interactionEnabled){const{touchAction:Q}=this._options;if(this._disableZoom&&Q!=="none")A.touchAction="manipulation";else A.touchAction=Q}else A.touchAction=""}isStationary(){return this.goalSpherical.theta===this.spherical.theta&&this.goalSpherical.phi===this.spherical.phi&&this.goalSpherical.radius===this.spherical.radius&&this.goalLogFov===this.logFov}moveCamera(){if(this.spherical.makeSafe(),this.camera.position.setFromSpherical(this.spherical),this.camera.setRotationFromEuler(new u1(this.spherical.phi-Math.PI/2,this.spherical.theta,0,"YXZ")),this.camera.fov!==Math.exp(this.logFov))this.camera.fov=Math.exp(this.logFov),this.camera.updateProjectionMatrix()}userAdjustOrbit(A,Q,B){this.adjustOrbit(A*this.orbitSensitivity*this.inputSensitivity,Q*this.orbitSensitivity*this.inputSensitivity,B*this.inputSensitivity)}wrapAngle(A){const Q=(A+Math.PI)/(2*Math.PI);return(Q-Math.floor(Q))*2*Math.PI-Math.PI}pixelLengthToSphericalAngle(A){return 2*Math.PI*A/this.scene.height}twoTouchDistance(A,Q){const{clientX:B,clientY:C}=A,{clientX:I,clientY:E}=Q,K=I-B,J=E-C;return Math.sqrt(K*K+J*J)}handleSinglePointerMove(A,Q){const B=this.pixelLengthToSphericalAngle(A),C=this.pixelLengthToSphericalAngle(Q);if(this.isUserPointing===!1)this.isUserPointing=!0,this.dispatchEvent({type:"pointer-change-start"});this.userAdjustOrbit(B,C,0)}initializePan(){const{theta:A,phi:Q}=this.spherical,B=A-this.scene.yaw;this.panPerPixel=jz*this.panSensitivity/this.scene.height,this.panProjection.set(-Math.cos(B),-Math.cos(Q)*Math.sin(B),0,0,Math.sin(Q),0,Math.sin(B),-Math.cos(Q)*Math.cos(B),0)}movePan(A,Q){const{scene:B}=this,C=mX.set(A,Q,0).multiplyScalar(this.inputSensitivity),I=this.spherical.radius*Math.exp(this.logFov)*this.panPerPixel;C.multiplyScalar(I);const E=B.getTarget();E.add(C.applyMatrix3(this.panProjection)),B.boundingSphere.clampPoint(E,E),B.setTarget(E.x,E.y,E.z)}recenter(A){if(performance.now()>this.startTime+gz||Math.abs(A.clientX-this.startPointerPosition.clientX)>uX||Math.abs(A.clientY-this.startPointerPosition.clientY)>uX)return;const{scene:Q}=this,B=Q.positionAndNormalFromPoint(Q.getNDC(A.clientX,A.clientY));if(B==null){const{cameraTarget:C}=Q.element;Q.element.cameraTarget="",Q.element.cameraTarget=C,this.userAdjustOrbit(0,0,1)}else Q.target.worldToLocal(B.position),Q.setTarget(B.position.x,B.position.y,B.position.z)}resetRadius(){const{scene:A}=this,Q=A.positionAndNormalFromPoint(yz.set(0,0));if(Q==null)return;A.target.worldToLocal(Q.position);const B=A.getTarget(),{theta:C,phi:I}=this.spherical,E=C-A.yaw,K=mX.set(Math.sin(I)*Math.sin(E),Math.cos(I),Math.sin(I)*Math.cos(E)),J=K.dot(Q.position.sub(B));B.add(K.multiplyScalar(J)),A.setTarget(B.x,B.y,B.z),this.setOrbit(void 0,void 0,this.goalSpherical.radius-J)}onTouchChange(A){if(this.pointers.length===1)this.touchMode=this.touchModeRotate;else{if(this._disableZoom){this.touchMode=null,this.element.removeEventListener("touchmove",this.disableScroll);return}if(this.touchMode=this.touchDecided&&this.touchMode===null?null:this.touchModeZoom,this.touchDecided=!0,this.element.addEventListener("touchmove",this.disableScroll,{passive:!1}),this.lastSeparation=this.twoTouchDistance(this.pointers[0],this.pointers[1]),this.enablePan&&this.touchMode!=null){if(this.initializePan(),!A.altKey)this.scene.element[m3].style.opacity=1}}}onMouseDown(A){if(this.panPerPixel=0,this.enablePan&&(A.button===2||A.ctrlKey||A.metaKey||A.shiftKey))this.initializePan(),this.scene.element[m3].style.opacity=1;this.element.style.cursor="grabbing"}orbitZoomKeyCodeHandler(A){let Q=!0;switch(A.key){case"PageUp":this.userAdjustOrbit(0,0,TQ*this.zoomSensitivity);break;case"PageDown":this.userAdjustOrbit(0,0,-1*TQ*this.zoomSensitivity);break;case"ArrowUp":this.userAdjustOrbit(0,-SQ,0);break;case"ArrowDown":this.userAdjustOrbit(0,SQ,0);break;case"ArrowLeft":this.userAdjustOrbit(-SQ,0,0);break;case"ArrowRight":this.userAdjustOrbit(SQ,0,0);break;default:Q=!1;break}return Q}panKeyCodeHandler(A){this.initializePan();let Q=!0;switch(A.key){case"ArrowUp":this.movePan(0,-1*jQ);break;case"ArrowDown":this.movePan(0,jQ);break;case"ArrowLeft":this.movePan(-1*jQ,0);break;case"ArrowRight":this.movePan(jQ,0);break;default:Q=!1;break}return Q}}var xz=30,hz=0.8,cX=1.5,vz=20,lX=1.3,fz=1/lX,bz=0.25,pz=10,U4={NOT_PRESENTING:"not-presenting",SESSION_STARTED:"session-started",OBJECT_PLACED:"object-placed",FAILED:"failed"},yQ={TRACKING:"tracking",NOT_TRACKING:"not-tracking"},gQ=new P,uz=new zA,mz=new P,dz=new P0(45,1,0.1,100);class ME extends K1{constructor(A){super();this.renderer=A,this.currentSession=null,this.placeOnWall=!1,this.placementBox=null,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.initialHitSource=null,this.transientHitTestSource=null,this.inputSource=null,this._presentedScene=null,this.resolveCleanup=null,this.exitWebXRButtonContainer=null,this.overlay=null,this.xrLight=null,this.tracking=!0,this.frames=0,this.initialized=!1,this.oldTarget=new P,this.placementComplete=!1,this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastDragPosition=new P,this.firstRatio=0,this.lastAngle=0,this.goalPosition=new P,this.goalYaw=0,this.goalScale=1,this.xDamper=new Y1,this.yDamper=new Y1,this.zDamper=new Y1,this.yawDamper=new Y1,this.scaleDamper=new Y1,this.onExitWebXRButtonContainerClick=()=>this.stopPresenting(),this.onUpdateScene=()=>{if(this.placementBox!=null&&this.isPresenting)this.placementBox.dispose(),this.placementBox=new wQ(this.presentedScene,this.placeOnWall?"back":"bottom")},this.onSelectStart=(Q)=>{const B=this.transientHitTestSource;if(B==null)return;const C=this.frame.getHitTestResultsForTransientInput(B),I=this.presentedScene,E=this.placementBox;if(C.length===1){this.inputSource=Q.inputSource;const{axes:K}=this.inputSource.gamepad,J=E.getHit(this.presentedScene,K[0],K[1]);if(E.show=!0,J!=null)this.isTranslating=!0,this.lastDragPosition.copy(J);else if(this.placeOnWall===!1)this.isRotating=!0,this.lastAngle=K[0]*cX}else if(C.length===2){E.show=!0,this.isTwoFingering=!0;const{separation:K}=this.fingerPolar(C);this.firstRatio=K/I.scale.x}},this.onSelectEnd=()=>{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.inputSource=null,this.goalPosition.y+=this.placementBox.offsetHeight*this.presentedScene.scale.x,this.placementBox.show=!1},this.threeRenderer=A.threeRenderer,this.threeRenderer.xr.enabled=!0}async resolveARSession(){FI();const A=await navigator.xr.requestSession("immersive-ar",{requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay","light-estimation"],domOverlay:this.overlay?{root:this.overlay}:void 0});return this.threeRenderer.xr.setReferenceSpaceType("local"),await this.threeRenderer.xr.setSession(A),this.threeRenderer.xr.cameraAutoUpdate=!1,A}get presentedScene(){return this._presentedScene}async supportsPresentation(){try{return FI(),await navigator.xr.isSessionSupported("immersive-ar")}catch(A){return console.warn("Request to present in WebXR denied:"),console.warn(A),console.warn("Falling back to next ar-mode"),!1}}async present(A,Q=!1){if(this.isPresenting)console.warn("Cannot present while a model is already presenting");let B=new Promise((q,G)=>{requestAnimationFrame(()=>q())});if(A.setHotspotsVisibility(!1),A.queueRender(),await B,this._presentedScene=A,this.overlay=A.element.shadowRoot.querySelector("div.default"),Q===!0)this.xrLight=new YE(this.threeRenderer),this.xrLight.addEventListener("estimationstart",()=>{if(!this.isPresenting||this.xrLight==null)return;const q=this.presentedScene;q.add(this.xrLight),q.environment=this.xrLight.environment});const C=await this.resolveARSession();C.addEventListener("end",()=>{this.postSessionCleanup()},{once:!0});const I=A.element.shadowRoot.querySelector(".slot.exit-webxr-ar-button");I.classList.add("enabled"),I.addEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=I;const E=await C.requestReferenceSpace("viewer");this.tracking=!0,this.frames=0,this.initialized=!1,this.turntableRotation=A.yaw,this.goalYaw=A.yaw,this.goalScale=1,A.setBackground(null),this.oldShadowIntensity=A.shadowIntensity,A.setShadowIntensity(0.01),this.oldTarget.copy(A.getTarget()),A.element.addEventListener("load",this.onUpdateScene);const K=vz*Math.PI/180,J=this.placeOnWall===!0?void 0:new XRRay(new DOMPoint(0,0,0),{x:0,y:-Math.sin(K),z:-Math.cos(K)});C.requestHitTestSource({space:E,offsetRay:J}).then((q)=>{this.initialHitSource=q}),this.currentSession=C,this.placementBox=new wQ(A,this.placeOnWall?"back":"bottom"),this.placementComplete=!1,this.lastTick=performance.now(),this.dispatchEvent({type:"status",status:U4.SESSION_STARTED})}async stopPresenting(){if(!this.isPresenting)return;const A=new Promise((Q)=>{this.resolveCleanup=Q});try{await this.currentSession.end(),await A}catch(Q){console.warn("Error while trying to end WebXR AR session"),console.warn(Q),this.postSessionCleanup()}}get isPresenting(){return this.presentedScene!=null}get target(){return this.oldTarget}updateTarget(){const A=this.presentedScene;if(A!=null){const Q=A.getTarget();if(this.oldTarget.copy(Q),this.placeOnWall)Q.z=A.boundingBox.min.z;else Q.y=A.boundingBox.min.y;A.setTarget(Q.x,Q.y,Q.z)}}postSessionCleanup(){const A=this.currentSession;if(A!=null)A.removeEventListener("selectstart",this.onSelectStart),A.removeEventListener("selectend",this.onSelectEnd),this.currentSession=null;const Q=this.presentedScene;if(this._presentedScene=null,Q!=null){const{element:E}=Q;if(this.xrLight!=null)Q.remove(this.xrLight),this.xrLight.dispose(),this.xrLight=null;Q.position.set(0,0,0),Q.scale.set(1,1,1),Q.setShadowOffset(0);const K=this.turntableRotation;if(K!=null)Q.yaw=K;const J=this.oldShadowIntensity;if(J!=null)Q.setShadowIntensity(J);Q.setEnvironmentAndSkybox(E[b8],E[p8]);const q=this.oldTarget;Q.setTarget(q.x,q.y,q.z),Q.xrCamera=null,Q.element.removeEventListener("load",this.onUpdateScene),Q.orientHotspots(0),E.requestUpdate("cameraTarget"),E.requestUpdate("maxCameraOrbit"),E[f6](E.getBoundingClientRect()),requestAnimationFrame(()=>{Q.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:S0.NONE}}))})}this.renderer.height=0;const B=this.exitWebXRButtonContainer;if(B!=null)B.classList.remove("enabled"),B.removeEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=null;const C=this.transientHitTestSource;if(C!=null)C.cancel(),this.transientHitTestSource=null;const I=this.initialHitSource;if(I!=null)I.cancel(),this.initialHitSource=null;if(this.placementBox!=null)this.placementBox.dispose(),this.placementBox=null;if(this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.inputSource=null,this.overlay=null,this.resolveCleanup!=null)this.resolveCleanup();this.dispatchEvent({type:"status",status:U4.NOT_PRESENTING})}updateView(A){const Q=this.presentedScene,B=this.threeRenderer.xr;B.updateCamera(dz),Q.xrCamera=B.getCamera();const{elements:C}=Q.getCamera().matrixWorld;if(Q.orientHotspots(Math.atan2(C[1],C[5])),!this.initialized)this.placeInitially(),this.initialized=!0;if(A.requestViewportScale&&A.recommendedViewportScale){const E=A.recommendedViewportScale;A.requestViewportScale(Math.max(E,bz))}const I=B.getBaseLayer();if(I!=null){const E=I instanceof XRWebGLLayer?I.getViewport(A):B.getBinding().getViewSubImage(I,A).viewport;this.threeRenderer.setViewport(E.x,E.y,E.width,E.height)}}placeInitially(){const A=this.presentedScene,{position:Q,element:B}=A,C=A.getCamera(),{width:I,height:E}=this.overlay.getBoundingClientRect();A.setSize(I,E),C.projectionMatrixInverse.copy(C.projectionMatrix).invert();const{theta:K,radius:J}=B.getCameraOrbit(),q=C.getWorldDirection(gQ);A.yaw=Math.atan2(-q.x,-q.z)-K,this.goalYaw=A.yaw,Q.copy(C.position).add(q.multiplyScalar(J)),this.updateTarget();const G=A.getTarget();Q.add(G).sub(this.oldTarget),this.goalPosition.copy(Q),A.setHotspotsVisibility(!0);const{session:Y}=this.frame;Y.addEventListener("selectstart",this.onSelectStart),Y.addEventListener("selectend",this.onSelectEnd),Y.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then((H)=>{this.transientHitTestSource=H})}getTouchLocation(){const{axes:A}=this.inputSource.gamepad;let Q=this.placementBox.getExpandedHit(this.presentedScene,A[0],A[1]);if(Q!=null){if(gQ.copy(Q).sub(this.presentedScene.getCamera().position),gQ.length()>pz)return null}return Q}getHitPoint(A){const Q=this.threeRenderer.xr.getReferenceSpace(),B=A.getPose(Q);if(B==null)return null;const C=uz.fromArray(B.transform.matrix);if(this.placeOnWall===!0)this.goalYaw=Math.atan2(C.elements[4],C.elements[6]);return C.elements[5]>0.75!==this.placeOnWall?mz.setFromMatrixPosition(C):null}moveToFloor(A){const Q=this.initialHitSource;if(Q==null)return;const B=A.getHitTestResults(Q);if(B.length==0)return;const C=B[0],I=this.getHitPoint(C);if(I==null)return;if(this.placementBox.show=!0,!this.isTranslating)if(this.placeOnWall)this.goalPosition.copy(I);else this.goalPosition.y=I.y;Q.cancel(),this.initialHitSource=null,this.dispatchEvent({type:"status",status:U4.OBJECT_PLACED})}fingerPolar(A){const Q=A[0].inputSource.gamepad.axes,B=A[1].inputSource.gamepad.axes,C=B[0]-Q[0],I=B[1]-Q[1],E=Math.atan2(I,C);let K=this.lastAngle-E;if(K>Math.PI)K-=2*Math.PI;else if(K<-Math.PI)K+=2*Math.PI;return this.lastAngle=E,{separation:Math.sqrt(C*C+I*I),deltaYaw:K}}processInput(A){const Q=this.transientHitTestSource;if(Q==null)return;if(!this.isTranslating&&!this.isTwoFingering&&!this.isRotating)return;const B=A.getHitTestResultsForTransientInput(Q),C=this.presentedScene,I=C.scale.x;if(this.isTwoFingering){if(B.length<2)this.isTwoFingering=!1;else{const{separation:E,deltaYaw:K}=this.fingerPolar(B);if(this.placeOnWall===!1)this.goalYaw+=K;if(C.canScale){const J=E/this.firstRatio;this.goalScale=J<lX&&J>fz?1:J}}return}else if(B.length===2){this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!0;const{separation:E}=this.fingerPolar(B);this.firstRatio=E/I;return}if(this.isRotating){const E=this.inputSource.gamepad.axes[0]*cX;this.goalYaw+=E-this.lastAngle,this.lastAngle=E}else if(this.isTranslating)B.forEach((E)=>{if(E.inputSource!==this.inputSource)return;let K=null;if(E.results.length>0)K=this.getHitPoint(E.results[0]);if(K==null)K=this.getTouchLocation();if(K==null)return;if(this.goalPosition.sub(this.lastDragPosition),this.placeOnWall===!1){const J=K.y-this.lastDragPosition.y;if(J<0){this.placementBox.offsetHeight=J/I,this.presentedScene.setShadowOffset(J);const q=gQ.copy(C.getCamera().position),G=-J/(q.y-K.y);q.multiplyScalar(G),K.multiplyScalar(1-G).add(q)}}this.goalPosition.add(K),this.lastDragPosition.copy(K)})}moveScene(A){const Q=this.presentedScene,{position:B,yaw:C}=Q,I=Q.boundingSphere.radius,E=this.goalPosition,K=Q.scale.x,J=this.placementBox;let q=S0.NONE;if(!E.equals(B)||this.goalScale!==K){q=S0.USER_INTERACTION;let{x:G,y:Y,z:H}=B;G=this.xDamper.update(G,E.x,A,I),Y=this.yDamper.update(Y,E.y,A,I),H=this.zDamper.update(H,E.z,A,I),B.set(G,Y,H);const Z=this.scaleDamper.update(K,this.goalScale,A,1);if(Q.scale.set(Z,Z,Z),!this.isTranslating){const X=E.y-Y;if(this.placementComplete&&this.placeOnWall===!1)J.offsetHeight=X/Z,Q.setShadowOffset(X);else if(X===0)this.placementComplete=!0,J.show=!1,Q.setShadowIntensity(hz)}}J.updateOpacity(A),Q.updateTarget(A),Q.yaw=this.yawDamper.update(C,this.goalYaw,A,Math.PI),Q.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:q}}))}onWebXRFrame(A,Q){this.frame=Q,++this.frames;const B=this.threeRenderer.xr.getReferenceSpace(),C=Q.getViewerPose(B);if(C==null&&this.tracking===!0&&this.frames>xz)this.tracking=!1,this.dispatchEvent({type:"tracking",status:yQ.NOT_TRACKING});const I=this.presentedScene;if(C==null||I==null||!I.element.loaded){this.threeRenderer.clear();return}if(this.tracking===!1)this.tracking=!0,this.dispatchEvent({type:"tracking",status:yQ.TRACKING});let E=!0;for(let K of C.views){if(this.updateView(K),E){this.moveToFloor(Q),this.processInput(Q);const J=A-this.lastTick;this.moveScene(J),this.renderer.preRender(I,A,J),this.lastTick=A,I.renderShadow(this.threeRenderer)}this.threeRenderer.render(I,I.getCamera()),E=!1}}}var sX=function(A){const Q=new Map,B=new Map,C=A.clone();return nX(A,C,function(I,E){Q.set(E,I),B.set(I,E)}),C.traverse(function(I){if(!I.isSkinnedMesh)return;const E=I,K=Q.get(I),J=K.skeleton.bones;E.skeleton=K.skeleton.clone(),E.bindMatrix.copy(K.bindMatrix),E.skeleton.bones=J.map(function(q){return B.get(q)}),E.bind(E.skeleton,E.bindMatrix)}),C};var nX=function(A,Q,B){B(A,Q);for(let C=0;C<A.children.length;C++)nX(A.children[C],Q.children[C],B)};var oX=Symbol("prepared"),c3=Symbol("prepare"),_2=Symbol("preparedGLTF"),l3=Symbol("clone");class $E{constructor(A){this[_2]=A}static prepare(A){if(A.scene==null)throw new Error("Model does not have a scene");if(A[oX])return A;const Q=this[c3](A);return Q[oX]=!0,Q}static[c3](A){const{scene:Q}=A,B=[Q];return Object.assign(Object.assign({},A),{scene:Q,scenes:B})}get parser(){return this[_2].parser}get animations(){return this[_2].animations}get scene(){return this[_2].scene}get scenes(){return this[_2].scenes}get cameras(){return this[_2].cameras}get asset(){return this[_2].asset}get userData(){return this[_2].userData}clone(){const A=this.constructor,Q=this[l3]();return new A(Q)}dispose(){this.scenes.forEach((A)=>{A.traverse((Q)=>{const B=Q;if(!B.material)return;(Array.isArray(B.material)?B.material:[B.material]).forEach((I)=>{for(let E in I){const K=I[E];if(K instanceof Z0){const J=K.source.data;if(J.close!=null)J.close();K.dispose()}}I.dispose()}),B.geometry.dispose()})})}[l3](){const A=this[_2],Q=sX(this.scene);lz(Q,this.scene);const B=[Q],C=A.userData?Object.assign({},A.userData):{};return Object.assign(Object.assign({},A),{scene:Q,scenes:B,userData:C})}}var lz=(A,Q)=>{iX(A,Q,(B,C)=>{if(C.userData.variantMaterials!==void 0)B.userData.variantMaterials=new Map(C.userData.variantMaterials);if(C.userData.variantData!==void 0)B.userData.variantData=C.userData.variantData;if(C.userData.originalMaterial!==void 0)B.userData.originalMaterial=C.userData.originalMaterial})},iX=(A,Q,B)=>{B(A,Q);for(let C=0;C<A.children.length;C++)iX(A.children[C],Q.children[C],B)};var aX=Symbol("threeGLTF"),rX=Symbol("gltf"),tX=Symbol("gltfElementMap"),eX=Symbol("threeObjectMap"),AF=Symbol("parallelTraverseThreeScene"),QF=Symbol("correlateOriginalThreeGLTF"),BF=Symbol("correlateCloneThreeGLTF");class B5{constructor(A,Q,B,C){this[aX]=A,this[rX]=Q,this[tX]=C,this[eX]=B}static from(A,Q){if(Q!=null)return this[BF](A,Q);else return this[QF](A)}static[QF](A){const Q=A.parser.json,B=A.parser.associations,C=new Map,I={name:"Default"},E={type:"materials",index:-1};for(let K of B.keys())if(K instanceof m1&&B.get(K)==null){if(E.index<0){if(Q.materials==null)Q.materials=[];E.index=Q.materials.length,Q.materials.push(I)}K.name=I.name,B.set(K,{materials:E.index})}for(let[K,J]of B){if(J)K.userData=K.userData||{},K.userData.associations=J;for(let q in J)if(q!=null&&q!=="primitives"){const G=q,H=(Q[G]||[])[J[G]];if(H==null)continue;let Z=C.get(H);if(Z==null)Z=new Set,C.set(H,Z);Z.add(K)}}return new B5(A,Q,B,C)}static[BF](A,Q){const{threeGLTF:B,gltf:C}=Q,I=JSON.parse(JSON.stringify(C)),E=new Map,K=new Map;for(let J=0;J<B.scenes.length;J++)this[AF](B.scenes[J],A.scenes[J],(q,G)=>{const Y=Q.threeObjectMap.get(q);if(Y==null)return;for(let H in Y)if(H!=null&&H!=="primitives"){const Z=H,X=Y[Z],U=I[Z][X],F=E.get(G)||{};F[Z]=X,E.set(G,F);const W=K.get(U)||new Set;W.add(G),K.set(U,W)}});return new B5(A,I,E,K)}static[AF](A,Q,B){const C=(I,E)=>{if(B(I,E),I.isObject3D){const K=I,J=E;if(K.material)if(Array.isArray(K.material))for(let q=0;q<K.material.length;++q)B(K.material[q],J.material[q]);else B(K.material,J.material);for(let q=0;q<I.children.length;++q)C(I.children[q],E.children[q])}};C(A,Q)}get threeGLTF(){return this[aX]}get gltf(){return this[rX]}get gltfElementMap(){return this[tX]}get threeObjectMap(){return this[eX]}}var s3=Symbol("correlatedSceneGraph");class _E extends $E{static[c3](A){const Q=super[c3](A);if(Q[s3]==null)Q[s3]=B5.from(Q);const{scene:B}=Q,C=new w1(void 0,Infinity);return B.traverse((I)=>{if(I.renderOrder=1000,I.frustumCulled=!1,!I.name)I.name=I.uuid;const E=I;if(E.material){const{geometry:K}=E;if(E.castShadow=!0,E.isSkinnedMesh)K.boundingSphere=C,K.boundingBox=null;const J=E.material;if(J.isMeshBasicMaterial===!0)J.toneMapped=!1;if(J.shadowSide=_8,J.aoMap){const{gltf:q,threeObjectMap:G}=Q[s3],Y=G.get(J);if(q.materials!=null&&Y!=null&&Y.materials!=null){const H=q.materials[Y.materials];if(H.occlusionTexture&&H.occlusionTexture.texCoord===0&&K.attributes.uv!=null)K.setAttribute("uv2",K.attributes.uv)}}}}),Q}get correlatedSceneGraph(){return this[_2][s3]}[l3](){const A=super[l3](),Q=new Map;return A.scene.traverse((B)=>{const C=B;if(C.material){const E=C.material;if(E!=null){if(Q.has(E.uuid)){C.material=Q.get(E.uuid);return}C.material=E.clone(),Q.set(E.uuid,C.material)}}const I=B;if(I.target!==void 0)I.add(I.target)}),A[s3]=B5.from(A,this.correlatedSceneGraph),A}}var CF=(A,Q,B)=>{let C;switch(A){case Z1:C=new Uint8ClampedArray(Q*B*4);break;case E1:C=new Uint16Array(Q*B*4);break;case IY:C=new Uint32Array(Q*B*4);break;case QY:C=new Int8Array(Q*B*4);break;case BY:C=new Int16Array(Q*B*4);break;case CY:C=new Int32Array(Q*B*4);break;case a1:C=new Float32Array(Q*B*4);break;default:throw new Error("Unsupported data type")}return C},xQ,sz=(A,Q,B,C)=>{if(xQ!==void 0)return xQ;const I=new N1(1,1,C);Q.setRenderTarget(I);const E=new nA(new q1,new b0({color:16777215}));Q.render(E,B),Q.setRenderTarget(null);const K=CF(A,I.width,I.height);return Q.readRenderTargetPixels(I,0,0,I.width,I.height,K),I.dispose(),E.geometry.dispose(),E.material.dispose(),xQ=K[0]!==0,xQ};class hQ{constructor(A){var Q,B,C,I,E,K,J,q,G,Y,H,Z,X,U,F,W;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(V){throw this._renderer.setRenderTarget(null),V}this._renderer.setRenderTarget(null)},this._width=A.width,this._height=A.height,this._type=A.type,this._colorSpace=A.colorSpace;const D={format:o0,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((Q=A.renderTargetOptions)===null||Q===void 0?void 0:Q.anisotropy)!==void 0?(B=A.renderTargetOptions)===null||B===void 0?void 0:B.anisotropy:1,generateMipmaps:((C=A.renderTargetOptions)===null||C===void 0?void 0:C.generateMipmaps)!==void 0?(I=A.renderTargetOptions)===null||I===void 0?void 0:I.generateMipmaps:!1,magFilter:((E=A.renderTargetOptions)===null||E===void 0?void 0:E.magFilter)!==void 0?(K=A.renderTargetOptions)===null||K===void 0?void 0:K.magFilter:g0,minFilter:((J=A.renderTargetOptions)===null||J===void 0?void 0:J.minFilter)!==void 0?(q=A.renderTargetOptions)===null||q===void 0?void 0:q.minFilter:g0,samples:((G=A.renderTargetOptions)===null||G===void 0?void 0:G.samples)!==void 0?(Y=A.renderTargetOptions)===null||Y===void 0?void 0:Y.samples:void 0,wrapS:((H=A.renderTargetOptions)===null||H===void 0?void 0:H.wrapS)!==void 0?(Z=A.renderTargetOptions)===null||Z===void 0?void 0:Z.wrapS:H1,wrapT:((X=A.renderTargetOptions)===null||X===void 0?void 0:X.wrapT)!==void 0?(U=A.renderTargetOptions)===null||U===void 0?void 0:U.wrapT:H1};if(this._material=A.material,A.renderer)this._renderer=A.renderer;else this._renderer=hQ.instantiateRenderer(),this._rendererIsDisposable=!0;if(this._scene=new a0,this._camera=new V2,this._camera.position.set(0,0,10),this._camera.left=-0.5,this._camera.right=0.5,this._camera.top=0.5,this._camera.bottom=-0.5,this._camera.updateProjectionMatrix(),!sz(this._type,this._renderer,this._camera,D)){let V;switch(this._type){case E1:V=this._renderer.extensions.has("EXT_color_buffer_float")?a1:void 0;break}if(V!==void 0)console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${a1}`),this._type=V;else this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown")}this._quad=new nA(new q1,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new N1(this.width,this.height,D),this._renderTarget.texture.mapping=((F=A.renderTargetOptions)===null||F===void 0?void 0:F.mapping)!==void 0?(W=A.renderTargetOptions)===null||W===void 0?void 0:W.mapping:T8}static instantiateRenderer(){const A=new b2;return A.setSize(128,128),A}toArray(){if(!this._supportsReadPixels)throw new Error("Can\'t read pixels in this browser");const A=CF(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,A),A}toDataTexture(A){const Q=new b4(this.toArray(),this.width,this.height,o0,this._type,(A===null||A===void 0?void 0:A.mapping)||T8,(A===null||A===void 0?void 0:A.wrapS)||H1,(A===null||A===void 0?void 0:A.wrapT)||H1,(A===null||A===void 0?void 0:A.magFilter)||g0,(A===null||A===void 0?void 0:A.minFilter)||g0,(A===null||A===void 0?void 0:A.anisotropy)||1,z0);return Q.generateMipmaps=(A===null||A===void 0?void 0:A.generateMipmaps)!==void 0?A===null||A===void 0?void 0:A.generateMipmaps:!1,Q}disposeOnDemandRenderer(){if(this._renderer.setRenderTarget(null),this._rendererIsDisposable)this._renderer.dispose(),this._renderer.forceContextLoss()}dispose(A){if(this.disposeOnDemandRenderer(),A)this.renderTarget.dispose();if(this.material instanceof l0)Object.values(this.material.uniforms).forEach((Q)=>{if(Q.value instanceof Z0)Q.value.dispose()});Object.values(this.material).forEach((Q)=>{if(Q instanceof Z0)Q.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(A){this._width=A,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(A){this._height=A,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(A){this._renderTarget=A,this._width=A.width,this._height=A.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}var nz=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,oz=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class EF extends l0{constructor({gamma:A,offsetHdr:Q,offsetSdr:B,gainMapMin:C,gainMapMax:I,maxDisplayBoost:E,hdrCapacityMin:K,hdrCapacityMax:J,sdr:q,gainMap:G}){super({name:"GainMapDecoderMaterial",vertexShader:nz,fragmentShader:oz,uniforms:{sdr:{value:q},gainMap:{value:G},gamma:{value:new P(1/A[0],1/A[1],1/A[2])},offsetHdr:{value:new P().fromArray(Q)},offsetSdr:{value:new P().fromArray(B)},gainMapMin:{value:new P().fromArray(C)},gainMapMax:{value:new P().fromArray(I)},weightFactor:{value:(Math.log2(E)-K)/(J-K)}},blending:h9,depthTest:!1,depthWrite:!1});this._maxDisplayBoost=E,this._hdrCapacityMin=K,this._hdrCapacityMax=J,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(A){this.uniforms.sdr.value=A}get gainMap(){return this.uniforms.gainMap.value}set gainMap(A){this.uniforms.gainMap.value=A}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(A){this.uniforms.offsetHdr.value.fromArray(A)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(A){this.uniforms.offsetSdr.value.fromArray(A)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(A){this.uniforms.gainMapMin.value.fromArray(A)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(A){this.uniforms.gainMapMax.value.fromArray(A)}get gamma(){const A=this.uniforms.gamma.value;return[1/A.x,1/A.y,1/A.z]}set gamma(A){const Q=this.uniforms.gamma.value;Q.x=1/A[0],Q.y=1/A[1],Q.z=1/A[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(A){this._hdrCapacityMin=A,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(A){this._hdrCapacityMax=A,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(A){this._maxDisplayBoost=Math.max(1,Math.min(65504,A)),this.calculateWeight()}calculateWeight(){const A=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,A))}}class PE extends Error{}class SE extends Error{}var n3=(A,Q,B)=>{var C;let I;const E=(C=A.attributes.getNamedItem(Q))===null||C===void 0?void 0:C.nodeValue;if(!E){const K=A.getElementsByTagName(Q)[0];if(K){const J=K.getElementsByTagName("rdf:li");if(J.length===3)I=Array.from(J).map((q)=>q.innerHTML);else throw new Error(`Gainmap metadata contains an array of items for ${Q} but its length is not 3`)}else if(B)return B;else throw new Error(`Can't find ${Q} in gainmap metadata`)}else I=E;return I},iz=(A)=>{var Q,B;let C;if(typeof TextDecoder!=="undefined")C=(new TextDecoder()).decode(A);else C=A.toString();let I=C.indexOf("<x:xmpmeta");const E=new DOMParser;while(I!==-1){const K=C.indexOf("x:xmpmeta>",I);C.slice(I,K+10);const J=C.slice(I,K+10);try{const G=E.parseFromString(J,"text/xml").getElementsByTagName("rdf:Description")[0],Y=n3(G,"hdrgm:GainMapMin","0"),H=n3(G,"hdrgm:GainMapMax"),Z=n3(G,"hdrgm:Gamma","1"),X=n3(G,"hdrgm:OffsetSDR","0.015625"),U=n3(G,"hdrgm:OffsetHDR","0.015625");let F=(Q=G.attributes.getNamedItem("hdrgm:HDRCapacityMin"))===null||Q===void 0?void 0:Q.nodeValue;if(!F)F="0";const W=(B=G.attributes.getNamedItem("hdrgm:HDRCapacityMax"))===null||B===void 0?void 0:B.nodeValue;if(!W)throw new Error("Incomplete gainmap metadata");return{gainMapMin:Array.isArray(Y)?Y.map((D)=>parseFloat(D)):[parseFloat(Y),parseFloat(Y),parseFloat(Y)],gainMapMax:Array.isArray(H)?H.map((D)=>parseFloat(D)):[parseFloat(H),parseFloat(H),parseFloat(H)],gamma:Array.isArray(Z)?Z.map((D)=>parseFloat(D)):[parseFloat(Z),parseFloat(Z),parseFloat(Z)],offsetSdr:Array.isArray(X)?X.map((D)=>parseFloat(D)):[parseFloat(X),parseFloat(X),parseFloat(X)],offsetHdr:Array.isArray(U)?U.map((D)=>parseFloat(D)):[parseFloat(U),parseFloat(U),parseFloat(U)],hdrCapacityMin:parseFloat(F),hdrCapacityMax:parseFloat(W)}}catch(q){}I=C.indexOf("<x:xmpmeta",K)}};class KF{constructor(A){this.options={debug:A&&A.debug!==void 0?A.debug:!1,extractFII:A&&A.extractFII!==void 0?A.extractFII:!0,extractNonFII:A&&A.extractNonFII!==void 0?A.extractNonFII:!0}}extract(A){return new Promise((Q,B)=>{const C=this.options.debug,I=new DataView(A.buffer);if(I.getUint16(0)!==65496){B(new Error("Not a valid jpeg"));return}const E=I.byteLength;let K=2,J=0,q;while(K<E){if(++J>250){B(new Error(`Found no marker after ${J} loops \uD83D\uDE35`));return}if(I.getUint8(K)!==255){B(new Error(`Not a valid marker at offset 0x${K.toString(16)}, found: 0x${I.getUint8(K).toString(16)}`));return}if(q=I.getUint8(K+1),C)console.log(`Marker: ${q.toString(16)}`);if(q===226){if(C)console.log("Found APP2 marker (0xffe2)");const G=K+4;if(I.getUint32(G)===1297106432){const Y=G+4;let H;if(I.getUint16(Y)===18761)H=!1;else if(I.getUint16(Y)===19789)H=!0;else{B(new Error("No valid endianness marker found in TIFF header"));return}if(I.getUint16(Y+2,!H)!==42){B(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const Z=I.getUint32(Y+4,!H);if(Z<8){B(new Error("Not valid TIFF data! (First offset less than 8)"));return}const X=Y+Z,U=I.getUint16(X,!H),F=X+2;let W=0;for(let O=F;O<F+12*U;O+=12)if(I.getUint16(O,!H)===45057)W=I.getUint32(O+8,!H);const D=4,V=X+2+U*12+D,R=[];for(let O=V;O<V+W*16;O+=16){const z={MPType:I.getUint32(O,!H),size:I.getUint32(O+4,!H),dataOffset:I.getUint32(O+8,!H),dependantImages:I.getUint32(O+12,!H),start:-1,end:-1,isFII:!1};if(!z.dataOffset)z.start=0,z.isFII=!0;else z.start=Y+z.dataOffset,z.isFII=!1;z.end=z.start+z.size,R.push(z)}if(this.options.extractNonFII&&R.length){const O=new Blob([I]),z=[];for(let w of R){if(w.isFII&&!this.options.extractFII)continue;const k=O.slice(w.start,w.end+1,"image/jpeg");z.push(k)}Q(z)}}}K+=2+I.getUint16(K+2)}})}}var az=async(A)=>{const Q=iz(A);if(!Q)throw new SE("Gain map XMP metadata not found");const C=await new KF({extractFII:!0,extractNonFII:!0}).extract(A);if(C.length!==2)throw new PE("Gain map recovery image not found");return{sdr:new Uint8Array(await C[0].arrayBuffer()),gainMap:new Uint8Array(await C[1].arrayBuffer()),metadata:Q}},IF=(A)=>{return new Promise((Q,B)=>{const C=document.createElement("img");C.onload=()=>{Q(C)},C.onerror=(I)=>{B(I)},C.src=URL.createObjectURL(A)})};class JF extends O1{constructor(A,Q){super(Q);if(A)this._renderer=A;this._internalLoadingManager=new e9}setRenderer(A){return this._renderer=A,this}setRenderTargetOptions(A){return this._renderTargetOptions=A,this}prepareQuadRenderer(){if(!this._renderer)console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const A=new EF({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Z0,sdr:new Z0});return new hQ({width:16,height:16,type:E1,colorSpace:z0,material:A,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(A,Q,B,C){const I=C?new Blob([C],{type:"image/jpeg"}):void 0,E=new Blob([B],{type:"image/jpeg"});let K,J,q=!1;if(typeof createImageBitmap==="undefined"){const H=await Promise.all([I?IF(I):Promise.resolve(void 0),IF(E)]);J=H[0],K=H[1],q=!0}else{const H=await Promise.all([I?createImageBitmap(I,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(E,{imageOrientation:"flipY"})]);J=H[0],K=H[1]}const G=new Z0(J||new ImageData(2,2),T8,H1,H1,g0,PC,o0,Z1,1,z0);G.flipY=q,G.needsUpdate=!0;const Y=new Z0(K,T8,H1,H1,g0,PC,o0,Z1,1,$0);Y.flipY=q,Y.needsUpdate=!0,A.width=K.width,A.height=K.height,A.material.gainMap=G,A.material.sdr=Y,A.material.gainMapMin=Q.gainMapMin,A.material.gainMapMax=Q.gainMapMax,A.material.offsetHdr=Q.offsetHdr,A.material.offsetSdr=Q.offsetSdr,A.material.gamma=Q.gamma,A.material.hdrCapacityMin=Q.hdrCapacityMin,A.material.hdrCapacityMax=Q.hdrCapacityMax,A.material.maxDisplayBoost=Math.pow(2,Q.hdrCapacityMax),A.material.needsUpdate=!0,A.render()}}class TE extends JF{load(A,Q,B,C){const I=this.prepareQuadRenderer(),E=new j1(this._internalLoadingManager);return E.setResponseType("arraybuffer"),E.setRequestHeader(this.requestHeader),E.setPath(this.path),E.setWithCredentials(this.withCredentials),this.manager.itemStart(A),E.load(A,async(K)=>{if(typeof K==="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const J=new Uint8Array(K);let q,G,Y;try{const H=await az(J);q=H.sdr,G=H.gainMap,Y=H.metadata}catch(H){if(H instanceof SE||H instanceof PE)console.warn(`Failure to reconstruct an HDR image from ${A}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),Y={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},q=J;else throw H}try{await this.render(I,Y,q,G)}catch(H){if(this.manager.itemError(A),typeof C==="function")C(H);I.disposeOnDemandRenderer();return}if(typeof Q==="function")Q(I);this.manager.itemEnd(A),I.disposeOnDemandRenderer()},B,(K)=>{if(this.manager.itemError(A),typeof C==="function")C(K)}),I}}class jE extends iC{constructor(A){super(A);this.type=E1}parse(A){const E=function(k,j){switch(k){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(j||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(j||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(j||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(j||""))}},Y=function(k,j,h){j=!j?1024:j;let $=k.pos,p=-1,n=0,S="",v=String.fromCharCode.apply(null,new Uint16Array(k.subarray($,$+128)));while(0>(p=v.indexOf("\n"))&&n<j&&$<k.byteLength)S+=v,n+=v.length,$+=128,v+=String.fromCharCode.apply(null,new Uint16Array(k.subarray($,$+128)));if(-1<p){if(h!==!1)k.pos+=n+p+1;return S+v.slice(0,p)}return!1},H=function(k){const j=/^#\?(\S+)/,h=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,N=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,$=/^\s*FORMAT=(\S+)\s*$/,p=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,n={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let S,v;if(k.pos>=k.byteLength||!(S=Y(k)))E(1,"no header found");if(!(v=S.match(j)))E(3,"bad initial token");n.valid|=1,n.programtype=v[1],n.string+=S+"\n";while(!0){if(S=Y(k),S===!1)break;if(n.string+=S+"\n",S.charAt(0)==="#"){n.comments+=S+"\n";continue}if(v=S.match(h))n.gamma=parseFloat(v[1]);if(v=S.match(N))n.exposure=parseFloat(v[1]);if(v=S.match($))n.valid|=2,n.format=v[1];if(v=S.match(p))n.valid|=4,n.height=parseInt(v[1],10),n.width=parseInt(v[2],10);if(n.valid&2&&n.valid&4)break}if(!(n.valid&2))E(3,"missing format specifier");if(!(n.valid&4))E(3,"missing image size specifier");return n},Z=function(k,j,h){const N=j;if(N<8||N>32767||(k[0]!==2||k[1]!==2||k[2]&128))return new Uint8Array(k);if(N!==(k[2]<<8|k[3]))E(3,"wrong scanline width");const $=new Uint8Array(4*j*h);if(!$.length)E(4,"unable to allocate buffer space");let p=0,n=0;const S=4*N,v=new Uint8Array(4),f=new Uint8Array(S);let m=h;while(m>0&&n<k.byteLength){if(n+4>k.byteLength)E(1);if(v[0]=k[n++],v[1]=k[n++],v[2]=k[n++],v[3]=k[n++],v[0]!=2||v[1]!=2||(v[2]<<8|v[3])!=N)E(3,"bad rgbe scanline format");let b=0,l;while(b<S&&n<k.byteLength){l=k[n++];const BA=l>128;if(BA)l-=128;if(l===0||b+l>S)E(3,"bad scanline data");if(BA){const qA=k[n++];for(let a=0;a<l;a++)f[b++]=qA}else f.set(k.subarray(n,n+l),b),b+=l,n+=l}const QA=N;for(let BA=0;BA<QA;BA++){let qA=0;$[p]=f[BA+qA],qA+=N,$[p+1]=f[BA+qA],qA+=N,$[p+2]=f[BA+qA],qA+=N,$[p+3]=f[BA+qA],p+=4}m--}return $},X=function(k,j,h,N){const $=k[j+3],p=Math.pow(2,$-128)/255;h[N+0]=k[j+0]*p,h[N+1]=k[j+1]*p,h[N+2]=k[j+2]*p,h[N+3]=1},U=function(k,j,h,N){const $=k[j+3],p=Math.pow(2,$-128)/255;h[N+0]=F3.toHalfFloat(Math.min(k[j+0]*p,65504)),h[N+1]=F3.toHalfFloat(Math.min(k[j+1]*p,65504)),h[N+2]=F3.toHalfFloat(Math.min(k[j+2]*p,65504)),h[N+3]=F3.toHalfFloat(1)},F=new Uint8Array(A);F.pos=0;const W=H(F),D=W.width,V=W.height,R=Z(F.subarray(F.pos),D,V);let O,z,w;switch(this.type){case a1:w=R.length/4;const k=new Float32Array(w*4);for(let h=0;h<w;h++)X(R,h*4,k,h*4);O=k,z=a1;break;case E1:w=R.length/4;const j=new Uint16Array(w*4);for(let h=0;h<w;h++)U(R,h*4,j,h*4);O=j,z=E1;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:D,height:V,data:O,header:W.string,gamma:W.gamma,exposure:W.exposure,type:z}}setDataType(A){return this.type=A,this}load(A,Q,B,C){function I(E,K){switch(E.type){case a1:case E1:E.colorSpace=z0,E.minFilter=g0,E.magFilter=g0,E.generateMipmaps=!1,E.flipY=!0;break}if(Q)Q(E,K)}return super.load(A,I,B,C)}}var rz={topLight:{intensity:500,position:[0.418,16.199,0.3]},room:{position:[-0.757,13.219,0.717],scale:[31.713,28.305,28.591]},boxes:[{position:[-10.906,2.009,1.846],rotation:-0.195,scale:[2.328,7.905,4.651]},{position:[-5.607,-0.754,-0.758],rotation:0.994,scale:[1.97,1.534,3.955]},{position:[6.167,0.857,7.803],rotation:0.561,scale:[3.927,6.285,3.687]},{position:[-2.017,0.018,6.124],rotation:0.333,scale:[2.002,4.566,2.064]},{position:[2.291,-0.756,-2.621],rotation:-0.286,scale:[1.546,1.552,1.496]},{position:[-2.193,-0.369,-5.547],rotation:0.516,scale:[3.875,3.487,2.986]}],lights:[{intensity:50,position:[-16.116,14.37,8.208],scale:[0.1,2.428,2.739]},{intensity:50,position:[-16.109,18.021,-8.207],scale:[0.1,2.425,2.751]},{intensity:17,position:[14.904,12.198,-1.832],scale:[0.15,4.265,6.331]},{intensity:43,position:[-0.462,8.89,14.52],scale:[4.38,5.441,0.088]},{intensity:20,position:[3.235,11.486,-12.541],scale:[2.5,2,0.1]},{intensity:100,position:[0,20,0],scale:[1,0.1,1]}]},tz={topLight:{intensity:400,position:[0.5,14,0.5]},room:{position:[0,13.2,0],scale:[31.5,28.5,31.5]},boxes:[{position:[-10.906,-1,1.846],rotation:-0.195,scale:[2.328,7.905,4.651]},{position:[-5.607,-0.754,-0.758],rotation:0.994,scale:[1.97,1.534,3.955]},{position:[6.167,-0.16,7.803],rotation:0.561,scale:[3.927,6.285,3.687]},{position:[-2.017,0.018,6.124],rotation:0.333,scale:[2.002,4.566,2.064]},{position:[2.291,-0.756,-2.621],rotation:-0.286,scale:[1.546,1.552,1.496]},{position:[-2.193,-0.369,-5.547],rotation:0.516,scale:[3.875,3.487,2.986]}],lights:[{intensity:80,position:[-14,10,8],scale:[0.1,2.5,2.5]},{intensity:80,position:[-14,14,-4],scale:[0.1,2.5,2.5]},{intensity:23,position:[14,12,0],scale:[0.1,5,5]},{intensity:16,position:[0,9,14],scale:[5,5,0.1]},{intensity:80,position:[7,8,-14],scale:[2.5,2.5,0.1]},{intensity:80,position:[-7,16,-14],scale:[2.5,2.5,0.1]},{intensity:1,position:[0,20,0],scale:[0.1,0.1,0.1]}]};class o3 extends a0{constructor(A){super();this.position.y=-3.5;const Q=new Y4;Q.deleteAttribute("uv");const B=new p4({metalness:0,side:P8}),C=new p4({metalness:0}),I=A=="legacy"?rz:tz,E=new N3(16777215,I.topLight.intensity,28,2);E.position.set(...I.topLight.position),this.add(E);const K=new nA(Q,B);K.position.set(...I.room.position),K.scale.set(...I.room.scale),this.add(K);for(let J of I.boxes){const q=new nA(Q,C);q.position.set(...J.position),q.rotation.set(0,J.rotation,0),q.scale.set(...J.scale),this.add(q)}for(let J of I.lights){const q=new nA(Q,this.createAreaLightMaterial(J.intensity));q.position.set(...J.position),q.scale.set(...J.scale),this.add(q)}}createAreaLightMaterial(A){const Q=new b0;return Q.color.setScalar(A),Q}}var ez=0.04,C5=20,Ak=/\.hdr(\.js)?$/;class i3{constructor(A){this.threeRenderer=A,this.lottieLoaderUrl="",this.withCredentials=!1,this._ldrLoader=null,this._imageLoader=null,this._hdrLoader=null,this._lottieLoader=null,this.generatedEnvironmentMap=null,this.generatedEnvironmentMapAlt=null,this.skyboxCache=new Map,this.blurMaterial=null,this.blurScene=null}get ldrLoader(){if(this._ldrLoader==null)this._ldrLoader=new _6;return this._ldrLoader.setWithCredentials(this.withCredentials),this._ldrLoader}get imageLoader(){if(this._imageLoader==null)this._imageLoader=new TE(this.threeRenderer);return this._imageLoader.setWithCredentials(this.withCredentials),this._imageLoader}get hdrLoader(){if(this._hdrLoader==null)this._hdrLoader=new jE,this._hdrLoader.setDataType(E1);return this._hdrLoader.setWithCredentials(this.withCredentials),this._hdrLoader}async getLottieLoader(){if(this._lottieLoader==null){const{LottieLoader:A}=await import(this.lottieLoaderUrl);this._lottieLoader=new A}return this._lottieLoader.setWithCredentials(this.withCredentials),this._lottieLoader}async loadImage(A){const Q=await new Promise((B,C)=>this.ldrLoader.load(A,B,()=>{},C));return Q.name=A,Q.flipY=!1,Q}async loadLottie(A,Q){const B=await this.getLottieLoader();B.setQuality(Q);const C=await new Promise((I,E)=>B.load(A,I,()=>{},E));return C.name=A,C}async loadEquirect(A,Q=()=>{}){try{const B=Ak.test(A),C=B?this.hdrLoader:this.imageLoader,I=await new Promise((E,K)=>C.load(A,(J)=>{const{renderTarget:q}=J;if(q!=null){const{texture:G}=q;J.dispose(!1),E(G)}else E(J)},(J)=>{Q(J.loaded/J.total*0.9)},K));if(Q(1),I.name=A,I.mapping=AY,!B)I.colorSpace=$0;return I}finally{if(Q)Q(1)}}async generateEnvironmentMapAndSkybox(A=null,Q=null,B=()=>{}){const C=Q!=="legacy";if(Q==="legacy"||Q==="neutral")Q=null;Q=ZQ(Q);let I=Promise.resolve(null),E;if(A)I=this.loadEquirectFromUrl(A,B);if(Q)E=this.loadEquirectFromUrl(Q,B);else if(A)E=this.loadEquirectFromUrl(A,B);else E=C?this.loadGeneratedEnvironmentMapAlt():this.loadGeneratedEnvironmentMap();const[K,J]=await Promise.all([E,I]);if(K==null)throw new Error("Failed to load environment map.");return{environmentMap:K,skybox:J}}async loadEquirectFromUrl(A,Q){if(!this.skyboxCache.has(A)){const B=this.loadEquirect(A,Q);this.skyboxCache.set(A,B)}return this.skyboxCache.get(A)}async GenerateEnvironmentMap(A,Q){await kH();const B=this.threeRenderer,C=new y8(256,{generateMipmaps:!1,type:E1,format:o0,colorSpace:z0,depthBuffer:!0}),I=new W3(0.1,100,C),E=I.renderTarget.texture;E.name=Q;const{outputColorSpace:K,toneMapping:J}=B;return B.toneMapping=tG,B.outputColorSpace=z0,I.update(B,A),this.blurCubemap(C,ez),B.toneMapping=J,B.outputColorSpace=K,E}async loadGeneratedEnvironmentMap(){if(this.generatedEnvironmentMap==null)this.generatedEnvironmentMap=this.GenerateEnvironmentMap(new o3("legacy"),"legacy");return this.generatedEnvironmentMap}async loadGeneratedEnvironmentMapAlt(){if(this.generatedEnvironmentMapAlt==null)this.generatedEnvironmentMapAlt=this.GenerateEnvironmentMap(new o3("neutral"),"neutral");return this.generatedEnvironmentMapAlt}blurCubemap(A,Q){if(this.blurMaterial==null){this.blurMaterial=this.getBlurShader(C5);const C=new Y4,I=new nA(C,this.blurMaterial);this.blurScene=new a0,this.blurScene.add(I)}const B=A.clone();this.halfblur(A,B,Q,"latitudinal"),this.halfblur(B,A,Q,"longitudinal")}halfblur(A,Q,B,C){const E=A.width,K=isFinite(B)?Math.PI/(2*E):2*Math.PI/(2*C5-1),J=B/K,q=isFinite(B)?1+Math.floor(3*J):C5;if(q>C5)console.warn(`sigmaRadians, ${B}, is too large and will clip, as it requested ${q} samples when the maximum is set to ${C5}`);const G=[];let Y=0;for(let X=0;X<C5;++X){const U=X/J,F=Math.exp(-U*U/2);if(G.push(F),X==0)Y+=F;else if(X<q)Y+=2*F}for(let X=0;X<G.length;X++)G[X]=G[X]/Y;const H=this.blurMaterial.uniforms;H.envMap.value=A.texture,H.samples.value=q,H.weights.value=G,H.latitudinal.value=C==="latitudinal",H.dTheta.value=K,new W3(0.1,100,Q).update(this.threeRenderer,this.blurScene)}getBlurShader(A){const Q=new Float32Array(A),B=new P(0,1,0);return new l0({name:"SphericalGaussianBlur",defines:{n:A},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:Q},latitudinal:{value:!1},dTheta:{value:0},poleAxis:{value:B}},vertexShader:`
      
      varying vec3 vOutputDirection;
  
      void main() {
  
        vOutputDirection = vec3( position );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
  
      }
    `,fragmentShader:`
        varying vec3 vOutputDirection;
  
        uniform samplerCube envMap;
        uniform int samples;
        uniform float weights[ n ];
        uniform bool latitudinal;
        uniform float dTheta;
        uniform vec3 poleAxis;
  
        vec3 getSample( float theta, vec3 axis ) {
  
          float cosTheta = cos( theta );
          // Rodrigues' axis-angle rotation
          vec3 sampleDirection = vOutputDirection * cosTheta
            + cross( axis, vOutputDirection ) * sin( theta )
            + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );
  
          return vec3( textureCube( envMap, sampleDirection ) );
  
        }
  
        void main() {
  
          vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );
  
          if ( all( equal( axis, vec3( 0.0 ) ) ) ) {
  
            axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );
  
          }
  
          axis = normalize( axis );
  
          gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
          gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );
  
          for ( int i = 1; i < n; i++ ) {
  
            if ( i >= samples ) {
  
              break;
  
            }
  
            float theta = dTheta * float( i );
            gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
            gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );
  
          }
        }
      `,blending:h9,depthTest:!1,depthWrite:!1,side:P8})}async dispose(){for(let[,A]of this.skyboxCache)(await A).dispose();if(this.generatedEnvironmentMap!=null)(await this.generatedEnvironmentMap).dispose(),this.generatedEnvironmentMap=null;if(this.generatedEnvironmentMapAlt!=null)(await this.generatedEnvironmentMapAlt).dispose(),this.generatedEnvironmentMapAlt=null;if(this.blurMaterial!=null)this.blurMaterial.dispose()}}var Qk=0.2,gE=40,yE=60,qF=5,I5=[1,0.79,0.62,0.5,0.4,0.31,0.25],Bk=3,GF="high-performance",Ck=1.3;class x1 extends K1{constructor(A){super();this.loader=new d0(_E),this.width=0,this.height=0,this.dpr=1,this.scenes=new Set,this.multipleScenesVisible=!1,this.lastTick=performance.now(),this.renderedLastFrame=!1,this.scaleStep=0,this.lastStep=Bk,this.avgFrameDuration=(yE+gE)/2,this.onWebGLContextLost=(Q)=>{this.dispatchEvent({type:"contextlost",sourceEvent:Q})},this.onWebGLContextRestored=()=>{var Q;(Q=this.textureUtils)===null||Q===void 0||Q.dispose(),this.textureUtils=new i3(this.threeRenderer);for(let B of this.scenes)B.element[u8]()},this.dpr=P3(),this.canvas3D=document.createElement("canvas"),this.canvas3D.id="webgl-canvas",this.canvas3D.classList.add("show"),dA.tonemapping_pars_fragment=dA.tonemapping_pars_fragment.replace("vec3 CustomToneMapping( vec3 color ) { return color; }",`
      float startCompression = 0.8 - 0.04;
      float desaturation = 0.15;
      vec3 CustomToneMapping( vec3 color ) {
        color *= toneMappingExposure;

        float x = min(color.r, min(color.g, color.b));
        float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
        color -= offset;

        float peak = max(color.r, max(color.g, color.b));
        if (peak < startCompression) return color;

        float d = 1. - startCompression;
        float newPeak = 1. - d * d / (peak + d - startCompression);
        color *= newPeak / peak;

        float g = 1. - 1. / (desaturation * (peak - newPeak) + 1.);
        return mix(color, vec3(1, 1, 1), g);
      }`);try{this.threeRenderer=new b2({canvas:this.canvas3D,alpha:!0,antialias:!0,powerPreference:A.powerPreference,preserveDrawingBuffer:!0}),this.threeRenderer.autoClear=!0,this.threeRenderer.setPixelRatio(1),this.threeRenderer.debug={checkShaderErrors:!!A.debug,onShaderError:null},this.threeRenderer.toneMapping=S8}catch(Q){console.warn(Q)}this.arRenderer=new ME(this),this.textureUtils=this.canRender?new i3(this.threeRenderer):null,d0.initializeKTX2Loader(this.threeRenderer),this.canvas3D.addEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.addEventListener("webglcontextrestored",this.onWebGLContextRestored),this.updateRendererSize()}static get singleton(){return this._singleton}static resetSingleton(){const A=this._singleton.dispose();for(let Q of A)Q.disconnectedCallback();this._singleton=new x1({powerPreference:(self.ModelViewerElement||{}).powerPreference||GF,debug:UI()});for(let Q of A)Q.connectedCallback()}get canRender(){return this.threeRenderer!=null}get scaleFactor(){return I5[this.scaleStep]}set minScale(A){let Q=1;while(Q<I5.length){if(I5[Q]<A)break;++Q}this.lastStep=Q-1}registerScene(A){this.scenes.add(A),A.forceRescale();const Q=new DA;if(this.threeRenderer.getSize(Q),A.canvas.width=Q.x,A.canvas.height=Q.y,this.canRender&&this.scenes.size>0)this.threeRenderer.setAnimationLoop((B,C)=>this.render(B,C))}unregisterScene(A){if(this.scenes.delete(A),this.canvas3D.parentElement===A.canvas.parentElement)A.canvas.parentElement.removeChild(this.canvas3D);if(this.canRender&&this.scenes.size===0)this.threeRenderer.setAnimationLoop(null)}displayCanvas(A){return this.multipleScenesVisible?A.element[vQ]:this.canvas3D}countVisibleScenes(){const{canvas3D:A}=this;let Q=0,B=null;for(let I of this.scenes){const{element:E}=I;if(E.modelIsVisible&&I.externalRenderer==null)++Q;if(A.parentElement===I.canvas.parentElement)B=I}const C=Q>1;if(B!=null){const I=C&&!this.multipleScenesVisible,E=!B.element.modelIsVisible;if(I||E){const{width:K,height:J}=this.sceneSize(B);this.copyPixels(B,K,J),A.parentElement.removeChild(A)}}this.multipleScenesVisible=C}updateRendererSize(){var A;const Q=P3();if(Q!==this.dpr)for(let I of this.scenes){const{element:E}=I;E[b6](E.getBoundingClientRect())}let B=0,C=0;for(let I of this.scenes)B=Math.max(B,I.width),C=Math.max(C,I.height);if(B===this.width&&C===this.height&&Q===this.dpr)return;if(this.width=B,this.height=C,this.dpr=Q,B=Math.ceil(B*Q),C=Math.ceil(C*Q),this.canRender)this.threeRenderer.setSize(B,C,!1);for(let I of this.scenes){const{canvas:E}=I;E.width=B,E.height=C,I.forceRescale(),(A=I.effectRenderer)===null||A===void 0||A.setSize(B,C)}}updateRendererScale(A){const Q=this.scaleStep;if(this.avgFrameDuration+=L1(Qk*(A-this.avgFrameDuration),-qF,qF),this.avgFrameDuration>yE)++this.scaleStep;else if(this.avgFrameDuration<gE&&this.scaleStep>0)--this.scaleStep;if(this.scaleStep=Math.min(this.scaleStep,this.lastStep),Q!==this.scaleStep)this.avgFrameDuration=(yE+gE)/2}shouldRender(A){if(!A.shouldRender())if(A.scaleStep!=0)A.scaleStep=0,this.rescaleCanvas(A);else return!1;else if(A.scaleStep!=this.scaleStep)A.scaleStep=this.scaleStep,this.rescaleCanvas(A);return!0}rescaleCanvas(A){const Q=I5[A.scaleStep],B=Math.ceil(this.width/Q),C=Math.ceil(this.height/Q),{style:I}=A.canvas;I.width=`${B}px`,I.height=`${C}px`,this.canvas3D.style.width=`${B}px`,this.canvas3D.style.height=`${C}px`;const E=this.dpr*Q,K=Q<1?"GPU throttling":this.dpr!==window.devicePixelRatio?"No meta viewport tag":"";A.element.dispatchEvent(new CustomEvent("render-scale",{detail:{reportedDpr:window.devicePixelRatio,renderedDpr:E,minimumDpr:this.dpr*I5[this.lastStep],pixelWidth:Math.ceil(A.width*E),pixelHeight:Math.ceil(A.height*E),reason:K}}))}sceneSize(A){const{dpr:Q}=this,B=I5[A.scaleStep],C=Math.min(Math.ceil(A.width*B*Q),this.canvas3D.width),I=Math.min(Math.ceil(A.height*B*Q),this.canvas3D.height);return{width:C,height:I}}copyPixels(A,Q,B){const C=A.context;if(C==null){console.log("could not acquire 2d context");return}C.clearRect(0,0,Q,B),C.drawImage(this.canvas3D,0,0,Q,B,0,0,Q,B),A.canvas.classList.add("show")}orderedScenes(){const A=[];for(let Q of[!1,!0])for(let B of this.scenes)if(B.element.modelIsVisible===Q)A.push(B);return A}get isPresenting(){return this.arRenderer.isPresenting}preRender(A,Q,B){const{element:C,exposure:I,toneMapping:E}=A;C[y1](Q,B);const K=typeof I==="number"&&!Number.isNaN(I),J=C.environmentImage,q=C.skyboxImage,G=E===v9&&(J==="neutral"||J==="legacy"||!J&&!q);this.threeRenderer.toneMappingExposure=(K?I:1)*(G?Ck:1)}render(A,Q){if(Q!=null){this.arRenderer.onWebXRFrame(A,Q);return}const B=A-this.lastTick;if(this.lastTick=A,!this.canRender||this.isPresenting)return;if(this.countVisibleScenes(),this.updateRendererSize(),this.renderedLastFrame)this.updateRendererScale(B),this.renderedLastFrame=!1;const{canvas3D:C}=this;for(let I of this.orderedScenes()){const{element:E}=I;if(!E.loaded||!E.modelIsVisible&&I.renderCount>0)continue;if(this.preRender(I,A,B),!this.shouldRender(I))continue;if(I.externalRenderer!=null){const q=I.getCamera();q.updateMatrix();const{matrix:G,projectionMatrix:Y}=q,H=G.elements.slice(),Z=I.getTarget();H[12]+=Z.x,H[13]+=Z.y,H[14]+=Z.z,I.externalRenderer.render({viewMatrix:H,projectionMatrix:Y.elements});continue}if(!E.modelIsVisible&&!this.multipleScenesVisible){for(let q of this.scenes)if(q.element.modelIsVisible)q.queueRender()}const{width:K,height:J}=this.sceneSize(I);if(I.renderShadow(this.threeRenderer),this.threeRenderer.setRenderTarget(null),this.threeRenderer.setViewport(0,Math.ceil(this.height*this.dpr)-J,K,J),I.effectRenderer!=null)I.effectRenderer.render(B);else this.threeRenderer.autoClear=!0,this.threeRenderer.toneMapping=I.toneMapping,this.threeRenderer.render(I,I.camera);if(this.multipleScenesVisible||!I.element.modelIsVisible&&I.renderCount===0)this.copyPixels(I,K,J);else if(C.parentElement!==I.canvas.parentElement)I.canvas.parentElement.appendChild(C),I.canvas.classList.remove("show");I.hasRendered(),++I.renderCount,this.renderedLastFrame=!0}}dispose(){if(this.textureUtils!=null)this.textureUtils.dispose();if(this.threeRenderer!=null)this.threeRenderer.dispose();this.textureUtils=null,this.threeRenderer=null;const A=[];for(let Q of this.scenes)A.push(Q.element);return this.canvas3D.removeEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.removeEventListener("webglcontextrestored",this.onWebGLContextRestored),A}}x1._singleton=new x1({powerPreference:(self.ModelViewerElement||{}).powerPreference||GF,debug:UI()});var vA=Symbol("correlatedObjects"),X0=Symbol("onUpdate");class P2{constructor(A,Q=null){this[X0]=A,this[vA]=Q}}var YF=new b0,Ik=new q1(2,2),Ek=0,z1=Symbol("threeTexture"),HF=Symbol("threeTextures"),Tv=Symbol("applyTexture");class xE extends P2{get[z1](){var A;return(A=this[vA])===null||A===void 0?void 0:A.values().next().value}get[HF](){return this[vA]}constructor(A,Q){super(A,new Set(Q?[Q]:[]));if(!this[z1].image.src)this[z1].image.src=Q.name?Q.name:"adhoc_image"+Ek++;if(!this[z1].image.name)this[z1].image.name=Q&&Q.image&&Q.image.src?Q.image.src.split("/").pop():"adhoc_image"}get name(){return this[z1].image.name||""}get uri(){return this[z1].image.src}get bufferView(){return this[z1].image.bufferView}get element(){const A=this[z1];if(A&&(A.isCanvasTexture||A.isVideoTexture))return A.image;return}get animation(){const A=this[z1];if(A&&A.isCanvasTexture&&A.animation)return A.animation;return}get type(){return this.uri!=null?"external":"embedded"}set name(A){for(let Q of this[HF])Q.image.name=A}update(){const A=this[z1];if(A&&A.isCanvasTexture&&!A.animation)this[z1].needsUpdate=!0,this[X0]()}async createThumbnail(A,Q){const B=new a0;YF.map=this[z1];const C=new nA(Ik,YF);B.add(C);const I=new V2(-1,1,1,-1,0,1),{threeRenderer:E}=x1.singleton,K=new N1(A,Q);E.setRenderTarget(K),E.render(B,I),E.setRenderTarget(null);const J=new Uint8Array(A*Q*4);E.readRenderTargetPixels(K,0,0,A,Q,J),D4.width=A,D4.height=Q;const q=D4.getContext("2d"),G=q.createImageData(A,Q);return G.data.set(J),q.putImageData(G,0,0),new Promise(async(Y,H)=>{D4.toBlob((Z)=>{if(!Z)return H("Failed to capture thumbnail.");Y(URL.createObjectURL(Z))},"image/png")})}}var e0;(function(A){A[A.Nearest=9728]="Nearest",A[A.Linear=9729]="Linear",A[A.NearestMipmapNearest=9984]="NearestMipmapNearest",A[A.LinearMipmapNearest=9985]="LinearMipmapNearest",A[A.NearestMipmapLinear=9986]="NearestMipmapLinear",A[A.LinearMipmapLinear=9987]="LinearMipmapLinear"})(e0||(e0={}));var R4;(function(A){A[A.ClampToEdge=33071]="ClampToEdge",A[A.MirroredRepeat=33648]="MirroredRepeat",A[A.Repeat=10497]="Repeat"})(R4||(R4={}));var ZF=new Map([[R4.Repeat,E2],[R4.ClampToEdge,H1],[R4.MirroredRepeat,N6]]),hE=new Map([[E2,R4.Repeat],[H1,R4.ClampToEdge],[N6,R4.MirroredRepeat]]),Kk=new Map([[e0.Nearest,v2],[e0.Linear,g0],[e0.NearestMipmapNearest,w6],[e0.LinearMipmapNearest,L6],[e0.NearestMipmapLinear,O6],[e0.LinearMipmapLinear,f2]]),FF=new Map([[v2,e0.Nearest],[g0,e0.Linear],[w6,e0.NearestMipmapNearest],[L6,e0.LinearMipmapNearest],[O6,e0.NearestMipmapLinear],[f2,e0.LinearMipmapLinear]]),Jk=new Map([[e0.Nearest,v2],[e0.Linear,g0]]),WF=new Map([[v2,e0.Nearest],[g0,e0.Linear]]),qk=(()=>{return(A)=>FF.has(A)})(),Gk=(()=>{return(A)=>WF.has(A)})(),Yk=(()=>{return(A)=>hE.has(A)})(),Hk=(A,Q)=>{switch(A){case"minFilter":return qk(Q);case"magFilter":return Gk(Q);case"wrapS":case"wrapT":return Yk(Q);case"rotation":case"repeat":case"offset":return!0;default:throw new Error(`Cannot configure property "${A}" on Sampler`)}},V4=Symbol("threeTexture"),XF=Symbol("threeTextures"),s4=Symbol("setProperty");class vE extends P2{get[V4](){var A;return(A=this[vA])===null||A===void 0?void 0:A.values().next().value}get[XF](){return this[vA]}constructor(A,Q){super(A,new Set(Q?[Q]:[]))}get name(){return this[V4].name||""}get minFilter(){return FF.get(this[V4].minFilter)}get magFilter(){return WF.get(this[V4].magFilter)}get wrapS(){return hE.get(this[V4].wrapS)}get wrapT(){return hE.get(this[V4].wrapT)}get rotation(){return this[V4].rotation}get scale(){return a3(this[V4].repeat)}get offset(){return a3(this[V4].offset)}setMinFilter(A){this[s4]("minFilter",Kk.get(A))}setMagFilter(A){this[s4]("magFilter",Jk.get(A))}setWrapS(A){this[s4]("wrapS",ZF.get(A))}setWrapT(A){this[s4]("wrapT",ZF.get(A))}setRotation(A){if(A==null)A=0;this[s4]("rotation",A)}setScale(A){if(A==null)A={u:1,v:1};this[s4]("repeat",new DA(A.u,A.v))}setOffset(A){if(A==null)A={u:0,v:0};this[s4]("offset",new DA(A.u,A.v))}[s4](A,Q){if(Hk(A,Q))for(let B of this[XF])B[A]=Q,B.needsUpdate=!0;this[X0]()}}var UF=Symbol("image"),DF=Symbol("sampler"),RF=Symbol("threeTexture");class r3 extends P2{constructor(A,Q){super(A,new Set(Q?[Q]:[]));this[DF]=new vE(A,Q),this[UF]=new xE(A,Q)}get[RF](){var A;return(A=this[vA])===null||A===void 0?void 0:A.values().next().value}get name(){return this[RF].name||""}set name(A){for(let Q of this[vA])Q.name=A}get sampler(){return this[DF]}get source(){return this[UF]}}var NF,wF,OF,p6=Symbol("texture"),u6=Symbol("transform"),fE=Symbol("materials"),VF=Symbol("usage"),E5=Symbol("onUpdate"),t3=Symbol("activeVideo"),gA;(function(A){A[A.Base=0]="Base",A[A.MetallicRoughness=1]="MetallicRoughness",A[A.Normal=2]="Normal",A[A.Occlusion=3]="Occlusion",A[A.Emissive=4]="Emissive",A[A.Clearcoat=5]="Clearcoat",A[A.ClearcoatRoughness=6]="ClearcoatRoughness",A[A.ClearcoatNormal=7]="ClearcoatNormal",A[A.SheenColor=8]="SheenColor",A[A.SheenRoughness=9]="SheenRoughness",A[A.Transmission=10]="Transmission",A[A.Thickness=11]="Thickness",A[A.Specular=12]="Specular",A[A.SpecularColor=13]="SpecularColor",A[A.Iridescence=14]="Iridescence",A[A.IridescenceThickness=15]="IridescenceThickness",A[A.Anisotropy=16]="Anisotropy"})(gA||(gA={}));class N4{constructor(A,Q,B,C){if(this[NF]=null,this[wF]={rotation:0,scale:new DA(1,1),offset:new DA(0,0)},this[OF]=!1,B)this[u6].rotation=B.rotation,this[u6].scale.copy(B.repeat),this[u6].offset.copy(B.offset),this[p6]=new r3(A,B);this[E5]=A,this[fE]=C,this[VF]=Q}get texture(){return this[p6]}setTexture(A){var Q,B;const C=A!=null?A.source[z1]:null,I=(Q=this[p6])===null||Q===void 0?void 0:Q.source[z1];if(I!=null&&I.isVideoTexture)this[t3]=!1;else if((B=this[p6])===null||B===void 0?void 0:B.source.animation)this[p6].source.animation.removeEventListener("enterFrame",this[E5]);if(this[p6]=A,C!=null&&C.isVideoTexture){const K=C.image;if(this[t3]=!0,K.requestVideoFrameCallback!=null){const J=()=>{if(!this[t3])return;this[E5](),K.requestVideoFrameCallback(J)};K.requestVideoFrameCallback(J)}else{const J=()=>{if(!this[t3])return;this[E5](),requestAnimationFrame(J)};requestAnimationFrame(J)}}else if((A===null||A===void 0?void 0:A.source.animation)!=null)A.source.animation.addEventListener("enterFrame",this[E5]);let E=$0;if(this[fE])for(let K of this[fE]){switch(this[VF]){case gA.Base:K.map=C;break;case gA.MetallicRoughness:E=z0,K.metalnessMap=C,K.roughnessMap=C;break;case gA.Normal:E=z0,K.normalMap=C;break;case gA.Occlusion:E=z0,K.aoMap=C;break;case gA.Emissive:K.emissiveMap=C;break;case gA.Clearcoat:K.clearcoatMap=C;break;case gA.ClearcoatRoughness:K.clearcoatRoughnessMap=C;break;case gA.ClearcoatNormal:K.clearcoatNormalMap=C;break;case gA.SheenColor:K.sheenColorMap=C;break;case gA.SheenRoughness:K.sheenRoughnessMap=C;break;case gA.Transmission:K.transmissionMap=C;break;case gA.Thickness:K.thicknessMap=C;break;case gA.Specular:K.specularIntensityMap=C;break;case gA.SpecularColor:K.specularColorMap=C;break;case gA.Iridescence:K.iridescenceMap=C;break;case gA.IridescenceThickness:K.iridescenceThicknessMap=C;break;case gA.Anisotropy:K.anisotropyMap=C;break;default:}K.needsUpdate=!0}if(C)C.colorSpace=E,C.rotation=this[u6].rotation,C.repeat=this[u6].scale,C.offset=this[u6].offset;this[E5]()}}NF=p6,wF=u6,OF=t3;var e3=Symbol("threeMaterial"),fQ=Symbol("threeMaterials"),LF=Symbol("baseColorTexture"),zF=Symbol("metallicRoughnessTexture");class bE extends P2{constructor(A,Q){super(A,Q);const{map:B,metalnessMap:C}=Q.values().next().value;this[LF]=new N4(A,gA.Base,B,Q),this[zF]=new N4(A,gA.MetallicRoughness,C,Q)}get[fQ](){return this[vA]}get[e3](){var A;return(A=this[vA])===null||A===void 0?void 0:A.values().next().value}get baseColorFactor(){const A=[0,0,0,this[e3].opacity];return this[e3].color.toArray(A),A}get metallicFactor(){return this[e3].metalness}get roughnessFactor(){return this[e3].roughness}get baseColorTexture(){return this[LF]}get metallicRoughnessTexture(){return this[zF]}setBaseColorFactor(A){const Q=new PA;if(A instanceof Array)Q.fromArray(A);else Q.set(A);for(let B of this[fQ])if(B.color.set(Q),A instanceof Array)B.opacity=A[3];else A=[0,0,0,B.opacity],Q.toArray(A);this[X0]()}setMetallicFactor(A){for(let Q of this[fQ])Q.metalness=A;this[X0]()}setRoughnessFactor(A){for(let Q of this[fQ])Q.roughness=A;this[X0]()}}var kF,MF,$F=Symbol("pbrMetallicRoughness"),_F=Symbol("normalTexture"),PF=Symbol("occlusionTexture"),SF=Symbol("emissiveTexture"),T0=Symbol("backingThreeMaterial"),TF=Symbol("applyAlphaCutoff"),pE=Symbol("getAlphaMode"),K5=Symbol("lazyLoadGLTFInfo"),uE=Symbol("initialize"),bQ=Symbol("getLoadedMaterial"),wA=Symbol("ensureMaterialIsLoaded"),jF=Symbol("gltfIndex"),J5=Symbol("setActive"),Q7=Symbol("variantIndices"),mE=Symbol("isActive"),A7=Symbol("variantSet"),gF=Symbol("modelVariants"),dE=Symbol("name"),l1=Symbol("pbrTextures");class B7 extends P2{constructor(A,Q,B,C,I,E,K=void 0){super(A,I);if(this[kF]=new Set,this[MF]=new Map,this[jF]=Q,this[mE]=B,this[gF]=C,this[dE]=E,K==null)this[uE]();else this[K5]=K}get[(kF=A7,MF=l1,T0)](){return this[vA].values().next().value}[uE](){const A=this[X0],Q=this[vA];this[$F]=new bE(A,Q);const{normalMap:B,aoMap:C,emissiveMap:I}=Q.values().next().value;this[_F]=new N4(A,gA.Normal,B,Q),this[PF]=new N4(A,gA.Occlusion,C,Q),this[SF]=new N4(A,gA.Emissive,I,Q);const E=(K)=>{this[l1].set(K,new N4(A,K,null,Q))};E(gA.Clearcoat),E(gA.ClearcoatRoughness),E(gA.ClearcoatNormal),E(gA.SheenColor),E(gA.SheenRoughness),E(gA.Transmission),E(gA.Thickness),E(gA.Specular),E(gA.SpecularColor),E(gA.Iridescence),E(gA.IridescenceThickness),E(gA.Anisotropy)}async[bQ](){if(this[K5]!=null){const{set:A,material:Q}=await this[K5].doLazyLoad();return this[vA]=A,this[uE](),this[K5]=void 0,this.ensureLoaded=async()=>{},Q}return this[vA].values().next().value}colorFromRgb(A){const Q=new PA;if(A instanceof Array)Q.fromArray(A);else Q.set(A);return Q}[wA](){if(this[K5]==null)return;throw new Error(`Material "${this.name}" has not been loaded, call 'await
    myMaterial.ensureLoaded()' before using an unloaded material.`)}async ensureLoaded(){await this[bQ]()}get isLoaded(){return this[K5]==null}get isActive(){return this[mE]}[J5](A){this[mE]=A}get name(){return this[dE]||""}set name(A){if(this[dE]=A,this[vA]!=null)for(let Q of this[vA])Q.name=A}get pbrMetallicRoughness(){return this[wA](),this[$F]}get normalTexture(){return this[wA](),this[_F]}get occlusionTexture(){return this[wA](),this[PF]}get emissiveTexture(){return this[wA](),this[SF]}get emissiveFactor(){return this[wA](),this[T0].emissive.toArray()}get index(){return this[jF]}[Q7](){return this[A7]}hasVariant(A){const Q=this[gF].get(A);return Q!=null&&this[A7].has(Q.index)}setEmissiveFactor(A){this[wA]();const Q=this.colorFromRgb(A);for(let B of this[vA])B.emissive.set(Q);this[X0]()}[pE](){if(this[T0].transparent)return"BLEND";else if(this[T0].alphaTest>0)return"MASK";return"OPAQUE"}[TF](){this[wA]();for(let A of this[vA]){if(this[pE]()==="MASK"){if(A.alphaTest==null)A.alphaTest=0.5}else A.alphaTest=void 0;A.needsUpdate=!0}}setAlphaCutoff(A){this[wA]();for(let Q of this[vA])Q.alphaTest=A,Q.needsUpdate=!0;this[TF](),this[X0]()}getAlphaCutoff(){return this[wA](),this[T0].alphaTest}setDoubleSided(A){this[wA]();for(let Q of this[vA])Q.side=A?I2:_8,Q.needsUpdate=!0;this[X0]()}getDoubleSided(){return this[wA](),this[T0].side==I2}setAlphaMode(A){this[wA]();const Q=(B,C)=>{B.transparent=C,B.depthWrite=!C};for(let B of this[vA]){if(Q(B,A==="BLEND"),A==="MASK")B.alphaTest=0.5;else B.alphaTest=void 0;B.needsUpdate=!0}this[X0]()}getAlphaMode(){return this[wA](),this[pE]()}get emissiveStrength(){return this[wA](),this[T0].emissiveIntensity}setEmissiveStrength(A){this[wA]();for(let Q of this[vA])Q.emissiveIntensity=A;this[X0]()}get clearcoatFactor(){return this[wA](),this[T0].clearcoat}get clearcoatRoughnessFactor(){return this[wA](),this[T0].clearcoatRoughness}get clearcoatTexture(){return this[wA](),this[l1].get(gA.Clearcoat)}get clearcoatRoughnessTexture(){return this[wA](),this[l1].get(gA.ClearcoatRoughness)}get clearcoatNormalTexture(){return this[wA](),this[l1].get(gA.ClearcoatNormal)}get clearcoatNormalScale(){return this[wA](),this[T0].clearcoatNormalScale.x}setClearcoatFactor(A){this[wA]();for(let Q of this[vA])Q.clearcoat=A;this[X0]()}setClearcoatRoughnessFactor(A){this[wA]();for(let Q of this[vA])Q.clearcoatRoughness=A;this[X0]()}setClearcoatNormalScale(A){this[wA]();for(let Q of this[vA])Q.clearcoatNormalScale=new DA(A,A);this[X0]()}get ior(){return this[wA](),this[T0].ior}setIor(A){this[wA]();for(let Q of this[vA])Q.ior=A;this[X0]()}get sheenColorFactor(){return this[wA](),this[T0].sheenColor.toArray()}get sheenColorTexture(){return this[wA](),this[l1].get(gA.SheenColor)}get sheenRoughnessFactor(){return this[wA](),this[T0].sheenRoughness}get sheenRoughnessTexture(){return this[wA](),this[l1].get(gA.SheenRoughness)}setSheenColorFactor(A){this[wA]();const Q=this.colorFromRgb(A);for(let B of this[vA])B.sheenColor.set(Q),B.sheen=1;this[X0]()}setSheenRoughnessFactor(A){this[wA]();for(let Q of this[vA])Q.sheenRoughness=A,Q.sheen=1;this[X0]()}get transmissionFactor(){return this[wA](),this[T0].transmission}get transmissionTexture(){return this[wA](),this[l1].get(gA.Transmission)}setTransmissionFactor(A){this[wA]();for(let Q of this[vA])Q.transmission=A;this[X0]()}get thicknessFactor(){return this[wA](),this[T0].thickness}get thicknessTexture(){return this[wA](),this[l1].get(gA.Thickness)}get attenuationDistance(){return this[wA](),this[T0].attenuationDistance}get attenuationColor(){return this[wA](),this[T0].attenuationColor.toArray()}setThicknessFactor(A){this[wA]();for(let Q of this[vA])Q.thickness=A;this[X0]()}setAttenuationDistance(A){this[wA]();for(let Q of this[vA])Q.attenuationDistance=A;this[X0]()}setAttenuationColor(A){this[wA]();const Q=this.colorFromRgb(A);for(let B of this[vA])B.attenuationColor.set(Q);this[X0]()}get specularFactor(){return this[wA](),this[T0].specularIntensity}get specularTexture(){return this[wA](),this[l1].get(gA.Specular)}get specularColorFactor(){return this[wA](),this[T0].specularColor.toArray()}get specularColorTexture(){return this[wA](),this[l1].get(gA.SheenColor)}setSpecularFactor(A){this[wA]();for(let Q of this[vA])Q.specularIntensity=A;this[X0]()}setSpecularColorFactor(A){this[wA]();const Q=this.colorFromRgb(A);for(let B of this[vA])B.specularColor.set(Q);this[X0]()}get iridescenceFactor(){return this[wA](),this[T0].iridescence}get iridescenceTexture(){return this[wA](),this[l1].get(gA.Iridescence)}get iridescenceIor(){return this[wA](),this[T0].iridescenceIOR}get iridescenceThicknessMinimum(){return this[wA](),this[T0].iridescenceThicknessRange[0]}get iridescenceThicknessMaximum(){return this[wA](),this[T0].iridescenceThicknessRange[1]}get iridescenceThicknessTexture(){return this[wA](),this[l1].get(gA.IridescenceThickness)}setIridescenceFactor(A){this[wA]();for(let Q of this[vA])Q.iridescence=A;this[X0]()}setIridescenceIor(A){this[wA]();for(let Q of this[vA])Q.iridescenceIOR=A;this[X0]()}setIridescenceThicknessMinimum(A){this[wA]();for(let Q of this[vA])Q.iridescenceThicknessRange[0]=A;this[X0]()}setIridescenceThicknessMaximum(A){this[wA]();for(let Q of this[vA])Q.iridescenceThicknessRange[1]=A;this[X0]()}get anisotropyStrength(){return this[wA](),this[T0].anisotropy}get anisotropyRotation(){return this[wA](),this[T0].anisotropyRotation}get anisotropyTexture(){return this[wA](),this[l1].get(gA.Anisotropy)}setAnisotropyStrength(A){this[wA]();for(let Q of this[vA])Q.anisotropy=A;this[X0]()}setAnisotropyRotation(A){this[wA]();for(let Q of this[vA])Q.anisotropyRotation=A;this[X0]()}}class pQ{constructor(A){this.name="",this.children=new Array,this.name=A}}class C7 extends pQ{constructor(A,Q,B,C){super(A.name);this.materials=new Map,this.variantToMaterialMap=new Map,this.initialMaterialIdx=0,this.activeMaterialIdx=0,this.mesh=A;const{gltf:I,threeGLTF:E,threeObjectMap:K}=C;this.parser=E.parser,this.modelVariants=B,this.mesh.userData.variantData=B;const J=K.get(A.material);if(J.materials!=null)this.initialMaterialIdx=this.activeMaterialIdx=J.materials;else console.error(`Primitive (${A.name}) missing initial material reference.`);const q=A.userData.associations||{};if(q.meshes==null){console.error("Mesh is missing primitive index association");return}const H=((I.meshes||[])[q.meshes].primitives||[])[q.primitives];if(H==null){console.error("Mesh primitive definition is missing.");return}if(H.material!=null)this.materials.set(H.material,Q[H.material]);else{const Z=Q.findIndex((X)=>{return X.name==="Default"});if(Z>=0)this.materials.set(Z,Q[Z]);else console.warn("gltfPrimitive has no material!")}if(H.extensions&&H.extensions.KHR_materials_variants){const Z=H.extensions.KHR_materials_variants,U=E.parser.json.extensions.KHR_materials_variants.variants;for(let F of Z.mappings){const W=Q[F.material];this.materials.set(F.material,W);for(let D of F.variants){const{name:V}=U[D];if(this.variantToMaterialMap.set(D,W),W[Q7]().add(D),!B.has(V))B.set(V,{name:V,index:D})}}}}async setActiveMaterial(A){const Q=this.materials.get(A);if(Q!=null&&A!==this.activeMaterialIdx){this.mesh.material=await Q[bQ]();const{normalScale:B}=this.mesh.material;if(B!=null&&B.y*B.x<0!=(this.mesh.geometry.attributes.tangent==null))this.parser.assignFinalMaterial(this.mesh);this.activeMaterialIdx=A}return this.mesh.material}getActiveMaterial(){return this.materials.get(this.activeMaterialIdx)}getMaterial(A){return this.materials.get(A)}async enableVariant(A){if(A==null)return this.setActiveMaterial(this.initialMaterialIdx);if(this.variantToMaterialMap!=null&&this.modelVariants.has(A)){const Q=this.modelVariants.get(A);return this.enableVariantHelper(Q.index)}return null}async enableVariantHelper(A){if(this.variantToMaterialMap!=null&&A!=null){const Q=this.variantToMaterialMap.get(A);if(Q!=null)return this.setActiveMaterial(Q.index)}return null}async instantiateVariants(){if(this.variantToMaterialMap==null)return;for(let A of this.variantToMaterialMap.keys()){const Q=this.mesh.userData.variantMaterials.get(A);if(Q.material!=null)continue;const B=await this.enableVariantHelper(A);if(B!=null)Q.material=B}}get variantInfo(){return this.variantToMaterialMap}addVariant(A,Q){if(!this.ensureVariantIsUnused(Q))return!1;if(!this.modelVariants.has(Q))this.modelVariants.set(Q,{name:Q,index:this.modelVariants.size});const C=this.modelVariants.get(Q).index;return A[Q7]().add(C),this.variantToMaterialMap.set(C,A),this.materials.set(A.index,A),this.updateVariantUserData(C,A),!0}deleteVariant(A){if(this.variantInfo.has(A)){this.variantInfo.delete(A);const Q=this.mesh.userData.variantMaterials;if(Q!=null)Q.delete(A)}}updateVariantUserData(A,Q){Q[Q7]().add(A),this.mesh.userData.variantData=this.modelVariants,this.mesh.userData.variantMaterials=this.mesh.userData.variantMaterials||new Map,this.mesh.userData.variantMaterials.set(A,{material:Q[vA].values().next().value,gltfMaterialIndex:Q.index})}ensureVariantIsUnused(A){const Q=this.modelVariants.get(A);if(Q!=null&&this.variantInfo.has(Q.index))return console.warn(`Primitive cannot add variant '${A}' for this material, it already exists.`),!1;return!0}}var yF,xF,hF,vF,fF,bF,m6=Symbol("materials"),uQ=Symbol("hierarchy"),pF=Symbol("roots"),w4=Symbol("primitives"),Gf=Symbol("loadVariant"),lE=Symbol("prepareVariantsForExport"),sE=Symbol("switchVariant"),nE=Symbol("materialFromPoint"),mQ=Symbol("nodeFromPoint"),oE=Symbol("nodeFromIndex"),k1=Symbol("variantData"),dQ=Symbol("availableVariants"),cE=Symbol("modelOnUpdate"),uF=Symbol("cloneMaterial");class mF{constructor(A,Q,B,C){this.gltf=A,this.gltfElementMap=Q,this.mapKey=B,this.doLazyLoad=C}}class iE{constructor(A,Q=()=>{}){this[yF]=new Array,this[xF]=new Array,this[hF]=new Array,this[vF]=new Array,this[fF]=()=>{},this[bF]=new Map,this[cE]=Q;const{gltf:B,threeGLTF:C,gltfElementMap:I}=A;for(let[J,q]of B.materials.entries()){const G=I.get(q);if(G!=null)this[m6].push(new B7(Q,J,!0,this[k1],G,q.name));else{const H=(B.materials||[])[J],Z=J,X=async()=>{const U=await C.parser.getDependency("material",Z),F=new Set;return I.set(H,F),F.add(U),{set:F,material:U}};this[m6].push(new B7(Q,J,!1,this[k1],G,q.name,new mF(B,I,H,X)))}}const E=new Map,K=new Array;for(let J of C.scene.children)K.push(J);while(K.length>0){const J=K.pop();let q=null;if(J instanceof nA)q=new C7(J,this.materials,this[k1],A),this[w4].push(q);else q=new pQ(J.name);const G=E.get(J);if(G!=null)G.children.push(q);else this[pF].push(q);this[uQ].push(q);for(let Y of J.children)K.push(Y),E.set(J,q)}}get materials(){return this[m6]}[(yF=m6,xF=uQ,hF=pF,vF=w4,fF=cE,bF=k1,dQ)](){const A=Array.from(this[k1].values());return A.sort((Q,B)=>{return Q.index-B.index}),A.map((Q)=>{return Q.name})}getMaterialByName(A){const Q=this[m6].filter((B)=>{return B.name===A});if(Q.length>0)return Q[0];return null}[oE](A,Q){const B=this[uQ].find((C)=>{if(C instanceof C7){const{meshes:I,primitives:E}=C.mesh.userData.associations;if(I==A&&E==Q)return!0}return!1});return B==null?null:B}[mQ](A){return this[uQ].find((Q)=>{if(Q instanceof C7){if(Q.mesh===A.object)return!0}return!1})}[nE](A){return this[mQ](A).getActiveMaterial()}async[sE](A){for(let Q of this[w4])await Q.enableVariant(A);for(let Q of this.materials)Q[J5](!1);for(let Q of this[w4])this.materials[Q.getActiveMaterial().index][J5](!0)}async[lE](){const A=new Array;for(let Q of this[w4])A.push(Q.instantiateVariants());await Promise.all(A)}[uF](A,Q){const B=this.materials[A];if(!B.isLoaded)console.error(`Cloning an unloaded material,
           call 'material.ensureLoaded() before cloning the material.`);const C=B[vA],I=new Set;for(let[K,J]of C.entries()){const q=J.clone();q.name=Q+(C.size>1?"_inst"+K:""),I.add(q)}const E=new B7(this[cE],this[m6].length,!1,this[k1],I,Q);return this[m6].push(E),E}createMaterialInstanceForVariant(A,Q,B,C=!0){let I=null;for(let E of this[w4]){const K=this[k1].get(B);if(K!=null&&E.variantInfo.has(K.index))continue;if(E.getMaterial(A)==null)continue;if(!this.hasVariant(B))this.createVariant(B);if(I==null)I=this[uF](A,Q);E.addVariant(I,B)}if(C&&I!=null){I[J5](!0),this.materials[A][J5](!1);for(let E of this[w4])E.enableVariant(B)}return I}createVariant(A){if(!this[k1].has(A))this[k1].set(A,{name:A,index:this[k1].size});else console.warn(`Variant '${A}'' already exists`)}hasVariant(A){return this[k1].has(A)}setMaterialToVariant(A,Q){if(this[dQ]().find((B)=>B===Q)==null){console.warn(`Can't add material to '${Q}', the variant does not exist.'`);return}if(A<0||A>=this.materials.length){console.error("setMaterialToVariant(): materialIndex is out of bounds.");return}for(let B of this[w4]){const C=B.getMaterial(A);if(C!=null)B.addVariant(C,Q)}}updateVariantName(A,Q){const B=this[k1].get(A);if(B==null)return;B.name=Q,this[k1].set(Q,B),this[k1].delete(A)}deleteVariant(A){const Q=this[k1].get(A);if(Q==null)return;for(let B of this.materials)if(B.hasVariant(A))B[A7].delete(Q.index);for(let B of this[w4])B.deleteVariant(Q.index);this[k1].delete(A)}}var aE=function(A,Q,B,C){var I=arguments.length,E=I<3?Q:C===null?C=Object.getOwnPropertyDescriptor(Q,B):C,K;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")E=Reflect.decorate(A,Q,B,C);else for(var J=A.length-1;J>=0;J--)if(K=A[J])E=(I<3?K(E):I>3?K(Q,B,E):K(Q,B))||E;return I>3&&E&&Object.defineProperty(Q,B,E),E},E7=Symbol("currentGLTF"),K7=Symbol("originalGltfJson"),n4=Symbol("model"),rE=Symbol("getOnUpdateMethod"),I7=Symbol("buildTexture"),dF=(A)=>{var Q,B,C;class I extends A{constructor(){super(...arguments);this[Q]=void 0,this[B]=null,this[C]=null,this.variantName=null,this.orientation="0 0 0",this.scale="1 1 1"}get model(){return this[n4]}get availableVariants(){return this.model?this.model[dQ]():[]}get originalGltfJson(){return this[K7]}[(Q=n4,B=E7,C=K7,rE)](){return()=>{this[p0]()}}[I7](E){return E.colorSpace=$0,E.wrapS=E2,E.wrapT=E2,new r3(this[rE](),E)}async createTexture(E,K="image/png"){const{textureUtils:J}=this[I0],q=await J.loadImage(E);return q.userData.mimeType=K,this[I7](q)}async createLottieTexture(E,K=1){const{textureUtils:J}=this[I0],q=await J.loadLottie(E,K);return this[I7](q)}createVideoTexture(E){const K=document.createElement("video");K.crossOrigin=this.withCredentials?"use-credentials":"anonymous",K.src=E,K.muted=!0,K.playsInline=!0,K.loop=!0,K.play();const J=new cC(K);return this[I7](J)}createCanvasTexture(){const E=document.createElement("canvas"),K=new h8(E);return this[I7](K)}async updated(E){if(super.updated(E),E.has("variantName")){const K=this[O2].beginActivity("variant-update");K(0.1);const J=this[n4],{variantName:q}=this;if(J!=null)await J[sE](q),this[p0](),this.dispatchEvent(new CustomEvent("variant-applied"));K(1)}if(E.has("orientation")||E.has("scale")){if(!this.loaded)return;const K=this[EA];K.applyTransform(),K.updateBoundingBox(),K.updateShadow(),this[I0].arRenderer.onUpdateScene(),this[p0]()}}[k2](){super[k2]();const{currentGLTF:E}=this[EA];if(E!=null){const{correlatedSceneGraph:K}=E;if(K!=null&&E!==this[E7])this[n4]=new iE(K,this[rE]()),this[K7]=JSON.parse(JSON.stringify(K.gltf));if("variants"in E.userData)this.requestUpdate("variantName")}this[E7]=E}async exportScene(E){const K=this[EA];return new Promise(async(J,q)=>{const G={binary:!0,onlyVisible:!0,maxTextureSize:Infinity,includeCustomExtensions:!1,forceIndices:!1};Object.assign(G,E),G.animations=K.animations,G.truncateDrawRange=!0;const Y=K.shadow;let H=!1;if(Y!=null)H=Y.visible,Y.visible=!1;if(await this[n4][lE](),new x3().register((X)=>new RQ(X)).parse(K.model,(X)=>{return J(new Blob([G.binary?X:JSON.stringify(X)],{type:G.binary?"application/octet-stream":"application/json"}))},()=>{return q("glTF export failed")},G),Y!=null)Y.visible=H})}materialFromPoint(E,K){const J=this[n4];if(J==null)return null;const q=this[EA],G=q.getNDC(E,K),Y=q.hitFromPoint(G);if(Y==null||Y.face==null)return null;return J[nE](Y)}}return aE([LA({type:String,attribute:"variant-name"})],I.prototype,"variantName",void 0),aE([LA({type:String,attribute:"orientation"})],I.prototype,"orientation",void 0),aE([LA({type:String,attribute:"scale"})],I.prototype,"scale",void 0),I};var Zk=function(A,Q,B){const C=new t9(Q,2*B,B);C.scale(1,1,-1);const I=C.getAttribute("position"),E=new P;for(let K=0;K<I.count;++K)if(E.fromBufferAttribute(I,K),E.y<0){const J=-A*3/2,q=E.y<J?-A/E.y:1-E.y*E.y/(3*J*J);E.multiplyScalar(q),E.toArray(I.array,3*K)}return I.needsUpdate=!0,C};class tE extends nA{constructor(){super(void 0,new b0({depthWrite:!1}));this.height=0,this.radius=0,this.resolution=0,this.userData.noHit=!0}get map(){return this.material.map}set map(A){this.material.map=A}isUsable(){return this.height>0&&this.radius>0&&this.geometry!=null&&this.map!=null}updateGeometry(A=this.height,Q=this.radius,B=128){if(A!=this.height||Q!=this.radius||B!=this.resolution){if(this.height=A,this.radius=Q,this.resolution=B,A>0&&Q>0)this.geometry.dispose(),this.geometry=Zk(A,Q,B)}}}var cQ=new P,eE=new P,AK=new P,lQ=new fA,cF=new p1,lF=new v0;class J7 extends EE{constructor(A){super(document.createElement("div"));this.normal=new P(0,1,0),this.initialized=!1,this.referenceCount=1,this.pivot=document.createElement("div"),this.slot=document.createElement("slot"),this.element.classList.add("annotation-wrapper"),this.slot.name=A.name,this.element.appendChild(this.pivot),this.pivot.appendChild(this.slot),this.updatePosition(A.position),this.updateNormal(A.normal),this.surface=A.surface}get facingCamera(){return!this.element.classList.contains("hide")}show(){if(!this.facingCamera||!this.initialized)this.updateVisibility(!0)}hide(){if(this.facingCamera||!this.initialized)this.updateVisibility(!1)}increment(){this.referenceCount++}decrement(){if(this.referenceCount>0)--this.referenceCount;return this.referenceCount===0}updatePosition(A){if(A==null)return;const Q=d1(A)[0].terms;for(let B=0;B<3;++B)this.position.setComponent(B,c1(Q[B]).number);this.updateMatrixWorld()}updateNormal(A){if(A==null)return;const Q=d1(A)[0].terms;for(let B=0;B<3;++B)this.normal.setComponent(B,Q[B].number)}updateSurface(A){if(!A&&this.initialized)return;const{mesh:Q,tri:B,bary:C}=this;if(Q==null||B==null||C==null)return;Q.getVertexPosition(B.x,cQ),Q.getVertexPosition(B.y,eE),Q.getVertexPosition(B.z,AK),cQ.toArray(lQ.elements,0),eE.toArray(lQ.elements,3),AK.toArray(lQ.elements,6),this.position.copy(C).applyMatrix3(lQ);const I=this.parent;I.worldToLocal(Q.localToWorld(this.position)),cF.set(cQ,eE,AK),cF.getNormal(this.normal).transformDirection(Q.matrixWorld);const E=I.parent;lF.setFromAxisAngle(cQ.set(0,1,0),-E.yaw),this.normal.applyQuaternion(lF)}orient(A){this.pivot.style.transform=`rotate(${A}rad)`}updateVisibility(A){this.element.classList.toggle("hide",!A),this.slot.assignedNodes().forEach((Q)=>{if(Q.nodeType!==Node.ELEMENT_NODE)return;const B=Q,C=B.dataset.visibilityAttribute;if(C!=null){const I=`data-${C}`;B.toggleAttribute(I,A)}B.dispatchEvent(new CustomEvent("hotspot-visibility",{detail:{visible:A}}))}),this.initialized=!0}}var sF={name:"HorizontalBlurShader",uniforms:{tDiffuse:{value:null},h:{value:0.001953125}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float h;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

			gl_FragColor = sum;

		}`};var nF={name:"VerticalBlurShader",uniforms:{tDiffuse:{value:null},v:{value:0.001953125}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float v;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

			gl_FragColor = sum;

		}`};var QK=function(A,Q,B){return(1-B)*A+B*Q};var _f=Math.PI/180,Pf=180/Math.PI;var oF=9,Xk=6,BK=2,Fk=0.3;class CK extends F0{constructor(A,Q,B){super();this.camera=new V2,this.renderTarget=null,this.renderTargetBlur=null,this.depthMaterial=new s9,this.horizontalBlurMaterial=new l0(sF),this.verticalBlurMaterial=new l0(nF),this.intensity=0,this.softness=1,this.boundingBox=new i0,this.size=new P,this.maxDimension=0,this.isAnimated=!1,this.needsUpdate=!1;const{camera:C}=this;C.rotation.x=Math.PI/2,C.left=-0.5,C.right=0.5,C.bottom=-0.5,C.top=0.5,this.add(C);const I=new q1,E=new b0({opacity:1,transparent:!0,side:P8});this.floor=new nA(I,E),this.floor.userData.noHit=!0,C.add(this.floor),this.blurPlane=new nA(I),this.blurPlane.visible=!1,C.add(this.blurPlane),A.target.add(this),this.depthMaterial.onBeforeCompile=function(K){K.fragmentShader=K.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );","gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * opacity );")},this.horizontalBlurMaterial.depthTest=!1,this.verticalBlurMaterial.depthTest=!1,this.setScene(A,Q,B)}setScene(A,Q,B){const{boundingBox:C,size:I,rotation:E,position:K}=this;if(this.isAnimated=A.animationNames.length>0,this.boundingBox.copy(A.boundingBox),this.size.copy(A.size),this.maxDimension=Math.max(I.x,I.y,I.z)*(this.isAnimated?BK:1),this.boundingBox.getCenter(K),B==="back"){const{min:J,max:q}=C;[J.y,J.z]=[J.z,J.y],[q.y,q.z]=[q.z,q.y],[I.y,I.z]=[I.z,I.y],E.x=Math.PI/2,E.y=Math.PI}else E.x=0,E.y=0;if(this.isAnimated){const J=C.min.y,q=C.max.y;I.y=this.maxDimension,C.expandByVector(I.subScalar(this.maxDimension).multiplyScalar(-0.5)),C.min.y=J,C.max.y=q,I.set(this.maxDimension,q-J,this.maxDimension)}if(B==="bottom")K.y=C.min.y;else K.z=C.min.y;this.setSoftness(Q)}setSoftness(A){this.softness=A;const{size:Q,camera:B}=this,C=this.isAnimated?BK:1,I=C*Math.pow(2,oF-A*(oF-Xk));this.setMapSize(I);const E=Q.y/2,K=Q.y*C;B.near=0,B.far=QK(K,E,A),this.depthMaterial.opacity=1/A,B.updateProjectionMatrix(),this.setIntensity(this.intensity),this.setOffset(0)}setMapSize(A){const{size:Q}=this;if(this.isAnimated)A*=BK;const B=Math.floor(Q.x>Q.z?A:A*Q.x/Q.z),C=Math.floor(Q.x>Q.z?A*Q.z/Q.x:A),I=10,E=I+B,K=I+C;if(this.renderTarget!=null&&(this.renderTarget.width!==E||this.renderTarget.height!==K))this.renderTarget.dispose(),this.renderTarget=null,this.renderTargetBlur.dispose(),this.renderTargetBlur=null;if(this.renderTarget==null){const J={format:o0};this.renderTarget=new N1(E,K,J),this.renderTargetBlur=new N1(E,K,J),this.floor.material.map=this.renderTarget.texture}this.camera.scale.set(Q.x*(1+I/B),Q.z*(1+I/C),1),this.needsUpdate=!0}setIntensity(A){if(this.intensity=A,A>0)this.visible=!0,this.floor.visible=!0,this.floor.material.opacity=A*QK(Fk,1,this.softness*this.softness);else this.visible=!1,this.floor.visible=!1}getIntensity(){return this.intensity}setOffset(A){this.floor.position.z=-A+this.gap()}gap(){return 0.001*this.maxDimension}render(A,Q){Q.overrideMaterial=this.depthMaterial;const B=A.getClearAlpha();A.setClearAlpha(0),this.floor.visible=!1;const C=A.xr.enabled;A.xr.enabled=!1;const I=A.getRenderTarget();A.setRenderTarget(this.renderTarget),A.render(Q,this.camera),Q.overrideMaterial=null,this.floor.visible=!0,this.blurShadow(A),A.xr.enabled=C,A.setRenderTarget(I),A.setClearAlpha(B)}blurShadow(A){const{camera:Q,horizontalBlurMaterial:B,verticalBlurMaterial:C,renderTarget:I,renderTargetBlur:E,blurPlane:K}=this;K.visible=!0,K.material=B,B.uniforms.h.value=1/this.renderTarget.width,B.uniforms.tDiffuse.value=this.renderTarget.texture,A.setRenderTarget(E),A.render(K,Q),K.material=C,C.uniforms.v.value=1/this.renderTarget.height,C.uniforms.tDiffuse.value=this.renderTargetBlur.texture,A.setRenderTarget(I),A.render(K,Q),K.visible=!1}dispose(){if(this.renderTarget!=null)this.renderTarget.dispose();if(this.renderTargetBlur!=null)this.renderTargetBlur.dispose();this.depthMaterial.dispose(),this.horizontalBlurMaterial.dispose(),this.verticalBlurMaterial.dispose(),this.floor.material.dispose(),this.floor.geometry.dispose(),this.blurPlane.geometry.dispose(),this.removeFromParent()}}var iF=10,IK=100;var EK=new P,aF=new P,rF=new P,KK=new QI,Wk=new P,q7=new DA;class JK extends a0{constructor({canvas:A,element:Q,width:B,height:C}){super();this.annotationRenderer=new KE,this.effectRenderer=null,this.schemaElement=document.createElement("script"),this.width=1,this.height=1,this.aspect=1,this.scaleStep=0,this.renderCount=0,this.externalRenderer=null,this.camera=new P0(45,1,0.1,100),this.xrCamera=null,this.url=null,this.target=new F0,this.animationNames=[],this.boundingBox=new i0,this.boundingSphere=new w1,this.size=new P,this.idealAspect=0,this.framedFoVDeg=0,this.shadow=null,this.shadowIntensity=0,this.shadowSoftness=1,this.bakedShadows=new Set,this.exposure=1,this.toneMapping=S8,this.canScale=!0,this.isDirty=!1,this.goalTarget=new P,this.targetDamperX=new Y1,this.targetDamperY=new Y1,this.targetDamperZ=new Y1,this._currentGLTF=null,this._model=null,this.cancelPendingSourceChange=null,this.animationsByName=new Map,this.currentAnimationAction=null,this.groundedSkybox=new tE,this.name="ModelScene",this.element=Q,this.canvas=A,this.camera=new P0(45,1,0.1,100),this.camera.name="MainCamera",this.add(this.target),this.setSize(B,C),this.target.name="Target",this.mixer=new QQ(this.target);const{domElement:I}=this.annotationRenderer,{style:E}=I;E.display="none",E.pointerEvents="none",E.position="absolute",E.top="0",this.element.shadowRoot.querySelector(".default").appendChild(I),this.schemaElement.setAttribute("type","application/ld+json")}get context(){return this.canvas.getContext("2d")}getCamera(){return this.xrCamera!=null?this.xrCamera:this.camera}queueRender(){this.isDirty=!0}shouldRender(){return this.isDirty}hasRendered(){this.isDirty=!1}forceRescale(){this.scaleStep=-1,this.queueRender()}async setObject(A){this.reset(),this._model=A,this.target.add(A),await this.setupScene()}async setSource(A,Q=()=>{}){if(!A||A===this.url){Q(1);return}if(this.reset(),this.url=A,this.externalRenderer!=null){const K=await this.externalRenderer.load(Q);this.boundingSphere.radius=K.framedRadius,this.idealAspect=K.fieldOfViewAspect;return}if(this.cancelPendingSourceChange!=null)this.cancelPendingSourceChange(),this.cancelPendingSourceChange=null;let B;try{B=await new Promise(async(K,J)=>{this.cancelPendingSourceChange=()=>J();try{const q=await this.element[I0].loader.load(A,this.element,Q);K(q)}catch(q){J(q)}})}catch(K){if(K==null)return;throw K}if(this.cancelPendingSourceChange=null,this.reset(),this.url=A,this._currentGLTF=B,B!=null)this._model=B.scene,this.target.add(B.scene);const{animations:C}=B,I=new Map,E=[];for(let K of C)I.set(K.name,K),E.push(K.name);this.animations=C,this.animationsByName=I,this.animationNames=E,await this.setupScene()}async setupScene(){this.applyTransform(),this.updateBoundingBox(),await this.updateFraming(),this.updateShadow(),this.setShadowIntensity(this.shadowIntensity),this.setGroundedSkybox()}reset(){if(this.url=null,this.renderCount=0,this.queueRender(),this.shadow!=null)this.shadow.setIntensity(0);this.bakedShadows.clear();const{_model:A}=this;if(A!=null)A.removeFromParent(),this._model=null;const Q=this._currentGLTF;if(Q!=null)Q.dispose(),this._currentGLTF=null;if(this.currentAnimationAction!=null)this.currentAnimationAction.stop(),this.currentAnimationAction=null;this.mixer.stopAllAction(),this.mixer.uncacheRoot(this)}dispose(){if(this.reset(),this.shadow!=null)this.shadow.dispose(),this.shadow=null;this.element[E7]=null,this.element[K7]=null,this.element[n4]=null}get currentGLTF(){return this._currentGLTF}setSize(A,Q){if(this.width===A&&this.height===Q)return;if(this.width=Math.max(A,1),this.height=Math.max(Q,1),this.annotationRenderer.setSize(A,Q),this.aspect=this.width/this.height,this.externalRenderer!=null){const B=P3();this.externalRenderer.resize(A*B,Q*B)}this.queueRender()}markBakedShadow(A){A.userData.noHit=!0,this.bakedShadows.add(A)}unmarkBakedShadow(A){A.userData.noHit=!1,A.visible=!0,this.bakedShadows.delete(A),this.boundingBox.expandByObject(A)}findBakedShadows(A){const Q=new i0;A.traverse((B)=>{const C=B;if(!C.material)return;if(!C.material.transparent)return;Q.setFromObject(C);const E=Q.getSize(Wk),K=Math.min(E.x,E.y,E.z);if(Math.max(E.x,E.y,E.z)<IK*K)return;this.markBakedShadow(C)})}checkBakedShadows(){const{min:A,max:Q}=this.boundingBox,B=new i0;this.boundingBox.getSize(this.size);for(let C of this.bakedShadows){if(B.setFromObject(C),B.min.y<A.y+this.size.y/IK&&B.min.x<=A.x&&B.max.x>=Q.x&&B.min.z<=A.z&&B.max.z>=Q.z)continue;if(B.min.z<A.z+this.size.z/IK&&B.min.x<=A.x&&B.max.x>=Q.x&&B.min.y<=A.y&&B.max.y>=Q.y)continue;this.unmarkBakedShadow(C)}}applyTransform(){const{model:A}=this;if(A==null)return;const Q=d1(this.element.orientation)[0].terms,B=c1(Q[0]).number,C=c1(Q[1]).number,I=c1(Q[2]).number;A.quaternion.setFromEuler(new u1(C,I,B,"YXZ"));const E=d1(this.element.scale)[0].terms;A.scale.set(E[0].number,E[1].number,E[2].number)}updateBoundingBox(){const{model:A}=this;if(A==null)return;this.target.remove(A),this.findBakedShadows(A);const Q=(B,C)=>{return B.expandByPoint(C)};if(this.setBakedShadowVisibility(!1),this.boundingBox=j3(A,Q,new i0),this.boundingBox.isEmpty())this.setBakedShadowVisibility(!0),this.bakedShadows.forEach((B)=>this.unmarkBakedShadow(B)),this.boundingBox=j3(A,Q,new i0);this.checkBakedShadows(),this.setBakedShadowVisibility(),this.boundingBox.getSize(this.size),this.target.add(A)}async updateFraming(){const{model:A}=this;if(A==null)return;this.target.remove(A),this.setBakedShadowVisibility(!1);const{center:Q}=this.boundingSphere;this.element.requestUpdate("cameraTarget"),await this.element.updateComplete,Q.copy(this.getTarget());const B=(I,E)=>{return Math.max(I,Q.distanceToSquared(E))};this.boundingSphere.radius=Math.sqrt(j3(A,B,0));const C=(I,E)=>{E.sub(Q);const K=Math.sqrt(E.x*E.x+E.z*E.z);return Math.max(I,K/(this.idealCameraDistance()-Math.abs(E.y)))};this.idealAspect=j3(A,C,0)/Math.tan(this.framedFoVDeg/2*Math.PI/180),this.setBakedShadowVisibility(),this.target.add(A)}setBakedShadowVisibility(A=this.shadowIntensity<=0){for(let Q of this.bakedShadows)Q.visible=A}idealCameraDistance(){const A=this.framedFoVDeg/2*Math.PI/180;return this.boundingSphere.radius/Math.sin(A)}adjustedFoV(A){const Q=Math.tan(A/2*Math.PI/180)*Math.max(1,this.idealAspect/this.aspect);return 2*Math.atan(Q)*180/Math.PI}getNDC(A,Q){if(this.xrCamera!=null)q7.set(A/window.screen.width,Q/window.screen.height);else{const B=this.element.getBoundingClientRect();q7.set((A-B.x)/this.width,(Q-B.y)/this.height)}return q7.multiplyScalar(2).subScalar(1),q7.y*=-1,q7}getSize(){return{width:this.width,height:this.height}}setEnvironmentAndSkybox(A,Q){if(this.element[I0].arRenderer.presentedScene===this)return;this.environment=A,this.setBackground(Q),this.queueRender()}setBackground(A){if(this.groundedSkybox.map=A,this.groundedSkybox.isUsable())this.target.add(this.groundedSkybox),this.background=null;else this.target.remove(this.groundedSkybox),this.background=A}farRadius(){return this.boundingSphere.radius*(this.groundedSkybox.parent!=null?iF:1)}setGroundedSkybox(){const A=d1(this.element.skyboxHeight)[0].terms[0],Q=c1(A).number,B=iF*this.boundingSphere.radius;this.groundedSkybox.updateGeometry(Q,B),this.groundedSkybox.position.y=Q-(this.shadow?2*this.shadow.gap():0),this.setBackground(this.groundedSkybox.map)}setTarget(A,Q,B){this.goalTarget.set(-A,-Q,-B)}setTargetDamperDecayTime(A){this.targetDamperX.setDecayTime(A),this.targetDamperY.setDecayTime(A),this.targetDamperZ.setDecayTime(A)}getTarget(){return this.goalTarget.clone().multiplyScalar(-1)}jumpToGoal(){this.updateTarget(VQ)}updateTarget(A){const Q=this.goalTarget,B=this.target.position;if(!Q.equals(B)){const C=this.boundingSphere.radius/10;let{x:I,y:E,z:K}=B;return I=this.targetDamperX.update(I,Q.x,A,C),E=this.targetDamperY.update(E,Q.y,A,C),K=this.targetDamperZ.update(K,Q.z,A,C),this.target.position.set(I,E,K),this.target.updateMatrixWorld(),this.queueRender(),!0}else return!1}pointTowards(A,Q){const{x:B,z:C}=this.position;this.yaw=Math.atan2(A-B,Q-C)}get model(){return this._model}set yaw(A){this.rotation.y=A,this.queueRender()}get yaw(){return this.rotation.y}set animationTime(A){this.mixer.setTime(A),this.queueShadowRender()}get animationTime(){if(this.currentAnimationAction!=null){const A=Math.max(this.currentAnimationAction._loopCount,0);if(this.currentAnimationAction.loop===b9&&(A&1)===1)return this.duration-this.currentAnimationAction.time;else return this.currentAnimationAction.time}return 0}set animationTimeScale(A){this.mixer.timeScale=A}get animationTimeScale(){return this.mixer.timeScale}get duration(){if(this.currentAnimationAction!=null&&this.currentAnimationAction.getClip())return this.currentAnimationAction.getClip().duration;return 0}get hasActiveAnimation(){return this.currentAnimationAction!=null}playAnimation(A=null,Q=0,B=f9,C=Infinity){if(this._currentGLTF==null)return;const{animations:I}=this;if(I==null||I.length===0)return;let E=null;if(A!=null){if(E=this.animationsByName.get(A),E==null){const K=parseInt(A);if(!isNaN(K)&&K>=0&&K<I.length)E=I[K]}}if(E==null)E=I[0];try{const{currentAnimationAction:K}=this,J=this.mixer.clipAction(E,this);if(this.currentAnimationAction=J,this.element.paused)this.mixer.stopAllAction();else if(J.paused=!1,K!=null&&J!==K)J.crossFadeFrom(K,Q,!1);else if(this.animationTimeScale>0&&this.animationTime==this.duration)this.animationTime=0;J.setLoop(B,C),J.enabled=!0,J.clampWhenFinished=!0,J.play()}catch(K){console.error(K)}}stopAnimation(){this.currentAnimationAction=null,this.mixer.stopAllAction()}updateAnimation(A){this.mixer.update(A),this.queueShadowRender()}subscribeMixerEvent(A,Q){this.mixer.addEventListener(A,Q)}updateShadow(){const A=this.shadow;if(A!=null){const Q=this.element.arPlacement==="wall"?"back":"bottom";A.setScene(this,this.shadowSoftness,Q),A.needsUpdate=!0}}renderShadow(A){const Q=this.shadow;if(Q!=null&&Q.needsUpdate==!0)Q.render(A,this),Q.needsUpdate=!1}queueShadowRender(){if(this.shadow!=null)this.shadow.needsUpdate=!0}setShadowIntensity(A){if(this.shadowIntensity=A,this._currentGLTF==null)return;if(this.setBakedShadowVisibility(),A<=0&&this.shadow==null)return;if(this.shadow==null){const Q=this.element.arPlacement==="wall"?"back":"bottom";this.shadow=new CK(this,this.shadowSoftness,Q)}this.shadow.setIntensity(A)}setShadowSoftness(A){this.shadowSoftness=A;const Q=this.shadow;if(Q!=null)Q.setSoftness(A)}setShadowOffset(A){const Q=this.shadow;if(Q!=null)Q.setOffset(A)}hitFromPoint(A,Q=this){return KK.setFromCamera(A,this.getCamera()),KK.intersectObject(Q,!0).find((C)=>C.object.visible&&!C.object.userData.noHit)}positionAndNormalFromPoint(A,Q=this){var B;const C=this.hitFromPoint(A,Q);if(C==null)return null;const I=C.point,E=C.face!=null?C.face.normal.clone().applyNormalMatrix(new fA().getNormalMatrix(C.object.matrixWorld)):KK.ray.direction.clone().multiplyScalar(-1),K=(B=C.uv)!==null&&B!==void 0?B:null;return{position:I,normal:E,uv:K}}surfaceFromPoint(A,Q=this){const B=this.element.model;if(B==null)return null;const C=this.hitFromPoint(A,Q);if(C==null||C.face==null)return null;const I=B[mQ](C),{meshes:E,primitives:K}=I.mesh.userData.associations,J=new P,q=new P,G=new P,{a:Y,b:H,c:Z}=C.face,X=C.object;X.getVertexPosition(Y,J),X.getVertexPosition(H,q),X.getVertexPosition(Z,G);const U=new p1(J,q,G),F=new P;return U.getBarycoord(X.worldToLocal(C.point),F),`${E} ${K} ${Y} ${H} ${Z} ${F.x.toFixed(3)} ${F.y.toFixed(3)} ${F.z.toFixed(3)}`}addHotspot(A){this.target.add(A),this.annotationRenderer.domElement.appendChild(A.element)}removeHotspot(A){this.target.remove(A)}forHotspots(A){const{children:Q}=this.target;for(let B=0,C=Q.length;B<C;B++){const I=Q[B];if(I instanceof J7)A(I)}}initializeSurface(A){if(A.surface!=null&&A.mesh==null){const Q=d1(A.surface)[0].terms;if(Q.length!=8){console.warn(A.surface+" does not have exactly 8 numbers.");return}const B=this.element.model[oE](Q[0].number,Q[1].number),C=new P(Q[2].number,Q[3].number,Q[4].number);if(B==null){console.warn(A.surface+" does not match a node/primitive in this glTF! Skipping this hotspot.");return}const I=B.mesh.geometry.attributes.position.count;if(C.x>=I||C.y>=I||C.z>=I){console.warn(A.surface+" vertex indices out of range in this glTF! Skipping this hotspot.");return}const E=new P(Q[5].number,Q[6].number,Q[7].number);A.mesh=B.mesh,A.tri=C,A.bary=E}}updateSurfaceHotspots(){const A=!this.element.paused;this.forHotspots((Q)=>{this.initializeSurface(Q),Q.updateSurface(A)})}updateHotspotsVisibility(A){this.forHotspots((Q)=>{if(EK.copy(A),aF.setFromMatrixPosition(Q.matrixWorld),EK.sub(aF),rF.copy(Q.normal).transformDirection(this.target.matrixWorld),EK.dot(rF)<0)Q.hide();else Q.show()})}orientHotspots(A){this.forHotspots((Q)=>{Q.orient(A)})}setHotspotsVisibility(A){this.forHotspots((Q)=>{Q.visible=A})}updateSchema(A){var Q;const{schemaElement:B,element:C}=this,{alt:I,poster:E,iosSrc:K}=C;if(A!=null){const J=[{"@type":"MediaObject",contentUrl:A,encodingFormat:((Q=A.split(".").pop())===null||Q===void 0?void 0:Q.toLowerCase())==="gltf"?"model/gltf+json":"model/gltf-binary"}];if(K)J.push({"@type":"MediaObject",contentUrl:K,encodingFormat:"model/vnd.usdz+zip"});const q={"@context":"http://schema.org/","@type":"3DModel",image:E!==null&&E!==void 0?E:void 0,name:I!==null&&I!==void 0?I:void 0,encoding:J};B.textContent=JSON.stringify(q),document.head.appendChild(B)}else if(B.parentElement!=null)B.parentElement.removeChild(B)}}class qK extends EventTarget{constructor(){super(...arguments);this.ongoingActivities=new Set,this.totalProgress=0}get ongoingActivityCount(){return this.ongoingActivities.size}beginActivity(A){const Q={progress:0,completed:!1};if(this.ongoingActivities.add(Q),this.ongoingActivityCount===1)this.announceTotalProgress(Q,0,A);return(B)=>{let C;if(C=Math.max(L1(B,0,1),Q.progress),C!==Q.progress)this.announceTotalProgress(Q,C,A);return Q.progress}}announceTotalProgress(A,Q,B){let C=0,I=0;if(Q==1)A.completed=!0;for(let J of this.ongoingActivities){const{progress:q}=J;if(C+=1-q,J.completed)I++}const E=A.progress;A.progress=Q,this.totalProgress+=(Q-E)*(1-this.totalProgress)/C;const K=I===this.ongoingActivityCount?1:this.totalProgress;if(this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:K,reason:B}})),I===this.ongoingActivityCount)this.totalProgress=0,this.ongoingActivities.clear()}}var iQ=function(A,Q,B,C){var I=arguments.length,E=I<3?Q:C===null?C=Object.getOwnPropertyDescriptor(Q,B):C,K;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")E=Reflect.decorate(A,Q,B,C);else for(var J=A.length-1;J>=0;J--)if(K=A[J])E=(I<3?K(E):I>3?K(Q,B,E):K(Q,B))||E;return I>3&&E&&Object.defineProperty(Q,B,E),E},tF,eF,AW,QW,BW,CW,IW,EW,KW,JW,qW,GW,YW,Uk=10,Dk=50,Rk=0,Vk=300,Nk=150,D4=document.createElement("canvas"),GK=Symbol("fallbackResizeHandler"),HW=Symbol("defaultAriaLabel"),sQ=Symbol("resizeObserver"),q5=Symbol("clearModelTimeout"),YK=Symbol("onContextLost"),G5=Symbol("loaded"),HK=Symbol("status"),ZK=Symbol("onFocus"),XK=Symbol("onBlur"),b6=Symbol("updateSize"),nQ=Symbol("intersectionObserver"),o4=Symbol("isElementInViewport"),Y7=Symbol("announceModelVisibility"),A5=Symbol("ariaLabel"),oQ=Symbol("altDefaulted"),G7=Symbol("statusElement"),PQ=Symbol("updateStatus"),Q5=Symbol("loadedTime"),i4=Symbol("updateSource"),ZW=Symbol("markLoaded"),d3=Symbol("container"),J2=Symbol("input"),vQ=Symbol("canvas"),EA=Symbol("scene"),p0=Symbol("needsRender"),y1=Symbol("tick"),k2=Symbol("onModelLoad"),f6=Symbol("onResize"),I0=Symbol("renderer"),O2=Symbol("progressTracker"),XW=Symbol("getLoaded"),M2=Symbol("getModelIsVisible"),H4=Symbol("shouldAttemptPreload"),$2=(A)=>{return{x:A.x,y:A.y,z:A.z,toString(){return`${this.x}m ${this.y}m ${this.z}m`}}},a3=(A)=>{return{u:A.x,v:A.y,toString(){return`${this.u} ${this.v}`}}};class a4 extends d2{constructor(){super();this.alt=null,this.src=null,this.withCredentials=!1,this.generateSchema=!1,this[tF]=!1,this[eF]=!1,this[AW]=0,this[QW]="",this[BW]=null,this[CW]=WI(()=>{const C=this.getBoundingClientRect();this[b6](C)},Dk),this[IW]=WI((C)=>{const I=this.modelIsVisible;if(I!==C)this.dispatchEvent(new CustomEvent("model-visibility",{detail:{visible:I}}))},Rk),this[EW]=null,this[KW]=null,this[JW]=new qK,this[qW]=()=>{this[G7].textContent=this[HK]},this[GW]=()=>{this[G7].textContent=""},this[YW]=(C)=>{this.dispatchEvent(new CustomEvent("error",{detail:{type:"webglcontextlost",sourceError:C.sourceEvent}}))},this.attachShadow({mode:"open"});const A=this.shadowRoot;TH(A),this[d3]=A.querySelector(".container"),this[J2]=A.querySelector(".userInput"),this[vQ]=A.querySelector("canvas"),this[G7]=A.querySelector("#status"),this[HW]=this[J2].getAttribute("aria-label");let Q,B;if(this.isConnected){const C=this.getBoundingClientRect();Q=C.width,B=C.height}else Q=Vk,B=Nk;if(this[EA]=new JK({canvas:this[vQ],element:this,width:Q,height:B}),Promise.resolve().then(()=>{this[b6](this.getBoundingClientRect())}),GQ)this[sQ]=new ResizeObserver((C)=>{if(this[I0].isPresenting)return;for(let I of C)if(I.target===this)this[b6](I.contentRect)});if(YQ)this[nQ]=new IntersectionObserver((C)=>{for(let I of C)if(I.target===this){const E=this.modelIsVisible;if(this[o4]=I.isIntersecting,this[Y7](E),this[o4]&&!this.loaded)this[i4]()}},{root:null,rootMargin:"0px",threshold:0.00001});else this[o4]=!0}static get is(){return"model-viewer"}static set modelCacheSize(A){d0[W4].evictionThreshold=A}static get modelCacheSize(){return d0[W4].evictionThreshold}static set minimumRenderScale(A){if(A>1)console.warn("<model-viewer> minimumRenderScale has been clamped to a maximum value of 1.");if(A<=0)console.warn("<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25.");x1.singleton.minScale=A}static get minimumRenderScale(){return x1.singleton.minScale}get loaded(){return this[XW]()}get[(tF=o4,eF=G5,AW=Q5,QW=HK,BW=q5,CW=GK,IW=Y7,EW=sQ,KW=nQ,JW=O2,I0)](){return x1.singleton}get modelIsVisible(){return this[M2]()}connectedCallback(){if(super.connectedCallback&&super.connectedCallback(),GQ)this[sQ].observe(this);else self.addEventListener("resize",this[GK]);if(YQ)this[nQ].observe(this);this.addEventListener("focus",this[ZK]),this.addEventListener("blur",this[XK]);const A=this[I0];if(A.addEventListener("contextlost",this[YK]),A.registerScene(this[EA]),this[q5]!=null)self.clearTimeout(this[q5]),this[q5]=null,this.requestUpdate("src",null)}disconnectedCallback(){if(super.disconnectedCallback&&super.disconnectedCallback(),GQ)this[sQ].unobserve(this);else self.removeEventListener("resize",this[GK]);if(YQ)this[nQ].unobserve(this);this.removeEventListener("focus",this[ZK]),this.removeEventListener("blur",this[XK]);const A=this[I0];A.removeEventListener("contextlost",this[YK]),A.unregisterScene(this[EA]),this[q5]=self.setTimeout(()=>{this[EA].dispose(),this[q5]=null},Uk)}updated(A){if(super.updated(A),A.has("src")){if(this.src==null)this[G5]=!1,this[Q5]=0,this[EA].reset();else if(this.src!==this[EA].url)this[G5]=!1,this[Q5]=0,this[i4]()}if(A.has("alt"))this[J2].setAttribute("aria-label",this[A5]);if(A.has("withCredentials"))d0.withCredentials=this.withCredentials,this[I0].textureUtils.withCredentials=this.withCredentials;if(A.has("generateSchema"))if(this.generateSchema)this[EA].updateSchema(this.src);else this[EA].updateSchema(null)}toDataURL(A,Q){return this[I0].displayCanvas(this[EA]).toDataURL(A,Q)}async toBlob(A){const Q=A?A.mimeType:void 0,B=A?A.qualityArgument:void 0,C=A?A.idealAspect:void 0,{width:I,height:E,idealAspect:K,aspect:J}=this[EA],{dpr:q,scaleFactor:G}=this[I0];let Y=I*G*q,H=E*G*q,Z=0,X=0;if(C===!0)if(K>J){const U=H;H=Math.round(Y/K),X=(U-H)/2}else{const U=Y;Y=Math.round(H*K),Z=(U-Y)/2}D4.width=Y,D4.height=H;try{return new Promise(async(U,F)=>{D4.getContext("2d").drawImage(this[I0].displayCanvas(this[EA]),Z,X,Y,H,0,0,Y,H),D4.toBlob((W)=>{if(!W)return F(new Error("Unable to retrieve canvas blob"));U(W)},Q,B)})}finally{this[b6]({width:I,height:E})}}registerEffectComposer(A){A.setRenderer(this[I0].threeRenderer),A.setMainCamera(this[EA].getCamera()),A.setMainScene(this[EA]),this[EA].effectRenderer=A}unregisterEffectComposer(){this[EA].effectRenderer=null}registerRenderer(A){this[EA].externalRenderer=A}unregisterRenderer(){this[EA].externalRenderer=null}get[A5](){return this[oQ]}get[oQ](){return this.alt==null||this.alt==="null"?this[HW]:this.alt}[XW](){return this[G5]}[M2](){return this.loaded&&this[o4]}[H4](){return!!this.src&&this[o4]}[b6]({width:A,height:Q}){if(A===0||Q===0)return;this[d3].style.width=`${A}px`,this[d3].style.height=`${Q}px`,this[f6]({width:A,height:Q})}[y1](A,Q){var B;(B=this[EA].effectRenderer)===null||B===void 0||B.beforeRender(A,Q)}[ZW](){if(this[G5])return;this[G5]=!0,this[Q5]=performance.now()}[p0](){this[EA].queueRender()}[k2](){}[PQ](A){this[HK]=A;const Q=this.getRootNode();if(Q!=null&&Q.activeElement===this&&this[G7].textContent!=A)this[G7].textContent=A}[(qW=ZK,GW=XK,f6)](A){this[EA].setSize(A.width,A.height)}async[(YW=YK,i4)](){const A=this[EA];if(this.loaded||!this[H4]()||this.src===A.url)return;if(this.generateSchema)A.updateSchema(this.src);this[PQ]("Loading"),A.stopAnimation();const Q=this[O2].beginActivity("model-load"),B=this.src;try{const C=A.setSource(B,(E)=>Q(L1(E,0,1)*0.95)),I=this[u8]();await Promise.all([C,I]),this[ZW](),this[k2](),this.updateComplete.then(()=>{this.dispatchEvent(new CustomEvent("before-render"))}),await new Promise((E)=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.dispatchEvent(new CustomEvent("load",{detail:{url:B}})),E()})})})}catch(C){this.dispatchEvent(new CustomEvent("error",{detail:{type:"loadfailure",sourceError:C}}))}finally{Q(1)}}}iQ([LA({type:String})],a4.prototype,"alt",void 0);iQ([LA({type:String})],a4.prototype,"src",void 0);iQ([LA({type:Boolean,attribute:"with-credentials"})],a4.prototype,"withCredentials",void 0);iQ([LA({type:Boolean,attribute:"generate-schema"})],a4.prototype,"generateSchema",void 0);var FK=function(A,Q,B,C){var I=arguments.length,E=I<3?Q:C===null?C=Object.getOwnPropertyDescriptor(Q,B):C,K;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")E=Reflect.decorate(A,Q,B,C);else for(var J=A.length-1;J>=0;J--)if(K=A[J])E=(I<3?K(E):I>3?K(Q,B,E):K(Q,B))||E;return I>3&&E&&Object.defineProperty(Q,B,E),E},FW=1000,aQ=Symbol("changeAnimation"),O4=Symbol("paused"),wk={repetitions:Infinity,pingpong:!1},WW=(A)=>{var Q;class B extends A{constructor(...C){super(C);this.autoplay=!1,this.animationName=void 0,this.animationCrossfadeDuration=300,this[Q]=!0,this[EA].subscribeMixerEvent("loop",(I)=>{const E=I.action._loopCount;this.dispatchEvent(new CustomEvent("loop",{detail:{count:E}}))}),this[EA].subscribeMixerEvent("finished",()=>{this[O4]=!0,this.dispatchEvent(new CustomEvent("finished"))})}get availableAnimations(){if(this.loaded)return this[EA].animationNames;return[]}get duration(){return this[EA].duration}get paused(){return this[O4]}get currentTime(){return this[EA].animationTime}set currentTime(C){this[EA].animationTime=C,this[p0]()}get timeScale(){return this[EA].animationTimeScale}set timeScale(C){this[EA].animationTimeScale=C}pause(){if(this[O4])return;this[O4]=!0,this.dispatchEvent(new CustomEvent("pause"))}play(C){if(this.availableAnimations.length>0)this[O4]=!1,this[aQ](C),this.dispatchEvent(new CustomEvent("play"))}[(Q=O4,k2)](){if(super[k2](),this[O4]=!0,this.animationName!=null)this[aQ]();if(this.autoplay)this.play()}[y1](C,I){if(super[y1](C,I),this[O4]||!this[M2]()&&!this[I0].isPresenting)return;this[EA].updateAnimation(I/FW),this[p0]()}updated(C){if(super.updated(C),C.has("autoplay")&&this.autoplay)this.play();if(C.has("animationName"))this[aQ]()}[aQ](C=wk){var I;const E=(I=C.repetitions)!==null&&I!==void 0?I:Infinity,K=C.pingpong?b9:E===1?FY:f9;if(this[EA].playAnimation(this.animationName,this.animationCrossfadeDuration/FW,K,E),this[O4])this[EA].updateAnimation(0),this[p0]()}}return FK([LA({type:Boolean})],B.prototype,"autoplay",void 0),FK([LA({type:String,attribute:"animation-name"})],B.prototype,"animationName",void 0),FK([LA({type:Number,attribute:"animation-crossfade-duration"})],B.prototype,"animationCrossfadeDuration",void 0),B};var d6=Symbol("hotspotMap"),WK=Symbol("mutationCallback"),H7=Symbol("observer"),UK=Symbol("addHotspot"),UW=Symbol("removeHotspot"),DK=new zA,DW=(A)=>{var Q,B,C;class I extends A{constructor(){super(...arguments);this[Q]=new Map,this[B]=(E)=>{E.forEach((K)=>{if(!(K instanceof MutationRecord)||K.type==="childList")K.addedNodes.forEach((J)=>{this[UK](J)}),K.removedNodes.forEach((J)=>{this[UW](J)}),this[p0]()})},this[C]=new MutationObserver(this[WK])}connectedCallback(){super.connectedCallback();for(let K=0;K<this.children.length;++K)this[UK](this.children[K]);const{ShadyDOM:E}=self;if(E==null)this[H7].observe(this,{childList:!0});else this[H7]=E.observeChildren(this,this[WK])}disconnectedCallback(){super.disconnectedCallback();const{ShadyDOM:E}=self;if(E==null)this[H7].disconnect();else E.unobserveChildren(this[H7])}[(Q=d6,B=WK,C=H7,y1)](E,K){super[y1](E,K);const J=this[EA],{annotationRenderer:q}=J,G=J.getCamera();if(J.shouldRender())J.updateSurfaceHotspots(),J.updateHotspotsVisibility(G.position),q.domElement.style.display="",q.render(J,G)}updateHotspot(E){const K=this[d6].get(E.name);if(K==null)return;K.updatePosition(E.position),K.updateNormal(E.normal),K.surface=E.surface,this[p0]()}queryHotspot(E){const K=this[d6].get(E);if(K==null)return null;const J=$2(K.position),q=$2(K.normal),G=K.facingCamera,Y=this[EA],H=Y.getCamera(),Z=new P;Z.setFromMatrixPosition(K.matrixWorld),Z.project(H);const X=Y.width/2,U=Y.height/2;Z.x=Z.x*X+X,Z.y=-(Z.y*U)+U;const F=$2(new P(Z.x,Z.y,Z.z));if(!Number.isFinite(F.x)||!Number.isFinite(F.y))return null;return{position:J,normal:q,canvasPosition:F,facingCamera:G}}positionAndNormalFromPoint(E,K){const J=this[EA],q=J.getNDC(E,K),G=J.positionAndNormalFromPoint(q);if(G==null)return null;DK.copy(J.target.matrixWorld).invert();const Y=$2(G.position.applyMatrix4(DK)),H=$2(G.normal.transformDirection(DK));let Z=null;if(G.uv!=null)Z=a3(G.uv);return{position:Y,normal:H,uv:Z}}surfaceFromPoint(E,K){const J=this[EA],q=J.getNDC(E,K);return J.surfaceFromPoint(q)}[UK](E){if(!(E instanceof HTMLElement&&E.slot.indexOf("hotspot")===0))return;let K=this[d6].get(E.slot);if(K!=null)K.increment();else K=new J7({name:E.slot,position:E.dataset.position,normal:E.dataset.normal,surface:E.dataset.surface}),this[d6].set(E.slot,K),this[EA].addHotspot(K);this[EA].queueRender()}[UW](E){if(!(E instanceof HTMLElement))return;const K=this[d6].get(E.slot);if(!K)return;if(K.decrement())this[EA].removeHotspot(K),this[d6].delete(E.slot);this[EA].queueRender()}}return I};function Tk(A,Q){return Sk(A,Q||{},0,0)}function W7(A,Q){if(Q){var B=new v1(A.length);for(var C=0;C<A.length;++C)B[C]=A.charCodeAt(C);return B}if(LW)return LW.encode(A);var I=A.length,E=new v1(A.length+(A.length>>1)),K=0,J=function(Y){E[K++]=Y};for(var C=0;C<I;++C){if(K+5>E.length){var q=new v1(K+8+(I-C<<1));q.set(E),E=q}var G=A.charCodeAt(C);if(G<128||Q)J(G);else if(G<2048)J(192|G>>6),J(128|G&63);else if(G>55295&&G<57344)G=65536+(G&1023<<10)|A.charCodeAt(++C)&1023,J(240|G>>18),J(128|G>>12&63),J(128|G>>6&63),J(128|G&63);else J(224|G>>12),J(128|G>>6&63),J(128|G&63)}return PW(E,0,K)}function jW(A,Q){if(!Q)Q={};var B={},C=[];TW(A,"",B,Q);var I=0,E=0;for(var K in B){var J=B[K],q=J[0],G=J[1],Y=G.level==0?0:8,H=W7(K),Z=H.length,X=G.comment,U=X&&W7(X),F=U&&U.length,W=OK(G.extra);if(Z>65535)throw"filename too long";var D=Y?Tk(q,G):q,V=D.length,R=Pk();R.p(q),C.push(SW(G,{size:q.length,crc:R.d(),c:D,f:H,m:U,u:Z!=K.length||U&&X.length!=F,o:I,compression:Y})),I+=30+Z+W+V,E+=76+2*(Z+W)+(F||0)+V}var O=new v1(E+22),z=I,w=E-I;for(var k=0;k<C.length;++k){var H=C[k];zW(O,H.o,H,H.f,H.u,H.c.length);var j=30+H.f.length+OK(H.extra);O.set(H.c,H.o+j),zW(O,I,H,H.f,H.u,H.c.length,H.o,H.m),I+=16+j+(H.m?H.m.length:0)}return yk(O,I,C.length,w,z),O}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var RW=function(A){return URL.createObjectURL(new Blob([A],{type:"text/javascript"}))},Ok=function(A){return new Worker(A)};try{URL.revokeObjectURL(RW(""))}catch(A){RW=function(Q){return"data:application/javascript;charset=UTF-8,"+encodeURI(Q)},Ok=function(Q){return new Worker(Q,{type:"module"})}}var v1=Uint8Array,h1=Uint16Array,Y5=Uint32Array,LK=new v1([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),zK=new v1([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),VW=new v1([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),kW=function(A,Q){var B=new h1(31);for(var C=0;C<31;++C)B[C]=Q+=1<<A[C-1];var I=new Y5(B[30]);for(var C=1;C<30;++C)for(var E=B[C];E<B[C+1];++E)I[E]=E-B[C]<<5|C;return[B,I]},MW=kW(LK,2),Lk=MW[0],VK=MW[1];Lk[28]=258,VK[258]=28;var $W=kW(zK,0),Rb=$W[0],NW=$W[1],NK=new h1(32768);for(U0=0;U0<32768;++U0)L4=(U0&43690)>>>1|(U0&21845)<<1,L4=(L4&52428)>>>2|(L4&13107)<<2,L4=(L4&61680)>>>4|(L4&3855)<<4,NK[U0]=((L4&65280)>>>8|(L4&255)<<8)>>>1;var L4,U0,F7=function(A,Q,B){var C=A.length,I=0,E=new h1(Q);for(;I<C;++I)++E[A[I]-1];var K=new h1(Q);for(I=0;I<Q;++I)K[I]=K[I-1]+E[I-1]<<1;var J;if(B){J=new h1(1<<Q);var q=15-Q;for(I=0;I<C;++I)if(A[I]){var G=I<<4|A[I],Y=Q-A[I],H=K[A[I]-1]++<<Y;for(var Z=H|(1<<Y)-1;H<=Z;++H)J[NK[H]>>>q]=G}}else{J=new h1(C);for(I=0;I<C;++I)if(A[I])J[I]=NK[K[A[I]-1]++]>>>15-A[I]}return J},c6=new v1(288);for(U0=0;U0<144;++U0)c6[U0]=8;var U0;for(U0=144;U0<256;++U0)c6[U0]=9;var U0;for(U0=256;U0<280;++U0)c6[U0]=7;var U0;for(U0=280;U0<288;++U0)c6[U0]=8;var U0,tQ=new v1(32);for(U0=0;U0<32;++U0)tQ[U0]=5;var U0,zk=F7(c6,9,0);var kk=F7(tQ,5,0);var _W=function(A){return(A/8|0)+(A&7&&1)},PW=function(A,Q,B){if(Q==null||Q<0)Q=0;if(B==null||B>A.length)B=A.length;var C=new(A instanceof h1?h1:A instanceof Y5?Y5:v1)(B-Q);return C.set(A.subarray(Q,B)),C};var z4=function(A,Q,B){B<<=Q&7;var C=Q/8|0;A[C]|=B,A[C+1]|=B>>>8},Z7=function(A,Q,B){B<<=Q&7;var C=Q/8|0;A[C]|=B,A[C+1]|=B>>>8,A[C+2]|=B>>>16},RK=function(A,Q){var B=[];for(var C=0;C<A.length;++C)if(A[C])B.push({s:C,f:A[C]});var I=B.length,E=B.slice();if(!I)return[kK,0];if(I==1){var K=new v1(B[0].s+1);return K[B[0].s]=1,[K,1]}B.sort(function(z,w){return z.f-w.f}),B.push({s:-1,f:25001});var J=B[0],q=B[1],G=0,Y=1,H=2;B[0]={s:-1,f:J.f+q.f,l:J,r:q};while(Y!=I-1)J=B[B[G].f<B[H].f?G++:H++],q=B[G!=Y&&B[G].f<B[H].f?G++:H++],B[Y++]={s:-1,f:J.f+q.f,l:J,r:q};var Z=E[0].s;for(var C=1;C<I;++C)if(E[C].s>Z)Z=E[C].s;var X=new h1(Z+1),U=wK(B[Y-1],X,0);if(U>Q){var C=0,F=0,W=U-Q,D=1<<W;E.sort(function(w,k){return X[k.s]-X[w.s]||w.f-k.f});for(;C<I;++C){var V=E[C].s;if(X[V]>Q)F+=D-(1<<U-X[V]),X[V]=Q;else break}F>>>=W;while(F>0){var R=E[C].s;if(X[R]<Q)F-=1<<Q-X[R]++-1;else++C}for(;C>=0&&F;--C){var O=E[C].s;if(X[O]==Q)--X[O],++F}U=Q}return[new v1(X),U]},wK=function(A,Q,B){return A.s==-1?Math.max(wK(A.l,Q,B+1),wK(A.r,Q,B+1)):Q[A.s]=B},wW=function(A){var Q=A.length;while(Q&&!A[--Q]);var B=new h1(++Q),C=0,I=A[0],E=1,K=function(q){B[C++]=q};for(var J=1;J<=Q;++J)if(A[J]==I&&J!=Q)++E;else{if(!I&&E>2){for(;E>138;E-=138)K(32754);if(E>2)K(E>10?E-11<<5|28690:E-3<<5|12305),E=0}else if(E>3){K(I),--E;for(;E>6;E-=6)K(8304);if(E>2)K(E-3<<5|8208),E=0}while(E--)K(I);E=1,I=A[J]}return[B.subarray(0,C),Q]},X7=function(A,Q){var B=0;for(var C=0;C<Q.length;++C)B+=A[C]*Q[C];return B},rQ=function(A,Q,B){var C=B.length,I=_W(Q+2);A[I]=C&255,A[I+1]=C>>>8,A[I+2]=A[I]^255,A[I+3]=A[I+1]^255;for(var E=0;E<C;++E)A[I+E+4]=B[E];return(I+4+C)*8},OW=function(A,Q,B,C,I,E,K,J,q,G,Y){z4(Q,Y++,B),++I[256];var H=RK(I,15),Z=H[0],X=H[1],U=RK(E,15),F=U[0],W=U[1],D=wW(Z),V=D[0],R=D[1],O=wW(F),z=O[0],w=O[1],k=new h1(19);for(var j=0;j<V.length;++j)k[V[j]&31]++;for(var j=0;j<z.length;++j)k[z[j]&31]++;var h=RK(k,7),N=h[0],$=h[1],p=19;for(;p>4&&!N[VW[p-1]];--p);var n=G+5<<3,S=X7(I,c6)+X7(E,tQ)+K,v=X7(I,Z)+X7(E,F)+K+14+3*p+X7(k,N)+(2*k[16]+3*k[17]+7*k[18]);if(n<=S&&n<=v)return rQ(Q,Y,A.subarray(q,q+G));var f,m,b,l;if(z4(Q,Y,1+(v<S)),Y+=2,v<S){f=F7(Z,X,0),m=Z,b=F7(F,W,0),l=F;var QA=F7(N,$,0);z4(Q,Y,R-257),z4(Q,Y+5,w-1),z4(Q,Y+10,p-4),Y+=14;for(var j=0;j<p;++j)z4(Q,Y+3*j,N[VW[j]]);Y+=3*p;var BA=[V,z];for(var qA=0;qA<2;++qA){var a=BA[qA];for(var j=0;j<a.length;++j){var AA=a[j]&31;if(z4(Q,Y,QA[AA]),Y+=N[AA],AA>15)z4(Q,Y,a[j]>>>5&127),Y+=a[j]>>>12}}}else f=zk,m=c6,b=kk,l=tQ;for(var j=0;j<J;++j)if(C[j]>255){var AA=C[j]>>>18&31;if(Z7(Q,Y,f[AA+257]),Y+=m[AA+257],AA>7)z4(Q,Y,C[j]>>>23&31),Y+=LK[AA];var IA=C[j]&31;if(Z7(Q,Y,b[IA]),Y+=l[IA],IA>3)Z7(Q,Y,C[j]>>>5&8191),Y+=zK[IA]}else Z7(Q,Y,f[C[j]]),Y+=m[C[j]];return Z7(Q,Y,f[256]),Y+m[256]},Mk=new Y5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),kK=new v1(0),$k=function(A,Q,B,C,I,E){var K=A.length,J=new v1(C+K+5*(1+Math.ceil(K/7000))+I),q=J.subarray(C,J.length-I),G=0;if(!Q||K<8)for(var Y=0;Y<=K;Y+=65535){var H=Y+65535;if(H<K)G=rQ(q,G,A.subarray(Y,H));else q[Y]=E,G=rQ(q,G,A.subarray(Y,K))}else{var Z=Mk[Q-1],X=Z>>>13,U=Z&8191,F=(1<<B)-1,W=new h1(32768),D=new h1(F+1),V=Math.ceil(B/3),R=2*V,O=function(OA){return(A[OA]^A[OA+1]<<V^A[OA+2]<<R)&F},z=new Y5(25000),w=new h1(288),k=new h1(32),j=0,h=0,Y=0,N=0,$=0,p=0;for(;Y<K;++Y){var n=O(Y),S=Y&32767,v=D[n];if(W[S]=v,D[n]=S,$<=Y){var f=K-Y;if((j>7000||N>24576)&&f>423){G=OW(A,q,0,z,w,k,h,N,p,Y-p,G),N=j=h=0,p=Y;for(var m=0;m<286;++m)w[m]=0;for(var m=0;m<30;++m)k[m]=0}var b=2,l=0,QA=U,BA=S-v&32767;if(f>2&&n==O(Y-BA)){var qA=Math.min(X,f)-1,a=Math.min(32767,Y),AA=Math.min(258,f);while(BA<=a&&--QA&&S!=v){if(A[Y+b]==A[Y+b-BA]){var IA=0;for(;IA<AA&&A[Y+IA]==A[Y+IA-BA];++IA);if(IA>b){if(b=IA,l=BA,IA>qA)break;var jA=Math.min(BA,IA-2),bA=0;for(var m=0;m<jA;++m){var RA=Y-BA+m+32768&32767,cA=W[RA],E0=RA-cA+32768&32767;if(E0>bA)bA=E0,v=RA}}}S=v,v=W[S],BA+=S-v+32768&32767}}if(l){z[N++]=268435456|VK[b]<<18|NW[l];var x=VK[b]&31,u0=NW[l]&31;h+=LK[x]+zK[u0],++w[257+x],++k[u0],$=Y+b,++j}else z[N++]=A[Y],++w[A[Y]]}}if(G=OW(A,q,E,z,w,k,h,N,p,Y-p,G),!E&&G&7)G=rQ(q,G+1,kK)}return PW(J,0,C+_W(G)+I)},_k=function(){var A=new Y5(256);for(var Q=0;Q<256;++Q){var B=Q,C=9;while(--C)B=(B&1&&3988292384)^B>>>1;A[Q]=B}return A}(),Pk=function(){var A=-1;return{p:function(Q){var B=A;for(var C=0;C<Q.length;++C)B=_k[B&255^Q[C]]^B>>>8;A=B},d:function(){return~A}}};var Sk=function(A,Q,B,C,I){return $k(A,Q.level==null?6:Q.level,Q.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(A.length)))*1.5):12+Q.mem,B,C,!I)},SW=function(A,Q){var B={};for(var C in A)B[C]=A[C];for(var C in Q)B[C]=Q[C];return B};var X1=function(A,Q,B){for(;B;++Q)A[Q]=B,B>>>=8};var TW=function(A,Q,B,C){for(var I in A){var E=A[I],K=Q+I;if(E instanceof v1)B[K]=[E,C];else if(Array.isArray(E))B[K]=[E[0],SW(C,E[1])];else TW(E,K+"/",B,C)}},LW=typeof TextEncoder!="undefined"&&new TextEncoder,jk=typeof TextDecoder!="undefined"&&new TextDecoder,gk=0;try{jk.decode(kK,{stream:!0}),gk=1}catch(A){}var OK=function(A){var Q=0;if(A)for(var B in A){var C=A[B].length;if(C>65535)throw"extra field too long";Q+=C+4}return Q},zW=function(A,Q,B,C,I,E,K,J){var q=C.length,G=B.extra,Y=J&&J.length,H=OK(G);if(X1(A,Q,K!=null?33639248:67324752),Q+=4,K!=null)A[Q++]=20,A[Q++]=B.os;A[Q]=20,Q+=2,A[Q++]=B.flag<<1|(E==null&&8),A[Q++]=I&&8,A[Q++]=B.compression&255,A[Q++]=B.compression>>8;var Z=new Date(B.mtime==null?Date.now():B.mtime),X=Z.getFullYear()-1980;if(X<0||X>119)throw"date not in range 1980-2099";if(X1(A,Q,X<<25|Z.getMonth()+1<<21|Z.getDate()<<16|Z.getHours()<<11|Z.getMinutes()<<5|Z.getSeconds()>>>1),Q+=4,E!=null)X1(A,Q,B.crc),X1(A,Q+4,E),X1(A,Q+8,B.size);if(X1(A,Q+12,q),X1(A,Q+14,H),Q+=16,K!=null)X1(A,Q,Y),X1(A,Q+6,B.attrs),X1(A,Q+10,K),Q+=14;if(A.set(C,Q),Q+=q,H)for(var U in G){var F=G[U],W=F.length;X1(A,Q,+U),X1(A,Q+2,W),A.set(F,Q+4),Q+=4+W}if(Y)A.set(J,Q),Q+=Y;return Q},yk=function(A,Q,B,C,I){X1(A,Q,101010256),X1(A,Q+8,B),X1(A,Q+10,B),X1(A,Q+12,C),X1(A,Q+16,I)};var xk=function(A,Q,B){if(typeof HTMLImageElement!=="undefined"&&A instanceof HTMLImageElement||typeof HTMLCanvasElement!=="undefined"&&A instanceof HTMLCanvasElement||typeof OffscreenCanvas!=="undefined"&&A instanceof OffscreenCanvas||typeof ImageBitmap!=="undefined"&&A instanceof ImageBitmap){const C=B/Math.max(A.width,A.height),I=document.createElement("canvas");I.width=A.width*Math.min(1,C),I.height=A.height*Math.min(1,C);const E=I.getContext("2d");if(Q===!0)E.translate(0,I.height),E.scale(1,-1);return E.drawImage(A,0,0,I.width,I.height),I}else throw new Error("THREE.USDZExporter: No valid image data found. Unable to process texture.")},hW=function(){return`#usda 1.0
(
	customLayerData = {
		string creator = "Three.js USDZExporter"
	}
	defaultPrim = "Root"
	metersPerUnit = 1
	upAxis = "Y"
)

`},hk=function(A){return`def Xform "Root"
{
	def Scope "Scenes" (
		kind = "sceneLibrary"
	)
	{
		def Xform "Scene" (
			customData = {
				bool preliminary_collidesWithEnvironment = 0
				string sceneName = "Scene"
			}
			sceneName = "Scene"
		)
		{
		token preliminary:anchoring:type = "${A.ar.anchoring.type}"
		token preliminary:planeAnchoring:alignment = "${A.ar.planeAnchoring.alignment}"

`},vk=function(){return`
		}
	}
}

`},fk=function(A){let Q=hW();return Q+=A,W7(Q)},bk=function(A,Q,B){const C="Object_"+A.id,I=vW(A.matrixWorld);if(A.matrixWorld.determinant()<0)console.warn("THREE.USDZExporter: USDZ does not support negative scales",A);return`def Xform "${C}" (
	prepend references = @./geometries/Geometry_${Q.id}.usda@</Geometry>
	prepend apiSchemas = ["MaterialBindingAPI"]
)
{
	matrix4d xformOp:transform = ${I}
	uniform token[] xformOpOrder = ["xformOp:transform"]

	rel material:binding = </Materials/Material_${B.id}>
}

`},vW=function(A){const Q=A.elements;return`( ${eQ(Q,0)}, ${eQ(Q,4)}, ${eQ(Q,8)}, ${eQ(Q,12)} )`},eQ=function(A,Q){return`(${A[Q+0]}, ${A[Q+1]}, ${A[Q+2]}, ${A[Q+3]})`},pk=function(A){return`
def "Geometry"
{
${uk(A)}
}
`},uk=function(A){const B=A.attributes,C=B.position.count;return`
	def Mesh "Geometry"
	{
		int[] faceVertexCounts = [${mk(A)}]
		int[] faceVertexIndices = [${dk(A)}]
		normal3f[] normals = [${gW(B.normal,C)}] (
			interpolation = "vertex"
		)
		point3f[] points = [${gW(B.position,C)}]
${lk(B)}
		uniform token subdivisionScheme = "none"
	}
`},mk=function(A){const Q=A.index!==null?A.index.count:A.attributes.position.count;return Array(Q/3).fill(3).join(", ")},dk=function(A){const Q=A.index,B=[];if(Q!==null)for(let C=0;C<Q.count;C++)B.push(Q.getX(C));else{const C=A.attributes.position.count;for(let I=0;I<C;I++)B.push(I)}return B.join(", ")},gW=function(A,Q){if(A===void 0)return console.warn("USDZExporter: Normals missing."),Array(Q).fill("(0, 0, 0)").join(", ");const B=[];for(let C=0;C<A.count;C++){const I=A.getX(C),E=A.getY(C),K=A.getZ(C);B.push(`(${I.toPrecision(M1)}, ${E.toPrecision(M1)}, ${K.toPrecision(M1)})`)}return B.join(", ")},ck=function(A){const Q=[];for(let B=0;B<A.count;B++){const C=A.getX(B),I=A.getY(B);Q.push(`(${C.toPrecision(M1)}, ${1-I.toPrecision(M1)})`)}return Q.join(", ")},lk=function(A){let Q="";for(let B=0;B<4;B++){const C=B>0?B:"",I=A["uv"+C];if(I!==void 0)Q+=`
		texCoord2f[] primvars:st${C} = [${ck(I)}] (
			interpolation = "vertex"
		)`}return Q},sk=function(A,Q,B=!1){const C=[];for(let I in A){const E=A[I];C.push(nk(E,Q,B))}return`def "Materials"
{
${C.join("")}
}

`},nk=function(A,Q,B=!1){const I=[],E=[];function K(J,q,G){const Y=J.source.id+"_"+J.flipY;Q[Y]=J;const H=J.channel>0?"st"+J.channel:"st",Z={1000:"repeat",1001:"clamp",1002:"mirror"},X=J.repeat.clone(),U=J.offset.clone(),F=J.rotation,W=Math.sin(F),D=Math.cos(F);if(U.y=1-U.y-X.y,B)U.x=U.x/X.x,U.y=U.y/X.y,U.x+=W/X.x,U.y+=D-1;else U.x+=W*X.x,U.y+=(1-D)*X.y;return`
		def Shader "PrimvarReader_${q}"
		{
			uniform token info:id = "UsdPrimvarReader_float2"
			float2 inputs:fallback = (0.0, 0.0)
			token inputs:varname = "${H}"
			float2 outputs:result
		}

		def Shader "Transform2d_${q}"
		{
			uniform token info:id = "UsdTransform2d"
			token inputs:in.connect = </Materials/Material_${A.id}/PrimvarReader_${q}.outputs:result>
			float inputs:rotation = ${(F*(180/Math.PI)).toFixed(M1)}
			float2 inputs:scale = ${xW(X)}
			float2 inputs:translation = ${xW(U)}
			float2 outputs:result
		}

		def Shader "Texture_${J.id}_${q}"
		{
			uniform token info:id = "UsdUVTexture"
			asset inputs:file = @textures/Texture_${Y}.png@
			float2 inputs:st.connect = </Materials/Material_${A.id}/Transform2d_${q}.outputs:result>
			${G!==void 0?"float4 inputs:scale = "+ok(G):""}
			token inputs:sourceColorSpace = "${J.colorSpace===z6?"raw":"sRGB"}"
			token inputs:wrapS = "${Z[J.wrapS]}"
			token inputs:wrapT = "${Z[J.wrapT]}"
			float outputs:r
			float outputs:g
			float outputs:b
			float3 outputs:rgb
			${A.transparent||A.alphaTest>0?"float outputs:a":""}
		}`}if(A.side===I2)console.warn("THREE.USDZExporter: USDZ does not support double sided materials",A);if(A.map!==null){if(I.push(`			color3f inputs:diffuseColor.connect = </Materials/Material_${A.id}/Texture_${A.map.id}_diffuse.outputs:rgb>`),A.transparent)I.push(`			float inputs:opacity.connect = </Materials/Material_${A.id}/Texture_${A.map.id}_diffuse.outputs:a>`);else if(A.alphaTest>0)I.push(`			float inputs:opacity.connect = </Materials/Material_${A.id}/Texture_${A.map.id}_diffuse.outputs:a>`),I.push(`			float inputs:opacityThreshold = ${A.alphaTest}`);E.push(K(A.map,"diffuse",A.color))}else I.push(`			color3f inputs:diffuseColor = ${yW(A.color)}`);if(A.emissiveMap!==null)I.push(`			color3f inputs:emissiveColor.connect = </Materials/Material_${A.id}/Texture_${A.emissiveMap.id}_emissive.outputs:rgb>`),E.push(K(A.emissiveMap,"emissive"));else if(A.emissive.getHex()>0)I.push(`			color3f inputs:emissiveColor = ${yW(A.emissive)}`);if(A.normalMap!==null)I.push(`			normal3f inputs:normal.connect = </Materials/Material_${A.id}/Texture_${A.normalMap.id}_normal.outputs:rgb>`),E.push(K(A.normalMap,"normal"));if(A.aoMap!==null)I.push(`			float inputs:occlusion.connect = </Materials/Material_${A.id}/Texture_${A.aoMap.id}_occlusion.outputs:r>`),E.push(K(A.aoMap,"occlusion"));if(A.roughnessMap!==null&&A.roughness===1)I.push(`			float inputs:roughness.connect = </Materials/Material_${A.id}/Texture_${A.roughnessMap.id}_roughness.outputs:g>`),E.push(K(A.roughnessMap,"roughness"));else I.push(`			float inputs:roughness = ${A.roughness}`);if(A.metalnessMap!==null&&A.metalness===1)I.push(`			float inputs:metallic.connect = </Materials/Material_${A.id}/Texture_${A.metalnessMap.id}_metallic.outputs:b>`),E.push(K(A.metalnessMap,"metallic"));else I.push(`			float inputs:metallic = ${A.metalness}`);if(A.alphaMap!==null)I.push(`			float inputs:opacity.connect = </Materials/Material_${A.id}/Texture_${A.alphaMap.id}_opacity.outputs:r>`),I.push("			float inputs:opacityThreshold = 0.0001"),E.push(K(A.alphaMap,"opacity"));else I.push(`			float inputs:opacity = ${A.opacity}`);if(A.isMeshPhysicalMaterial)I.push(`			float inputs:clearcoat = ${A.clearcoat}`),I.push(`			float inputs:clearcoatRoughness = ${A.clearcoatRoughness}`),I.push(`			float inputs:ior = ${A.ior}`);return`
	def Material "Material_${A.id}"
	{
		def Shader "PreviewSurface"
		{
			uniform token info:id = "UsdPreviewSurface"
${I.join("\n")}
			int inputs:useSpecularWorkflow = 0
			token outputs:surface
		}

		token outputs:surface.connect = </Materials/Material_${A.id}/PreviewSurface.outputs:surface>

${E.join("\n")}

	}
`},yW=function(A){return`(${A.r}, ${A.g}, ${A.b})`},ok=function(A){return`(${A.r}, ${A.g}, ${A.b}, 1.0)`},xW=function(A){return`(${A.x}, ${A.y})`},ik=function(A){const Q=A.name?A.name:"Camera_"+A.id,B=vW(A.matrixWorld);if(A.matrixWorld.determinant()<0)console.warn("THREE.USDZExporter: USDZ does not support negative scales",A);if(A.isOrthographicCamera)return`def Camera "${Q}"
		{
			matrix4d xformOp:transform = ${B}
			uniform token[] xformOpOrder = ["xformOp:transform"]

			float2 clippingRange = (${A.near.toPrecision(M1)}, ${A.far.toPrecision(M1)})
			float horizontalAperture = ${((Math.abs(A.left)+Math.abs(A.right))*10).toPrecision(M1)}
			float verticalAperture = ${((Math.abs(A.top)+Math.abs(A.bottom))*10).toPrecision(M1)}
			token projection = "orthographic"
		}
	
	`;else return`def Camera "${Q}"
		{
			matrix4d xformOp:transform = ${B}
			uniform token[] xformOpOrder = ["xformOp:transform"]

			float2 clippingRange = (${A.near.toPrecision(M1)}, ${A.far.toPrecision(M1)})
			float focalLength = ${A.getFocalLength().toPrecision(M1)}
			float focusDistance = ${A.focus.toPrecision(M1)}
			float horizontalAperture = ${A.getFilmWidth().toPrecision(M1)}
			token projection = "perspective"
			float verticalAperture = ${A.getFilmHeight().toPrecision(M1)}
		}
	
	`};class MK{async parse(A,Q={}){Q=Object.assign({ar:{anchoring:{type:"plane"},planeAnchoring:{alignment:"horizontal"}},quickLookCompatible:!1,maxTextureSize:1024},Q);const B={},C="model.usda";B[C]=null;let I=hW();I+=hk(Q);const E={},K={};A.traverseVisible((q)=>{if(q.isMesh){const{geometry:G,material:Y}=q;if(Y.isMeshStandardMaterial){const H="geometries/Geometry_"+G.id+".usda";if(!(H in B)){const Z=pk(G);B[H]=fk(Z)}if(!(Y.uuid in E))E[Y.uuid]=Y;I+=bk(q,G,Y)}else console.warn("THREE.USDZExporter: Unsupported material type (USDZ only supports MeshStandardMaterial)",q)}else if(q.isCamera)I+=ik(q)}),I+=vk(),I+=sk(E,K,Q.quickLookCompatible),B[C]=W7(I),I=null;for(let q in K){let G=K[q];if(G.isCompressedTexture===!0)G=s8(G);const Y=xk(G.image,G.flipY,Q.maxTextureSize),H=await new Promise((Z)=>Y.toBlob(Z,"image/png",1));B[`textures/Texture_${q}.png`]=new Uint8Array(await H.arrayBuffer())}let J=0;for(let q in B){const G=B[q],Y=34+q.length;J+=Y;const H=J&63;if(H!==4){const Z=64-H,X=new Uint8Array(Z);B[q]=[G,{extra:{12345:X}}]}J=G.length}return jW(B,{level:0})}}var M1=7;var fW=(A)=>(Q)=>{try{const B=d1(Q),C=(B.length?B[0].terms:[]).filter((I)=>I&&I.type==="ident").map((I)=>I.value).filter((I)=>A.indexOf(I)>-1);return new Set(C)}catch(B){}return new Set};var H5=function(A,Q,B,C){var I=arguments.length,E=I<3?Q:C===null?C=Object.getOwnPropertyDescriptor(Q,B):C,K;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")E=Reflect.decorate(A,Q,B,C);else for(var J=A.length-1;J>=0;J--)if(K=A[J])E=(I<3?K(E):I>3?K(Q,B,E):K(Q,B))||E;return I>3&&E&&Object.defineProperty(Q,B,E),E},bW=!1,pW=!1,uW="#model-viewer-no-ar-fallback",ak=fW(["quick-look","scene-viewer","webxr","none"]),rk="webxr scene-viewer quick-look",q2={QUICK_LOOK:"quick-look",SCENE_VIEWER:"scene-viewer",WEBXR:"webxr",NONE:"none"},k4=Symbol("arButtonContainer"),mW=Symbol("enterARWithWebXR"),dW=Symbol("openSceneViewer"),cW=Symbol("openIOSARQuickLook"),tk=Symbol("canActivateAR"),AB=Symbol("arMode"),$K=Symbol("arModes"),Z5=Symbol("arAnchor"),QB=Symbol("preload"),BB=Symbol("onARButtonContainerClick"),_K=Symbol("onARStatus"),PK=Symbol("onARTracking"),SK=Symbol("onARTap"),U7=Symbol("selectARMode"),TK=Symbol("triggerLoad"),lW=(A)=>{var Q,B,C,I,E,K,J,q,G,Y;class H extends A{constructor(){super(...arguments);this.ar=!1,this.arScale="auto",this.arPlacement="floor",this.arModes=rk,this.iosSrc=null,this.xrEnvironment=!1,this[Q]=!1,this[B]=this.shadowRoot.querySelector(".ar-button"),this[C]=document.createElement("a"),this[I]=new Set,this[E]=q2.NONE,this[K]=!1,this[J]=(Z)=>{Z.preventDefault(),this.activateAR()},this[q]=({status:Z})=>{if(Z===U4.NOT_PRESENTING||this[I0].arRenderer.presentedScene===this[EA]){if(this.setAttribute("ar-status",Z),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:Z}})),Z===U4.NOT_PRESENTING)this.removeAttribute("ar-tracking");else if(Z===U4.SESSION_STARTED)this.setAttribute("ar-tracking",yQ.TRACKING)}},this[G]=({status:Z})=>{this.setAttribute("ar-tracking",Z),this.dispatchEvent(new CustomEvent("ar-tracking",{detail:{status:Z}}))},this[Y]=(Z)=>{if(Z.data=="_apple_ar_quicklook_button_tapped")this.dispatchEvent(new CustomEvent("quick-look-button-tapped"))}}get canActivateAR(){return this[AB]!==q2.NONE}connectedCallback(){super.connectedCallback(),this[I0].arRenderer.addEventListener("status",this[_K]),this.setAttribute("ar-status",U4.NOT_PRESENTING),this[I0].arRenderer.addEventListener("tracking",this[PK]),this[Z5].addEventListener("message",this[SK])}disconnectedCallback(){super.disconnectedCallback(),this[I0].arRenderer.removeEventListener("status",this[_K]),this[I0].arRenderer.removeEventListener("tracking",this[PK]),this[Z5].removeEventListener("message",this[SK])}update(Z){if(super.update(Z),Z.has("arScale"))this[EA].canScale=this.arScale!=="fixed";if(Z.has("arPlacement"))this[EA].updateShadow(),this[p0]();if(Z.has("arModes"))this[$K]=ak(this.arModes);if(Z.has("ar")||Z.has("arModes")||Z.has("src")||Z.has("iosSrc"))this[U7]()}async activateAR(){switch(this[AB]){case q2.QUICK_LOOK:await this[cW]();break;case q2.WEBXR:await this[mW]();break;case q2.SCENE_VIEWER:this[dW]();break;default:console.warn("No AR Mode can be activated. This is probably due to missing configuration or device capabilities");break}}async[(Q=tk,B=k4,C=Z5,I=$K,E=AB,K=QB,J=BB,q=_K,G=PK,Y=SK,U7)](){let Z=q2.NONE;if(this.ar){if(this.src!=null)for(let X of this[$K]){if(X==="webxr"&&HQ&&!bW&&await this[I0].arRenderer.supportsPresentation()){Z=q2.WEBXR;break}if(X==="scene-viewer"&&LH&&!pW){Z=q2.SCENE_VIEWER;break}if(X==="quick-look"&&XI){Z=q2.QUICK_LOOK;break}}if(Z===q2.NONE&&this.iosSrc!=null&&XI)Z=q2.QUICK_LOOK}if(Z!==q2.NONE)this[k4].classList.add("enabled"),this[k4].addEventListener("click",this[BB]);else if(this[k4].classList.contains("enabled")){this[k4].removeEventListener("click",this[BB]),this[k4].classList.remove("enabled");const X=U4.FAILED;this.setAttribute("ar-status",X),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:X}}))}this[AB]=Z}async[mW](){console.log("Attempting to present in AR with WebXR..."),await this[TK]();try{this[k4].removeEventListener("click",this[BB]);const{arRenderer:Z}=this[I0];Z.placeOnWall=this.arPlacement==="wall",await Z.present(this[EA],this.xrEnvironment)}catch(Z){console.warn("Error while trying to present in AR with WebXR"),console.error(Z),await this[I0].arRenderer.stopPresenting(),bW=!0,console.warn("Falling back to next ar-mode"),await this[U7](),this.activateAR()}finally{this[U7]()}}async[TK](){if(!this.loaded)this[QB]=!0,this[i4](),await MH(this,"load"),this[QB]=!1}[H4](){return super[H4]()||this[QB]}[dW](){const Z=self.location.toString(),X=new URL(Z),U=new URL(this.src,Z);if(U.hash)U.hash="";const F=new URLSearchParams(U.search);if(X.hash=uW,F.set("mode","ar_preferred"),!F.has("disable_occlusion"))F.set("disable_occlusion","true");if(this.arScale==="fixed")F.set("resizable","false");if(this.arPlacement==="wall")F.set("enable_vertical_placement","true");if(F.has("sound")){const V=new URL(F.get("sound"),Z);F.set("sound",V.toString())}if(F.has("link")){const V=new URL(F.get("link"),Z);F.set("link",V.toString())}const W=`intent://arvr.google.com/scene-viewer/1.0?${F.toString()+"&file="+encodeURIComponent(U.toString())}#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(X.toString())};end;`,D=()=>{if(self.location.hash===uW)pW=!0,self.history.back(),console.warn("Error while trying to present in AR with Scene Viewer"),console.warn("Falling back to next ar-mode"),this[U7]()};self.addEventListener("hashchange",D,{once:!0}),this[Z5].setAttribute("href",W),console.log("Attempting to present in AR with Scene Viewer..."),this[Z5].click()}async[cW](){const Z=!this.iosSrc;this[k4].classList.remove("enabled");const X=Z?await this.prepareUSDZ():this.iosSrc,U=new URL(X,self.location.toString());if(Z){const D=self.location.toString(),V=new URL(D),R=new URL(this.src,V);if(R.hash)U.hash=R.hash}if(this.arScale==="fixed"){if(U.hash)U.hash+="&";U.hash+="allowsContentScaling=0"}const F=this[Z5];F.setAttribute("rel","ar");const W=document.createElement("img");if(F.appendChild(W),F.setAttribute("href",U.toString()),Z)F.setAttribute("download","model.usdz");if(F.style.display="none",!F.isConnected)this.shadowRoot.appendChild(F);if(console.log("Attempting to present in AR with Quick Look..."),F.click(),F.removeChild(W),Z)URL.revokeObjectURL(X);this[k4].classList.add("enabled")}async prepareUSDZ(){const Z=this[O2].beginActivity("usdz-conversion");await this[TK]();const{model:X,shadow:U}=this[EA];if(X==null)return"";let F=!1;if(U!=null)F=U.visible,U.visible=!1;Z(0.2);const D=await new MK().parse(X),V=new Blob([D],{type:"model/vnd.usdz+zip"}),R=URL.createObjectURL(V);if(Z(1),U!=null)U.visible=F;return R}}return H5([LA({type:Boolean,attribute:"ar"})],H.prototype,"ar",void 0),H5([LA({type:String,attribute:"ar-scale"})],H.prototype,"arScale",void 0),H5([LA({type:String,attribute:"ar-placement"})],H.prototype,"arPlacement",void 0),H5([LA({type:String,attribute:"ar-modes"})],H.prototype,"arModes",void 0),H5([LA({type:String,attribute:"ios-src"})],H.prototype,"iosSrc",void 0),H5([LA({type:Boolean,attribute:"xr-environment"})],H.prototype,"xrEnvironment",void 0),H};var jK=function(A,Q,B,C){var I=arguments.length,E=I<3?Q:C===null?C=Object.getOwnPropertyDescriptor(Q,B):C,K;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")E=Reflect.decorate(A,Q,B,C);else for(var J=A.length-1;J>=0;J--)if(K=A[J])E=(I<3?K(E):I>3?K(Q,B,E):K(Q,B))||E;return I>3&&E&&Object.defineProperty(Q,B,E),E},ek=100,AM="https://www.gstatic.com/draco/versioned/decoders/1.5.6/",QM="https://www.gstatic.com/basis-universal/versioned/2021-04-15-ba1c3e4/",BM="https://cdn.jsdelivr.net/npm/three@0.149.0/examples/jsm/loaders/LottieLoader.js",gK={AUTO:"auto",MANUAL:"manual"},sW={AUTO:"auto",LAZY:"lazy",EAGER:"eager"},X5=Symbol("defaultProgressBarElement"),yK=Symbol("posterContainerElement"),F5=Symbol("defaultPosterElement"),D7=Symbol("shouldDismissPoster"),xK=Symbol("hidePoster"),CB=Symbol("modelIsRevealed"),hK=Symbol("updateProgressBar"),CM=Symbol("ariaLabelCallToAction"),vK=Symbol("onProgress"),nW=(A)=>{var Q,B,C,I,E,K,J,q;class G extends A{constructor(...Y){super(...Y);this.poster=null,this.reveal=gK.AUTO,this.loading=sW.AUTO,this[Q]=!1,this[B]=!1,this[C]=this.shadowRoot.querySelector(".slot.poster"),this[I]=this.shadowRoot.querySelector("#default-poster"),this[E]=this.shadowRoot.querySelector("#default-progress-bar > .bar"),this[K]=this[F5].getAttribute("aria-label"),this[J]=zH((F)=>{const W=this[X5].parentNode;requestAnimationFrame(()=>{if(this[X5].style.transform=`scaleX(${F})`,F===0)W.removeChild(this[X5]),W.appendChild(this[X5]);this[X5].classList.toggle("hide",F===1)})},ek),this[q]=(F)=>{const W=F.detail.totalProgress;if(W===1){if(this[hK].flush(),this.loaded&&(this[D7]||this.reveal===gK.AUTO))this[xK]()}this[hK](W),this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:W}}))};const H=self.ModelViewerElement||{},Z=H.dracoDecoderLocation||AM;d0.setDRACODecoderLocation(Z);const X=H.ktx2TranscoderLocation||QM;if(d0.setKTX2TranscoderLocation(X),H.meshoptDecoderLocation)d0.setMeshoptDecoderLocation(H.meshoptDecoderLocation);const U=H.lottieLoaderLocation||BM;x1.singleton.textureUtils.lottieLoaderUrl=U}static set dracoDecoderLocation(Y){d0.setDRACODecoderLocation(Y)}static get dracoDecoderLocation(){return d0.getDRACODecoderLocation()}static set ktx2TranscoderLocation(Y){d0.setKTX2TranscoderLocation(Y)}static get ktx2TranscoderLocation(){return d0.getKTX2TranscoderLocation()}static set meshoptDecoderLocation(Y){d0.setMeshoptDecoderLocation(Y)}static get meshoptDecoderLocation(){return d0.getMeshoptDecoderLocation()}static set lottieLoaderLocation(Y){x1.singleton.textureUtils.lottieLoaderUrl=Y}static get lottieLoaderLocation(){return x1.singleton.textureUtils.lottieLoaderUrl}static mapURLs(Y){x1.singleton.loader[l4].manager.setURLModifier(Y)}dismissPoster(){if(this.loaded)this[xK]();else this[D7]=!0,this[i4]()}showPoster(){const Y=this[yK];if(Y.classList.contains("show"))return;Y.classList.add("show"),this[J2].classList.remove("show");const H=this[F5];H.removeAttribute("tabindex"),H.removeAttribute("aria-hidden");const Z=this.modelIsVisible;this[CB]=!1,this[Y7](Z)}getDimensions(){return $2(this[EA].size)}getBoundingBoxCenter(){return $2(this[EA].boundingBox.getCenter(new P))}connectedCallback(){if(super.connectedCallback(),!this.loaded)this.showPoster();this[O2].addEventListener("progress",this[vK])}disconnectedCallback(){super.disconnectedCallback(),this[O2].removeEventListener("progress",this[vK])}async updated(Y){if(super.updated(Y),Y.has("poster")&&this.poster!=null)this[F5].style.backgroundImage=`url(${this.poster})`;if(Y.has("alt"))this[F5].setAttribute("aria-label",this[oQ]);if(Y.has("reveal")||Y.has("loading"))this[i4]()}[(Q=CB,B=D7,C=yK,I=F5,E=X5,K=CM,J=hK,q=vK,H4)](){return!!this.src&&(this[D7]||this.loading===sW.EAGER||this.reveal===gK.AUTO&&this[o4])}[xK](){this[D7]=!1;const Y=this[yK];if(!Y.classList.contains("show"))return;Y.classList.remove("show"),this[J2].classList.add("show");const H=this.modelIsVisible;this[CB]=!0,this[Y7](H);const Z=this.getRootNode();if(Z&&Z.activeElement===this)this[J2].focus();const X=this[F5];X.setAttribute("aria-hidden","true"),X.tabIndex=-1,this.dispatchEvent(new CustomEvent("poster-dismissed"))}[M2](){return super[M2]()&&this[CB]}}return jK([LA({type:String})],G.prototype,"poster",void 0),jK([LA({type:String})],G.prototype,"reveal",void 0),jK([LA({type:String})],G.prototype,"loading",void 0),G};var fK=function(A,Q,B,C){var I=arguments.length,E=I<3?Q:C===null?C=Object.getOwnPropertyDescriptor(Q,B):C,K;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")E=Reflect.decorate(A,Q,B,C);else for(var J=A.length-1;J>=0;J--)if(K=A[J])E=(I<3?K(E):I>3?K(Q,B,E):K(Q,B))||E;return I>3&&E&&Object.defineProperty(Q,B,E),E},IM=Math.PI/32,EM=3000,KM={basis:[o8(r0(IM,"rad"))],keywords:{auto:[null]}},W5=Symbol("autoRotateStartTime"),bK=Symbol("radiansPerSecond"),oW=Symbol("syncRotationRate"),pK=Symbol("onCameraChange"),iW=(A)=>{var Q,B,C;class I extends A{constructor(){super(...arguments);this.autoRotate=!1,this.autoRotateDelay=EM,this.rotationPerSecond="auto",this[Q]=performance.now(),this[B]=0,this[C]=(E)=>{if(!this.autoRotate)return;if(E.detail.source==="user-interaction")this[W5]=performance.now()}}connectedCallback(){super.connectedCallback(),this.addEventListener("camera-change",this[pK]),this[W5]=performance.now()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("camera-change",this[pK]),this[W5]=performance.now()}updated(E){if(super.updated(E),E.has("autoRotate"))this[W5]=performance.now()}[(Q=W5,B=bK,oW)](E){this[bK]=E[0]}[y1](E,K){if(super[y1](E,K),!this.autoRotate||!this[M2]()||this[I0].isPresenting)return;const J=Math.min(K,E-this[W5]-this.autoRotateDelay);if(J>0)this[EA].yaw=this.turntableRotation+this[bK]*J*0.001}get turntableRotation(){return this[EA].yaw}resetTurntableRotation(E=0){this[EA].yaw=E}}return C=pK,fK([LA({type:Boolean,attribute:"auto-rotate"})],I.prototype,"autoRotate",void 0),fK([LA({type:Number,attribute:"auto-rotate-delay"})],I.prototype,"autoRotateDelay",void 0),fK([s2({intrinsics:KM,updateHandler:oW}),LA({type:String,attribute:"rotation-per-second"})],I.prototype,"rotationPerSecond",void 0),I};var JM=DW(dF(iW($H(pX(lW(nW(WW(a4))))))));customElements.define("model-viewer",JM);class IB extends f5{constructor(A){if(super(A),this.it=L0,A.type!==C9.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(A){if(A===L0||A==null)return this._t=void 0,this.it=A;if(A===Y2)return A;if(typeof A!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(A===this.it)return this._t;this.it=A;const Q=[A];return Q.raw=Q,this._t={_$litType$:this.constructor.resultType,strings:Q,values:[]}}}IB.directiveName="unsafeHTML",IB.resultType=1;var aW=I9(IB);class R7 extends G0{closeButton=d`<svg
    xmlns="http://www.w3.org/2000/svg"
    height="24"
    viewBox="0 -960 960 960"
    width="24"
  >
    <path
      d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"
    ></path>
  </svg>`;static styles=Q0`
    :host,
    .wrapper,
    model-viewer {
      --progress-bar-color: var(--primary-colour);
      width: 100%;
      height: 100%;
      display: block;
      position: relative;
      overflow: hidden;
      background-color: white;
      min-width: 300px;
      min-height: 500px;
    }
    .eky-container {
      container-type: inline-size;
      display: flex;
    }
    .hotspot {
      --min-hotspot-opacity: 1;
    }
    .hotspot button {
      border: 0;
      background-color: var(--hotspot-colour);
      color: var(--secondary-colour);
      padding: 12px 24px;
      border-radius: 15px;
      cursor: pointer;
      box-shadow: 0 3px 10px rgb(0 0 0 / 0.2);
      max-width: 200px;
      display: none;
      font-size: 95%;
    }
    .hotspot .hotspot-dot {
      position: relative;
      width: 30px;
      height: 30px;
    }
    .hotspot .hotspot-dot-circle {
      display: block;
      position: absolute;
      top: 6px;
      left: 6px;
      background-color: var(--hotspot-colour);
      color: var(--secondary-colour);
      width: 17px;
      height: 17px;
      border-radius: 50%;
    }
    .hotspot .hotspot-dot-ring {
      border: 2px solid var(--hotspot-colour);
      border-radius: 50%;
      height: 25px;
      width: 25px;
      position: absolute;
      opacity: 0;
      animation: pulsate 3s ease-out;
      animation-iteration-count: infinite;
    }
    .hotspot .hotspot-dot-ring-delay {
      animation-delay: 0.3s;
    }
    @keyframes pulsate {
      0% {
        transform: scale(0.1, 0.1);
        opacity: 0;
      }
      25% {
        opacity: 1;
      }
      50% {
        transform: scale(1.2, 1.2);
        opacity: 0;
      }
    }
    .hotspot.hotspot-expanded button {
      display: block;
    }
    .hotspot.hotspot-expanded div {
      display: none;
    }
    .sidebar {
      width: 0px;
      max-width: 100%;
      top: 0;
      bottom: 0;
      z-index: 99;
      transition: all 0.5s ease;
      display: flex;
      align-items: center;
      background-color: var(--sidebar-background);
      color: var(--secondary-colour);
      border-radius: 12px;
      overflow: hidden;
    }
    @container (min-width: 768px) {
      .sidebar {
      }
    }
    .sidebar-left {
      left: 0;
      transform: translateX(-100%);
    }
    .sidebar-right {
      right: 0;
      transform: translateX(100%);
    }
    .sidebar-opened {
      transform: translateX(0);
      box-shadow: 0 3px 10px rgb(0 0 0 / 0.2);
      width: 634px;
    }
    .sidebar-close-button {
      width: 30px;
      height: 30px;
      position: absolute;
      border: 0;
      display: none;
      align-items: center;
      justify-content: center;
      top: 10px;
      right: 10px;
      cursor: pointer;
      background-color: var(--secondary-colour);
      border-radius: 15px;
    }
    .sidebar-close-button svg {
      fill: var(--hotspot-colour);
    }
    .sidebar-content {
      padding: 0 24px;
      overflow-y: scroll;
      max-height: 100%;
      width: 100%;
      scrollbar-width: none;
      -ms-overflow-style: none;
      min-width: 337px;
    }
    .sidebar-content::-webkit-scrollbar {
      display: none;
    }
    .sidebar-content::-ms-overflow-style {
      display: none;
    }
    .sidebar-content img,
    .sidebar-content video {
      max-width: 100%;
      height: 100%;
      display: block;
      margin: 0 auto;
    }
    .sidebar-content > h6 {
      margin-top: 0.5rem;
      margin-bottom: 0.5rem;
      line-height: 1.2;
      font-weight: normal;
    }
    .sidebar-opened > .sidebar-close-button {
      display: flex;
    }
    .sidebar-opened > .sidebar-content > .scroll-icon {
      display: flex;
    }
    .sidebar-content > h2 {
      max-width: 333px;
    }
    .qr-button,
    .pause-button,
    .fullscreen-button,
    .play-button,
    .exit-button {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background-color: #fff;
      display: flex;
      align-items: center;
      border: 0;
      box-shadow: 0 3px 10px rgb(0 0 0 / 0.2);
      z-index: 20;
      padding: 0;
      margin: 0;
      cursor: pointer;
    }
    .exit-button {
      width: 45px;
      height: 45px;
    }
    .play-button {
      transform: scale(1.55);
    }
    .button-container {
      position: absolute;
      z-index: 1;
      display: flex;
      gap: 0.7rem;
    }
    .button-container-top-right {
      top: 8px;
      right: 8px;
    }
    .button-container-top-left {
      top: 8px;
      left: 8px;
    }
    .button-container-bottom-left {
      bottom: 8px;
      left: 8px;
    }
    .button-container-bottom-right {
      bottom: 8px;
      right: 8px;
    }
    .fill-primary {
      fill: var(--primary-colour);
    }
    .paused-overlay,
    .qr-ui-container {
      position: absolute;
      background-color: rgba(0, 0, 0, 0.66);
      backdrop-filter: blur(4.5px);
      transition-property: opacity;
      transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      transition-duration: 600ms;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      width: 100%;
      display: flex;
      top: 0;
      bottom: 0;
      z-index: 1;
      color: white;
      font-family: "IntelOneLight", sans-serif;
      padding: 5px;
      text-align: center;
      line-height: 1.2;
    }
    .interaction-overlay {
      position: absolute;
      flex-direction: column;
      width: 100%;
      display: flex;
      top: 0;
      bottom: 0;
      z-index: 2;
    }
    .qr-container {
      max-width: 250px;
      width: 100%;
    }
    .qr-container > img {
      border-radius: 0.5rem;
    }
    .qr-ui-container > p,
    .qr-ui-container > h1 {
      max-width: 500px;
    }
    .scroll-icon {
      position: absolute;
      width: 110px;
      top: 86%;
      left: 37%;
      cursor: pointer;
      display: none;
    }
    .scroll-icon > svg {
      fill: var(--secondary-colour);
    }

    model-viewer {
      display: flex;
      transition:
        visibility 0s linear 0.5s,
        opacity 0.5s linear;
    }

    @keyframes scaleDown {
      from {
        width: 100%;
        opacity: 1;
      }
      to {
        width: 10px;
        opacity: 0.2;
        display: none;
      }
    }

    @keyframes scaleUp {
      from {
        opacity: 0.5;
        min-width: 0px;
      }
      to {
        opacity: 1;
        width: 100%;
      }
    }

    @container (max-width: 400px) {
      .qr-ui-container > h1 {
        font-size: x-large;
      }
      .qr-ui-container > p {
        font-size: 11px;
      }
    }

    @container (max-width: 866px) {
      .sidebar-opened {
        width: 808px;
      }
    }
    @container (max-width: 693px) {
      .sidebar-opened {
        width: 100%;
      }
      .hidden-mobile {
        min-width: 0px;
        animation: scaleDown 0.5s forwards;
      }
      .hidden-mobile > .hotspot {
        display: none;
      }
      .mobile-not-hidden {
        animation: scaleUp 1.5s forwards;
      }
    }
  `;currentSidebarOpened=null;hasScrolled={};constructor(A,Q,B,C,I,E,K,J,q){super(A,Q,B,C,I,E,K,J,q,!0,"3d-player");this.showLeftSidebar=!1;this.showRightSidebar=!1;this.showModal=!1;this._modalPlacement=null;this.isFullscreen=!1;this.isPaused=!1;this.showQRUI=!1;this.hasInteracted=!1;this.userScrolledToBottom=!1;this.isTestingSidebarBackgroundColour=!0;this._hasLeftSidebar=!1;this._hasRightSidebar=!1;this._hasModal=!1;this._hasHotspots=!1;this.hotspotHex="#ffffff";if(this.EKResolvedData["datarequirement-model-hotspots"]){this._hasHotspots=!0;const G=this.EKResolvedData["datarequirement-model-hotspots"].hotspots;if(G&&G.length>0){for(let Y of G)if(Y.hotspotAction&&Y.hotspotAction.length>0){if(Y.hotspotAction[0].blockType==="ModelViewerHotspotsDataRequirementsActionModal")this._hasModal=!0;else if(Y.hotspotAction[0].blockType==="ModelViewerHotspotsDataRequirementsActionSidebar"){if(Y.hotspotAction[0].sidebarDirection==="left")this._hasLeftSidebar=!0;else if(Y.hotspotAction[0].sidebarDirection==="right")this._hasRightSidebar=!0}}}}}connectedCallback(){super.connectedCallback(),document.addEventListener("fullscreenchange",()=>{this.isFullscreen=!!document.fullscreenElement});const A=document.createElement("canvas").getContext("2d");A.fillStyle=this.EKProps.hotspotColour,this.hotspotHex=A.fillStyle;const Q=this.EKResolvedData["datarequirement-model-hotspots"]?.hotspots;if(Q)Q.forEach((B)=>this.logEventLegacy("delivery",`${this.elementIsDirectlyOnPage()?"embed":"button"}-hotspot-${B.label?.toLowerCase().replace(/ /g,"_")}`,"3d-hotspot"))}addIntelFont(){return d`<style class="intel-ul-embed-text-styles">
      @font-face {
        font-family: "IntelOneRegular";
        src: url("https://cdn.pointandplace.com/fonts/intelone-display/intelone-display-regular.ttf");
      }
      @font-face {
        font-family: "IntelOneLight";
        src: url("https://cdn.pointandplace.com/fonts/intelone-display/intelone-display-light.ttf");
      }
      @font-face {
        font-family: "IntelOneBold";
        src: url("https://cdn.pointandplace.com/fonts/intelone-display/intelone-display-bold.woff");
      }
      * {
        font-family: "IntelOneRegular", sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      .text-light {
        font-family: "IntelOneLight", sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      h1,
      h2,
      h3,
      h4,
      h5,
      h6,
      .hotspot button {
        font-family: "IntelOneBold", sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
    </style>`}renderFullscreenButton(A){const Q=d`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="100%"
      height="100%"
      fill="none"
    >
      <circle cx="30" cy="30" r="30" fill="#fff"></circle>
      <path
        class="fill-primary"
        d="M16 44v-9.85h1.55v8.3h8.3V44H16Zm0-18.15V16h9.85v1.55h-8.3v8.3H16ZM34.15 44v-1.55h8.3v-8.3H44V44h-9.85Zm8.3-18.15v-8.3h-8.3V16H44v9.85h-1.55Z"
      ></path>
    </svg>`,B=d`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="60"
      height="60"
      fill="none"
    >
      <circle cx="30" cy="30" r="30" fill="#fff"></circle>
      <path
        class="fill-primary"
        d="M24.3 44v-8.3H16v-1.55h9.85V44H24.3Zm9.85 0v-9.85H44v1.55h-8.3V44h-1.55ZM16 25.85V24.3h8.3V16h1.55v9.85H16Zm18.15 0V16h1.55v8.3H44v1.55h-9.85Z"
      ></path>
    </svg>`;return d`${document.fullscreenEnabled&&A?d`<button
          class="fullscreen-button"
          @click="${()=>this.toggleFullscreen()}"
        >
          ${this.isFullscreen?B:Q}
        </button>`:null}`}renderPlayButton(A){const Q=d`
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="60"
        height="60"
        fill="none"
      >
        <circle cx="30" cy="30" r="30" class="fill-primary" />
        <path
          fill="#fff"
          d="M27 48h6V24h-6v24Zm12 0h6V24h-6v24Z"
          style="transform: translate(-6px,
          -6px);"
        />
      </svg>
    `;return d`${A&&this.isPaused===!1?d`<button
          class="pause-button"
          @click="${()=>this.togglePlayPauseOverlay()}"
        >
          ${Q}
        </button>`:null}`}renderQRButton(A){const Q=d`
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="60"
        height="60"
        fill="none"
      >
        <circle cx="30" cy="30" r="30" fill="#fff" />
        <path
          class="fill-primary"
          d="m28.695 43.095-9.225-5.4a2.72 2.72 0 0 1-.855-.9c-.21-.36-.315-.78-.315-1.26v-10.8c0-.42.105-.817.315-1.192.21-.375.495-.698.855-.968l9.27-5.4c.42-.24.848-.36 1.283-.36.434 0 .847.12 1.237.36l9.27 5.4c.36.27.645.593.855.968.21.375.315.772.315 1.192v10.8c0 .48-.105.9-.315 1.26-.21.36-.51.66-.9.9l-9.315 5.4c-.39.24-.803.36-1.238.36-.434 0-.847-.12-1.237-.36Zm.63-1.305V30.495l-9.63-5.49V35.49c0 .18.045.352.135.517.09.166.225.308.405.428l9.09 5.355Zm1.35 0 9.09-5.355c.18-.12.315-.263.405-.428.09-.164.135-.337.135-.517V25.005l-9.63 5.49V41.79ZM12 18.975V16.14c0-1.14.405-2.115 1.215-2.925C14.025 12.405 15 12 16.14 12h2.835v1.395H16.14c-.78 0-1.433.263-1.958.787-.524.525-.787 1.178-.787 1.958v2.835H12ZM16.14 48c-1.14 0-2.115-.405-2.925-1.215C12.405 45.975 12 45 12 43.86v-2.835h1.395v2.835c0 .78.263 1.432.787 1.958.525.525 1.178.787 1.958.787h2.835V48H16.14Zm24.885-.405V46.2h2.835c.78 0 1.432-.263 1.958-.788.525-.524.787-1.177.787-1.957v-2.88H48v2.88c0 1.14-.405 2.115-1.215 2.925-.81.81-1.785 1.215-2.925 1.215h-2.835Zm5.58-28.62V16.14c0-.78-.262-1.433-.787-1.958-.526-.524-1.178-.787-1.958-.787h-2.835V12h2.835c1.14 0 2.115.405 2.925 1.215C47.595 14.025 48 15 48 16.14v2.835h-1.395ZM30 29.28l9.63-5.535-9.09-5.265c-.18-.09-.36-.135-.54-.135-.18 0-.36.045-.54.135l-9.09 5.265L30 29.28Z"
        />
      </svg>
    `;return d`${A?d`<button class="qr-button" @click="${()=>this.toggleQROverlay()}">
          ${Q}
        </button>`:null}`}renderPausedOverlay(){const A=d`
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="60"
        height="60"
        fill="none"
      >
        <circle cx="30" cy="30" r="30" fill="#fff" />
        <path
          d="M29 49L48 36.5L29 24V49Z"
          style="transform: translate(-6px,
      -6px);"
          class="fill-primary"
        />
      </svg>
    `;return d`<div class="paused-overlay">
      <button
        class="play-button"
        @click="${()=>this.togglePlayPauseOverlay()}"
      >
        ${A}
      </button>
    </div>`}renderQRUI(){const A=this.localisations(),Q=d`
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="40"
        height="40"
        fill="none"
        viewBox="0 0 53 60"
      >
        <circle cx="30" cy="30" r="30" fill="#fff" />
        <path
          class="fill-primary"
          d="M19.1 42.9 18 41.8l11.35-11.35L18 19.1l1.1-1.1 11.35 11.35L41.8 18l1.1 1.1-11.35 11.35L42.9 41.8l-1.1 1.1-11.35-11.35L19.1 42.9Z"
        />
      </svg>
    `;return d`
      <div class="qr-ui-container">
        <h1>${A.QRPopupTitle}</h1>
        <div class="qr-container">
          <img
            src="${this.EKResolvedData["datarequirement-arqrcode"]}"
            alt="QR Code"
          />
        </div>
        <p>${A.QRPopupBottomText}</p>
        <button class="exit-button" @click="${()=>this.toggleQROverlay()}">
          ${Q}
        </button>
      </div>
    `}renderInteractionOverlay(){return d`
      <div
        @click="${(A)=>this.setUserHasInteractedTrue(A)}"
        class="interaction-overlay"
      ></div>
    `}toggleFullscreen(){if(this.isFullscreen)document.exitFullscreen().catch(console.error),this.logEventLegacy("click","fullscreen-disabled");else this.wrapper.requestFullscreen().catch(console.error),this.logEventLegacy("click","fullscreen-enabled")}toggleQROverlay(){if(this.showQRUI=!this.showQRUI,this.closeSidebars(),this.showQRUI)this.logEventLegacy("click","qr-ui-opened");else this.logEventLegacy("click","qr-ui-closed")}togglePlayPauseOverlay(){if(this.isPaused=!this.isPaused,this.closeSidebars(),this.isPaused)this.logEventLegacy("click","pause-btn-clicked");else this.logEventLegacy("click","play-btn-clicked")}closeSidebars(){this.showLeftSidebar=!1,this.showRightSidebar=!1}setUserHasInteractedTrue(A){this.hasInteracted=!0,this.logEventLegacy("click",`model|${A.clientX},${A.clientY}|${this.elementIsDirectlyOnPage()?"embed":"button"}`),this.logEventLegacy("click",this.elementIsDirectlyOnPage()?"embed":"button","3dfw")}getContent(A){if(A.length>0&&A[0].blockType==="ModelViewerHotspotsDataRequirementsContentRichText")return A[0].contentHtml;else if(A.length>0&&A[0].blockType==="ModelViewerHotspotsDataRequirementsContentElement"){if(A[0].content&&A[0].content.length>0)return this.EKControlObject._getWebComponent(A[0].content[0])}return null}renderHotspots(A,Q){if(!Q)return null;if(A.hotspots&&A.hotspots.length===0)return null;return A.hotspots.map((B,C)=>{let I=null,E=(K)=>{K.stopPropagation()};if(!B.label)return null;if(B.hotspotAction&&B.hotspotAction.length>0){const K=B.hotspotAction[0];if(K.blockType==="ModelViewerHotspotsDataRequirementsActionLink")E=(J)=>{J.stopPropagation(),window?.open(K.link,"_blank")?.focus()};else if(K.blockType==="ModelViewerHotspotsDataRequirementsActionModal"){if(I=this.getContent(K.contentBlock),I!==null)E=(J)=>{J.stopPropagation(),this.showLeftSidebar=!1,this.showRightSidebar=!1,this.showModal=!0,this.content=I}}else if(K.blockType==="ModelViewerHotspotsDataRequirementsActionSidebar"){if(I=this.getContent(K.contentBlock),I!==null)E=(J)=>{J.stopPropagation(),this.currentSidebarOpened=B.label?.toLowerCase().replace(/ /g,"_")||null,this.logEventLegacy("open",`${this.elementIsDirectlyOnPage()?"embed":"button"}-popup-${this.currentSidebarOpened}`,"3d-hotspot"),this.showLeftSidebar=K.sidebarDirection==="left",this.showRightSidebar=K.sidebarDirection==="right",this.showModal=!1,this.content=I,this.shadowRoot?.querySelector(".sidebar-content")?.scrollTo(0,0),setTimeout(()=>{const q=this.shadowRoot?.querySelector(".sidebar-opened > .sidebar-content"),G=this.shadowRoot?.querySelector(".sidebar-opened > .sidebar-content > video");if(this.shadowRoot?.querySelectorAll(".sidebar-opened > .sidebar-content > video")?.forEach((H,Z)=>{if(H.getAttribute("play-event-added"))H.addEventListener("play",()=>{this.logEventLegacy("play",`${this.elementIsDirectlyOnPage()?"embed":"button"}-${this.currentSidebarOpened}-video-${Z}`,"3d-hotspot")}),H.setAttribute("play-event-added","true")}),this.userScrolledToBottom=q?.scrollHeight===q?.clientHeight?!0:!1,G){const H=G.play();if(H!==void 0)H.then(()=>{}).catch(()=>{})}},100)}}}return d`
        <div
          class="hotspot"
          onMouseOver="this.classList.add('hotspot-expanded')"
          onMouseOut="this.classList.remove('hotspot-expanded')"
          slot="hotspot-${C}"
          data-position="${B.positionX} ${B.positionY} ${B.positionZ}"
          data-normal="${B.positionX} ${B.positionY} ${B.positionZ}"
        >
          <button
            @click="${(K)=>{E(K),this.logEventLegacy("click",`${this.elementIsDirectlyOnPage()?"embed":"button"}-hotspot-${B.label?.toLowerCase().replace(/ /g,"_")}`,"3d-hotspot")}}"
            @mouseenter="${(K)=>{this.logEventLegacy("hover",`${this.elementIsDirectlyOnPage()?"embed":"button"}-hotspot-${B.label?.toLowerCase().replace(/ /g,"_")}`,"3d-hotspot")}}"
          >
            ${B.label}
          </button>
          <div class="hotspot-dot">
            <div class="hotspot-dot-circle"></div>
            <div class="hotspot-dot-ring"></div>
            <div class="hotspot-dot-ring hotspot-dot-ring-delay"></div>
          </div>
        </div>
      `})}getModelURL(){const A=this.EKResolvedData["datarequirement-model"].files;if(A.length>0){for(let B of A)if(B.type==="glb")return B.location}return null}_onModalClosed(){this.showModal=!1}localisations(){return this.getLocalisations("ModelViewerLocalisation")}isComponentValidToRender(){const A=this.localisations();if(A===null||!A)return!1;else if(!A.QRPopupBottomText||!A.QRPopupTitle)return!1;return!0}scrollIcon(){const A=()=>{const Q=this.shadowRoot?.querySelector(".sidebar-opened > .sidebar-content");if(Q)Q.scrollTo({left:0,top:Q.scrollHeight,behavior:"smooth"})};return d`
      <div
        class="scroll-icon"
        @click="${()=>{A()}}"
      >
        <svg
          class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-dhaba5"
          focusable="false"
          aria-hidden="true"
          viewBox="0 -960 960 960"
          data-testid="KeyboardArrowDownIcon"
          height="100px"
          width="100px"
        >
          <path d="M480-380 276-584l20-20 184 184 184-184 20 20-204 204Z" />
        </svg>
      </div>
    `}checkIfUserIsAtTheBottomOfTheContent(){const A=this.shadowRoot?.querySelector(".sidebar-opened > .sidebar-content");if(A)this.userScrolledToBottom=A.scrollHeight-A.scrollTop<=A.clientHeight+50;else this.userScrolledToBottom=!1}render(){if(!this.isComponentValidToRender())return this.nullifyComponent("Missing localisations"),null;const A=this.getModelURL();if(A===null)return d`<div>...</div>`;let Q=null;if(this.content)if(typeof this.content==="string")Q=aW(this.content);else Q=this.content;let B=null;if(this._hasModal&&this._modalPlacement)B=d`<ek-modal
        .placementStrategy="${this._modalPlacement}"
        .EKAPIComponentParent="${this}"
        .visible="${this.showModal}"
        .anchorElement="${this}"
        @ek-modal-close-button="${this._onModalClosed}"
        @ek-modal-close-backdrop="${this._onModalClosed}"
      >
        ${this.showModal===!0?Q:null}
      </ek-modal>`;return d`
      ${this.getHostStyleOverride()} ${this.getCustomCSSStyles()}
      ${B} ${this.addIntelFont()}
      ${this.EKProps.customSidebarStyling?d`<style>
            ${this.EKProps.customSidebarStyling}
          </style>`:null}
      <style>
        :host {
          --primary-colour: ${this.EKProps.primaryColour};
          --secondary-colour: ${this.EKProps.secondaryColour};
          --hotspot-colour: ${this.EKProps.hotspotColour};
          --sidebar-background: ${this.isTestingSidebarBackgroundColour?this.hotspotHex:`${this.hotspotHex}cc`};
        }
      </style>
      <div class="wrapper eky-container">
        ${this.hasInteracted===!1?this.renderInteractionOverlay():null}
        ${this.isPaused===!0?this.renderPausedOverlay():null}
        ${this.showQRUI===!0?this.renderQRUI():null}
        <div
          class="button-container button-container-${this.EKProps.buttonPosition}"
        >
          ${this.showQRUI===!1?this.renderPlayButton(this.EKProps.showPlayButton):null}
          ${this.showQRUI===!1?this.renderQRButton(this.EKProps.showQRButton):null}
          ${this.showQRUI===!1?this.renderFullscreenButton(this.EKProps.showFullscreenButton):null}
        </div>
        ${this._hasLeftSidebar===!0?d`<div
              class="sidebar sidebar-left ${this.showLeftSidebar?"sidebar-opened":""}"
            >
              <button
                class="sidebar-close-button"
                @click="${()=>{this.showLeftSidebar=!1,this.logEventLegacy("close",`${this.elementIsDirectlyOnPage()?"embed":"button"}-popup-${this.currentSidebarOpened}`,"3d-hotspot")}}"
              >
                ${this.closeButton}
              </button>
              <div
                class="sidebar-content"
                id="sidebar-content-left"
                @scroll="${()=>{if(this.checkIfUserIsAtTheBottomOfTheContent(),this.currentSidebarOpened&&!this.hasScrolled[this.currentSidebarOpened])this.hasScrolled[this.currentSidebarOpened]=!0,this.logEventLegacy("scroll",`${this.elementIsDirectlyOnPage()?"embed":"button"}-popup-${this.currentSidebarOpened}`,"3d-hotspot")}}"
              >
                ${this.showLeftSidebar===!0?Q:null}
                ${this.userScrolledToBottom===!1?this.scrollIcon():null}
              </div>
            </div>`:null}
        ${this._showModelViewer?d`
              <model-viewer
                class="${this.showRightSidebar||this.showLeftSidebar?"hidden-mobile":"mobile-not-hidden"}"
                touch-action="pan-y"
                shadow-intensity="1"
                src="${A}"
                camera-controls=${this.EKProps.cameraControls?"true":L0}
                auto-rotate=${this.EKProps.autoRotate?"true":L0}
                disable-pan=${this.EKProps.pannable?L0:"true"}
                disable-zoom=${this.EKProps.zoomable?L0:"true"}
                interaction-prompt="${this.EKProps.interactionPrompt==="none"?"none":"auto"}"
                interaction-prompt-style="${this.EKProps.interactionPrompt}"
                dir="ltr"
                @load="${()=>{this.logEventLegacy("delivery","model","3d-player")}}"
                @click="${()=>{if(this.EKProps.shouldCloseSidebarsOnClickAway&&this.showLeftSidebar)this.showLeftSidebar=!1,this.logEventLegacy("close",`${this.elementIsDirectlyOnPage()?"embed":"button"}-popup-${this.currentSidebarOpened}`,"3d-hotspot");if(this.EKProps.shouldCloseSidebarsOnClickAway&&this.showRightSidebar)this.showRightSidebar=!1}}"
                @mousedown="${(C)=>{if(this.logEventLegacy("click",`model|${C.clientX},${C.clientY}|${this.elementIsDirectlyOnPage()?"embed":"button"}`),this.breadcrumbs.length>0)this.logEventLegacy("click",this.elementIsDirectlyOnPage()?"embed":"button","3dfw")}}"
              >
                ${this.EKResolvedData["datarequirement-model-hotspots"]?this.renderHotspots(this.EKResolvedData["datarequirement-model-hotspots"],this.EKProps.showHotspots):null}
              </model-viewer>
            `:""}
        ${this._hasRightSidebar===!0?d`<div
              class="sidebar sidebar-right ${this.showRightSidebar?"sidebar-opened":""}"
            >
              <button
                class="sidebar-close-button"
                @click="${()=>{this.showRightSidebar=!1,this.logEventLegacy("close",`${this.elementIsDirectlyOnPage()?"embed":"button"}-popup-${this.currentSidebarOpened}`,"3d-hotspot")}}"
              >
                ${this.closeButton}
              </button>
              <div
                class="sidebar-content"
                @scroll="${()=>{if(this.checkIfUserIsAtTheBottomOfTheContent(),this.currentSidebarOpened&&!this.hasScrolled[this.currentSidebarOpened])this.hasScrolled[this.currentSidebarOpened]=!0,this.logEventLegacy("scroll",`${this.elementIsDirectlyOnPage()?"embed":"button"}-popup-${this.currentSidebarOpened}`,"3d-hotspot")}}"
              >
                ${this.showRightSidebar===!0?Q:null}
                ${this.userScrolledToBottom===!1?this.scrollIcon():null}
              </div>
            </div>`:null}
      </div>
    `}}y([KA()],R7.prototype,"showLeftSidebar",void 0),y([KA()],R7.prototype,"showRightSidebar",void 0),y([KA()],R7.prototype,"showModal",void 0),y([KA()],R7.prototype,"content",void 0),y([KA()],R7.prototype,"_modalPlacement",void 0),y([KA()],R7.prototype,"isFullscreen",void 0),y([KA()],R7.prototype,"isPaused",void 0),y([KA()],R7.prototype,"showQRUI",void 0),y([KA()],R7.prototype,"hasInteracted",void 0),y([KA()],R7.prototype,"userScrolledToBottom",void 0),y([KA()],R7.prototype,"isTestingSidebarBackgroundColour",void 0),y([_0(".wrapper")],R7.prototype,"wrapper",void 0),y([FA({attribute:!1})],R7.prototype,"EKProps",void 0),y([FA({attribute:!1})],R7.prototype,"EKResolvedData",void 0),y([KA()],R7.prototype,"_hasLeftSidebar",void 0),y([KA()],R7.prototype,"_hasRightSidebar",void 0),y([KA()],R7.prototype,"_hasModal",void 0),y([KA()],R7.prototype,"_hasHotspots",void 0),y([KA()],R7.prototype,"hotspotHex",void 0),R7=y([sA("ek-model-viewer")],R7);var qM=(A,Q,B)=>{const C=new RegExp(Q,B),I=A.match(C);if(I&&I[1])return I[1];return null},EB=(A,Q)=>{const B=Q.string;let C="";if(Q.flags)C=Q.flags;return qM(A,B,C)};var G2=Object.freeze({Linear:Object.freeze({None:function(A){return A},In:function(A){return A},Out:function(A){return A},InOut:function(A){return A}}),Quadratic:Object.freeze({In:function(A){return A*A},Out:function(A){return A*(2-A)},InOut:function(A){if((A*=2)<1)return 0.5*A*A;return-0.5*(--A*(A-2)-1)}}),Cubic:Object.freeze({In:function(A){return A*A*A},Out:function(A){return--A*A*A+1},InOut:function(A){if((A*=2)<1)return 0.5*A*A*A;return 0.5*((A-=2)*A*A+2)}}),Quartic:Object.freeze({In:function(A){return A*A*A*A},Out:function(A){return 1- --A*A*A*A},InOut:function(A){if((A*=2)<1)return 0.5*A*A*A*A;return-0.5*((A-=2)*A*A*A-2)}}),Quintic:Object.freeze({In:function(A){return A*A*A*A*A},Out:function(A){return--A*A*A*A*A+1},InOut:function(A){if((A*=2)<1)return 0.5*A*A*A*A*A;return 0.5*((A-=2)*A*A*A*A+2)}}),Sinusoidal:Object.freeze({In:function(A){return 1-Math.sin((1-A)*Math.PI/2)},Out:function(A){return Math.sin(A*Math.PI/2)},InOut:function(A){return 0.5*(1-Math.sin(Math.PI*(0.5-A)))}}),Exponential:Object.freeze({In:function(A){return A===0?0:Math.pow(1024,A-1)},Out:function(A){return A===1?1:1-Math.pow(2,-10*A)},InOut:function(A){if(A===0)return 0;if(A===1)return 1;if((A*=2)<1)return 0.5*Math.pow(1024,A-1);return 0.5*(-Math.pow(2,-10*(A-1))+2)}}),Circular:Object.freeze({In:function(A){return 1-Math.sqrt(1-A*A)},Out:function(A){return Math.sqrt(1- --A*A)},InOut:function(A){if((A*=2)<1)return-0.5*(Math.sqrt(1-A*A)-1);return 0.5*(Math.sqrt(1-(A-=2)*A)+1)}}),Elastic:Object.freeze({In:function(A){if(A===0)return 0;if(A===1)return 1;return-Math.pow(2,10*(A-1))*Math.sin((A-1.1)*5*Math.PI)},Out:function(A){if(A===0)return 0;if(A===1)return 1;return Math.pow(2,-10*A)*Math.sin((A-0.1)*5*Math.PI)+1},InOut:function(A){if(A===0)return 0;if(A===1)return 1;if(A*=2,A<1)return-0.5*Math.pow(2,10*(A-1))*Math.sin((A-1.1)*5*Math.PI);return 0.5*Math.pow(2,-10*(A-1))*Math.sin((A-1.1)*5*Math.PI)+1}}),Back:Object.freeze({In:function(A){var Q=1.70158;return A===1?1:A*A*((Q+1)*A-Q)},Out:function(A){var Q=1.70158;return A===0?0:--A*A*((Q+1)*A+Q)+1},InOut:function(A){var Q=2.5949095;if((A*=2)<1)return 0.5*(A*A*((Q+1)*A-Q));return 0.5*((A-=2)*A*((Q+1)*A+Q)+2)}}),Bounce:Object.freeze({In:function(A){return 1-G2.Bounce.Out(1-A)},Out:function(A){if(A<0.36363636363636365)return 7.5625*A*A;else if(A<0.7272727272727273)return 7.5625*(A-=0.5454545454545454)*A+0.75;else if(A<0.9090909090909091)return 7.5625*(A-=0.8181818181818182)*A+0.9375;else return 7.5625*(A-=0.9545454545454546)*A+0.984375},InOut:function(A){if(A<0.5)return G2.Bounce.In(A*2)*0.5;return G2.Bounce.Out(A*2-1)*0.5+0.5}}),generatePow:function(A){if(A===void 0)A=4;return A=A<Number.EPSILON?Number.EPSILON:A,A=A>1e4?1e4:A,{In:function(Q){return Math.pow(Q,A)},Out:function(Q){return 1-Math.pow(1-Q,A)},InOut:function(Q){if(Q<0.5)return Math.pow(Q*2,A)/2;return(1-Math.pow(2-Q*2,A))/2+0.5}}}}),V7=function(){return performance.now()},GM=function(){function A(){this._tweens={},this._tweensAddedDuringUpdate={}}return A.prototype.getAll=function(){var Q=this;return Object.keys(this._tweens).map(function(B){return Q._tweens[B]})},A.prototype.removeAll=function(){this._tweens={}},A.prototype.add=function(Q){this._tweens[Q.getId()]=Q,this._tweensAddedDuringUpdate[Q.getId()]=Q},A.prototype.remove=function(Q){delete this._tweens[Q.getId()],delete this._tweensAddedDuringUpdate[Q.getId()]},A.prototype.update=function(Q,B){if(Q===void 0)Q=V7();if(B===void 0)B=!1;var C=Object.keys(this._tweens);if(C.length===0)return!1;while(C.length>0){this._tweensAddedDuringUpdate={};for(var I=0;I<C.length;I++){var E=this._tweens[C[I]],K=!B;if(E&&E.update(Q,K)===!1&&!B)delete this._tweens[C[I]]}C=Object.keys(this._tweensAddedDuringUpdate)}return!0},A}(),U5={Linear:function(A,Q){var B=A.length-1,C=B*Q,I=Math.floor(C),E=U5.Utils.Linear;if(Q<0)return E(A[0],A[1],C);if(Q>1)return E(A[B],A[B-1],B-C);return E(A[I],A[I+1>B?B:I+1],C-I)},Bezier:function(A,Q){var B=0,C=A.length-1,I=Math.pow,E=U5.Utils.Bernstein;for(var K=0;K<=C;K++)B+=I(1-Q,C-K)*I(Q,K)*A[K]*E(C,K);return B},CatmullRom:function(A,Q){var B=A.length-1,C=B*Q,I=Math.floor(C),E=U5.Utils.CatmullRom;if(A[0]===A[B]){if(Q<0)I=Math.floor(C=B*(1+Q));return E(A[(I-1+B)%B],A[I],A[(I+1)%B],A[(I+2)%B],C-I)}else{if(Q<0)return A[0]-(E(A[0],A[0],A[1],A[1],-C)-A[0]);if(Q>1)return A[B]-(E(A[B],A[B],A[B-1],A[B-1],C-B)-A[B]);return E(A[I?I-1:0],A[I],A[B<I+1?B:I+1],A[B<I+2?B:I+2],C-I)}},Utils:{Linear:function(A,Q,B){return(Q-A)*B+A},Bernstein:function(A,Q){var B=U5.Utils.Factorial;return B(A)/B(Q)/B(A-Q)},Factorial:function(){var A=[1];return function(Q){var B=1;if(A[Q])return A[Q];for(var C=Q;C>1;C--)B*=C;return A[Q]=B,B}}(),CatmullRom:function(A,Q,B,C,I){var E=(B-A)*0.5,K=(C-Q)*0.5,J=I*I,q=I*J;return(2*Q-2*B+E+K)*q+(-3*Q+3*B-2*E-K)*J+E*I+Q}}},rW=function(){function A(){}return A.nextId=function(){return A._nextId++},A._nextId=0,A}(),uK=new GM,l6=function(){function A(Q,B){if(B===void 0)B=uK;this._object=Q,this._group=B,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1000,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=G2.Linear.None,this._interpolationFunction=U5.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=rW.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return A.prototype.getId=function(){return this._id},A.prototype.isPlaying=function(){return this._isPlaying},A.prototype.isPaused=function(){return this._isPaused},A.prototype.getDuration=function(){return this._duration},A.prototype.to=function(Q,B){if(B===void 0)B=1000;if(this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=Q,this._propertiesAreSetUp=!1,this._duration=B<0?0:B,this},A.prototype.duration=function(Q){if(Q===void 0)Q=1000;return this._duration=Q<0?0:Q,this},A.prototype.dynamic=function(Q){if(Q===void 0)Q=!1;return this._isDynamic=Q,this},A.prototype.start=function(Q,B){if(Q===void 0)Q=V7();if(B===void 0)B=!1;if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var C in this._valuesStartRepeat)this._swapEndStartRepeatValues(C),this._valuesStart[C]=this._valuesStartRepeat[C]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=Q,this._startTime+=this._delayTime,!this._propertiesAreSetUp||B){if(this._propertiesAreSetUp=!0,!this._isDynamic){var I={};for(var E in this._valuesEnd)I[E]=this._valuesEnd[E];this._valuesEnd=I}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,B)}return this},A.prototype.startFromCurrentValues=function(Q){return this.start(Q,!0)},A.prototype._setupProperties=function(Q,B,C,I,E){for(var K in C){var J=Q[K],q=Array.isArray(J),G=q?"array":typeof J,Y=!q&&Array.isArray(C[K]);if(G==="undefined"||G==="function")continue;if(Y){var H=C[K];if(H.length===0)continue;var Z=[J];for(var X=0,U=H.length;X<U;X+=1){var F=this._handleRelativeValue(J,H[X]);if(isNaN(F)){Y=!1,console.warn("Found invalid interpolation list. Skipping.");break}Z.push(F)}if(Y)C[K]=Z}if((G==="object"||q)&&J&&!Y){B[K]=q?[]:{};var W=J;for(var D in W)B[K][D]=W[D];I[K]=q?[]:{};var H=C[K];if(!this._isDynamic){var V={};for(var D in H)V[D]=H[D];C[K]=H=V}this._setupProperties(W,B[K],H,I[K],E)}else{if(typeof B[K]==="undefined"||E)B[K]=J;if(!q)B[K]*=1;if(Y)I[K]=C[K].slice().reverse();else I[K]=B[K]||0}}},A.prototype.stop=function(){if(!this._isChainStopped)this._isChainStopped=!0,this.stopChainedTweens();if(!this._isPlaying)return this;if(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback)this._onStopCallback(this._object);return this},A.prototype.end=function(){return this._goToEnd=!0,this.update(Infinity),this},A.prototype.pause=function(Q){if(Q===void 0)Q=V7();if(this._isPaused||!this._isPlaying)return this;return this._isPaused=!0,this._pauseStart=Q,this._group&&this._group.remove(this),this},A.prototype.resume=function(Q){if(Q===void 0)Q=V7();if(!this._isPaused||!this._isPlaying)return this;return this._isPaused=!1,this._startTime+=Q-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this},A.prototype.stopChainedTweens=function(){for(var Q=0,B=this._chainedTweens.length;Q<B;Q++)this._chainedTweens[Q].stop();return this},A.prototype.group=function(Q){if(Q===void 0)Q=uK;return this._group=Q,this},A.prototype.delay=function(Q){if(Q===void 0)Q=0;return this._delayTime=Q,this},A.prototype.repeat=function(Q){if(Q===void 0)Q=0;return this._initialRepeat=Q,this._repeat=Q,this},A.prototype.repeatDelay=function(Q){return this._repeatDelayTime=Q,this},A.prototype.yoyo=function(Q){if(Q===void 0)Q=!1;return this._yoyo=Q,this},A.prototype.easing=function(Q){if(Q===void 0)Q=G2.Linear.None;return this._easingFunction=Q,this},A.prototype.interpolation=function(Q){if(Q===void 0)Q=U5.Linear;return this._interpolationFunction=Q,this},A.prototype.chain=function(){var Q=[];for(var B=0;B<arguments.length;B++)Q[B]=arguments[B];return this._chainedTweens=Q,this},A.prototype.onStart=function(Q){return this._onStartCallback=Q,this},A.prototype.onEveryStart=function(Q){return this._onEveryStartCallback=Q,this},A.prototype.onUpdate=function(Q){return this._onUpdateCallback=Q,this},A.prototype.onRepeat=function(Q){return this._onRepeatCallback=Q,this},A.prototype.onComplete=function(Q){return this._onCompleteCallback=Q,this},A.prototype.onStop=function(Q){return this._onStopCallback=Q,this},A.prototype.update=function(Q,B){var C;if(Q===void 0)Q=V7();if(B===void 0)B=!0;if(this._isPaused)return!0;var I=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(Q>I)return!1;if(B)this.start(Q,!0)}if(this._goToEnd=!1,Q<this._startTime)return!0;if(this._onStartCallbackFired===!1){if(this._onStartCallback)this._onStartCallback(this._object);this._onStartCallbackFired=!0}if(this._onEveryStartCallbackFired===!1){if(this._onEveryStartCallback)this._onEveryStartCallback(this._object);this._onEveryStartCallbackFired=!0}var E=Q-this._startTime,K=this._duration+((C=this._repeatDelayTime)!==null&&C!==void 0?C:this._delayTime),J=this._duration+this._repeat*K,q=this._calculateElapsedPortion(E,K,J),G=this._easingFunction(q),Y=this._calculateCompletionStatus(E,K);if(Y==="repeat")this._processRepetition(E,K);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,G),Y==="about-to-repeat")this._processRepetition(E,K);if(this._onUpdateCallback)this._onUpdateCallback(this._object,q);if(Y==="repeat"||Y==="about-to-repeat"){if(this._onRepeatCallback)this._onRepeatCallback(this._object);this._onEveryStartCallbackFired=!1}else if(Y==="completed"){if(this._isPlaying=!1,this._onCompleteCallback)this._onCompleteCallback(this._object);for(var H=0,Z=this._chainedTweens.length;H<Z;H++)this._chainedTweens[H].start(this._startTime+this._duration,!1)}return Y!=="completed"},A.prototype._calculateElapsedPortion=function(Q,B,C){if(this._duration===0||Q>C)return 1;var I=Q%B,E=Math.min(I/this._duration,1);if(E===0&&Q!==0&&Q%this._duration===0)return 1;return E},A.prototype._calculateCompletionStatus=function(Q,B){if(this._duration!==0&&Q<this._duration)return"playing";if(this._repeat<=0)return"completed";if(Q===this._duration)return"about-to-repeat";return"repeat"},A.prototype._processRepetition=function(Q,B){var C=Math.min(Math.trunc((Q-this._duration)/B)+1,this._repeat);if(isFinite(this._repeat))this._repeat-=C;for(var I in this._valuesStartRepeat){var E=this._valuesEnd[I];if(!this._yoyo&&typeof E==="string")this._valuesStartRepeat[I]=this._valuesStartRepeat[I]+parseFloat(E);if(this._yoyo)this._swapEndStartRepeatValues(I);this._valuesStart[I]=this._valuesStartRepeat[I]}if(this._yoyo)this._reversed=!this._reversed;this._startTime+=B*C},A.prototype._updateProperties=function(Q,B,C,I){for(var E in C){if(B[E]===void 0)continue;var K=B[E]||0,J=C[E],q=Array.isArray(Q[E]),G=Array.isArray(J),Y=!q&&G;if(Y)Q[E]=this._interpolationFunction(J,I);else if(typeof J==="object"&&J)this._updateProperties(Q[E],K,J,I);else if(J=this._handleRelativeValue(K,J),typeof J==="number")Q[E]=K+(J-K)*I}},A.prototype._handleRelativeValue=function(Q,B){if(typeof B!=="string")return B;if(B.charAt(0)==="+"||B.charAt(0)==="-")return Q+parseFloat(B);return parseFloat(B)},A.prototype._swapEndStartRepeatValues=function(Q){var B=this._valuesStartRepeat[Q],C=this._valuesEnd[Q];if(typeof C==="string")this._valuesStartRepeat[Q]=this._valuesStartRepeat[Q]+parseFloat(C);else this._valuesStartRepeat[Q]=this._valuesEnd[Q];this._valuesEnd[Q]=B},A}();var Vp=rW.nextId,n2=uK,Np=n2.getAll.bind(n2),wp=n2.removeAll.bind(n2),Op=n2.add.bind(n2),Lp=n2.remove.bind(n2),tW=n2.update.bind(n2);var eW={type:"change"},mK={type:"start"},AU={type:"end"},KB=new f4,QU=new x2,HM=Math.cos(70*v4.DEG2RAD);class dK extends K1{constructor(A,Q){super();this.object=A,this.domElement=Q,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new P,this.cursor=new P,this.minDistance=0,this.maxDistance=Infinity,this.minZoom=0,this.maxZoom=Infinity,this.minTargetRadius=0,this.maxTargetRadius=Infinity,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=(-Infinity),this.maxAzimuthAngle=Infinity,this.enableDamping=!1,this.dampingFactor=0.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:R6.ROTATE,MIDDLE:R6.DOLLY,RIGHT:R6.PAN},this.touches={ONE:V6.ROTATE,TWO:V6.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return K.phi},this.getAzimuthalAngle=function(){return K.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(_){_.addEventListener("keydown",mA),this._domElementKeyEvents=_},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",mA),this._domElementKeyEvents=null},this.saveState=function(){B.target0.copy(B.target),B.position0.copy(B.object.position),B.zoom0=B.object.zoom},this.reset=function(){B.target.copy(B.target0),B.object.position.copy(B.position0),B.object.zoom=B.zoom0,B.object.updateProjectionMatrix(),B.dispatchEvent(eW),B.update(),I=C.NONE},this.update=function(){const _=new P,t=new v0().setFromUnitVectors(A.up,new P(0,1,0)),NA=t.clone().invert(),TA=new P,g=new v0,YA=new P,c=2*Math.PI;return function HA(UA=null){const rA=B.object.position;if(_.copy(rA).sub(B.target),_.applyQuaternion(t),K.setFromVector3(_),B.autoRotate&&I===C.NONE)$(h(UA));if(B.enableDamping)K.theta+=J.theta*B.dampingFactor,K.phi+=J.phi*B.dampingFactor;else K.theta+=J.theta,K.phi+=J.phi;let{minAzimuthAngle:H0,maxAzimuthAngle:O0}=B;if(isFinite(H0)&&isFinite(O0)){if(H0<-Math.PI)H0+=c;else if(H0>Math.PI)H0-=c;if(O0<-Math.PI)O0+=c;else if(O0>Math.PI)O0-=c;if(H0<=O0)K.theta=Math.max(H0,Math.min(O0,K.theta));else K.theta=K.theta>(H0+O0)/2?Math.max(H0,K.theta):Math.min(O0,K.theta)}if(K.phi=Math.max(B.minPolarAngle,Math.min(B.maxPolarAngle,K.phi)),K.makeSafe(),B.enableDamping===!0)B.target.addScaledVector(G,B.dampingFactor);else B.target.add(G);B.target.sub(B.cursor),B.target.clampLength(B.minTargetRadius,B.maxTargetRadius),B.target.add(B.cursor);let A1=!1;if(B.zoomToCursor&&z||B.object.isOrthographicCamera)K.radius=l(K.radius);else{const oA=K.radius;K.radius=l(K.radius*q),A1=oA!=K.radius}if(_.setFromSpherical(K),_.applyQuaternion(NA),rA.copy(B.target).add(_),B.object.lookAt(B.target),B.enableDamping===!0)J.theta*=1-B.dampingFactor,J.phi*=1-B.dampingFactor,G.multiplyScalar(1-B.dampingFactor);else J.set(0,0,0),G.set(0,0,0);if(B.zoomToCursor&&z){let oA=null;if(B.object.isPerspectiveCamera){const W1=_.length();oA=l(W1*q);const $1=W1-oA;B.object.position.addScaledVector(R,$1),B.object.updateMatrixWorld(),A1=!!$1}else if(B.object.isOrthographicCamera){const W1=new P(O.x,O.y,0);W1.unproject(B.object);const $1=B.object.zoom;B.object.zoom=Math.max(B.minZoom,Math.min(B.maxZoom,B.object.zoom/q)),B.object.updateProjectionMatrix(),A1=$1!==B.object.zoom;const z7=new P(O.x,O.y,0);z7.unproject(B.object),B.object.position.sub(z7).add(W1),B.object.updateMatrixWorld(),oA=_.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),B.zoomToCursor=!1;if(oA!==null)if(this.screenSpacePanning)B.target.set(0,0,-1).transformDirection(B.object.matrix).multiplyScalar(oA).add(B.object.position);else if(KB.origin.copy(B.object.position),KB.direction.set(0,0,-1).transformDirection(B.object.matrix),Math.abs(B.object.up.dot(KB.direction))<HM)A.lookAt(B.target);else QU.setFromNormalAndCoplanarPoint(B.object.up,B.target),KB.intersectPlane(QU,B.target)}else if(B.object.isOrthographicCamera){const oA=B.object.zoom;if(B.object.zoom=Math.max(B.minZoom,Math.min(B.maxZoom,B.object.zoom/q)),oA!==B.object.zoom)B.object.updateProjectionMatrix(),A1=!0}if(q=1,z=!1,A1||TA.distanceToSquared(B.object.position)>E||8*(1-g.dot(B.object.quaternion))>E||YA.distanceToSquared(B.target)>E)return B.dispatchEvent(eW),TA.copy(B.object.position),g.copy(B.object.quaternion),YA.copy(B.target),!0;return!1}}(),this.dispose=function(){if(B.domElement.removeEventListener("contextmenu",WA),B.domElement.removeEventListener("pointerdown",aA),B.domElement.removeEventListener("pointercancel",k0),B.domElement.removeEventListener("wheel",r),B.domElement.removeEventListener("pointermove",x0),B.domElement.removeEventListener("pointerup",k0),B.domElement.getRootNode().removeEventListener("keydown",GA,{capture:!0}),B._domElementKeyEvents!==null)B._domElementKeyEvents.removeEventListener("keydown",mA),B._domElementKeyEvents=null};const B=this,C={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let I=C.NONE;const E=0.000001,K=new m2,J=new m2;let q=1;const G=new P,Y=new DA,H=new DA,Z=new DA,X=new DA,U=new DA,F=new DA,W=new DA,D=new DA,V=new DA,R=new P,O=new DA;let z=!1;const w=[],k={};let j=!1;function h(_){if(_!==null)return 2*Math.PI/60*B.autoRotateSpeed*_;else return 2*Math.PI/60/60*B.autoRotateSpeed}function N(_){const t=Math.abs(_*0.01);return Math.pow(0.95,B.zoomSpeed*t)}function $(_){J.theta-=_}function p(_){J.phi-=_}const n=function(){const _=new P;return function t(NA,TA){_.setFromMatrixColumn(TA,0),_.multiplyScalar(-NA),G.add(_)}}(),S=function(){const _=new P;return function t(NA,TA){if(B.screenSpacePanning===!0)_.setFromMatrixColumn(TA,1);else _.setFromMatrixColumn(TA,0),_.crossVectors(B.object.up,_);_.multiplyScalar(NA),G.add(_)}}(),v=function(){const _=new P;return function t(NA,TA){const g=B.domElement;if(B.object.isPerspectiveCamera){const YA=B.object.position;_.copy(YA).sub(B.target);let c=_.length();c*=Math.tan(B.object.fov/2*Math.PI/180),n(2*NA*c/g.clientHeight,B.object.matrix),S(2*TA*c/g.clientHeight,B.object.matrix)}else if(B.object.isOrthographicCamera)n(NA*(B.object.right-B.object.left)/B.object.zoom/g.clientWidth,B.object.matrix),S(TA*(B.object.top-B.object.bottom)/B.object.zoom/g.clientHeight,B.object.matrix);else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),B.enablePan=!1}}();function f(_){if(B.object.isPerspectiveCamera||B.object.isOrthographicCamera)q/=_;else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),B.enableZoom=!1}function m(_){if(B.object.isPerspectiveCamera||B.object.isOrthographicCamera)q*=_;else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),B.enableZoom=!1}function b(_,t){if(!B.zoomToCursor)return;z=!0;const NA=B.domElement.getBoundingClientRect(),TA=_-NA.left,g=t-NA.top,YA=NA.width,c=NA.height;O.x=TA/YA*2-1,O.y=-(g/c)*2+1,R.set(O.x,O.y,1).unproject(B.object).sub(B.object.position).normalize()}function l(_){return Math.max(B.minDistance,Math.min(B.maxDistance,_))}function QA(_){Y.set(_.clientX,_.clientY)}function BA(_){b(_.clientX,_.clientX),W.set(_.clientX,_.clientY)}function qA(_){X.set(_.clientX,_.clientY)}function a(_){H.set(_.clientX,_.clientY),Z.subVectors(H,Y).multiplyScalar(B.rotateSpeed);const t=B.domElement;$(2*Math.PI*Z.x/t.clientHeight),p(2*Math.PI*Z.y/t.clientHeight),Y.copy(H),B.update()}function AA(_){if(D.set(_.clientX,_.clientY),V.subVectors(D,W),V.y>0)f(N(V.y));else if(V.y<0)m(N(V.y));W.copy(D),B.update()}function IA(_){U.set(_.clientX,_.clientY),F.subVectors(U,X).multiplyScalar(B.panSpeed),v(F.x,F.y),X.copy(U),B.update()}function jA(_){if(b(_.clientX,_.clientY),_.deltaY<0)m(N(_.deltaY));else if(_.deltaY>0)f(N(_.deltaY));B.update()}function bA(_){let t=!1;switch(_.code){case B.keys.UP:if(_.ctrlKey||_.metaKey||_.shiftKey)p(2*Math.PI*B.rotateSpeed/B.domElement.clientHeight);else v(0,B.keyPanSpeed);t=!0;break;case B.keys.BOTTOM:if(_.ctrlKey||_.metaKey||_.shiftKey)p(-2*Math.PI*B.rotateSpeed/B.domElement.clientHeight);else v(0,-B.keyPanSpeed);t=!0;break;case B.keys.LEFT:if(_.ctrlKey||_.metaKey||_.shiftKey)$(2*Math.PI*B.rotateSpeed/B.domElement.clientHeight);else v(B.keyPanSpeed,0);t=!0;break;case B.keys.RIGHT:if(_.ctrlKey||_.metaKey||_.shiftKey)$(-2*Math.PI*B.rotateSpeed/B.domElement.clientHeight);else v(-B.keyPanSpeed,0);t=!0;break}if(t)_.preventDefault(),B.update()}function RA(_){if(w.length===1)Y.set(_.pageX,_.pageY);else{const t=MA(_),NA=0.5*(_.pageX+t.x),TA=0.5*(_.pageY+t.y);Y.set(NA,TA)}}function cA(_){if(w.length===1)X.set(_.pageX,_.pageY);else{const t=MA(_),NA=0.5*(_.pageX+t.x),TA=0.5*(_.pageY+t.y);X.set(NA,TA)}}function E0(_){const t=MA(_),NA=_.pageX-t.x,TA=_.pageY-t.y,g=Math.sqrt(NA*NA+TA*TA);W.set(0,g)}function x(_){if(B.enableZoom)E0(_);if(B.enablePan)cA(_)}function u0(_){if(B.enableZoom)E0(_);if(B.enableRotate)RA(_)}function C0(_){if(w.length==1)H.set(_.pageX,_.pageY);else{const NA=MA(_),TA=0.5*(_.pageX+NA.x),g=0.5*(_.pageY+NA.y);H.set(TA,g)}Z.subVectors(H,Y).multiplyScalar(B.rotateSpeed);const t=B.domElement;$(2*Math.PI*Z.x/t.clientHeight),p(2*Math.PI*Z.y/t.clientHeight),Y.copy(H)}function OA(_){if(w.length===1)U.set(_.pageX,_.pageY);else{const t=MA(_),NA=0.5*(_.pageX+t.x),TA=0.5*(_.pageY+t.y);U.set(NA,TA)}F.subVectors(U,X).multiplyScalar(B.panSpeed),v(F.x,F.y),X.copy(U)}function pA(_){const t=MA(_),NA=_.pageX-t.x,TA=_.pageY-t.y,g=Math.sqrt(NA*NA+TA*TA);D.set(0,g),V.set(0,Math.pow(D.y/W.y,B.zoomSpeed)),f(V.y),W.copy(D);const YA=(_.pageX+t.x)*0.5,c=(_.pageY+t.y)*0.5;b(YA,c)}function R0(_){if(B.enableZoom)pA(_);if(B.enablePan)OA(_)}function SA(_){if(B.enableZoom)pA(_);if(B.enableRotate)C0(_)}function aA(_){if(B.enabled===!1)return;if(w.length===0)B.domElement.setPointerCapture(_.pointerId),B.domElement.addEventListener("pointermove",x0),B.domElement.addEventListener("pointerup",k0);if(f0(_))return;if(Y0(_),_.pointerType==="touch")kA(_);else T(_)}function x0(_){if(B.enabled===!1)return;if(_.pointerType==="touch")ZA(_);else L(_)}function k0(_){switch(JA(_),w.length){case 0:B.domElement.releasePointerCapture(_.pointerId),B.domElement.removeEventListener("pointermove",x0),B.domElement.removeEventListener("pointerup",k0),B.dispatchEvent(AU),I=C.NONE;break;case 1:const t=w[0],NA=k[t];kA({pointerId:t,pageX:NA.x,pageY:NA.y});break}}function T(_){let t;switch(_.button){case 0:t=B.mouseButtons.LEFT;break;case 1:t=B.mouseButtons.MIDDLE;break;case 2:t=B.mouseButtons.RIGHT;break;default:t=-1}switch(t){case R6.DOLLY:if(B.enableZoom===!1)return;BA(_),I=C.DOLLY;break;case R6.ROTATE:if(_.ctrlKey||_.metaKey||_.shiftKey){if(B.enablePan===!1)return;qA(_),I=C.PAN}else{if(B.enableRotate===!1)return;QA(_),I=C.ROTATE}break;case R6.PAN:if(_.ctrlKey||_.metaKey||_.shiftKey){if(B.enableRotate===!1)return;QA(_),I=C.ROTATE}else{if(B.enablePan===!1)return;qA(_),I=C.PAN}break;default:I=C.NONE}if(I!==C.NONE)B.dispatchEvent(mK)}function L(_){switch(I){case C.ROTATE:if(B.enableRotate===!1)return;a(_);break;case C.DOLLY:if(B.enableZoom===!1)return;AA(_);break;case C.PAN:if(B.enablePan===!1)return;IA(_);break}}function r(_){if(B.enabled===!1||B.enableZoom===!1||I!==C.NONE)return;_.preventDefault(),B.dispatchEvent(mK),jA(e(_)),B.dispatchEvent(AU)}function e(_){const t=_.deltaMode,NA={clientX:_.clientX,clientY:_.clientY,deltaY:_.deltaY};switch(t){case 1:NA.deltaY*=16;break;case 2:NA.deltaY*=100;break}if(_.ctrlKey&&!j)NA.deltaY*=10;return NA}function GA(_){if(_.key==="Control")j=!0,B.domElement.getRootNode().addEventListener("keyup",CA,{passive:!0,capture:!0})}function CA(_){if(_.key==="Control")j=!1,B.domElement.getRootNode().removeEventListener("keyup",CA,{passive:!0,capture:!0})}function mA(_){if(B.enabled===!1||B.enablePan===!1)return;bA(_)}function kA(_){switch(xA(_),w.length){case 1:switch(B.touches.ONE){case V6.ROTATE:if(B.enableRotate===!1)return;RA(_),I=C.TOUCH_ROTATE;break;case V6.PAN:if(B.enablePan===!1)return;cA(_),I=C.TOUCH_PAN;break;default:I=C.NONE}break;case 2:switch(B.touches.TWO){case V6.DOLLY_PAN:if(B.enableZoom===!1&&B.enablePan===!1)return;x(_),I=C.TOUCH_DOLLY_PAN;break;case V6.DOLLY_ROTATE:if(B.enableZoom===!1&&B.enableRotate===!1)return;u0(_),I=C.TOUCH_DOLLY_ROTATE;break;default:I=C.NONE}break;default:I=C.NONE}if(I!==C.NONE)B.dispatchEvent(mK)}function ZA(_){switch(xA(_),I){case C.TOUCH_ROTATE:if(B.enableRotate===!1)return;C0(_),B.update();break;case C.TOUCH_PAN:if(B.enablePan===!1)return;OA(_),B.update();break;case C.TOUCH_DOLLY_PAN:if(B.enableZoom===!1&&B.enablePan===!1)return;R0(_),B.update();break;case C.TOUCH_DOLLY_ROTATE:if(B.enableZoom===!1&&B.enableRotate===!1)return;SA(_),B.update();break;default:I=C.NONE}}function WA(_){if(B.enabled===!1)return;_.preventDefault()}function Y0(_){w.push(_.pointerId)}function JA(_){delete k[_.pointerId];for(let t=0;t<w.length;t++)if(w[t]==_.pointerId){w.splice(t,1);return}}function f0(_){for(let t=0;t<w.length;t++)if(w[t]==_.pointerId)return!0;return!1}function xA(_){let t=k[_.pointerId];if(t===void 0)t=new DA,k[_.pointerId]=t;t.set(_.pageX,_.pageY)}function MA(_){const t=_.pointerId===w[0]?w[1]:w[0];return k[t]}B.domElement.addEventListener("contextmenu",WA),B.domElement.addEventListener("pointerdown",aA),B.domElement.addEventListener("pointercancel",k0),B.domElement.addEventListener("wheel",r,{passive:!1}),B.domElement.getRootNode().addEventListener("keydown",GA,{passive:!0,capture:!0}),this.update()}}var BU=new P,ZM=new v0,CU=new P;class N7 extends F0{constructor(A=document.createElement("div")){super();this.isCSS3DObject=!0,this.element=A,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(Q){if(Q.element instanceof Element&&Q.element.parentNode!==null)Q.element.parentNode.removeChild(Q.element)})})}copy(A,Q){return super.copy(A,Q),this.element=A.element.cloneNode(!0),this}}var o2=new zA,XM=new zA;class cK{constructor(A={}){const Q=this;let B,C,I,E;const K={camera:{style:""},objects:new WeakMap},J=A.element!==void 0?A.element:document.createElement("div");J.style.overflow="hidden",this.domElement=J;const q=document.createElement("div");q.style.transformOrigin="0 0",q.style.pointerEvents="none",J.appendChild(q);const G=document.createElement("div");G.style.transformStyle="preserve-3d",q.appendChild(G),this.getSize=function(){return{width:B,height:C}},this.render=function(U,F){const W=F.projectionMatrix.elements[5]*E;if(F.view&&F.view.enabled)q.style.transform=`translate( ${-F.view.offsetX*(B/F.view.width)}px, ${-F.view.offsetY*(C/F.view.height)}px )`,q.style.transform+=`scale( ${F.view.fullWidth/F.view.width}, ${F.view.fullHeight/F.view.height} )`;else q.style.transform="";if(U.matrixWorldAutoUpdate===!0)U.updateMatrixWorld();if(F.parent===null&&F.matrixWorldAutoUpdate===!0)F.updateMatrixWorld();let D,V;if(F.isOrthographicCamera)D=-(F.right+F.left)/2,V=(F.top+F.bottom)/2;const R=F.view&&F.view.enabled?F.view.height/F.view.fullHeight:1,O=F.isOrthographicCamera?`scale( ${R} )`+"scale("+W+")translate("+Y(D)+"px,"+Y(V)+"px)"+H(F.matrixWorldInverse):`scale( ${R} )`+"translateZ("+W+"px)"+H(F.matrixWorldInverse),w=(F.isPerspectiveCamera?"perspective("+W+"px) ":"")+O+"translate("+I+"px,"+E+"px)";if(K.camera.style!==w)G.style.transform=w,K.camera.style=w;X(U,U,F,O)},this.setSize=function(U,F){B=U,C=F,I=B/2,E=C/2,J.style.width=U+"px",J.style.height=F+"px",q.style.width=U+"px",q.style.height=F+"px",G.style.width=U+"px",G.style.height=F+"px"};function Y(U){return Math.abs(U)<0.0000000001?0:U}function H(U){const F=U.elements;return"matrix3d("+Y(F[0])+","+Y(-F[1])+","+Y(F[2])+","+Y(F[3])+","+Y(F[4])+","+Y(-F[5])+","+Y(F[6])+","+Y(F[7])+","+Y(F[8])+","+Y(-F[9])+","+Y(F[10])+","+Y(F[11])+","+Y(F[12])+","+Y(-F[13])+","+Y(F[14])+","+Y(F[15])+")"}function Z(U){const F=U.elements;return"translate(-50%,-50%)"+("matrix3d("+Y(F[0])+","+Y(F[1])+","+Y(F[2])+","+Y(F[3])+","+Y(-F[4])+","+Y(-F[5])+","+Y(-F[6])+","+Y(-F[7])+","+Y(F[8])+","+Y(F[9])+","+Y(F[10])+","+Y(F[11])+","+Y(F[12])+","+Y(F[13])+","+Y(F[14])+","+Y(F[15])+")")}function X(U,F,W,D){if(U.isCSS3DObject){const V=U.visible===!0&&U.layers.test(W.layers)===!0;if(U.element.style.display=V===!0?"":"none",V===!0){U.onBeforeRender(Q,F,W);let R;if(U.isCSS3DSprite){if(o2.copy(W.matrixWorldInverse),o2.transpose(),U.rotation2D!==0)o2.multiply(XM.makeRotationZ(U.rotation2D));U.matrixWorld.decompose(BU,ZM,CU),o2.setPosition(BU),o2.scale(CU),o2.elements[3]=0,o2.elements[7]=0,o2.elements[11]=0,o2.elements[15]=1,R=Z(o2)}else R=Z(U.matrixWorld);const O=U.element,z=K.objects.get(U);if(z===void 0||z.style!==R){O.style.transform=R;const w={style:R};K.objects.set(U,w)}if(O.parentNode!==G)G.appendChild(O);U.onAfterRender(Q,F,W)}}for(let V=0,R=U.children.length;V<R;V++)X(U.children[V],F,W,D)}}}var D0={professional:{label:"Professional",legacyRoomId:0,initialFov:45,loadingImage:"https://pc-rooms.pointandplace.com/assets/professional-menu.jpg",backgroundImages:["https://pc-rooms.pointandplace.com/files/assets/84310623/1/Right.jpg?t=8dcad65d267cbbbd31daa2f7d667fa0c","https://pc-rooms.pointandplace.com/files/assets/84310625/1/Left.jpg?t=023f9b5bd2bf5470d142db9c71cf2d8d","https://pc-rooms.pointandplace.com/files/assets/84310624/1/Top.jpg?t=3e0b98215e92f7e22cc9d6496c4698a5","https://pc-rooms.pointandplace.com/files/assets/84310626/1/Bottom.jpg?t=43b67dbbfc2782fd12899f77a7a15e19","https://pc-rooms.pointandplace.com/files/assets/84310627/1/Back.jpg?t=5604402f4ff5f2f7972468e6a8626c4b","https://pc-rooms.pointandplace.com/files/assets/84310622/1/Front.jpg?t=07e0fb4dbadb7532f47bc5a56d99fa3d"],hotspots:{monitor:{legacyAreaId:0,position:{x:0,y:33,z:-1000}},laptop:{legacyAreaId:1,position:{x:487,y:-64,z:-1000}},mouse:{legacyAreaId:2,position:{x:273,y:-177,z:-1000}},keyboard:{legacyAreaId:3,position:{x:0,y:-175,z:-1000}},headphones:{legacyAreaId:4,position:{x:-740,y:-242,z:-1000}},accessory:{legacyAreaId:5,position:{x:-585,y:-125,z:-1000}}},decors:{shelf:{hotspot:{x:1,y:1,z:1},position:{x:0,y:0,z:-250},images:["https://pc-rooms.pointandplace.com/files/assets/87387696/1/area0decor0.png?t=c0eed7a7e0cc13c5e512cdba5755af8f","https://pc-rooms.pointandplace.com/files/assets/87387701/1/Area0decor1.png?t=22789adb6a608aab1e67fce90e5d5fb1"]},corner:{hotspot:{x:1,y:1,z:1},position:{x:250,y:0,z:0},images:["https://pc-rooms.pointandplace.com/files/assets/87387700/1/Area1decor0.png?t=ce7a6b8f141632e85effc35097801bf9","https://pc-rooms.pointandplace.com/files/assets/87387697/1/Area1decor1.png?t=63d5b59918569c260e3e8336aba80921"]},backwall:{hotspot:{x:1,y:1,z:1},position:{x:0,y:0,z:250},images:["https://pc-rooms.pointandplace.com/files/assets/87387695/1/Area2decor0.png?t=f90f1fb20e367a8a766156e0ab4021e2","https://pc-rooms.pointandplace.com/files/assets/87387699/1/Area2decor1.png?t=bbdfe992b1a73ad206d5466cd0e9f0c5","https://pc-rooms.pointandplace.com/files/assets/87387698/1/Area2decor2.png?t=d5ae52f6d7e4dc2dc6a11838d2d17eab"]}}},gaming:{label:"Gaming",legacyRoomId:1,initialFov:45,loadingImage:"https://pc-rooms.pointandplace.com/assets/gaming-menu.jpg",backgroundImages:["https://pc-rooms.pointandplace.com/files/assets/86366038/1/Right.jpg?t=ee4bc66b1ba5a671ea2990806ef01ded","https://pc-rooms.pointandplace.com/files/assets/112144554/1/Left.png?t=b8f60c93127a534ee9dab2e7d327fccf","https://pc-rooms.pointandplace.com/files/assets/86366037/1/Top.jpg?t=3b69fca67143fba22b4494359914c306","https://pc-rooms.pointandplace.com/files/assets/86366033/1/Bottom.jpg?t=f4a2d7d59423eee9f6d9fcd41327afdc","https://pc-rooms.pointandplace.com/files/assets/86366036/1/Front.jpg?t=d09dc6e51b2c37a33b204690a7cc9bbc","https://pc-rooms.pointandplace.com/files/assets/86366035/1/Back.jpg?t=1062a2f217537f351561913939f1374c"],hotspots:{monitor:{legacyAreaId:0,position:{x:0,y:33,z:-1000}},laptop:{legacyAreaId:1,position:{x:487,y:-64,z:-1000}},mouse:{legacyAreaId:2,position:{x:273,y:-177,z:-1000}},keyboard:{legacyAreaId:3,position:{x:0,y:-175,z:-1000}},headphones:{legacyAreaId:4,position:{x:-740,y:-242,z:-1000}},accessory:{legacyAreaId:5,position:{x:-505,y:-125,z:-1000}}},decors:{posters:{hotspot:{x:1,y:1,z:1},position:{x:250,y:0,z:0},images:["https://pc-rooms.pointandplace.com/files/assets/109815377/1/Area1Decor0.png?t=141786bff59382971e7e5dc155a5ffc2","https://pc-rooms.pointandplace.com/files/assets/109815378/1/Area1Decor1.png?t=96a8e9ae27bdf2dc825d1157f53c2d36"]},clock:{hotspot:{x:1,y:1,z:1},position:{x:0,y:0,z:250},images:["https://pc-rooms.pointandplace.com/files/assets/109692605/1/Area2Decor0.png?t=e1ea18da5b4af48a22589fdb66813979","https://pc-rooms.pointandplace.com/files/assets/109692611/1/Area2Decor1.png?t=ab89ee701520f3e74eed17187060013c","https://pc-rooms.pointandplace.com/files/assets/109692608/1/Area2Decor2.png?t=e30b9efec0c03f6f188607742e221bb6","https://pc-rooms.pointandplace.com/files/assets/109692606/1/Area2Decor3.png?t=d379eb2a27c51dc90bc3dbbb83fe1e52"]},statue:{hotspot:{x:1,y:1,z:1},position:{x:-250,y:0,z:0},images:["https://pc-rooms.pointandplace.com/files/assets/109692607/1/Area0Decor0.png?t=71304db438d4aaeaa5635d27e8730bd6","https://pc-rooms.pointandplace.com/files/assets/109692610/1/Area0Decor1.png?t=01d404cbea8bf4b71aebd17af0ed7c56","https://pc-rooms.pointandplace.com/files/assets/109692609/1/Area0Decor2.png?t=995d0a3727e66b5c08029a6f35484da2"]}}},student:{label:"Student",legacyRoomId:2,initialFov:45,initialCameraDirection:{x:0,y:-150,z:-1000},loadingImage:"https://pc-rooms.pointandplace.com/assets/student-menu.jpg",backgroundImages:["https://pc-rooms.pointandplace.com/files/assets/141359215/1/Right.jpg?t=d36a0ad9fc0eb6f735e99043e0ed9397","https://pc-rooms.pointandplace.com/files/assets/141359211/1/Left.jpg?t=332736d5234864fd6068c3235ace1eaa","https://pc-rooms.pointandplace.com/files/assets/141359216/1/Top.jpg?t=6659c8ef9b5a9539f67b3549aa305ad7","https://pc-rooms.pointandplace.com/files/assets/141359213/1/Bottom.jpg?t=138ca9ab5857c8defc9427f540d69200","https://pc-rooms.pointandplace.com/files/assets/141359214/1/front.jpg?t=ae46883d0b5c23a5e4e97c838f0ad905","https://pc-rooms.pointandplace.com/files/assets/141359212/1/Back.jpg?t=b693f01ac87f19999d831424233c41a1"],hotspots:{monitor:{legacyAreaId:0,position:{x:0,y:-80,z:-1000}},laptop:{legacyAreaId:1,position:{x:-500,y:-300,z:-1000}},mouse:{legacyAreaId:2,position:{x:230,y:-355,z:-1000}},keyboard:{legacyAreaId:3,position:{x:0,y:-370,z:-1000}},headphones:{legacyAreaId:4,position:{x:530,y:-150,z:-1000}}},decors:{door:{hotspot:{x:1,y:1,z:1},position:{x:250,y:0,z:0},images:["https://pc-rooms.pointandplace.com/files/assets/140810848/1/Area0Decor0.png?t=ed5e3e17ec66bea49c55091915903d22","https://pc-rooms.pointandplace.com/files/assets/140810847/1/Area0Decor1.png?t=f4a82be7d2b52a6bbe19a47df825796c"]},backWall:{hotspot:{x:1,y:1,z:1},position:{x:0,y:0,z:250},images:["https://pc-rooms.pointandplace.com/files/assets/140810849/1/Area1Decor0.png?t=e0ac5eabcd4e5acf21ecabb85b920301","https://pc-rooms.pointandplace.com/files/assets/140810850/1/Area1Decor1.png?t=cb350a1318233d5245d28e26414f10cb"]},aboveDesk:{hotspot:{x:1,y:1,z:1},position:{x:0,y:0,z:-250},images:["https://pc-rooms.pointandplace.com/files/assets/140810852/1/Area2Decor0.png?t=b3bfff8fc4788d56a8f64396f3f2e412","https://pc-rooms.pointandplace.com/files/assets/140810851/1/Area2Decor1.png?t=a5abf5bdc1d564fc8dbd4403122054c7"]}}},remote:{label:"Remote",legacyRoomId:3,initialFov:45,initialCameraDirection:{x:0,y:-300,z:-1000},loadingImage:"https://pc-rooms.pointandplace.com/assets/remote-menu.jpg",backgroundImages:["https://pc-rooms.pointandplace.com/files/assets/141356898/1/Right.jpg?t=577be8f6144eb127c3f746241bdf012f","https://pc-rooms.pointandplace.com/files/assets/141356896/1/Left.jpg?t=8489c60feb0787f5d46c65e0947cc2c8","https://pc-rooms.pointandplace.com/files/assets/141356895/1/Top.jpg?t=ecd045b4ca1a3dd4fedfe82e20b63a5d","https://pc-rooms.pointandplace.com/files/assets/141356899/1/Bottom.jpg?t=b379b880cdb9981f0b26defd8a11b5c6","https://pc-rooms.pointandplace.com/files/assets/141356897/1/Front.jpg?t=d95989144733fa34b9b84a6590776b81","https://pc-rooms.pointandplace.com/files/assets/141356900/1/Back.jpg?t=56b8f186b42ce9df6621b87d0a79b760"],hotspots:{laptop:{legacyAreaId:0,position:{x:-80,y:-350,z:-1000}},headphones:{legacyAreaId:2,position:{x:-450,y:-485,z:-1000}},mouse:{legacyAreaId:3,position:{x:330,y:-550,z:-1000}},accessory:{legacyAreaId:1,position:{x:650,y:-255,z:-1000}}},decors:{logo:{hotspot:{x:1,y:1,z:1},position:{x:-250,y:0,z:0},images:["https://pc-rooms.pointandplace.com/files/assets/140768138/1/Area0Decor0.png?t=34aabd1646855c4230acddfd8d5c9340","https://pc-rooms.pointandplace.com/files/assets/140768139/1/Area0Decor1.png?t=19bc1343694cb83b78f06cbd65f5d558"]},counter:{hotspot:{x:1,y:1,z:1},position:{x:250,y:0,z:0},images:["https://pc-rooms.pointandplace.com/files/assets/140768185/1/Area1Decor0.png?t=e6feb761331f23c7c5a581e6a629f2ee","https://pc-rooms.pointandplace.com/files/assets/140768186/1/Area1Decor1.png?t=12d85bff54344f5430abd45aedb3672a"]}}},creative:{label:"Creative",legacyRoomId:4,initialFov:45,initialCameraDirection:{x:0,y:-150,z:-1000},loadingImage:"https://pc-rooms.pointandplace.com/assets/creative-menu.jpg",backgroundImages:["https://pc-rooms.pointandplace.com/files/assets/141358782/1/Right.jpg?t=c29f5547bb40db42a33076f7127f4a7c","https://pc-rooms.pointandplace.com/files/assets/141358779/1/Left.jpg?t=b052c391b976dc53efd9f9c2302e8395","https://pc-rooms.pointandplace.com/files/assets/141358780/1/Top.jpg?t=dce9a6fa147fddcd20669c9bb17b8153","https://pc-rooms.pointandplace.com/files/assets/141358781/1/Bottom.jpg?t=85719ce6c8a478118b6b6e3fc97a7e01","https://pc-rooms.pointandplace.com/files/assets/141358784/1/Front.jpg?t=0475a5fd8607cfae78e80a090b4e1c37","https://pc-rooms.pointandplace.com/files/assets/141358783/1/Back.jpg?t=bfd5e49dd653ef0aba7c72ea6c1e61d7"],hotspots:{monitor:{legacyAreaId:0,position:{x:-5,y:-33,z:-1000}},laptop:{legacyAreaId:1,position:{x:-60,y:-440,z:-1000}},mouse:{legacyAreaId:2,position:{x:250,y:-450,z:-1000}},storage:{legacyAreaId:3,position:{x:-600,y:-265,z:-1000}},headphones:{legacyAreaId:4,position:{x:-425,y:-400,z:-1000}}},decors:{backwall:{hotspot:{x:1,y:1,z:1},position:{x:0,y:0,z:250},images:["https://pc-rooms.pointandplace.com/files/assets/140887797/1/Area0Decor0.png?t=58f3ca86535ae861b85ca97d7a8869d2","https://pc-rooms.pointandplace.com/files/assets/140887800/1/Area0Decor1.png?t=a2993fc7bd95ffbe45d802f709ddf64b"]},rightwall:{hotspot:{x:1,y:1,z:1},position:{x:250,y:0,z:0},images:["https://pc-rooms.pointandplace.com/files/assets/140887796/1/Area1Decor0.png?t=24b314aa384af1eaec68900175e6fdff","https://pc-rooms.pointandplace.com/files/assets/140887795/1/Area1Decor1.png?t=68745f06cbe3ad392c2e461245cdc40f"]},leftwall:{hotspot:{x:1,y:1,z:1},position:{x:-250,y:0,z:0},images:["https://pc-rooms.pointandplace.com/files/assets/140887799/1/Area2Decor0.png?t=8229bb343f7a4348eaf0214fce20e9e7","https://pc-rooms.pointandplace.com/files/assets/140887798/1/Area2Decor1.png?t=f733722613195a54b595d7e770f880e3"]}}}};class w7 extends G0{hasLookedAtActualAvailableRooms=!1;deploymentConfig=null;hasFirstClick=!1;currentProductInfoIdx=null;minCameraFov=27;maxCameraFov=63;glScene=void 0;glRenderer=void 0;cssScene=void 0;cssRenderer=void 0;camera=void 0;controls=void 0;startHoldingStateTimer=null;holdingStateCycleTimer=null;holdingMessages=[];cameraDirectionTween=void 0;textureCache={};static styles=[K9,Q0`
      .z-1 {
        z-index: 1;
      }
      .z-2 {
        z-index: 2;
      }
      .z-3 {
        z-index: 3;
      }
      .z-4 {
        z-index: 4;
      }
      #eky-container > div:nth-child(1) > div > div {
        position: absolute;
        z-index: 1;
      }
    `];constructor(A,Q,B,C,I,E,K,J,q){super(A,Q,B,C,I,E,K,J,q,!0,"pc-rooms");this.availableRooms=[];this.currentRoom=null;this.isFullscreen=!1;this.fov=45;this.showMenu=!1;this.loadingSubComponents=!1;this.selectedHotspot=null;this.showProductOptions=null;this.currentProductOptions=[];this.textureMeshes={};this.decorMeshes={};this.loadingRoom=!1;this.showLoadingScreen=!1;this.inHoldingState=!1;this.showProductInfo=null;this.mobileRoomMenuPosition=0;this.inCart=[];this.hasUpdatedAvailableRooms=!1;this.actualAvailableRooms=[];this.rtl=!1}async preloadAssets(){const A=new Image;A.src=D0[this.currentRoom].loadingImage;const Q=this.EKControlObject._config?.deployment,B=this.EKControlObject._config?.language,C=await fetch(`https://pc-rooms.pointandplace.com/v3/configs/${Q}-${B?B.split("_")[0]:"en"}.json`);if(this.deploymentConfig=await C.json(),!this.hasUpdatedAvailableRooms&&this.EKControlObject._config?.deployment!=="aef4d3e1-04fd-436d-8fa1-a14a35f369db"){const Y=[];this.deploymentConfig.map((Z)=>{Z.room.areas.map((X)=>{X.area.assets.map((U)=>{if(U.arid===this.EKResolvedData["datarequirement-pcrooms"].arid){if(!Y.includes(Z.room.id))Y.push(parseInt(Z.room.id))}})})});let H=[];if(this.EKResolvedData["datarequirement-pcrooms"].arid)Y.map((Z)=>{H.push(this.availableRooms[Z])});else H=this.availableRooms;this.availableRooms=H,this.actualAvailableRooms=H,this.hasLookedAtActualAvailableRooms=!0,this.currentRoom=this.availableRooms[0],this.hasUpdatedAvailableRooms=!0}if(this.EKControlObject._config?.deployment==="aef4d3e1-04fd-436d-8fa1-a14a35f369db")this.actualAvailableRooms=this.availableRooms;this.actualAvailableRooms=[...new Set(this.actualAvailableRooms)];const I=D0[this.currentRoom];if(!I)throw new Error("Invalid room provided");const E=this.deploymentConfig.find((Y)=>parseInt(Y.room.id)===I.legacyRoomId),K=["https://pc-rooms.pointandplace.com/assets/creative-menu.jpg","https://pc-rooms.pointandplace.com/assets/gaming-menu.jpg","https://pc-rooms.pointandplace.com/assets/icons/cart-remove.svg","https://pc-rooms.pointandplace.com/assets/icons/cart.svg","https://pc-rooms.pointandplace.com/assets/icons/chevron-blue.svg","https://pc-rooms.pointandplace.com/assets/icons/chevron-down.svg","https://pc-rooms.pointandplace.com/assets/icons/chevron-up.svg","https://pc-rooms.pointandplace.com/assets/icons/close-white.svg","https://pc-rooms.pointandplace.com/assets/icons/close.svg","https://pc-rooms.pointandplace.com/assets/icons/cube.svg","https://pc-rooms.pointandplace.com/assets/icons/enter-fullscreen.svg","https://pc-rooms.pointandplace.com/assets/icons/exit-fullscreen.svg","https://pc-rooms.pointandplace.com/assets/icons/info.svg","https://pc-rooms.pointandplace.com/assets/icons/zoom-in.svg","https://pc-rooms.pointandplace.com/assets/icons/zoom-out.svg","https://pc-rooms.pointandplace.com/assets/professional-menu.jpg","https://pc-rooms.pointandplace.com/assets/remote-menu.jpg","https://pc-rooms.pointandplace.com/assets/student-menu.jpg"],J=[...I.backgroundImages];Object.entries(I.decors).map(([Y,H])=>{J.push(...H.images)}),Object.entries(I.hotspots).map(([Y,H])=>{const Z=E?.room.areas.find((X)=>parseInt(X.area.id)===H.legacyAreaId);J.push(...Z?.area.assets.map((X)=>`https://pc-rooms.pointandplace.com/v3/visual-assets/textures/${this.currentRoom==="creative"?"editor":this.currentRoom}/${X.arid}.png`)),K.push(...Z?.area.assets.map((X)=>`https://pc-rooms.pointandplace.com/v3/visual-assets/thumbnails/${X.arid}.png`))});const q=K.map((Y)=>{return new Promise((H,Z)=>{const X=new Image;X.src=Y,X.onload=()=>{H(Y)},X.onerror=()=>{console.error(Y),Z(Y)}})}),G=J.map((Y)=>{return new Promise((H,Z)=>{new _6().load(Y,(U)=>{U.colorSpace=$0,this.textureCache[encodeURIComponent(Y)]=U,H(Y)},void 0,()=>{console.error(Y),Z(Y)})})});await Promise.all([...q,...G])}setupScenes(){this.glScene=new a0,this.cssScene=new a0;const A=D0[this.currentRoom].backgroundImages,Q=new U3(A.map((B)=>{const C=this.textureCache[encodeURIComponent(B)];return C.colorSpace=$0,C.image}));Q.colorSpace=$0,Q.needsUpdate=!0,this.glScene.background=Q}setupRenderers(){this.glRenderer=new b2,this.glRenderer.setPixelRatio(window.devicePixelRatio),this.glRenderer.setSize(this.ekyContainer.clientWidth,this.ekyContainer.clientHeight),this.glRenderer.setClearColor(16777215,1),this.ekyContainer.insertBefore(this.glRenderer.domElement,this.ekyContainer.firstChild),this.cssRenderer=new cK,this.cssRenderer.setSize(this.ekyContainer.clientWidth,this.ekyContainer.clientHeight),this.cssRenderer.domElement.style.position="absolute",this.cssRenderer.domElement.style.top="0",this.cssRenderer.domElement.style.pointerEvents="none",this.ekyContainer.insertBefore(this.cssRenderer.domElement,this.ekyContainer.firstChild)}setupCameraAndControls(){this.camera=new P0(D0[this.currentRoom].initialFov,this.ekyContainer.clientWidth/this.ekyContainer.clientHeight,1,1000),this.camera.position.set(0,0,0),this.controls=new dK(this.camera,this.glRenderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=0.1,this.controls.rotateSpeed*=-0.3,this.controls.enablePan=!1,this.controls.enableZoom=!1,this.handleCameraDirectionChange(D0[this.currentRoom].initialCameraDirection??{x:0,y:0,z:-1000},0)}setupDecors(){const A=D0[this.currentRoom];Object.entries(A.decors).map(([Q,B])=>{this.cycleDecor(Q)})}setupTextures(){const A=D0[this.currentRoom],Q=this.deploymentConfig.find((B)=>parseInt(B.room.id)===A.legacyRoomId);Object.entries(A.hotspots).map(([B,C])=>{const E=Q?.room.areas.find((K)=>parseInt(K.area.id)===C.legacyAreaId)?.area.assets;if(E&&E.length){const K=E.find((J)=>J.arid===this.EKResolvedData["datarequirement-pcrooms"].arid);this.changeTexture(B,K?K.arid:E[0].arid,0)}})}setupHotspots(){Object.entries(D0[this.currentRoom].hotspots).forEach(([A,Q])=>{if(A==="laptop"&&this.EKProps.hideLaptopHotspot)return;const B=Q.position,C=document.createElement("button");C.classList.add("w-8","h-8");const I=document.createElement("div");I.classList.add("w-8","h-8","rounded-full","absolute","top-0","left-0","border-2","border-[#5ac4f8]","animate-hotspot");const E=document.createElement("div");E.classList.add("h-8","w-8","bg-white","rounded-full","absolute","top-0","left-0"),C.appendChild(I),C.appendChild(E);const K=new N7(C);K.position.x=B.x,K.position.y=B.y,K.position.z=B.z,K.lookAt(0,0,0),this.cssScene.add(K),C.addEventListener("click",(J)=>{this.handleSelectHotspot(K),this.handleShowProductOptions(A)})})}async loadRoom(A){if(A===this.currentRoom)return;this.showMenu=!1,this.unloadRoom(),this.currentRoom=A,this.loadingRoom=!0,await this.preloadAssets(),this.setupScenes(),this.setupRenderers(),this.setupCameraAndControls(),this.setupDecors(),this.setupTextures(),this.setupHotspots();const Q=this;(function B(){requestAnimationFrame(B),Q.controls.update(),tW(),Q.glRenderer.render(Q.glScene,Q.camera),Q.cssRenderer.render(Q.cssScene,Q.camera)})(),this.logEventLegacy("click",`start-room-${D0[this.currentRoom].legacyRoomId}`),this.logEventLegacy("delivery",`room-${D0[this.currentRoom].legacyRoomId}-app-start`),this.loadingRoom=!1,this.startHoldingState()}unloadRoom(){if(this.stopHoldingState(),this.glRenderer&&this.glRenderer.domElement)this.glRenderer.domElement.remove();if(this.cssRenderer&&this.cssRenderer.domElement)this.cssRenderer.domElement.remove();this.selectedHotspot=null,this.showProductOptions=null,this.currentProductOptions=[],this.decorMeshes={},this.textureMeshes={}}enterFullscreen(){if(this.isFullscreen=!0,!document.fullscreenElement)this.ekyContainer.requestFullscreen().catch(console.log)}exitFullscreen(){if(this.isFullscreen=!1,document.fullscreenElement)document.exitFullscreen().catch(console.log)}handleResize(){if(this.camera&&this.glRenderer&&this.cssRenderer)this.camera.aspect=this.ekyContainer.clientWidth/this.ekyContainer.clientHeight,this.camera.updateProjectionMatrix(),this.glRenderer.setSize(this.ekyContainer.clientWidth,this.ekyContainer.clientHeight),this.cssRenderer.setSize(this.ekyContainer.clientWidth,this.ekyContainer.clientHeight)}handleFovChange(A,Q=500,B=G2.Linear.None){if(!this.camera)return;const C=new l6(this.camera).to({fov:A},Q).easing(B).onUpdate(()=>{this.camera.updateProjectionMatrix()}).start()}handleCameraDirectionChange(A,Q=500,B=G2.Linear.None){if(this.cameraDirectionTween)this.cameraDirectionTween.stop();const C=new P().copy(this.camera.position),I=new P(A.x*-1/1000,A.y*-1/1000,A.z*-1/1000);this.controls.enabled=!1,this.cameraDirectionTween=new l6(C).to(I,Q).easing(B).onUpdate(()=>{this.camera.position.copy(C),this.camera.lookAt(this.controls.target)}).onComplete(()=>{this.camera.position.copy(I),this.camera.lookAt(this.controls.target),this.controls.enabled=!0}).start()}changeTexture(A,Q,B=1000){if(this.textureMeshes[A]?.arid===Q)return;if(this.textureMeshes[A]?.mesh){const K=new l6(this.textureMeshes[A].mesh.material).to({opacity:0},1000).easing(G2.Linear.None).start()}const C=this.textureCache[encodeURIComponent(`https://pc-rooms.pointandplace.com/v3/visual-assets/textures/${this.currentRoom==="creative"?"editor":this.currentRoom}/${Q}.png`)],I=new nA(new q1(500,500),new b0({map:C,transparent:!0}));I.material.opacity=0,I.position.z=-249,I.position.y=0.2,this.glScene.add(I),this.textureMeshes={...this.textureMeshes,[A]:{arid:Q,mesh:I}};const E=new l6(I.material).to({opacity:1},B).easing(G2.Linear.None).start()}cycleDecor(A){if(this.decorMeshes[A]?.mesh){const K=new l6(this.decorMeshes[A].mesh.material).to({opacity:0},1000).easing(G2.Linear.None).start()}const Q=D0[this.currentRoom],B=(this.decorMeshes[A]?.idx||0)%Q.decors[A].images.length,C=this.textureCache[encodeURIComponent(Q.decors[A].images[B])],I=new nA(new q1(500,500),new b0({map:C,transparent:!0}));I.material.opacity=0,I.position.x=Q.decors[A].position.x,I.position.y=Q.decors[A].position.y,I.position.z=Q.decors[A].position.z,I.lookAt(0,0,0),this.glScene.add(I),this.decorMeshes={...this.decorMeshes,[A]:{idx:B,mesh:I}};const E=new l6(I.material).to({opacity:1},1000).easing(G2.Linear.None).start()}handleSelectHotspot(A=null){if(this.selectedHotspot)this.selectedHotspot=null,this.showProductOptions=null,this.handleFovChange(D0[this.currentRoom].initialFov);if(A){if(this.selectedHotspot=A,this.handleFovChange(this.minCameraFov),A)this.handleCameraDirectionChange(A.position)}}handleRoomInteraction(){if(!this.hasFirstClick)this.hasFirstClick=!0,this.logEventLegacy("click","embed");if(this.stopHoldingState(),this.startHoldingStateTimer)clearTimeout(this.startHoldingStateTimer);if(!this.showProductInfo)this.startHoldingStateTimer=setTimeout(()=>{this.startHoldingState()},15000)}startHoldingState(){const A=this.localisations();if(this.startHoldingStateTimer)clearTimeout(this.startHoldingStateTimer);this.inHoldingState=!0;const Q=document.createElement("div");Q.dir=this.rtl?"rtl":"ltr",Q.innerHTML=A.translation_holdingExitText,Q.classList.add("bg-white/[90%]","rounded-full","text-[#2b66af]","text-3xl","@2xl:text-5xl","px-14","py-6","z-10","pointer-events-none","transition-all","duration-300","text-center");const B=new N7(Q);B.element.style.opacity="0",B.position.x=0,B.position.y=D0[this.currentRoom].initialCameraDirection?.y??0,B.position.z=-1000,B.lookAt(0,0,0),this.cssScene.add(B),this.holdingMessages=[...this.holdingMessages,B],Object.entries(D0[this.currentRoom].hotspots).map(([C,I])=>{const E=document.createElement("div");E.dir=this.rtl?"rtl":"ltr",E.innerHTML=A.translation_holdingChangeProductText,E.classList.add("bg-white/[90%]","rounded-full","text-[#2b66af]","font-medium","tracking-wide","text-2xl","@2xl:text-3xl","px-7","py-3","z-10","pointer-events-none","transition-all","relative","top-20","after:content['']","after:absolute","after:left-1/2","after:top-full","after:h-0","after:w-0","after:border-white/[90%]","after:border-x-transparent","after:border-x-[20px]","after:border-t-[20px]","after:-translate-x-[20px]","duration-300","text-center");const K=new N7(E);K.element.style.opacity="0",K.position.x=I.position.x,K.position.y=I.position.y,K.position.z=I.position.z,K.lookAt(0,0,0),this.cssScene.add(K),this.holdingMessages=[...this.holdingMessages,K]}),this.showMenu=!1,this.handleSelectHotspot(),this.handleFovChange(D0[this.currentRoom].initialFov),this.handleCameraDirectionChange(D0[this.currentRoom].initialCameraDirection??{x:0,y:0,z:1000},100),this.nextHoldingStateMessage(0)}nextHoldingStateMessage(A){if(this.holdingMessages[A].element.style.opacity="1",this.handleCameraDirectionChange(this.holdingMessages[A].position),A===0)setTimeout(()=>{if(this.inHoldingState)this.handleCameraDirectionChange({x:-300,y:D0[this.currentRoom].initialCameraDirection?.y??0,z:-1000},750)},2000),setTimeout(()=>{if(this.inHoldingState)this.handleCameraDirectionChange({x:300,y:D0[this.currentRoom].initialCameraDirection?.y??0,z:-1000},1500)},2750),setTimeout(()=>{if(this.inHoldingState)this.handleCameraDirectionChange({x:0,y:D0[this.currentRoom].initialCameraDirection?.y??0,z:-1000},750)},4250);this.holdingStateCycleTimer=setTimeout(()=>{this.holdingMessages[A].element.style.opacity="0",A=(A+1)%this.holdingMessages.length,this.nextHoldingStateMessage(A)},A===0?7000:3500)}stopHoldingState(){if(!this.inHoldingState)return;this.inHoldingState=!1,this.holdingMessages.forEach((A)=>{A.element.style.opacity="0"}),this.handleCameraDirectionChange({x:0,y:D0[this.currentRoom].initialCameraDirection?.y??0,z:-1000},200),setTimeout(()=>{if(this.holdingMessages.forEach((A)=>{this.cssScene.remove(A)}),this.holdingMessages=[],this.holdingStateCycleTimer)clearInterval(this.holdingStateCycleTimer)},300)}zoomIn(){if(this.fov>this.minCameraFov)this.fov-=3,this.handleFovChange(this.fov,300)}zoomOut(){if(this.fov<this.maxCameraFov)this.fov+=3,this.handleFovChange(this.fov,300)}handleShowProductOptions(A){const Q=D0[this.currentRoom],B=Q.hotspots[A],E=this.deploymentConfig.find((q)=>parseInt(q.room.id)===Q.legacyRoomId)?.room.areas.find((q)=>parseInt(q.area.id)===B.legacyAreaId)?.area.assets;this.currentProductOptions=E,this.showProductOptions=A;const K=Q.hotspots[this.showProductOptions].legacyAreaId,J=E.map((q)=>q.arid).indexOf(this.textureMeshes[this.showProductOptions]?.arid);this.currentProductInfoIdx=J,this.logEventLegacy("click",`room-${Q.legacyRoomId}-hotspot-${K}-location-${J}-product-info`)}addToBasket(A){if(A.sku)window.dispatchEvent(new CustomEvent("add-to-cart",{detail:{sku:A.sku}}));if(A.basketUrl)try{const Q=new URL(A.basketUrl);if(Q)Q.searchParams.append("ek-a2c","true"),Q.searchParams.append("ek-nexus","dfsah8932h89fh23789fh789"),window.open(Q.toString(),"_blank")}catch(Q){console.error(Q)}}removeFromBasket(A){if(A.sku)window.dispatchEvent(new CustomEvent("remove-from-cart",{detail:{sku:A.sku}}))}handleAddToCartSuccessEvent(A){const Q=A.detail;this.inCart=[...this.inCart,Q.sku]}handleRemoveFromCartSuccessEvent(A){const Q=A.detail;this.inCart=this.inCart.filter((B)=>B!==Q.sku)}async handleChangeProductInfo(A){this.showProductInfo=A,await this.loadSubComponents({sku:A.sku.toString(),url:A.moreInfoUrl})}async loadSubComponents(A){this.loadingSubComponents=!0;let Q=null;if(A.url&&this.EKControlObject._runtimeData.urlMatcherProcessor?.extractionRegex)Q=EB(A.url,this.EKControlObject._runtimeData.urlMatcherProcessor.extractionRegex);const B={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({elements:this.EKProps.interiorElements,identities:[Q?{...A,url:Q}:A]})};try{const C=await fetch(`https://platform-api-nexus.pointandplace.com/page/enrich-multi/${this.EKControlObject._config.deployment}/?locale=${this.EKControlObject._config.language}&ignoreConstraints=true`,B);if(C.status===200){const I=await C.json();let E=0,K=!1;for(let J of I){if(J!==null){let q=0;for(let G of J){const Y=this.EKControlObject.createElement(G.data,Number.parseFloat(`${q}.${E}`));if(Y!==null){if(G.data.blockType==="ModelViewerElement")this.productInfoModelViewer?.replaceChildren(Y),K=!0;if(G.data.blockType==="BadgeElement")this.productInfoBadge?.replaceChildren(Y)}q++}}E++}if(!K)this.productInfoModelViewer?.parentElement?.classList.add("hidden");this.loadingSubComponents=!1}else this.loadingSubComponents=!1,yA("e","PC Rooms could not enrich-multi",C)}catch(C){this.loadingSubComponents=!1,yA("e","pc rooms enrich error",C)}}connectedCallback(){if(super.connectedCallback(),["ar"].includes(this.EKControlObject._config.language))this.rtl=!0;this.loadIntelOneDisplayFont(),document.addEventListener("fullscreenchange",()=>{if(!document.fullscreenElement)this.exitFullscreen();else this.enterFullscreen()}),this.availableRooms=Object.keys(this.EKProps.availableRooms).map((A)=>this.EKProps.availableRooms[A]?A:null).filter(Boolean),this.addEventListener("add-to-cart-success",this.handleAddToCartSuccessEvent),this.addEventListener("remove-from-cart-success",this.handleRemoveFromCartSuccessEvent)}async firstUpdated(A){super.firstUpdated(A);try{if(this.availableRooms.includes(this.EKProps.defaultRoom))await this.loadRoom(this.EKProps.defaultRoom);else if(this.availableRooms.length>0)await this.loadRoom(this.availableRooms[0])}catch(B){console.error(B),this.nullifyComponent(B);return}new ResizeObserver((B)=>{this.handleResize()}).observe(this.ekyContainer)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("add-to-cart-success",this.handleAddToCartSuccessEvent),this.removeEventListener("remove-from-cart-success",this.handleRemoveFromCartSuccessEvent)}renderLoadingScreen(A=!1){const Q=this.localisations();return this.currentRoom?d`
          <div
            @click="${(B)=>B.stopPropagation()}"
            id="loading-screen"
            class="absolute inset-0 flex flex-col items-center justify-center duration-300 ${A?"opacity-1 pointer-events-auto":"opacity-0 pointer-events-none"}"
          >
            <img
              src="${D0[this.currentRoom].loadingImage}"
              class="shrink-0 min-w-full min-h-full object-cover"
            />
            <div
              class="absolute inset-0 flex flex-col items-center justify-center backdrop-blur backdrop-brightness-50"
            >
              <div class="w-20 h-20 @2xl:h-28 @2xl:w-28 absolute top-[14%]">
                <svg
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  x="0px"
                  y="0px"
                  viewBox="0 0 256 256"
                  enable-background="new 0 0 256 256"
                  xml:space="preserve"
                >
                  <g>
                    <path
                      fill="#ffffff"
                      d="M246,118.2
                      c0-24-29.2-44-71.7-52.5
                      C164.3,32.1,146.5,10,125.8,10
                      c-21,0-38.9,22.5-48.8,56.7
                      c-39.9,9-67,28.4-67,51.4
                      c0,17.6,16.1,33.9,44.3,44.6
                      c2,0.8,4.2-0.2,4.9-2.2
                      c0.8-2-0.2-4.2-2.2-4.9
                      c-25-9.6-39.4-23.2-39.4-37.5
                      c0-18.2,23.4-34.4,57.1-42.9
                      C71,91,68.9,108.9,68.9,128
                      c0,66.2,25,118,56.9,118
                      c17.6,0,33.9-16.1,44.6-44.3
                      c0.7-2-0.2-4.2-2.2-4.9
                      c-1.9-0.7-4.2,0.2-4.9,2.2
                      c-9.6,25-23.2,39.4-37.5,39.4
                      c-26.7,0-49.3-50.6-49.3-110.4
                      c0-19.7,2.5-38.4,6.8-54.7
                      c13.8-2.8,28.9-4.5,44.8-4.5
                      c14.1,0,27.6,1.3,40.1,3.5
                      c4,15.1,6.5,32.2,6.9,50.4l-11.6-11.6
                      c-1.5-1.5-3.9-1.5-5.4,0
                      c-1.5,1.5-1.5,3.9,0,5.4l21.6,21.7l21.7-21.7
                      c1.5-1.5,1.5-3.9,0-5.4
                      c-1.5-1.5-3.9-1.5-5.4,0l-13.3,13.3
                      c-0.2-18.2-2.4-35.3-6-50.4
                      c36.3,8.2,61.8,25,61.8,44
                      c0,26-47.7,47.9-105.2,49.2l11.6-11.6
                      c1.5-1.5,1.5-3.9,0-5.4
                      c-1.5-1.5-3.9-1.5-5.4,0L117.8,172l21.6,21.7
                      c0.7,0.7,1.7,1.1,2.7,1.1
                      c1,0,2-0.4,2.7-1.1
                      c1.5-1.5,1.5-3.9,0-5.4L131.6,175
                      C196,174.1,246,149.5,246,118.2z M128,61.2
                      c-15,0-29.3,1.3-42.4,3.7
                      c9-28.4,23.8-47.3,40.1-47.3
                      c16.2,0,30.8,18.6,39.9,46.5
                      C153.9,62.3,141.2,61.2,128,61.2z"
                    />
                  </g>
                </svg>
              </div>
              <div
                class="bg-white/[90%] rounded-full text-[#2b66af] text-center text-2xl @2xl:text-4xl px-6 @2xl:px-12 py-6 z-10 relative max-w-[80%]"
                dir="${this.rtl?"rtl":"ltr"}"
              >
                ${Q.translation_loadingText}
              </div>
            </div>
          </div>
        `:null}renderRoomsMenu(){const A=this.localisations();if(this.actualAvailableRooms.length<2)return null;return d`
      <div>
        ${this.showMenu?d` <div
              @click=${(Q)=>{this.showMenu=!1}}
              class="absolute inset-0 bg-black/50 z-2"
            ></div>`:null}

        <div
          class="absolute z-3 bottom-0 w-full h-full @2xl:h-auto @2xl:left-1/2 @2xl:-translate-x-1/2 transition-all duration-300 @2xl:w-11/12 ${this.showMenu?"translate-y-0 opacity-1":"translate-y-full opacity-0"}"
        >
          <img
            src="https://pc-rooms.pointandplace.com/assets/icons/chevron-down.svg"
            class="hidden @2xl:block w-10 mx-auto cursor-pointer"
            @click=${()=>this.showMenu=!1}
          />
          <div class="@2xl:p-8 bg-white/[90%] @2xl:rounded-t-2xl h-full">
            <div
              class="flex @2xl:gap-4 w-full h-full items-center transition-all available-rooms-buttons-container"
              style="transform:translateX(${this.mobileRoomMenuPosition*-100}%)"
            >
              ${this.actualAvailableRooms.map((Q)=>d`<div
                    class="@2xl:flex-1 min-w-full @2xl:min-w-0 text-center px-10"
                  >
                    <button
                      @click=${()=>this.loadRoom(Q)}
                      class="text-center w-full @2xl:max-w-48 overflow-hidden [&>*:first-child]:border-4 [&>*:first-child]:rounded-lg [&>*:first-child]:transition-all ${this.currentRoom===Q?"[&>*:first-child]:border-[#2c67af]":"[&>*:first-child]:border-transparent [&>*:first-child]:hover:border-[#5ac4f8]"}"
                    >
                      <img
                        src="https://pc-rooms.pointandplace.com/assets/${Q}-menu.jpg"
                        class="mb-5 max-w-full h-40 @2xl:h-28 mx-auto object-cover"
                      />
                      <div
                        class="text-center font-medium first-letter:uppercase text-2xl @2xl:text-base"
                        dir="${this.rtl?"rtl":"ltr"}"
                      >
                        ${A[`translation_room${Q[0].toUpperCase()+Q.slice(1)}`]}
                      </div>
                    </button>
                  </div>`)}
            </div>
            <button
              class="absolute flex items-center justify-center top-5 right-5 h-11 w-11 rounded-full bg-[#2c67af] @2xl:hidden"
              @click=${()=>this.showMenu=!1}
            >
              <img
                src="https://pc-rooms.pointandplace.com/assets/icons/close-white.svg"
                class="w-1/2 h-12"
              />
            </button>
            <button
              class="absolute left-1 top-1/2 -translate-y-10 transition-all ${this.mobileRoomMenuPosition<1?"opacity-0":"opacity-1"} @2xl:hidden"
              @click=${()=>this.mobileRoomMenuPosition=Math.max(this.mobileRoomMenuPosition-1,0)}
            >
              <img
                src="https://pc-rooms.pointandplace.com/assets/icons/chevron-blue.svg"
                class="w-10 h-10 -rotate-90"
              />
            </button>
            <button
              class="absolute right-1 top-1/2 -translate-y-10 transition-all ${this.mobileRoomMenuPosition>this.actualAvailableRooms.length-2?"opacity-0":"opacity-1"} @2xl:hidden"
              @click=${()=>this.mobileRoomMenuPosition=Math.min(this.mobileRoomMenuPosition+1,this.actualAvailableRooms.length-1)}
            >
              <img
                src="https://pc-rooms.pointandplace.com/assets/icons/chevron-blue.svg"
                class="w-10 h-10 rotate-90"
              />
            </button>
            <div
              class="@2xl:hidden absolute bottom-[14%] left-1/2 -translate-x-1/2 flex justify-center gap-5"
            >
              ${this.actualAvailableRooms.map((Q,B)=>d`<button
                    @click=${()=>this.mobileRoomMenuPosition=B}
                    class="w-4 h-4 rounded-full border border-2 transition-all ${this.mobileRoomMenuPosition===B?"bg-[#2c67af] border-[#2c67af]":"border-black"}"
                  ></button>`)}
            </div>
          </div>
        </div>
      </div>

      <div>
        ${this.actualAvailableRooms.length>1?d`<button
              class="cursor-pointer absolute bottom-0 left-1/2 -translate-x-1/2 transition-all duration-300 ${this.showMenu||this.showProductOptions?"translate-y-full opacity-0":"translate-y-0 opacity-1"}"
              @click=${()=>{this.handleSelectHotspot(),this.showMenu=!0}}
            >
              <img
                src="https://pc-rooms.pointandplace.com/assets/icons/chevron-up.svg"
                class="w-10 mx-auto"
              />
              <div
                class="px-12 py-3.5 rounded-t-2xl font-medium text-lg text-white bg-[rgba(43,97,163)]/[0.85] tracking-wide whitespace-nowrap"
                dir="${this.rtl?"rtl":"ltr"}"
              >
                ${A.translation_menuText}
              </div>
            </button>`:null}
      </div>
    `}renderProductOptions(){let A=this.currentProductOptions;if(this.showProductOptions==="laptop"&&this.EKResolvedData["datarequirement-pcrooms"].arid){const Q=A.find((B)=>B.arid===this.EKResolvedData["datarequirement-pcrooms"].arid);if(Q)A=[Q]}return d`
      ${this.showProductOptions?d`<div
            class="absolute inset-0"
            @click="${()=>this.handleSelectHotspot()}"
          ></div>`:null}
      ${A.map((Q,B)=>d`<div
            class="max-w-[90%] @2xl:max-w-none z-2 absolute left-5 bg-white/[90%] h-14 rounded-full flex overflow-hidden shadow transition-transform ${this.showProductOptions?"":"-translate-x-20"}"
            style="bottom:${70*B+20}px"
          >
            <button
              class="h-full"
              @click=${()=>{this.changeTexture(this.showProductOptions,Q.arid);const C=D0[this.currentRoom].legacyRoomId,I=D0[this.currentRoom].hotspots[this.showProductOptions].legacyAreaId;this.logEventLegacy("click",`room-${C}-hotspot-${I}-location-${B}-product-info`),this.currentProductInfoIdx=B}}
            >
              <img
                src="https://pc-rooms.pointandplace.com/v3/visual-assets/thumbnails/${Q.arid}.png"
                class="h-full w-14 max-w-none"
              />
            </button>
            <div
              class="flex items-center gap-2 transition-all ${this.textureMeshes[this.showProductOptions]?.arid===Q.arid&&this.showProductOptions?"max-w-80 mr-3":"max-w-0 mr-0"}"
            >
              <div class="w-[calc(100%-9rem)] @2xl:w-56">
                <div
                  class="font-medium truncate leading-tight"
                  dir="${this.rtl?"rtl":"ltr"}"
                >
                  ${Q.name}
                </div>
                <div class="leading-tight" dir="${this.rtl?"rtl":"ltr"}">
                  ${Q.price}
                </div>
              </div>
              <div class="flex gap-1">
                <button
                  class="w-8 h-8 rounded-full bg-white shadow flex items-center justify-center hover:scale-110 transition-transform"
                  @click="${()=>{this.handleChangeProductInfo(Q);const C=D0[this.currentRoom].legacyRoomId,I=D0[this.currentRoom].hotspots[this.showProductOptions].legacyAreaId;this.logEventLegacy("click",`room-${C}-hotspot-${I}-location-${B}-more-info`)}}"
                >
                  <img
                    src="https://pc-rooms.pointandplace.com/assets/icons/info.svg"
                    class="w-9/12 h-9/12 fill-gradient-to-b from-[#469dea] to-[#1e4b85]"
                  />
                </button>
                <button
                  class="w-8 h-8 rounded-full shadow bg-gradient-to-b from-[#469dea] to-[#1e4b85] flex items-center justify-center hover:scale-110 transition-transform"
                  @click=${()=>{if(Q.sku&&this.inCart.includes(Q.sku))this.removeFromBasket(Q);else{this.addToBasket(Q);const C=D0[this.currentRoom].legacyRoomId,I=D0[this.currentRoom].hotspots[this.showProductOptions].legacyAreaId;this.logEventLegacy("add-to-cart",`room-${C}-hotspot-${I}-location-${B}-a2c`)}}}
                >
                  <img
                    src="https://pc-rooms.pointandplace.com/assets/icons/cart${Q.sku&&this.inCart.includes(Q.sku)?"-remove":""}.svg"
                    class="w-8/12 h-8/12"
                  />
                </button>
              </div>
            </div>
          </div>`)}
    `}renderRoomControls(){return d`<div class="top-5 right-5 absolute flex flex-col gap-10 z-2">
      <button
        class="w-12 h-12 bg-white/[90%] rounded-full active:*:scale-100 hover:*:scale-110 *:transition-transform"
        @click=${()=>this.isFullscreen?this.exitFullscreen():this.enterFullscreen()}
      >
        <img
          src="https://pc-rooms.pointandplace.com/assets/icons/${this.isFullscreen?"exit":"enter"}-fullscreen.svg"
          class="w-3/5 h-3/5 mx-auto"
        />
      </button>
      <div class="flex flex-col">
        <button
          @click=${()=>this.zoomIn()}
          class="w-12 h-12 bg-white/[90%] rounded-t-full active:*:scale-100 hover:*:scale-125 *:transition-transform"
        >
          <img
            src="https://pc-rooms.pointandplace.com/assets/icons/zoom-in.svg"
            class="w-3/5 h-3/5 mx-auto"
          />
        </button>
        <button
          @click=${()=>this.zoomOut()}
          class="w-12 h-12 bg-white/[90%] rounded-b-full active:*:scale-100 hover:*:scale-125 *:transition-transform"
        >
          <img
            src="https://pc-rooms.pointandplace.com/assets/icons/zoom-out.svg"
            class="w-3/5 h-3/5 mx-auto"
          />
        </button>
      </div>
    </div> `}renderProductInfo(){const A=this.localisations();return this.showProductInfo?d`<div
          class="absolute inset-0 backdrop-brightness-[.25] backdrop-blur-sm z-3"
        >
          <button
            class="absolute top-5 right-5 w-12 h-12 rounded-full bg-white shadow flex items-center justify-center hover:scale-110 transition-transform"
            @click="${()=>this.showProductInfo=null}"
          >
            <img
              src="https://pc-rooms.pointandplace.com/assets/icons/close.svg"
              class="w-1/2 h-1/2 fill-gradient-to-b from-[#469dea] to-[#1e4b85]"
            />
          </button>
          <div class="w-full text-white overflow-auto max-h-full">
            <div class="w-3/4 py-10 mx-auto">
              <h1
                class="text-xl @2xl:text-3xl mb-6"
                dir="${this.rtl?"rtl":"ltr"}"
              >
                ${this.showProductInfo.name}
              </h1>
              <div class="flex flex-col @2xl:flex-row gap-4">
                <div class="flex-1">
                  <div
                    id="product-info-model-viewer"
                    class="bg-white rounded flex items-center justify-center aspect-square text-black"
                  >
                    ${this.loadingSubComponents?d`<svg
                          class="animate-spin h-12 w-12"
                          xmlns="http://www.w3.org/2000/svg"
                          fill="none"
                          viewBox="0 0 24 24"
                        >
                          <circle
                            class="opacity-25"
                            cx="12"
                            cy="12"
                            r="10"
                            stroke="#2b61a3"
                            stroke-width="4"
                          ></circle>
                          <path
                            class="opacity-75"
                            fill="#2b61a3"
                            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                          ></path>
                        </svg>`:null}
                  </div>
                </div>
                <div class="flex-1">
                  <div class="text-2xl mb-4" dir="${this.rtl?"rtl":"ltr"}">
                    ${this.showProductInfo.price}
                  </div>
                  <div
                    class="flex gap-3 mb-4 ${this.rtl?"justify-end":"justify-start"}"
                  >
                    <button
                      @click=${()=>{if(this.showProductInfo.sku&&this.inCart.includes(this.showProductInfo.sku))this.removeFromBasket(this.showProductInfo);else{this.addToBasket(this.showProductInfo);const Q=D0[this.currentRoom].legacyRoomId,B=D0[this.currentRoom].hotspots[this.showProductOptions].legacyAreaId;this.logEventLegacy("add-to-cart",`room-${Q}-hotspot-${B}-location-${this.currentProductInfoIdx}-a2c`)}}}
                      class="h-12 rounded-full bg-[#22558f] flex items-center justify-center hover:scale-105 transition-transform"
                    >
                      <div
                        class="px-2 w-24 text-sm"
                        dir="${this.rtl?"rtl":"ltr"}"
                      >
                        ${this.showProductInfo.sku&&this.inCart.includes(this.showProductInfo.sku)?A.translation_removeFromCart:A.translation_addToCart}
                      </div>
                      <div
                        class="w-12 h-12 rounded-full shadow-lg bg-gradient-to-b from-[#469dea] to-[#1e4b85] flex items-center justify-center"
                      >
                        <img
                          src="https://pc-rooms.pointandplace.com/assets/icons/cart${this.showProductInfo.sku&&this.inCart.includes(this.showProductInfo.sku)?"-remove":""}.svg"
                          class="w-8/12 h-8/12"
                        />
                      </div>
                    </button>
                    <button
                      class="h-12 rounded-full bg-white flex items-center justify-center hover:scale-105 transition-transform"
                      @click="${()=>{const Q=this.renderRoot?.querySelector("ek-model-viewer");if(Q)Q.showQRUI=!0}}"
                    >
                      <div
                        class="px-2 w-24 text-sm text-[#22558f] leading-4"
                        dir="${this.rtl?"rtl":"ltr"}"
                      >
                        ${A.translation_viewInYourSpace}
                      </div>
                      <div
                        class="w-12 h-12 rounded-full shadow flex items-center justify-center"
                      >
                        <img
                          src="https://pc-rooms.pointandplace.com/assets/icons/cube.svg"
                          class="w-8/12 h-8/12"
                        />
                      </div>
                    </button>
                  </div>
                  <div class="mb-4" dir="${this.rtl?"rtl":"ltr"}">
                    ${this.showProductInfo.description}
                  </div>
                  <div id="product-info-badge" class="mb-4"></div>
                  <div class="italic text-sm" dir="${this.rtl?"rtl":"ltr"}">
                    ${A.translation_productInfoDisclaimer}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>`:null}localisations(){return this.getLocalisations("PCRoomsLocalisation")}isComponentValidToRender(){const A=this.localisations();if(A===null||!A)return!1;else if(!A.translation_addToCart||!A.translation_holdingChangeProductText||!A.translation_holdingExitText||!A.translation_loadingText||!A.translation_menuText||!A.translation_productInfoDisclaimer||!A.translation_removeFromCart||!A.translation_roomCreative||!A.translation_roomGaming||!A.translation_roomProfessional||!A.translation_roomRemote||!A.translation_roomStudent||!A.translation_viewInYourSpace)return!1;return!0}render(){if(!this.isComponentValidToRender())return this.nullifyComponent("Missing localisations"),null;return d`
      <div
        style="font-size:16px"
        id="eky-container"
        class="@container h-full relative overflow-hidden"
        @click=${()=>this.handleRoomInteraction()}
        dir="ltr"
      >
        ${this.renderRoomControls()} ${this.renderRoomsMenu()}
        ${this.renderProductOptions()}
        ${this.inHoldingState?d`<div class="absolute inset-0"></div>`:null}
        ${this.renderProductInfo()}
        ${this.renderLoadingScreen(this.loadingRoom)}
        <div id="image-cache" class="hidden" />
      </div>
    `}}y([FA({attribute:!1})],w7.prototype,"EKProps",void 0),y([_0("#eky-container")],w7.prototype,"ekyContainer",void 0),y([_0("#loading-screen")],w7.prototype,"loadingScreen",void 0),y([_0("#product-info-model-viewer")],w7.prototype,"productInfoModelViewer",void 0),y([_0("#product-info-badge")],w7.prototype,"productInfoBadge",void 0),y([KA()],w7.prototype,"availableRooms",void 0),y([KA()],w7.prototype,"currentRoom",void 0),y([KA()],w7.prototype,"isFullscreen",void 0),y([KA()],w7.prototype,"fov",void 0),y([KA()],w7.prototype,"showMenu",void 0),y([KA()],w7.prototype,"loadingSubComponents",void 0),y([KA()],w7.prototype,"selectedHotspot",void 0),y([KA()],w7.prototype,"showProductOptions",void 0),y([KA()],w7.prototype,"currentProductOptions",void 0),y([KA()],w7.prototype,"textureMeshes",void 0),y([KA()],w7.prototype,"decorMeshes",void 0),y([KA()],w7.prototype,"loadingRoom",void 0),y([KA()],w7.prototype,"showLoadingScreen",void 0),y([KA()],w7.prototype,"inHoldingState",void 0),y([KA()],w7.prototype,"showProductInfo",void 0),y([KA()],w7.prototype,"mobileRoomMenuPosition",void 0),y([KA()],w7.prototype,"inCart",void 0),y([KA()],w7.prototype,"hasUpdatedAvailableRooms",void 0),y([KA()],w7.prototype,"actualAvailableRooms",void 0),y([KA()],w7.prototype,"rtl",void 0),w7=y([sA("ek-pc-rooms")],w7);class O7 extends G0{CDN_PREFIX="https://cdn.pointandplace.com/services/intel-ul";lastDragged=0;mouseDirection=0;lastScrolled=0;SUPPORTED_GAMES={e7f7e6:{id:"e7f7e6",name:"Counter Strike: GO",ulKey:"CS:GO (uncapped)"},c2c9a:{id:"c2c9a",name:"League of Legends",ulKey:"League of Legends"},a89828:{id:"a89828",name:"Fornite",ulKey:"Fortnite"},a945ed:{id:"a945ed",name:"World of Warcraft",ulKey:"World of Warcraft"},bc175b:{id:"bc175b",name:"Valorant",ulKey:"Valorant"},c77b64:{id:"c77b64",name:"Escape from Tarkov",ulKey:"Escape from Tarkov"},d02ebc:{id:"d02ebc",name:"Elden Ring",ulKey:"Elden Ring"},eb8596:{id:"eb8596",name:"Destiny 2",ulKey:"Destiny 2"},a170ec:{id:"a170ec",name:"Call of Duty: Warzone",ulKey:"Call of Duty: Warzone"},dbf504:{id:"dbf504",name:"GTA V",ulKey:"GTA V"},ee00ce:{id:"ee00ce",name:"Hitman 3",ulKey:"Hitman 3"},e70675:{id:"e70675",name:"Playerunknown's BattleGrounds",ulKey:"Playerunknown's Battlegrounds"}};SUPPORTED_GAMES_ARRAY=Array.from(Object.keys(this.SUPPORTED_GAMES));static get styles(){return Q0`
      :host {
        transition: transform 0.3s ease-in-out;
        display: inline-flex;
      }
      .eky-container {
        container-type: inline-size;
      }
      .smooth {
        transition: opacity 0.3s ease-in-out;
      }
      .opacity-0 {
        opacity: 0 !important;
      }
      .flex {
        display: flex;
      }
      .flex-col {
        flex-direction: column;
      }
      :host {
        display: flex;
        flex-direction: column;
        height: 100%;
        width: 100%;
        position: relative;
      }
      .eky-iframe {
        display: flex;
        width: 100%;
        height: 100%;
        border: none;
      }
      .eky-ar {
        direction: rtl;
        text-align: right;
      }
      .text {
        color: #fff;
      }
    `}renderTailwindStyles(){return d`<style class="eky-tailwind-styles">
      .text-center {
        text-align: center;
      }
      .flex {
        display: flex;
      }
      .flex-col {
        display: flex;
        flex-direction: column;
      }
      .items-center {
        align-items: center;
      }
      .justify-center {
        justify-content: center;
      }
      .flex-1 {
        flex: 1;
      }
      .text-xs {
        font-size: 12px;
      }
      .text-sm {
        font-size: 14px;
      }
      .text-md {
        font-size: 18px;
      }
      .text-lg {
        font-size: 20px;
      }
      .text-xl {
        font-size: 24px;
      }
      .text-2xl {
        font-size: 30px;
      }
      .text-3xl {
        font-size: 36px;
      }
      .text-4xl {
        font-size: 3.4rem;
      }
      .text-5xl {
        font-size: 4.5rem;
      }
      .text-6xl {
        font-size: 5.5rem;
      }
      .p-2 {
        padding: 0.5rem;
      }
      .p-4 {
        padding: 1rem;
      }
      .p-16 {
        padding: 4rem;
      }
      .px-2 {
        padding: 0 0.5rem 0 0.5rem;
      }
      .py-4 {
        padding: 1rem 0 1rem 0;
      }
      .py-8 {
        padding: 2rem 0 2rem 0;
      }
      .py-16 {
        padding: 4rem 0 4rem 0;
      }
      .px-12 {
        padding: 0 3rem 0 3rem;
      }
      .px-16 {
        padding: 0 4rem 0 4rem;
      }
      .my-16 {
        margin: 4rem 0 4rem 0;
      }
      .pt-4 {
        padding-top: 1rem;
      }
      .m-0 {
        margin: 0;
      }
      .mb-2 {
        margin-bottom: 0.5rem;
      }
      .mb-4 {
        margin-bottom: 1rem;
      }
      .ml-1 {
        margin-left: 0.25rem;
      }
      .hidden {
        height: 0px !important;
        overflow: hidden;
      }
      .gap-4 {
        gap: 1rem;
      }
      .relative {
        position: relative !important;
      }
      .w-50 {
        width: 50%;
      }
      .w-full {
        width: 100%;
      }
      .removed {
        display: none;
      }
      .text-bold {
        font-weight: 900;
      }
      .w-screen-50 {
        width: ${Math.floor(window.innerWidth/2)+"px"};
      }
      .pointer {
        cursor: pointer;
      }
      .justify-evenly {
        justify-content: space-evenly;
      }
      .justify-between {
        justify-content: space-between;
      }
      .w-16 {
        width: 4rem;
      }
      .max-h-16 {
        height: 4rem;
      }
      .h-16 {
        height: 30px;
      }
      .min-h-7 {
        min-height: 2rem;
      }
      .font-heavy {
        font-weight: 900;
      }
      .absolute {
        position: absolute;
      }
      .pr-4 {
        padding-right: 1rem;
      }
      .pl-4 {
        padding-left: 1rem;
      }
      .pr-8 {
        padding-right: 2rem;
      }
      .pl-8 {
        padding-left: 2rem;
      }
      .gap-8 {
        gap: 2rem;
      }
      .my-12 {
        margin: 3rem 0 3rem 0;
      }
      .text-right {
        text-align: right;
      }
      .justify-end {
        justify-content: end;
      }
      .gap-2 {
        gap: 0.5rem;
      }
      .flex-reverse {
        flex-direction: row-reverse;
      }
    </style>`}renderTextStyles(){return d`<style class="intel-ul-embed-text-styles">
      @font-face {
        font-family: "IntelOneRegular";
        src: url("https://cdn.pointandplace.com/fonts/intelone-display/intelone-display-regular.ttf");
      }
      @font-face {
        font-family: "IntelOneLight";
        src: url("https://cdn.pointandplace.com/fonts/intelone-display/intelone-display-light.ttf");
      }
      .text {
        font-family: "IntelOneRegular", sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      .text-light {
        font-family: "IntelOneLight", sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
    </style>`}renderCustomStyles(){return d` <style class="intel-ul-embed-custom-styles">
      .eky-container {
        min-width: 400px;
        display: inline-flex;
        container-type: inline-size;
      }
      .container {
        position: relative;
        background: #02021e;
        min-width: 400px;
      }

      .ul-content {
        padding: 0rem !important;
      }

      .ul-first-section {
        padding-right: 1rem;
        padding-left: 1rem;
        padding-top: 1rem;
        background: url("${this.CDN_PREFIX}/images/bg-001.jpg") no-repeat top;
        -webkit-background-size: 100% 100%;
        -moz-background-size: 100% 100%;
        -o-background-size: 100% 100%;
        background-size: 100% 100%;
      }

      .ul-second-section {
        padding-right: 1rem;
        padding-left: 1rem;
        padding-bottom: 1rem;
      }

      .previous-game-button {
        opacity: ${this.SUPPORTED_GAMES_ARRAY.indexOf(this.activeGameId)===0?"0.25":"1"};
        top: -2.2rem;
        left: 15%;
      }

      .previous-game-button-ar {
        left: 77% !important;
      }

      .next-game-button {
        bottom: -2.5rem;
        left: 15%;
        opacity: ${this.SUPPORTED_GAMES_ARRAY.indexOf(this.activeGameId)===this.SUPPORTED_GAMES_ARRAY.length-1?"0.25":"1"};
      }

      .next-game-button-ar {
        left: 77% !important;
      }

      .ul-game-image-container {
        justify-content: center;
        align-items: center;
        width: fit-content;
      }

      .ul-game-image {
        max-width: 92px;
      }

      .ul-game-selector {
        width: fit-content;
      }

      .games-container {
        width: 100%;
        overflow: hidden;
        margin: -1rem;
      }

      .game-selector {
        height: 200px;
        width: 125px;
      }

      .ul-game-selector {
        width: fit-content;
      }

      .ul-games-container {
        display: grid !important;
        grid-template-columns: repeat(1, minmax(0, 1fr));
        padding: 9px !important;
        width: fit-content;
      }

      .ul-game-title {
        justify-content: center;
        font-weight: 500;
        font-size: 20px;
        min-height: 50px !important;
        max-height: 50px !important;
        text-align: center;
      }

      .fps-level-stat {
        font-size: 3.4rem;
      }

      .fps-level-plus {
        font-size: 5.5rem;
      }

      @container (min-width: 767px) {
        .ul-content {
          padding: 0rem !important;
          padding-bottom: 0 !important;
        }

        .ul-first-section {
          padding-right: 1rem;
          padding-top: 3rem;
          padding-left: 1rem;
          display: flex;
          flex-direction: column;
          justify-content: center;
          background: url("${this.CDN_PREFIX}/images/bg-001.jpg") no-repeat top;
          -webkit-background-size: 100% 100%;
          -moz-background-size: 100% 100%;
          -o-background-size: 100% 100%;
          background-size: 100% 100%;
        }

        .ul-second-section {
          min-width: 440px;
          padding-right: 1rem;
          padding-top: 1rem;
        }

        .ul-title {
          font-size: 26px !important;
        }

        .ul-sub-title {
          font-size: 20px !important;
        }

        .ul-cpu-information {
          justify-content: flex-start !important;
          gap: 1rem !important;
        }

        .ul-cpu-information > p {
          font-size: 24px !important;
          margin: 0 !important;
        }

        .ul-cpu-information > img {
          width: 4rem !important;
        }

        .ul-first-section-ar,
        .ul-first-section-ar > h1,
        .ul-first-section-ar > p,
        .ul-first-section-ar > div {
          -moz-transform: scaleX(-1);
          -o-transform: scaleX(-1);
          -webkit-transform: scaleX(-1);
          transform: scaleX(-1);
          filter: FlipH;
          -ms-filter: "FlipH";
        }

        .ul-second-section-ar {
          padding-left: 1rem;
          padding-right: 0rem !important;
        }

        .legal-disclaimer-container {
          padding-right: 3rem;
          padding-left: 3rem;
          padding-bottom: 3rem;
        }

        .ul-game-selector-and-stats-ui {
          max-width: 450px;
          padding: 2rem 0.1rem 2rem 0.1rem !important;
        }

        .previous-game-button {
          left: 23%;
        }

        .previous-game-button-ar {
          left: 70% !important;
        }

        .next-game-button {
          left: 23%;
        }

        .next-game-button-ar {
          left: 70% !important;
        }

        .ul-game-image-container {
          justify-content: center;
          align-items: center;
          max-width: 78px;
        }

        .ul-game-image {
          max-width: 78px;
        }

        .ul-game-selector {
          width: 200px !important;
          height: 227px !important;
          padding-right: 0rem;
        }

        .ul-game-selector-ar {
          padding: 14px !important;
        }

        .ul-games-container {
          display: grid !important;
          grid-template-columns: repeat(2, minmax(0, 1fr));
          padding: 15px !important;
          gap: 1rem !important;
          width: max-content !important;
        }

        .ul-game-title {
          justify-content: center;
          font-weight: 500;
          min-height: 62px !important;
          max-height: 62px !important;
          text-align: center;
        }

        .ul-stats-container {
          padding-right: 6px;
          padding-left: 18px;
        }

        .ul-stats-container > div > span {
          font-size: 60px !important;
        }

        .ul-heading-text-avg {
          font-size: 25px !important;
        }

        .ul-heading-text-avg > span {
          font-size: 25px !important;
        }

        .ul-stats-bottom-text {
          justify-content: flex-start !important;
          font-size: 14px !important;
        }

        .ul-stats-bottom-text > span:nth-child(1) {
          margin-right: 1rem;
        }

        .ul-stats-bottom-text > span:nth-child(2) {
          margin-left: 1rem;
        }

        .ul-stats-bottom-text-ar > span:nth-child(1) {
          margin-right: 0rem;
          margin-left: 0.5rem;
        }

        .ul-stats-bottom-text-ar > span:nth-child(2) {
          margin-right: 0.5rem;
          margin-left: 0rem;
        }

        .fps-level-stat {
          font-size: 3.4rem;
        }

        .fps-level-plus {
          font-size: 5.5rem;
        }
      }

      @container (min-width: 950px) {
        .ul-second-section {
          min-width: 566px;
          padding-right: 3rem;
          padding-top: 3rem;
        }

        .ul-title {
          font-size: 44px !important;
        }

        .ul-sub-title {
          font-size: 25px !important;
        }

        .ul-cpu-information > p {
          font-size: 33px !important;
          margin: 0 !important;
        }

        .ul-cpu-information > img {
          width: 5rem !important;
        }

        .ul-first-section-ar,
        .ul-first-section-ar > h1,
        .ul-first-section-ar > p,
        .ul-first-section-ar > div {
          -moz-transform: scaleX(-1);
          -o-transform: scaleX(-1);
          -webkit-transform: scaleX(-1);
          transform: scaleX(-1);
          filter: FlipH;
          -ms-filter: "FlipH";
        }

        .ul-second-section-ar {
          padding-left: 3rem;
          padding-right: 0rem !important;
        }

        .ul-game-selector-and-stats-ui {
          max-width: none;
          padding: 0;
        }

        .previous-game-button {
          left: 22%;
        }

        .previous-game-button-ar {
          left: 72% !important;
        }

        .next-game-button {
          left: 22%;
        }

        .next-game-button-ar {
          left: 72% !important;
        }

        .ul-game-image-container {
          justify-content: flex-start;
          align-items: stretch;
          width: auto;
        }

        .ul-game-image {
          max-width: none;
        }

        .ul-game-selector {
          width: 200px !important;
          height: 253px !important;
        }

        .ul-games-container {
          display: grid !important;
          grid-template-columns: repeat(2, minmax(0, 1fr));
          padding: 15px !important;
        }

        .ul-game-title {
          justify-content: center;
          font-weight: 500;
          min-height: 62px !important;
          max-height: 62px !important;
          text-align: center;
        }

        .ul-stats-container {
          padding-right: 0px;
          padding-left: 0px;
        }

        .ul-stats-container > div > span {
          font-size: 71px !important;
        }

        .ul-heading-text-avg {
          font-size: 32px !important;
        }

        .ul-heading-text-avg > span {
          font-size: 32px !important;
        }

        .ul-stats-bottom-text {
          justify-content: flex-start !important;
          font-size: 18px !important;
        }

        .ul-stats-bottom-text > span:nth-child(1) {
          margin-right: 1rem;
        }

        .ul-stats-bottom-text > span:nth-child(2) {
          margin-left: 1rem;
        }

        .ul-stats-bottom-text-ar > span:nth-child(1) {
          margin-right: 0rem;
          margin-left: 0.5rem;
        }

        .ul-stats-bottom-text-ar > span:nth-child(2) {
          margin-right: 0.5rem;
          margin-left: 0rem;
        }
      }

      .content > h1 {
        font-weight: 400;
      }

      .brand-logos {
        height: 24px;
      }
      .brand-logos > img {
        height: 100%;
      }

      .game-selector-and-stats-ui {
        background-image: linear-gradient(#000000 25%, 66%, #0822a2);
        padding: 2rem 1rem 2rem 1rem;
      }

      .stats-ui {
        justify-content: space-between;
      }

      .title-text {
        align-items: center;
        height: 100%;
      }

      .text-blue-main {
        color: #00c7fd;
      }

      .game-navigation-button {
      }

      .game-image {
      }
      .active {
        box-shadow: 0 0 0px 10px #0034bb;
      }
      .rotate {
        transform: rotate(180deg);
      }
      .flip {
        -moz-transform: scale(-1, -1);
        -webkit-transform: scale(-1, -1);
        -o-transform: scale(-1, -1);
        -ms-transform: scale(-1, -1);
        transform: scale(-1, -1);
      }
      .transition-all {
        transition-property: all;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        transition-duration: 150ms;
      }
    </style>`}constructor(A,Q,B,C,I,E,K,J,q){super(A,Q,B,C,I,E,K,J,q,!0,"intel-ul");this.activeGameId="e7f7e6";this.activeGameIndex=0;this.activeGame=null;this.generation=0}addIntelFontToHead(){const A=document.createElement("style");A.appendChild(document.createTextNode("        @font-face {          font-family: "+"IntelOneRegular"+";          src: url('"+"https://cdn.pointandplace.com/fonts/intelone-display/intelone-display-regular.ttf"+"') format('truetype');        }      ")),A.appendChild(document.createTextNode("        @font-face {          font-family: "+"IntelOneLight"+";          src: url('"+"https://cdn.pointandplace.com/fonts/intelone-display/intelone-display-light.ttf"+"') format('truetype');        }      "));const Q="eky-intel-font";if(A.id=Q,!document.getElementById(Q))document.head.appendChild(A)}get localisations(){return{en:{"fragment-11th-gen":"MTF0aA==","fragment-12th-gen":"MTJ0aA==","fragment-13th-gen":"MTN0aA==","global-service-name":"SW50ZWzCriBVTOKEog==","heading-avg":"QXZn","heading-fps":"RlBT","heading-intro":"U2VlIHRoZSBpbXBhY3Qgb24geW91ciBmYXZvcml0ZSBnYW1lcy4=","heading-legal":"TGVnYWwgJiBEaXNjbGFpbWVycw==","text-cpu":"MTJ0aCBHZW5lcmF0aW9uIDxjcHU+IHByb2Nlc3Nvcg==","text-intro":"MTJ0aCBHZW5lcmF0aW9uIDxjcHU+IGNhbiBnaXZlIHlvdSBoaWdoZXIgRlBTIGFuZCBzbW9vdGhlciBhbGwgYXJvdW5kIGdhbWVwbGF5LiBUZXN0IHJlc3VsdHMgY29uc2lkZXIgdGhlIGNvbWJpbmVkIHBlcmZvcm1hbmNlIG9mIHRoZSBkZWRpY2F0ZWQgZ3JhcGhpY3MgY2FyZCBhbmQgdGhlIHByb2Nlc3NvciBpbnNpZGUgdGhpcyBkZXZpY2Uu","text-legal-a":"Tm90IGV2ZXJ5IHN5c3RlbSBhbmQgY29uZmlndXJhdGlvbiB3aWxsIGJlIHRlc3RlZCBleHBsaWNpdGx5LiBUaGUgc2NvcmVzIGFuZCBkYXRhIHByZXNlbnRlZCBhcmUgcHJvdmlkZWQgYnkgVUwgYW5kIGFyZSBhIG1lYXN1cmUgb2YgZXhwZWN0ZWQgcGVyZm9ybWFuY2UgYmFzZWQgb24gbXVsdGlwbGUgdGVzdCBydW5zIG9mIGVhY2ggZ2FtZSBhbmQgYW4gYXZlcmFnZSBvZiBlc3RpbWF0ZWQgaW4tZ2FtZSBmcmFtZSByYXRlcy4gVUwgdGVzdHMgYWxsIGhhcmR3YXJlIGluIGNvbnRyb2xsZWQgY29uZGl0aW9ucy4gQmVuY2htYXJrIHJlc3VsdHMgbWF5IHZhcnkgb24gc3lzdGVtcyBidXQgaGF2ZSBhIHByZWNpc2lvbiB3aXRoIGEgbWFyZ2luIG9mIDMgcGVyY2VudC4gQ2hhbmdlcyBpbiBzb2Z0d2FyZSwgc3VjaCBhcyBzeXN0ZW0gdXBkYXRlcywgZHJpdmVyIHVwZGF0ZXMsIG9yIGNoYW5nZXMgdG8gdGhlIGdhbWUgbWF5IGFmZmVjdCBwZXJmb3JtYW5jZS4gSW4gdmVyeSBzcGVjaWFsIGNhc2VzLCB0aGUgZGV2aWNlIGlzIG9mIGEgbmF0dXJlIHRoYXQgZG9lcyBub3QgZGVsaXZlciBjb25zaXN0ZW50IHBlcmZvcm1hbmNlLg==","text-legal-b":"SW50ZWzCriBkb2VzIG5vdCBjb250cm9sIG9yIGF1ZGl0IHRoaXJkLXBhcnR5IGRhdGEuIFlvdSBzaG91bGQgY29uc3VsdCBvdGhlciBzb3VyY2VzIHRvIGV2YWx1YXRlIGFjY3VyYWN5Lg==","text-legal-c":"SW50ZWwsIHRoZSBJbnRlbCBsb2dvLCBhbmQgb3RoZXIgSW50ZWwgbWFya3MgYXJlIHRyYWRlbWFya3Mgb2YgSW50ZWwgQ29ycG9yYXRpb24gb3IgaXRzIHN1YnNpZGlhcmllcy4gT3RoZXIgbmFtZXMgYW5kIGJyYW5kcyBtYXkgYmUgY2xhaW1lZCBhcyB0aGUgcHJvcGVydHkgb2Ygb3RoZXJzLiDCqSBJbnRlbCBDb3Jwb3JhdGlvbi4=","text-quality-high":"SGlnaCBzZXR0aW5ncw==","text-quality-low":"TG93IHNldHRpbmdz","text-quality-maximum ":"TWF4aW11bSBzZXR0aW5ncw==","text-quality-medium":"TWVkaXVtIHNldHRpbmdz","text-quality-ultra":"VWx0cmEgc2V0dGluZ3M="},br_pt:{"fragment-11th-gen":"MTHCqg==","fragment-12th-gen":"MTLCqg==","fragment-13th-gen":"MTPCqg==","global-service-name":"SW50ZWzCriBVTOKEog==","heading-avg":"bcOpZGlh","heading-fps":"RlBT","heading-intro":"VmVqYSBvIGltcGFjdG8gZW0gc2V1cyBqb2dvcyBmYXZvcml0b3Mu","heading-legal":"QXZpc28gTGVnYWwgZSBJc2Vuw6fDo28gZGUgUmVzcG9uc2FiaWxpZGFkZQ==","text-cpu":"UHJvY2Vzc2Fkb3IgPGNwdT4gZGUgMTLCqiBnZXJhw6fDo28=","text-intro":"QSA8Y3B1PiBkZSAxMsKqIGdlcmHDp8OjbyBwb2RlIG9mZXJlY2VyIEZQUyBtYWlzIGFsdGEgZSBqb2dhYmlsaWRhZGUgbWFpcyBzdWF2ZS4gT3MgcmVzdWx0YWRvcyBkbyB0ZXN0ZSBjb25zaWRlcmFtIG8gZGVzZW1wZW5obyBjb21iaW5hZG8gZGEgcGxhY2EgZ3LDoWZpY2EgZGVkaWNhZGEgZSBkbyBwcm9jZXNzYWRvciBkbyBkaXNwb3NpdGl2by4=","text-legal-a":"TmVtIHRvZG9zIG9zIHNpc3RlbWFzIGUgY29uZmlndXJhw6fDtWVzIHNlcsOjbyBleHByZXNzYW1lbnRlIHRlc3RhZG9zLiBBcyBwb250dWHDp8O1ZXMgZSBvcyBkYWRvcyBhcHJlc2VudGFkb3Mgc8OjbyBmb3JuZWNpZG9zIHBlbGEgVUwgZSBzw6NvIHVtYSBtZWRpZGEgZG8gZGVzZW1wZW5obyBlc3BlcmFkbyBjb20gYmFzZSBub3MgdGVzdGVzIGV4ZWN1dGFkb3MgcGFyYSBjYWRhIGpvZ28gZSB1bWEgbcOpZGlhIGRhcyB0YXhhcyBkZSBxdWFkcm9zIGVzdGltYWRhcy4gQSBVTCB0ZXN0YSB0b2RvIG8gaGFyZHdhcmUgZW0gY29uZGnDp8O1ZXMgY29udHJvbGFkYXMuIE9zIHJlc3VsdGFkb3MgZG8gYmVuY2htYXJrIHBvZGVtIHZhcmlhciwgY29tIHVtYSBtYXJnZW0gZGUgMyBwb3IgY2VudG8gZGUgcHJlY2lzw6NvLiBBbHRlcmHDp8O1ZXMgbm8gc29mdHdhcmUsIGNvbW8gYXR1YWxpemHDp8O1ZXMgZG8gc2lzdGVtYSBlIGRvIGRyaXZlciBvdSBhbHRlcmHDp8O1ZXMgbm8gam9nbyBwb2RlbSBhZmV0YXIgbyBkZXNlbXBlbmhvLiBFbSBjYXNvcyBtdWl0byBlc3BlY2lhaXMsIG8gZGlzcG9zaXRpdm8gdGVtIGEgY2FyYWN0ZXLDrXN0aWNhIGRlIG7Do28gb2ZlcmVjZXIgZGVzZW1wZW5obyBjb25zaXN0ZW50ZS4=","text-legal-b":"QSBJbnRlbMKuIG7Do28gY29udHJvbGEgb3UgYXVkaXRhIGRhZG9zIGRlIHRlcmNlaXJvcy4gVm9jw6ogZGV2ZSBjb25zdWx0YXIgb3V0cmFzIGZvbnRlcyBwYXJhIGF2YWxpYXIgYSBwcmVjaXPDo28u","text-legal-c":"SW50ZWwsIG8gbG9nb3RpcG8gZGEgSW50ZWwgZSBvdXRyYXMgbWFyY2FzIGRhIEludGVsIHPDo28gbWFyY2FzIGNvbWVyY2lhaXMgZGEgSW50ZWwgQ29ycG9yYXRpb24gb3UgZGUgc3VhcyBzdWJzaWRpw6FyaWFzLiBPdXRyb3Mgbm9tZXMgZSBtYXJjYXMgcG9kZW0gc2VyIHJlaXZpbmRpY2Fkb3MgY29tbyBwcm9wcmllZGFkZSBkZSB0ZXJjZWlyb3MuIMKpIEludGVsIENvcnBvcmF0aW9uLg==","text-quality-high":"Q29uZmlndXJhw6fDtWVzIGFsdGFz","text-quality-low":"Q29uZmlndXJhw6fDtWVzIGJhaXhhcw==","text-quality-maximum ":"Q29uZmlndXJhw6fDtWVzIG3DoXhpbWFz","text-quality-medium":"Q29uZmlndXJhw6fDtWVzIG3DqWRpYXM=","text-quality-ultra":"Q29uZmlndXJhw6fDtWVzIHVsdHJh"},ar:{"fragment-11th-gen":"2KfZhNit2KfYr9mKINi52LTYsQ==","fragment-12th-gen":"2KfZhNir2KfZhtmKINi52LTYsQ==","fragment-13th-gen":"2KfZhNir2KfZhNirINi52LTYsQ==","global-service-name":"SW50ZWzCriBVTOKEouKAjg==","heading-avg":"2YXYqtmI2LPYtyDYqtit2K/ZitirINin2YTYpdi32KfYsdin2Kog","heading-fps":"KEZQUyk=","heading-intro":"2LTYp9mH2K8g2KfZhNiq2KPYq9mK2LEg2LnZhNmJINij2YTYudin2KjZgyDYp9mE2YXZgdi22YTYqS4=","heading-legal":"2KfZhNmF2LPYp9im2YQg2KfZhNmC2KfZhtmI2YbZitipINmI2KXYrtmE2KfYoSDYp9mE2YXYs9ik2YjZhNmK2Kk=","text-cpu":"2YXYudin2YTYrCA8Y3B1PiDZhdmGINin2YTYrNmK2YQg2KfZhNir2KfZhtmKINi52LTYsQ==","text-intro":"2YrZhdmD2YYg2KPZhiDZitmF2YbYrdmDINin2YTYrNmK2YQg2KfZhNir2KfZhtmKINi52LTYsSA8Y3B1PiDZhdi52K/ZhCDYqtit2K/ZitirINil2LfYp9ix2KfYqiAoRlBTKSDYo9i52YTZiSDZiNij2YPYq9ixINiz2YTYp9iz2Kkg2YHZiiDYrNmF2YrYuSDZhdmG2KfYrdmKINin2YTZhNi52KguINiq2LbYuSDZhtiq2KfYptisINin2YTYp9iu2KrYqNin2LEg2YHZiiDYp9mE2KfYudiq2KjYp9ixINin2YTYo9iv2KfYoSDYp9mE2YXYr9mF2Kwg2YTYqNi32KfZgtipINin2YTYsdiz2YjZhdin2Kog2KfZhNmF2K7Ytdi12Kkg2YjYp9mE2YXYudin2YTYrCDYr9in2K7ZhCDZh9iw2Kcg2KfZhNis2YfYp9iyLg==","text-legal-a":"2YTZhiDZitiq2YUg2KfYrtiq2KjYp9ixINmD2YQg2YbYuNin2YUg2YjYqtmH2YrYptipINio2LTZg9mEINi12LHZititLiDZiNmK2KrZhSDYqtmI2YHZitixINin2YTZhtiq2KfYptisINmI2KfZhNio2YrYp9mG2KfYqiDYp9mE2YXZgtiv2YXYqSDZhdmGIFVMINmI2YfZiiDZhdmC2YrYp9izINmE2YTYo9iv2KfYoSDYp9mE2YXYqtmI2YLYuSDYqNmG2KfYodmLINi52YTZiSDYudmF2YTZitin2Kog2KfZhNiq2LTYutmK2YQg2KfZhNin2K7Yqtio2KfYsdmK2Kkg2KfZhNmF2KrYudiv2K/YqSDZhNmD2YQg2YTYudio2Kkg2YjZhdiq2YjYs9i3INmF2LnYr9mE2KfYqiDYqtit2K/ZitirINin2YTYpdi32KfYsdin2Kog2KfZhNmF2YLYr9ix2Kkg2K/Yp9iu2YQg2KfZhNmE2LnYqNipLiDYrdmK2Ksg2KrYrtiq2KjYsSBVTCDYrNmF2YrYuSDYp9mE2KPYrNmH2LLYqSDZgdmKINi42LHZiNmBINiu2KfYtti52Kkg2YTZhNix2YLYp9io2KkuINmI2YLYryDYqtiu2KrZhNmBINin2YTZhtiq2KfYptisINin2YTZhdi52YrYp9ix2YrYqSDYudmE2Ykg2KfZhNij2YbYuNmF2Kkg2KfZhNmF2K7YqtmE2YHYqSDZiNmE2YPZhtmH2Kcg2KrYqtmF2KrYuSDYqNin2YTYr9mC2Kkg2KjZh9in2YXYtCAzINio2KfZhNmF2KfYptipLiDZg9mF2Kcg2KXZhiDYp9mE2KrYutmK2YrYsdin2Kog2YHZiiDYp9mE2KjYsdin2YXYrNiMINmF2KvZhCDYqtit2K/Zitir2KfYqiDYp9mE2YbYuNin2YUg2KPZiCDYqtit2K/Zitir2KfYqiDYqNix2YbYp9mF2Kwg2KfZhNiq2LTYutmK2YQg2KPZiCDYqti62YrZitix2KfYqiDYp9mE2YTYudio2Kkg2YLYryDYqtik2KvYsSDYudmE2Ykg2KfZhNij2K/Yp9ihLiDZiNmB2Yog2K3Yp9mE2KfYqiDYrtin2LXYqSDYrNiv2YvYp9iMINmK2YPZiNmGINin2YTYrNmH2KfYsiDYsNinINi32KjZiti52Kkg2YTYpyDYqtmC2K/ZhSDYo9iv2KfYodmLINir2KfYqNiq2YvYpy4=","text-legal-b":"2YTYpyDYqtiq2K3Zg9mFINi02LHZg9ipIEludGVswq7igI4g2YHZiiDYqNmK2KfZhtin2Kog2KfZhNi32LHZgSDYp9mE2KvYp9mE2Ksg2YjZhNinINiq2YLZiNmFINio2KrYr9mC2YrZgtmH2KcuINmK2KzYqCDYudmE2YrZgyDYp9mE2LHYrNmI2Lkg2KXZhNmJINmF2LXYp9iv2LEg2KPYrtix2Ykg2YTYqtmC2YrZitmFINin2YTYr9mC2Kku","text-legal-c":"SW50ZWwg2YjYtNi52KfYsSBJbnRlbCDZiNi52YTYp9mF2KfYqiBJbnRlbCDYp9mE2KPYrtix2Ykg2YfZiiDYudmE2KfZhdin2Kog2KrYrNin2LHZitipINmE2LTYsdmD2KkgSW50ZWwgQ29ycG9yYXRpb24g2KPZiCDYp9mE2LTYsdmD2KfYqiDYp9mE2KrYp9io2LnYqSDZhNmH2KcuINmI2YLYryDYqtmD2YjZhiDYp9mE2KPYs9mF2KfYoSDZiNin2YTYudmE2KfZhdin2Kog2KfZhNiq2KzYp9ix2YrYqSDYp9mE2KPYrtix2Ykg2YXZhdmE2YjZg9ipINmE2KLYrtix2YrZhi4gwqkgSW50ZWwgQ29ycG9yYXRpb24u","text-quality-high":"2KfZhNil2LnYr9in2K/Yp9iqINin2YTYudin2YTZitip","text-quality-low":"2KfZhNil2LnYr9in2K/Yp9iqINin2YTZhdmG2K7Zgdi22Kk=","text-quality-maximum ":"2KPZgti12Ykg2KXYudiv2KfYr9in2Ko=","text-quality-medium":"2KfZhNil2LnYr9in2K/Yp9iqINin2YTZhdiq2YjYs9i32Kk=","text-quality-ultra":"2KfZhNil2LnYr9in2K/Yp9iqINin2YTZgdin2KbZgtip"}}}safeFromBase64(A){return decodeURIComponent(atob(A).split("").map(function(Q){return"%"+("00"+Q.charCodeAt(0).toString(16)).slice(-2)}).join(""))}getLocalisedString(A){let Q=null;const B=this.localisations[this.EKControlObject._config?.language||"dummy"];if(B){if(B[A])Q=B[A]}const C=this.localisations.en;if(!Q&&C){if(C[A])Q=C[A]}if(!Q)return null;return this.safeFromBase64(Q)}renderContent(){let A=!0;const Q=this.shadowRoot.querySelector(".eky-container")?.getBoundingClientRect();if(Q&&Q.width>400)A=!1;const B=[this.renderHeading(),this.renderSummary(),this.renderBrandLogos()],C=[this.renderCPUInformation(),this.renderGameSelectorAndStatsUI()],I=[this.renderHeading(),this.renderSummary(),this.renderBrandLogos(),this.renderCPUInformation()],E=[this.renderGameSelectorAndStatsUI(),this.renderLegalDisclaimer()],K=[this.renderHeading(),this.renderSummary(),this.renderBrandLogos(),this.renderCPUInformation(),this.renderGameSelectorAndStatsUI(),this.renderLegalDisclaimer()];if(A)return d`
        <div class="content ul-content flex flex-col text p-4">
          <div class="ul-first-section">${I}</div>
          <div class="ul-second-section">${E}</div>
        </div>
      `;else return d`
        <div class="content ul-content flex flex-row text p-4">
          <div
            class="first-section ul-first-section ul-first-section-${this.EKControlObject._config.language}"
          >
            ${B}
          </div>
          <div
            class="ul-second-section ul-second-section-${this.EKControlObject._config.language}"
          >
            ${C}
          </div>
        </div>
        <div class="legal-disclaimer-container text">
          ${this.renderLegalDisclaimer()}
        </div>
      `}renderHeading(){return d`<h1 class="m-0 text-2xl ul-title">
      ${this.getLocalisedString("heading-intro")}
    </h1>`}renderSummary(){return d`<p class="m-0 text-sm pt-4 ul-sub-title">
      ${this.getLocalisedString("text-intro")?.replace("12",this.generation.toString()).replace("<cpu>",this.EKResolvedData["datarequirement-ul"].cpu.replace(" Processor",""))}
    </p>`}renderBrandLogos(){return d`<div class="brand-logos flex items-center py-4 gap-4">
      <img src="${this.CDN_PREFIX}/images/intel-logo.png" />
      <img src="${this.CDN_PREFIX}/images/ul-logo.png" />
      <img
        class="crossmark-logo"
        src="${this.CDN_PREFIX}/images/3dmark-logo.png"
      />
    </div>`}renderCPUInformation(){return d`<div
      class="cpu-information ul-cpu-information flex items-center gap-2"
    >
      <img class="w-16" src="${this.getUrlForBadge()}" />
      <p class="text-md">
        ${this.getLocalisedString("text-cpu")?.replace("12",this.generation.toString()).replace("<cpu>",this.EKResolvedData["datarequirement-ul"].cpu.replace(" Processor",""))}
      </p>
    </div>`}getUrlForBadge(){try{const A=this.EKResolvedData["datarequirement-ul"].cpu.match(/i(\d)-/)||[],Q=this.EKResolvedData["datarequirement-ul"].cpu.match(/-(\d\d)/)||[];if(A[1]&&Q[1]){const B=parseInt(A[1]);let C=parseInt(Q[1]);if(C<11)C=11;return`https://cdn.pointandplace.com/services/badge/intel/cpu/icon/core-i${B}-${C}th.jpg`}}catch(A){}return"https://cdn.pointandplace.com/services/badges/icons/intel-core-i7.jpg"}renderGameSelectorAndStatsUI(){return d`<div
      class="game-selector-and-stats-ui ul-game-selector-and-stats-ui my-12 flex relative"
    >
      ${this._renderGameSelector()} ${this._renderStatsUI()}
      <span
        class="game-navigation-button previous-game-button previous-game-button previous-game-button-${this.EKControlObject._config.language} p-2 pointer absolute"
        @click=${this.onClickPreviousGame.bind(this)}
        ><img
          style="transform:rotate(270deg);"
          src="${this.CDN_PREFIX}/images/arrow-right-blue.png"
      /></span>
      <span
        class="game-navigation-button next-game-button next-game-button next-game-button-${this.EKControlObject._config.language}  p-2 pointer absolute"
        @click=${this.onClickNextGame.bind(this)}
        ><img
          style="transform:rotate(90deg);"
          src="${this.CDN_PREFIX}/images/arrow-right-blue.png"
      /></span>
    </div>`}onClickPreviousGame(){if(this.activeGameIndex===0)return;this.activeGameIndex-=1,this.setActiveGame(this.SUPPORTED_GAMES_ARRAY[this.activeGameIndex])}onClickNextGame(){if(this.activeGameIndex+1>this.SUPPORTED_GAMES_ARRAY.length-1)return;this.activeGameIndex+=1,this.setActiveGame(this.SUPPORTED_GAMES_ARRAY[this.activeGameIndex])}setActiveGame(A){const Q=this.SUPPORTED_GAMES[A]||null;if(!Q)return null;this.activeGame=Q,this.activeGameId=A,this.activeGameIndex=this.SUPPORTED_GAMES_ARRAY.indexOf(A);const B=this.shadowRoot?.querySelector(`[data-id='${A}']`),C=this.shadowRoot?.querySelector(".games-container");if(C&&B){const E=C.getBoundingClientRect(),J=B.getBoundingClientRect().top-E.top-Math.floor(64)+18,q=C.scrollTop+J;C.scrollTo({top:q,behavior:"smooth"})}}_renderGameElement(A){return d`
      <div class="flex flex-col pointer ul-game-image-container">
        <img
          class="ul-game-image ${this.isActiveGame(A.id)?"active":""}"
          src="${this.CDN_PREFIX}/images/games/dist/${A.id}.jpg"
          data-id=${A.id}
          @click=${this.onClickGameImage.bind(this)}
          @drag=${this.onDragGameSelector.bind(this)}
        />
        <p class="text-md text-bold text-center m-0 removed">${A.name}</p>
      </div>
    `}isActiveGame(A){return this.activeGameId===A}onClickGameImage(A){if(A.target instanceof HTMLElement){const Q=A.target?.dataset.id;this.setActiveGame(Q)}}onDragGameSelector(){if(Date.now()<this.lastDragged+250)return;this.mouseDirection>0?this.onClickNextGame():this.onClickPreviousGame(),this.lastDragged=Date.now()}_renderGameSelector(){const A=[];return this.SUPPORTED_GAMES_ARRAY.map((Q)=>{const B=this.SUPPORTED_GAMES[Q];if(this.readFPSStat("ultra1080p",Q)==="N/A")return;A.push(this._renderGameElement(B))}),d`<div
      class="game-selector ul-game-selector ul-game-selector-${this.EKControlObject._config.language} flex flex-col items-center ${this._swapLeftRightPaddingIfRequired("pr-8")} ${this._swapLeftRightPaddingIfRequired("pl-4")} "
    >
      <div
        class="games-container ul-games-container flex flex-col gap-4"
        @wheel=${this.onScrollGameSelector.bind(this)}
      >
        ${A}
      </div>
    </div>`}_swapLeftRightPaddingIfRequired(A){if(this.EKControlObject._config?.language==="ar"){if(A.includes("l"))return A.replace("l","r");return A.replace("r","l")}return A}onScrollGameSelector(A){if(A.preventDefault(),Date.now()<this.lastScrolled+200)return;A.deltaY>0?this.onClickNextGame():this.onClickPreviousGame(),this.lastScrolled=Date.now()}_renderStatsUI(){const A=this.SUPPORTED_GAMES[this.activeGameId],Q={tenEightyPUltra:"ultra1080p"},B=this.readFPSStat(Q.tenEightyPUltra,A.id);return d`<div class="stats-ui flex flex-1 flex-col ">
      <h3 class="text-xl m-0 title-text flex min-h-7 ul-game-title">
        ${this.activeGame?.name}
      </h3>
      <div class="stat pt-4 flex flex-col ul-stats-container">
        <div class="flex max-h-16">
          <span class="m-0 text-blue-main fps-level-stat flex items-center"
            >${B}</span
          >
          <span class="m-0 text-blue-main fps-level-plus ml-1 flex items-center"
            >+</span
          >
        </div>
        <p class="pt-4  m-0 text-blue-main text-lg ul-heading-text-avg">
          ${this.getLocalisedString("heading-avg")}<br /><span
            class="font-heavy text-xl"
            >${this.getLocalisedString("heading-fps")}</span
          >
        </p>
        <p
          class="m-0 pt-4 text-sm flex justify-between ul-stats-bottom-text ul-stats-bottom-text-${this.EKControlObject._config.language}"
        >
          <span>${this.getLocalisedString("text-quality-medium")}</span>
          |
          <span>1080p</span>
        </p>
      </div>
    </div>`}readFPSStat(A,Q){const B=this._getStatsFromULResponse(Q);if(!B)return"N/A";if(!B[A])return"N/A";return`${B[A]}`.replace(" FPS","").replace("-1","N/A")}_getStatsFromULResponse(A){const Q=this.SUPPORTED_GAMES[A]?this.SUPPORTED_GAMES[A].ulKey:null;if(!Q)return null;const B=this.EKResolvedData["datarequirement-ul"].gameTitles?.find((C)=>C.name===Q);if(!B)return yA("e","game name not known to ul",B),null;return B}renderLegalDisclaimer(){return d`<div class="legal-disclaimer">
      <div
        class="flex items-center pointer justify-end ${this.EKControlObject._config.language==="ar"?"flex-reverse":""}"
        @click=${this.onClickInfoButton.bind(this)}
      >
        <i class="info-icon-inner transition-all relative  h-16"
          >${this.renderDropDownSvgIcon()}</i
        >
        <p class="text-md m-0 text-right">
          ${this.getLocalisedString("heading-legal")}
        </p>
      </div>
      <div class="disclaimer-text hidden text-xs">
        <p>${this.getLocalisedString("text-legal-a")}</p>
        <p>${this.getLocalisedString("text-legal-b")}</p>
        <p>${this.getLocalisedString("text-legal-c")}</p>
      </div>
    </div>`}onClickInfoButton(){this.shadowRoot?.querySelector(".disclaimer-text")?.classList.toggle("hidden"),this.shadowRoot?.querySelector(".info-icon-inner")?.classList.toggle("flip")}renderDropDownSvgIcon(){return d`<svg
      xmlns="http://www.w3.org/2000/svg"
      xml:space="preserve"
      width="30"
      height="30"
      viewBox="0 0 25 25"
      style="fill:white;"
    >
      <path d="m7 10 5 5 5-5z"></path>
    </svg>`}updateSupportedGamesArray(){const A=[];this.SUPPORTED_GAMES_ARRAY.map((Q)=>{if(this.readFPSStat("ultra1080p",Q)!=="N/A")A.push(Q)}),this.SUPPORTED_GAMES_ARRAY=A,this.setActiveGame(this.SUPPORTED_GAMES_ARRAY[0])}async connectedCallback(){if(await super.connectedCallback(),this.addIntelFontToHead(),this.EKResolvedData["datarequirement-ul"].cpu)try{const A=this.EKResolvedData["datarequirement-ul"].cpu.match(/-(\d\d)/);if(A?.length)this.generation=parseInt(A[1])}catch(A){}this.updateSupportedGamesArray()}isComponentValidToRender(){return!0}render(){if(!this.activeGameId)return;const A=[this.renderTailwindStyles(),this.renderTextStyles(),this.renderCustomStyles(),d`<div class="eky-container">
        <div class="container eky-${this.EKControlObject._config.language}">
          ${this.renderContent()}
        </div>
      </div>`];return d`${A}`}}y([FA({attribute:!1})],O7.prototype,"EKResolvedData",void 0),y([FA({attribute:!1})],O7.prototype,"EKProps",void 0),y([KA()],O7.prototype,"activeGameId",void 0),y([KA()],O7.prototype,"activeGameIndex",void 0),y([KA()],O7.prototype,"activeGame",void 0),y([KA()],O7.prototype,"generation",void 0),O7=y([sA("ek-ul")],O7);class L7 extends G0{static styles=Q0`
    .ek-unison-component-wrapper {
      width: 100%;
      height: 100%;
      container-type: inline-size;
    }
    .ek-unison-component-iframe {
      display: none;
    }
    .ek-unison-component-iframe-mobile {
      display: block;
    }
    @container (min-width: 500px) {
      .ek-unison-component-iframe {
        display: block;
      }
      .ek-unison-component-iframe-mobile {
        display: none;
      }
    }
  `;connectedCallback(){super.connectedCallback();const A={en:"en-GB",us:"en-US",id:"id-ID",tw:"tw-TW",ja:"ja-JA",fr:"fr-FR",it:"it-IT",mx:"es-MX",es:"es-ES",de:"de-DE",ar:"ar-SA",pt:"pt-BR",br:"pt-BR",br_pt:"pt-BR",no:"no-NO"};let Q="en-GB";if(this.EKControlObject._config?.language)Q=A[this.EKControlObject._config?.language]||"en-GB";this.iframeDesktopSrc=`https://intel-unison.pointandplace.com?eky-distributor=${this.EKControlObject._config?.deployment}&eky-language=${Q}&eky-location=${btoa(window.location.href)}&eky-environment=prod&eky-session=${this.EKControlObject._config.wotwGetSessionIDFunction()}&eky-user=${this.EKControlObject._config.wotwGetUserIDFunction()}&eky-syndicated-mode=${this.elementIsDirectlyOnPage()?"embed":"popup"}`,this.iframeMobileSrc=`https://intel-unison.pointandplace.com/index-mobile.html?eky-distributor=${this.EKControlObject._config?.deployment}&eky-language=${Q}&eky-location=${btoa(window.location.href)}&eky-environment=prod&eky-session=${this.EKControlObject._config.wotwGetSessionIDFunction()}&eky-user=${this.EKControlObject._config.wotwGetUserIDFunction()}&eky-syndicated-mode=${this.elementIsDirectlyOnPage()?"embed":"popup"}`}constructor(A,Q,B,C,I,E,K,J,q){super(A,Q,B,C,I,E,K,J,q,!0,"intel-unison");this.iframeMobileSrc="";this.iframeDesktopSrc=""}isComponentValidToRender(){return!0}render(){return d`${this.getHostStyleOverride()}
      <style>
        :host {
          width: ${this.EKProps.minWidth};
          display: block;
        }
        .ek-unison-component-iframe {
          min-width: ${this.EKProps.minWidth};
          min-height: ${this.EKProps.minHeight};
          max-width: ${this.EKProps.maxWidth};
          max-height: ${this.EKProps.maxHeight};
        }
        .ek-unison-component-iframe-mobile {
          min-height: 500px;
          width: 100%;
        }
      </style>
      <div class="ek-unison-component-wrapper">
        <iframe
          class="ek-unison-component-iframe"
          width="100%"
          height="100%"
          allow="fullscreen;"
          style="border: none;"
          src="${this.iframeDesktopSrc}"
        ></iframe>
        <iframe
          class="ek-unison-component-iframe-mobile"
          width="100%"
          height="100%"
          allow="fullscreen;"
          style="border: none;"
          src="${this.iframeMobileSrc}"
        ></iframe>
      </div>`}}y([FA({attribute:!1})],L7.prototype,"EKProps",void 0),y([KA()],L7.prototype,"iframeMobileSrc",void 0),y([KA()],L7.prototype,"iframeDesktopSrc",void 0),L7=y([sA("ek-unison")],L7);var IU=(A,Q,B=!0)=>{yA("l","Drawing components",A);const C=[];for(let I of A.components){let E=null;if(I.element)E=JB(I.element.data,Q);if(E===null)continue;if(B===!0)E.registerPlacementAndSelector(I.id,E,I.selector,I.placement);C.push({type:I.element.data.blockType,component:E})}return C},lK={UnisonElement:L7,PCRoomsElement:w7,CrossmarkElement:B0,ModelViewerElement:R7,BadgeElement:a5,AllInOnePageButtonElement:s5,AllInOneContentDirectElement:c5,AllInOneContentElement:d5,AllInOneFeatureButtonElement:l5,AllInOneV2PageButtonElement:i5,AllInOneV2ContentElement:n5,AllInOneV2FeatureButtonElement:o5,ContainerElement:r5,ULElement:O7,Intel12thGenCGIElement:b5,CustomButtonElement:t5,ARModelsElement:u5},JB=(A,Q,B=[])=>{let C=null,I={},E={};if(A.blockType!=="NullElement"&&A.dataResolution&&A.dataResolution.resolvedData)I=A.dataResolution.resolvedData;if(A.blockType!=="NullElement"&&A.identities)E=A.identities;if(A.blockType!=="NullElement"&&A.blockType in lK&&A.id){yA("l","element:",A.blockType);const K=[...B];if(K.push(A.blockType),A.blockType in lK){const J=lK[A.blockType];let q=!1;if(A.dataResolution)q=A.dataResolution.displayIfChildrenHaveUnsatisfiedMandatoryRequirements===!0?!0:!1;C=new J(A.id,A.blockType,A.initialProps,FM(A.children??[],Q,K),I,Q,E,B,q)}else yA("e","Unknown element to render as child 1:",A.blockType,A)}else if(A.blockType==="NullElement")C=null;else yA("e","Unknown element to render as child 2: ",A.blockType,A);return C},FM=(A=[],Q,B)=>{const C=[];for(let I of A){const E=JB(I,Q,B);if(E!==null)C.push(E)}return C};var r4=(A)=>{let Q=[[document.body]];const B=A||[];for(let C of B){let I=[];Q.forEach((E)=>{const K=[];E.forEach((J)=>{const q=Array.from(J.querySelectorAll(C.string));if(q.length>0)if(C.type==="index"&&C.index){const G=C.index.split(",").map((H)=>H.trim()),Y=[];if(G.forEach((H)=>{if(H==="first"&&q.length>0)Y.push(q[0]);else if(H==="last"&&q.length>0)Y.push(q[q.length-1]);else{const Z=parseInt(H,10);if(!isNaN(Z)&&Z<q.length)Y.push(q[Z])}}),Y.length>0)K.push(Y)}else K.push(q)}),I=I.concat(K)}),Q=I}return Q.flat()},EU=(A,Q,B=()=>{return null})=>{const C=A,I=[];for(let E of C){const K=E.getAttribute(Q.extractionAttribute);if(K!==null)if(Q.extractionRegex&&Q.extractionRegex.string){const J=EB(K,Q.extractionRegex);if(J!==null)I.push({val:J,id:B()})}else I.push({val:K,id:B()});else I.push({val:null,id:B()})}return I};var KU=(A,Q)=>{if(A)for(let B of A){const C=r4(B.selectorChain);for(let I of C)if(B.domEventName)I.addEventListener(B.domEventName,()=>{yA("l","Executing a changeHandler",B);const E=()=>{if(B.action==="refetch")Q.cleanup(),Q.initiate(!0,!1);else yA("e","Unknown changeHandler action",B.action)};if(B.delay){if(B.action==="refetch")Q.cleanup();setTimeout(E,B.delay)}else E()})}};var JU=(A,Q)=>{const B=A._config.identifiers;let C="";Object.keys(B).forEach((K)=>{C=`${C}&id_${K}=${B[K]}`});const I=encodeURIComponent($7(window.location.href));return`https://platform-api-nexus.pointandplace.com/page/${Q}/${A._config.deployment}/?layout=${I}&locale=${A._config.language}${C}`},qU=async(A)=>{const Q=JU(A,"single"),B=await fetch(Q),C=await B.json();return{statusCode:B.status,data:C}},GU=async(A,Q)=>{const B=JU(A,"enrichment"),C={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)},I=await fetch(B,C),E=await I.json();return{statusCode:I.status,data:E}};var YU=(A)=>{const Q={_count:0,getReturnID:()=>{return Q._count=Q._count+1,Q._count}},B=[];if(A)for(let C of A){const I=WM(C,Q);B.push({id:C.id,lookups:I})}return B},WM=(A,Q)=>{const B=r4(A.extractionSelectorChain);return EU(B,A.extractionSelectorChainProcessor,Q.getReturnID)};var qB=(A,Q)=>{if(A.blockType!=="NullElement"&&"children"in A&&A.children){const B=[];for(let C of A.children){const I=qB(C,Q);B.push(I)}A.children=B}return{...A,id:`${A.id}:${Q}`}},HU=(A,Q,B)=>{for(let C of Q){const I=A.filter((E)=>{return E.id===C.id});if(I.length===1){const E=I[0],K=r4(C.selectorChain);if(K.length===E.lookups.length)for(let J=0;J<K.length;J++){const q=E.lookups[J],G=C.lookups.filter((Y)=>{return Y.id===q.id});if(G.length===1){const Y=G[0];if(Y.element){const H=qB(Y.element.data[0],q.id),Z=B.createElement(H);if(Z!==null)Z.registerPlacementAndSelector(H.id,Z,K[J],C.placement);else yA("l","Could not make element in enricher",H)}}}else yA("e","Selector shape missmatch")}else yA("e","API content missmatch")}};var ZU=(A,Q)=>{const B=YU(A);(async()=>{try{const I=await GU(Q,B);if(I.statusCode===200){const E=I.data;HU(B,E,Q)}else yA("e","Did not get a 200 status code for enrichment",I)}catch(I){yA("e","Problem with enrichment network request",I)}})()};var XU=(A,Q)=>{if(Q[A.EKID]=A,A.EKChildren)for(let B of A.EKChildren)XU(B,Q)},UM=(A)=>{const Q=document.querySelector(A);if(Q)return Q.offsetParent!==null;return!1},FU=(A,Q,B)=>{for(let C of A){const I=r4(C.selectorChain);for(let E of I)if(C.domEventName){E.addEventListener(C.domEventName,()=>{if(C.identifier==="add-to-cart"){const J={};for(let q in Q._registeredElements){const G=Q._registeredElements[q];XU(G,J)}for(let q in J)if(J[q].isWOTWEnabled()){if(J[q].EKBlockType==="AllInOnePageButtonElement")J[q].logEventLegacy("add-to-cart","button","all-in-one","meta"),J[q].logEventLegacy("add-to-cart","button","ar-models");else J[q].logEventLegacy("add-to-cart",J[q].elementIsDirectlyOnPage()?"embed":"button");if(J[q].EKBlockType==="ModelViewerElement"&&J[q].breadcrumbs.length>0){if(J[q].logEventLegacy("add-to-cart",J[q].elementIsDirectlyOnPage()?"embed":"button","3dfw"),J[q]._hasHotspots)J[q].logEventLegacy("add-to-cart",J[q].elementIsDirectlyOnPage()?"embed":"button","3d-hotspot")}}Q._wotwInterfaceNexus?.triggerAddToCart({productID:B===null?"unknown":B})}});const K=new URL(window.location.href).searchParams.get("ek-a2c")==="true";if(C.identifier==="add-to-cart"&&K){if(UM("#colorbox")&&["a2f96ae5-ae8f-4d07-8720-5ef45eeb05be","1fbead6c-96f1-4597-b490-52962dcdb8af"].includes(Q._config.deployment))return;E.click()}}}};var WU=async(A,Q,B=!1)=>{if(A._config.autoInit===!1&&B===!0)return[];A._wotwInterfaceNexus.triggerEventJSDeployed();try{yA("l","Doing first network request");const C=await qU(A);if(C.statusCode===200&&C.data&&C.data.success&&C.data.success===!0){if(C.data.commonData.urlMatcher)A._runtimeData.urlMatcher=C.data.commonData.urlMatcher;if(C.data.commonData.urlMatcherProcessor)A._runtimeData.urlMatcherProcessor=C.data.commonData.urlMatcherProcessor;if(C.data.enrichers&&C.data.enrichers.length>0)ZU(C.data.enrichers,A);if(KU(C.data.changeHandlers,A),A._wotwInterfaceNexus.triggerEventPageView({match:"true"}),A._config.wotwEnabled===!0&&C.data.wotw&&C.data.wotw.listeners&&C.data.wotw.listeners.length>0)FU(C.data.wotw.listeners,A,C.data.commonData.productID);A._breakpoints=C.data.commonData.breakpoints,xq(A);const I=IU(C.data,A,Q);return A._wotwInterfaceNexus.processQueue(),I}else yA("l","Did not get a 200 status code for initial",C),A._wotwInterfaceNexus.triggerEventPageView({match:"false"}),A._logEventLegacy({service:"coverage",type:"miss",detail:"",arid:null})}catch(C){yA("e","Problem with initial network request",C)}return[]};var UU=(A)=>{const Q=document.getElementById(A),B={};let C=null,I=null,E=null,K=null;if(Q){for(let J of Q.attributes)if(J.name.startsWith("data-ek-id")){const q=J.name.slice("data-ek-id-".length);B[q]=J.value}if(C=Q.getAttribute("data-ek-language"),!C||C.length===0)throw new Error("No language");if(I=Q.getAttribute("data-ek-deployment"),!I||I.length===0)throw new Error("No deployment");E=Q.getAttribute("data-ek-auto-init")!=="false"?!0:!1,K=Q.getAttribute("data-ek-wotw-enabled")!=="false"?!0:!1}else throw new Error("No script tag");return{identifiers:B,config:{deployment:I,language:C,autoInit:E,wotwEnabled:K}}};var GB,DM=new Uint8Array(16);function sK(){if(!GB){if(GB=typeof crypto!=="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!GB)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")}return GB(DM)}function DU(A,Q=0){return F1[A[Q+0]]+F1[A[Q+1]]+F1[A[Q+2]]+F1[A[Q+3]]+"-"+F1[A[Q+4]]+F1[A[Q+5]]+"-"+F1[A[Q+6]]+F1[A[Q+7]]+"-"+F1[A[Q+8]]+F1[A[Q+9]]+"-"+F1[A[Q+10]]+F1[A[Q+11]]+F1[A[Q+12]]+F1[A[Q+13]]+F1[A[Q+14]]+F1[A[Q+15]]}var F1=[];for(let A=0;A<256;++A)F1.push((A+256).toString(16).slice(1));var RM=typeof crypto!=="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),nK={randomUUID:RM};var VM=function(A,Q,B){if(nK.randomUUID&&!Q&&!A)return nK.randomUUID();A=A||{};const C=A.random||(A.rng||sK)();if(C[6]=C[6]&15|64,C[8]=C[8]&63|128,Q){B=B||0;for(let I=0;I<16;++I)Q[B+I]=C[I];return Q}return DU(C)},YB=VM;var NM=(A)=>{let Q=localStorage.getItem(A);if(Q===null)Q=YB(),localStorage.setItem(A,Q);return Q},wM=(A)=>{const Q=sessionStorage.getItem(A);if(Q){const{id:I,expiry:E}=JSON.parse(Q);if(new Date(E)>new Date)return I}const B=YB(),C=new Date((new Date()).getTime()+3600000);return sessionStorage.setItem(A,JSON.stringify({id:B,expiry:C.toISOString()})),B},RU=()=>{return()=>{return NM("__EK__WOTW__USER__ID__")}},VU=()=>{return()=>{return wM("__EK__WOTW__SESSION__ID__")}};var OM=()=>{const A=UU("_EK_NEXUS_SCRIPT_"),Q={};if(Q.identifiers=A.identifiers,A.config.language!==null)Q.language=A.config.language;if(A.config.deployment!==null)Q.deployment=A.config.deployment;if(A.config.autoInit!==null)Q.autoInit=A.config.autoInit;else Q.autoInit=!0;if(A.config.wotwEnabled!==null)Q.wotwEnabled=A.config.wotwEnabled;else Q.wotwEnabled=!0;return Q.wotwGetUserIDFunction=RU(),Q.wotwGetSessionIDFunction=VU(),Q},NU=(A={})=>{const B={...OM(),...A};if(!B.identifiers||Object.keys(B.identifiers).length===0)return yA("l","No identifiers specified, library not initiated"),null;if(!B.deployment||!B.language)return yA("l","No language or deployment specified, library not initiated"),null;const C=new IntersectionObserver((J,q)=>{J.forEach((G)=>{if(G.isIntersecting){const Y=G.target;if(typeof Y.triggerWOTWVisibility==="function")Y.triggerWOTWVisibility()}})},{root:null,rootMargin:"0px",threshold:0.4}),I=new UB("prod",5000),E=new DB(B.deployment,B.wotwGetUserIDFunction,B.wotwGetSessionIDFunction);if(B.wotwEnabled===!0)E.enable();const K={_runtimeData:{},_registeredElements:{},_currentBreakpoint:"default",_breakpoints:{default:"(min-width: 0px)",lg:"(min-width: 1024px)",md:"(min-width: 768px)",sm:"(min-width: 640px)",xl:"(min-width: 1280px)",xxl:"(min-width: 1536px)"},_breakpointSubscription:null,_config:{autoInit:B.autoInit,deployment:B.deployment,language:B.language,wotwEnabled:B.wotwEnabled,identifiers:B.identifiers,wotwGetUserIDFunction:B.wotwGetUserIDFunction,wotwGetSessionIDFunction:B.wotwGetSessionIDFunction},_wotwInterfaceNexus:E,_getWebComponent:(J)=>{return JB(J,K)},_registerWebComponent:(J,q)=>{if(K._registeredElements[J])yA("e","Somehow re-registering element",J,q);K._registeredElements[J]=q,C.observe(K._registeredElements[J])},_deRegisterWebComponent:(J)=>{if(!K._registeredElements[J])yA("e","Somehow we could not find element",J);else C.unobserve(K._registeredElements[J]),delete K._registeredElements[J]},_logEventLegacy:(J)=>{const q=K._config.wotwGetUserIDFunction();if(q!==null&&K._config.wotwEnabled===!0){const G=K._config.wotwGetSessionIDFunction(),Y={distributor:K._config.deployment,language:K._config.language,location:window.location.href,ts:(new Date()).toISOString().replace("T"," ").replace("Z",""),user:q,referrer:document.referrer,session:G,...J};I.sendEvent(Y)}},cleanup:()=>{uB(K);for(let J in K._registeredElements)K._registeredElements[J].remove()},initiate:async(J=!0,q=!1)=>{return await WU(K,J,q)},createElement:(J,q=null)=>{let G=J;if(q!==null)G=qB(J,q);return K._getWebComponent(G)}};return K};try{if(window.__EK_LIBRARY__===void 0)try{const A=NU();if(A!==null){window.__EK_LIBRARY__=A;try{A.initiate(!0,!0)}catch(Q){yA("e","Could not initiate library",Q)}}else yA("e","Could not initiate library, invalid config")}catch(A){yA("e","Config from script tag problem",A)}else yA("e","Duplicate library init call")}catch(A){yA("e","Fatal global error catch",A)}
}catch(_topLevelEKError){}})();